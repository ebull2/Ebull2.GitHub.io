(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"./client/blocks/google-my-business-stats-nudge/actions.js":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var n=s("./client/state/preferences/selectors.js"),i=s("./client/state/ui/selectors.js"),o=s("./client/state/preferences/actions.js");const r=()=>(e,t)=>{const s=Object(i.e)(t()),r=Object(n.b)(t(),"google-my-business-dismissible-nudge")||{};return e(Object(o.b)("google-my-business-dismissible-nudge",Object.assign({},r,{[s]:[...r[s]||[],{dismissedAt:Date.now(),type:"dismiss"}]})))}},"./client/blocks/stats-navigation/index.js":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/react/index.js"),r=s.n(o),a=s("./node_modules/prop-types/index.js"),c=s.n(a),l=s("./node_modules/react-redux/es/index.js"),d=s("./client/components/section-nav/index.jsx"),p=s("./client/components/section-nav/item.jsx"),u=s("./client/components/section-nav/tabs.jsx"),h=s("./client/blocks/stats-navigation/intervals.js"),m=s("./packages/i18n-calypso/dist/esm/index.js"),b=s("./node_modules/lodash/lodash.js"),f=s("./client/components/button/index.jsx"),g=s("./client/components/count/index.jsx"),j=s("./client/components/data/query-site-stats/index.jsx"),_=s("./client/state/ui/selectors.js"),y=s("./client/state/sites/selectors.js"),x=s("./client/state/stats/lists/selectors.js");var v=Object(l.b)(e=>{const t=Object(_.d)(e),s=Object(b.get)(t,"ID"),n=Object(x.c)(e,s,"stats"),i=Object(b.get)(t,"subscribers_count");return{slug:Object(y.v)(e,s),followers:Object(b.get)(n,"followersBlog",i),siteId:s}})(Object(m.localize)(class extends o.Component{render(){const e=this.props,t=e.slug,s=e.followers,n=e.translate,i=e.siteId;return r.a.createElement("div",{className:"followers-count"},i&&r.a.createElement(j.a,{statType:"stats",siteId:i}),Object(b.isNumber)(s)&&r.a.createElement(f.a,{borderless:!0,href:"/people/followers/"+t,title:n("Total of WordPress and Email Followers")},n("Followers")," ",r.a.createElement(g.a,{count:s})))}})),w=s("./client/state/selectors/is-google-my-business-location-connected.js");function E(e,t){return Object(y.J)(e,t)&&Object(b.get)(e,["sites","items",t,"options","woocommerce_is_active"],null)}var O=s("./client/blocks/stats-navigation/constants.js"),I=s("./client/config/index.js");class S extends o.Component{constructor(){super(...arguments),i()(this,"isValidItem",e=>{const t=this.props,s=t.isGoogleMyBusinessLocationConnected,n=t.isStore,i=t.isWordAds,o=t.siteId;switch(e){case"wordads":return i;case"store":return n;case"googleMyBusiness":return void 0!==o&&(I.a.isEnabled("google-my-business")&&s);default:return!0}})}render(){const e=this.props,t=e.slug,s=e.selectedItem,n=e.interval,i=O.b[s],o=i.label,a=i.showIntervals,c=i.path,l=t?"/".concat(t):"",m="".concat(c,"/{{ interval }}").concat(l);return r.a.createElement("div",{className:"stats-navigation"},r.a.createElement(d.a,{selectedText:o},r.a.createElement(u.a,{label:"Stats",selectedText:o},Object.keys(O.b).filter(this.isValidItem).map(e=>{const t=O.b[e],i=t.showIntervals?"/".concat(n||"day"):"",o="".concat(t.path).concat(i).concat(l),a="stats-navigation__"+e;return r.a.createElement(p.a,{className:a,key:e,path:o,selected:s===e},t.label)})),a&&r.a.createElement(h.a,{selected:n,pathTemplate:m}),r.a.createElement(v,null)),a&&r.a.createElement(h.a,{selected:n,pathTemplate:m,standalone:!0}))}}i()(S,"propTypes",{interval:c.a.oneOf(O.a.map(e=>e.value)),isGoogleMyBusinessLocationConnected:c.a.bool.isRequired,isStore:c.a.bool,isWordAds:c.a.bool,selectedItem:c.a.oneOf(Object.keys(O.b)).isRequired,siteId:c.a.number,slug:c.a.string});t.a=Object(l.b)((e,t)=>{let s=t.siteId;return{isGoogleMyBusinessLocationConnected:Object(w.a)(e,s),isStore:E(e,s),isWordAds:Object(y.r)(e,s,"wordads"),siteId:s}})(S)},"./client/components/data/query-keyring-connections/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/prop-types/index.js"),r=s.n(o),a=s("./node_modules/react/index.js"),c=s("./node_modules/react-redux/es/index.js"),l=s("./client/state/sharing/keyring/selectors.js"),d=s("./client/state/sharing/keyring/actions.js");class p extends a.Component{componentWillMount(){this.props.isRequesting||this.props.requestKeyringConnections(this.props.forceRefresh)}render(){return null}}i()(p,"propTypes",{forceRefresh:r.a.bool,isRequesting:r.a.bool,requestKeyringConnections:r.a.func}),i()(p,"defaultProps",{forceRefresh:!1}),t.a=Object(c.b)(e=>({isRequesting:Object(l.d)(e)}),{requestKeyringConnections:d.c})(p)},"./client/components/data/query-site-keyrings/index.js":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/react/index.js"),r=s("./node_modules/prop-types/index.js"),a=s.n(r),c=s("./node_modules/react-redux/es/index.js"),l=s("./client/state/site-keyrings/selectors.js"),d=s("./client/state/site-keyrings/actions.js");class p extends o.Component{constructor(){super(...arguments),i()(this,"state",{siteId:null})}static getDerivedStateFromProps(e,t){return e.siteId&&t.siteId!==e.siteId?{siteId:e.siteId}:null}shouldComponentUpdate(e){return this.state.siteId!==e.siteId}componentDidMount(){this.requestKeyrings()}componentDidUpdate(){this.requestKeyrings()}requestKeyrings(){const e=this.state.siteId;!this.props.requestingSiteKeyrings&&e&&this.props.requestSiteKeyrings(e)}render(){return null}}i()(p,"propTypes",{siteId:a.a.number,requestingSiteKeyrings:a.a.bool.isRequired,requestSiteKeyrings:a.a.func.isRequired}),t.a=Object(c.b)((e,t)=>{let s=t.siteId;return{requestingSiteKeyrings:Object(l.d)(e,s)}},{requestSiteKeyrings:d.c})(p)},"./client/components/header-cake/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/prop-types/index.js"),i=s.n(n),o=s("./node_modules/react/index.js"),r=s.n(o),a=s("./node_modules/classnames/index.js"),c=s.n(a),l=s("./client/components/card/index.jsx"),d=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),p=s.n(d),u=s("./packages/i18n-calypso/dist/esm/index.js"),h=s("./client/components/gridicon/index.jsx"),m=s("./node_modules/lodash/lodash.js"),b=s("./client/components/button/index.jsx"),f=s("./client/lib/viewport/index.js");s("./client/components/header-cake/style.scss");const g={windowWidth:480,characterLength:8};class j extends o.Component{constructor(){super(...arguments),p()(this,"state",{windowWidth:Object(f.c)()}),p()(this,"handleWindowResize",()=>{this.setState({windowWidth:Object(f.c)()})})}componentDidMount(){this.resizeThrottled=Object(m.throttle)(this.handleWindowResize,100),window.addEventListener("resize",this.resizeThrottled)}componentWillUnmount(){window.removeEventListener("resize",this.resizeThrottled)}hideText(e){return!this.props.alwaysShowActionText&&(this.state.windowWidth<=g.windowWidth&&e.length>=g.characterLength||this.state.windowWidth<=300)}render(){const e=this.props,t=e.href,s=e.icon,n=e.onClick,i=e.spacer,o=e.text,a=e.translate,l=void 0===o?a("Back"):o,d=c()({"header-cake__back":!0,"is-spacer":i,"is-action":!!s});return r.a.createElement(b.a,{compact:!0,borderless:!0,className:d,href:t,onClick:n,disabled:i},r.a.createElement(h.a,{icon:s||"arrow-left",size:18}),!this.hideText(l)&&l)}}p()(j,"propTypes",{onClick:i.a.func,href:i.a.string,text:i.a.string,spacer:i.a.bool,alwaysShowActionText:i.a.bool}),p()(j,"defaultProps",{spacer:!1,disabled:!1,alwaysShowActionText:!1});var _=Object(u.localize)(j);s.d(t,"a",function(){return y});class y extends o.Component{render(){const e=this.props,t=e.backText,s=e.backHref,n=e.actionButton,i=e.actionText,o=e.actionIcon,a=e.actionHref,d=e.actionOnClick,p=e.alwaysShowActionText,u=c()("header-cake",this.props.className,{"is-compact":this.props.isCompact});return r.a.createElement(l.a,{className:u},r.a.createElement(_,{text:t,href:s,onClick:this.props.onClick}),r.a.createElement("div",{className:"header-cake__title",role:"presentation",onClick:this.props.onTitleClick},this.props.children),n||r.a.createElement(_,{text:i||t,href:a||s,onClick:d,icon:o,alwaysShowActionText:p,spacer:!d}))}}y.displayName="HeaderCake",y.propTypes={onClick:i.a.func,onTitleClick:i.a.func,backText:i.a.string,backHref:i.a.string,actionButton:i.a.element,actionText:i.a.string,actionHref:i.a.string,actionIcon:i.a.string,actionOnClick:i.a.func,alwaysShowActionText:i.a.bool},y.defaultProps={isCompact:!1,alwaysShowActionText:!1}},"./client/components/header-cake/style.scss":function(e,t,s){},"./client/components/section-header/index.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return h});var n=s("./node_modules/@babel/runtime/helpers/extends.js"),i=s.n(n),o=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),r=s.n(o),a=s("./node_modules/react/index.js"),c=s.n(a),l=s("./node_modules/classnames/index.js"),d=s.n(l),p=s("./client/components/card/compact.jsx"),u=s("./client/components/count/index.jsx");s("./client/components/section-header/style.scss");class h extends a.PureComponent{render(){const e="number"==typeof this.props.count,t=!(this.props.label||e||this.props.children),s=d()(this.props.className,"section-header",{"is-empty":t,"is-placeholder":this.props.isPlaceholder}),n={id:this.props.id};return c.a.createElement(p.a,i()({className:s,href:this.props.href},n),c.a.createElement("div",{className:"section-header__label"},c.a.createElement("span",{className:"section-header__label-text"},this.props.label),e&&c.a.createElement(u.a,{count:this.props.count})),c.a.createElement("div",{className:"section-header__actions"},this.props.children))}}r()(h,"defaultProps",{label:"",href:null,isPlaceholder:!1})},"./client/components/section-header/style.scss":function(e,t,s){},"./client/components/section-nav/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/react/index.js"),r=s.n(o),a=s("./node_modules/prop-types/index.js"),c=s.n(a),l=s("./node_modules/classnames/index.js"),d=s.n(l),p=s("./node_modules/lodash/lodash.js"),u=s("./client/components/gridicon/index.jsx"),h=s("./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx"),m=s("./client/components/section-nav/tabs.jsx"),b=s("./client/components/section-nav/item.jsx"),f=s("./client/components/search/index.jsx");class g extends o.Component{constructor(){var e;super(...arguments),e=this,i()(this,"state",{mobileOpen:!1}),i()(this,"renderDropdown",()=>this.props.allowDropdown?r.a.createElement("div",{className:"section-nav__mobile-header",onClick:this.toggleMobileOpenState},r.a.createElement("span",{className:"section-nav__mobile-header-text"},this.props.selectedText),r.a.createElement(u.a,{icon:"chevron-down",size:18})):r.a.createElement("div",null)),i()(this,"getChildren",()=>r.a.Children.map(this.props.children,function(e){const t={hasSiblingControls:this.hasSiblingControls,closeSectionNavMobilePanel:this.closeMobilePanel};return e?(e.type!==m.a||e.props.selectedText||"string"!=typeof this.props.selectedText||(t.selectedText=this.props.selectedText),e.type===m.a&&this.props.selectedCount&&(t.selectedCount=this.props.selectedCount),e.type===f.a&&(e.props.pinned&&(this.hasPinnedSearch=!0),t.onSearch=this.generateOnSearch(e.props.onSearch)),r.a.cloneElement(e,t)):null}.bind(this))),i()(this,"closeMobilePanel",()=>{window.innerWidth<480&&this.state.mobileOpen&&this.setState({mobileOpen:!1})}),i()(this,"toggleMobileOpenState",()=>{const e=!this.state.mobileOpen;this.setState({mobileOpen:e}),e&&this.props.onMobileNavPanelOpen()}),i()(this,"generateOnSearch",t=>(function(){t(...arguments),e.closeMobilePanel()})),i()(this,"checkForSiblingControls",e=>{this.hasSiblingControls=!1;const t=[f.a,h.a];r.a.Children.forEach(e,function(e,s){s&&e&&!Object(p.includes)(t,e.type)&&(this.hasSiblingControls=!0)}.bind(this))})}componentWillMount(){this.checkForSiblingControls(this.props.children)}componentWillReceiveProps(e){this.checkForSiblingControls(e.children),this.hasSiblingControls||this.closeMobilePanel()}render(){const e=this.getChildren();let t;return e?(t=d()({"section-nav":!0,"is-open":this.state.mobileOpen,"has-pinned-items":this.hasPinnedSearch||this.props.hasPinnedItems},this.props.className),r.a.createElement("div",{className:t},this.renderDropdown(),r.a.createElement("div",{className:"section-nav__panel"},e))):(t=d()({"section-nav":!0,"is-empty":!0},this.props.className),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"section-nav__panel"},r.a.createElement(b.a,null))))}}i()(g,"propTypes",{selectedText:c.a.node,selectedCount:c.a.number,hasPinnedItems:c.a.bool,onMobileNavPanelOpen:c.a.func,className:c.a.string,allowDropdown:c.a.bool}),i()(g,"defaultProps",{onMobileNavPanelOpen:()=>{},allowDropdown:!0}),t.a=g},"./client/components/section-nav/item.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/react/index.js"),r=s.n(o),a=s("./node_modules/prop-types/index.js"),c=s.n(a),l=s("./node_modules/classnames/index.js"),d=s.n(l),p=s("./client/components/gridicon/index.jsx"),u=s("./client/components/count/index.jsx"),h=s("./client/sections-helper.js");class m extends o.PureComponent{constructor(){super(...arguments),i()(this,"_preloaded",!1),i()(this,"preload",()=>{!this._preloaded&&this.props.preloadSectionName&&(this._preloaded=!0,Object(h.c)(this.props.preloadSectionName))})}render(){const e=this.props.itemType?this.props.itemType:"tab",t={"is-selected":this.props.selected,"is-external":this.props.isExternalLink};t["section-nav-"+e]=!0;const s=d()(this.props.className,t);let n,i;return this.props.isExternalLink&&(n="_blank"),this.props.disabled||(i=this.props.onClick),r.a.createElement("li",{className:s},r.a.createElement("a",{href:this.props.path,target:n,className:"section-nav-"+e+"__link",onClick:i,onMouseEnter:this.preload,tabIndex:this.props.tabIndex||0,"aria-selected":this.props.selected,disabled:this.props.disabled,role:"menuitem",rel:this.props.isExternalLink?"external":null},r.a.createElement("span",{className:"section-nav-"+e+"__text"},this.props.children,"number"==typeof this.props.count&&r.a.createElement(u.a,{count:this.props.count,compact:this.props.compactCount})),this.props.isExternalLink?r.a.createElement(p.a,{icon:"external",size:18}):null))}}i()(m,"propTypes",{itemType:c.a.string,path:c.a.string,selected:c.a.bool,tabIndex:c.a.number,onClick:c.a.func,isExternalLink:c.a.bool,disabled:c.a.bool,count:c.a.oneOfType([c.a.number,c.a.bool]),compactCount:c.a.bool,className:c.a.string,preloadSectionName:c.a.string}),t.a=m},"./client/components/section-nav/tabs.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/extends.js"),i=s.n(n),o=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),r=s.n(o),a=s("./node_modules/react/index.js"),c=s.n(a),l=s("./node_modules/react-dom/index.js"),d=s.n(l),p=s("./node_modules/prop-types/index.js"),u=s.n(p),h=s("./node_modules/classnames/index.js"),m=s.n(h),b=s("./node_modules/lodash/lodash.js"),f=s("./client/components/select-dropdown/item.jsx"),g=s("./client/components/select-dropdown/index.jsx"),j=s("./client/lib/viewport/index.js"),_=s("./client/lib/after-layout-flush/index.js"),y=s("./client/components/translatable/proptype.js");const x=480;class v extends a.Component{constructor(){super(...arguments),r()(this,"state",{isDropdown:!1}),r()(this,"getTabWidths",()=>{let e=0;c.a.Children.forEach(this.props.children,function(t,s){if(!t)return;const n=d.a.findDOMNode(this.refs["tab-"+s]).offsetWidth;e+=n}.bind(this)),this.tabsWidth=Math.max(e,this.tabsWidth||0)}),r()(this,"getDropdown",()=>{const e=c.a.Children.map(this.props.children,function(e,t){return e?c.a.createElement(f.a,i()({},e.props,{key:"navTabsDropdown-"+t}),e.props.children):null});return c.a.createElement(g.a,{className:"section-nav-tabs__dropdown",selectedText:this.props.selectedText,selectedCount:this.props.selectedCount},e)}),r()(this,"setDropdown",()=>{let e;if(window.innerWidth>x){if(!this.refs.navGroup)return;e=this.refs.navGroup.offsetWidth,this.getTabWidths(),e<=this.tabsWidth&&!this.state.isDropdown?this.setState({isDropdown:!0}):e>this.tabsWidth&&this.state.isDropdown&&this.setState({isDropdown:!1})}else window.innerWidth<=x&&this.state.isDropdown&&this.setState({isDropdown:!1})}),r()(this,"setDropdownDebounced",Object(b.debounce)(this.setDropdown,300)),r()(this,"setDropdownAfterLayoutFlush",Object(_.a)(this.setDropdown)),r()(this,"keyHandler",e=>{switch(e.keyCode){case 32:case 13:e.preventDefault(),document.activeElement.click()}})}componentDidMount(){this.setDropdownAfterLayoutFlush(),window.addEventListener("resize",this.setDropdownDebounced)}componentDidUpdate(){this.setDropdownAfterLayoutFlush()}componentWillUnmount(){window.removeEventListener("resize",this.setDropdownDebounced),this.setDropdownDebounced.cancel(),this.setDropdownAfterLayoutFlush.cancel()}render(){const e=c.a.Children.map(this.props.children,function(e,t){return e&&c.a.cloneElement(e,{ref:"tab-"+t})}),t=m()({"section-nav-tabs":!0,"is-dropdown":this.state.isDropdown,"is-open":this.state.isDropdownOpen,"has-siblings":this.props.hasSiblingControls}),s=Object(j.c)();return c.a.createElement("div",{className:"section-nav-group",ref:"navGroup"},c.a.createElement("div",{className:t},this.props.label&&c.a.createElement("h6",{className:"section-nav-group__label"},this.props.label),c.a.createElement("ul",{className:"section-nav-tabs__list",role:"menu",onKeyDown:this.keyHandler},e),this.state.isDropdown&&s>x&&this.getDropdown()))}}r()(v,"propTypes",{selectedText:y.a,selectedCount:u.a.number,label:u.a.string,hasSiblingControls:u.a.bool}),r()(v,"defaultProps",{hasSiblingControls:!1}),t.a=v},"./client/components/select-dropdown/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/react-dom/index.js"),r=s.n(o),a=s("./node_modules/prop-types/index.js"),c=s.n(a),l=s("./node_modules/react/index.js"),d=s.n(l),p=s("./node_modules/lodash/lodash.js"),u=s("./node_modules/classnames/index.js"),h=s.n(u),m=s("./client/components/gridicon/index.jsx"),b=s("./client/components/select-dropdown/item.jsx"),f=s("./client/components/select-dropdown/separator.jsx"),g=s("./client/components/select-dropdown/label.jsx"),j=s("./client/components/count/index.jsx"),_=s("./client/components/translatable/proptype.js");class y extends l.Component{constructor(e){super(e),this.navigateItem=this.navigateItem.bind(this),this.toggleDropdown=this.toggleDropdown.bind(this),this.handleOutsideClick=this.handleOutsideClick.bind(this);const t={isOpen:!1};e.options.length&&(t.selected=this.getInitialSelectedItem(e)),this.state=t}componentWillMount(){this.setState({instanceId:++y.instances})}componentWillReceiveProps(e){this.state.isOpen&&this.closeDropdown(),void 0!==this.state.selected&&this.props.initialSelected!==e.initialSelected&&this.setState({selected:e.initialSelected})}componentWillUnmount(){window.removeEventListener("click",this.handleOutsideClick)}componentDidUpdate(e,t){this.state.isOpen?window.addEventListener("click",this.handleOutsideClick):window.removeEventListener("click",this.handleOutsideClick),this.state.isOpen!==t.isOpen&&this.props.onToggle({target:this,open:this.state.isOpen})}getInitialSelectedItem(e){if((e=e||this.props).initialSelected)return e.initialSelected;if(!e.options.length)return;const t=Object(p.find)(e.options,e=>!e.isLabel);return t&&t.value}getSelectedText(){const e=this.props,t=e.options,s=e.selectedText,n=this.state.selected;if(s)return s;const i=n||this.getInitialSelectedItem(this.props);return Object(p.result)(Object(p.find)(t,{value:i}),"label")}getSelectedIcon(){const e=this.props,t=e.options,s=e.selectedIcon,n=this.state.selected;if(s)return s;const i=n||this.getInitialSelectedItem(this.props);return Object(p.result)(Object(p.find)(t,{value:i}),"icon")}dropdownOptions(){let e=0;const t=this;return this.props.children?d.a.Children.map(this.props.children,function(s,n){if(!s)return null;const i=d.a.cloneElement(s,{ref:s.type===b.a?"item-"+e:null,key:"item-"+n,isDropdownOpen:this.state.isOpen,onClick:function(e){t.refs.dropdownContainer.focus(),"function"==typeof s.props.onClick&&s.props.onClick(e)}});return s.type===b.a&&e++,i},this):this.props.options.map(function(t,s){if(!t)return d.a.createElement(f.a,{key:"dropdown-separator-"+this.state.instanceId+"-"+s});if(t.isLabel)return d.a.createElement(g.a,{key:"dropdown-label-"+this.state.instanceId+"-"+s},t.label);const n=d.a.createElement(b.a,{key:"dropdown-item-"+this.state.instanceId+"-"+t.value,ref:"item-"+e,isDropdownOpen:this.state.isOpen,selected:this.state.selected===t.value,onClick:this.onSelectItem(t),path:t.path,icon:t.icon},t.label);return e++,n},this)}render(){const e=h()(this.props.className,{"select-dropdown":!0,"is-compact":this.props.compact,"is-open":this.state.isOpen&&!this.props.disabled,"is-disabled":this.props.disabled,"has-count":"number"==typeof this.props.selectedCount}),t=this.getSelectedText(),s=this.getSelectedIcon();return d.a.createElement("div",{style:this.props.style,className:e},d.a.createElement("div",{ref:"dropdownContainer",className:"select-dropdown__container",onKeyDown:this.navigateItem,tabIndex:this.props.tabIndex||0,"aria-haspopup":"true","aria-owns":"select-submenu-"+this.state.instanceId,"aria-controls":"select-submenu-"+this.state.instanceId,"aria-expanded":this.state.isOpen,"aria-disabled":this.props.disabled,"data-tip-target":this.props.tipTarget,onClick:this.toggleDropdown},d.a.createElement("div",{id:"select-dropdown-"+this.state.instanceId,className:"select-dropdown__header"},d.a.createElement("span",{className:"select-dropdown__header-text"},s&&s.type===m.a?s:null,t),"number"==typeof this.props.selectedCount&&d.a.createElement(j.a,{count:this.props.selectedCount}),d.a.createElement(m.a,{icon:"chevron-down",size:18})),d.a.createElement("ul",{id:"select-submenu-"+this.state.instanceId,className:"select-dropdown__options",role:"menu","aria-labelledby":"select-dropdown-"+this.state.instanceId,"aria-expanded":this.state.isOpen},this.dropdownOptions())))}toggleDropdown(){this.props&&this.props.disabled||this.setState({isOpen:!this.state.isOpen})}openDropdown(){this.props&&this.props.disabled||this.setState({isOpen:!0})}closeDropdown(){this.state.isOpen&&(delete this.focused,this.setState({isOpen:!1}))}onSelectItem(e){return this.selectItem.bind(this,e)}selectItem(e){e&&(this.props.onSelect&&this.props.onSelect(e),this.setState({selected:e.value}),this.refs.dropdownContainer.focus())}navigateItem(e){switch(e.keyCode){case 9:this.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),this.activateItem();break;case 38:e.preventDefault(),this.focusSibling("previous"),this.openDropdown();break;case 40:e.preventDefault(),this.focusSibling("next"),this.openDropdown();break;case 27:e.preventDefault(),this.closeDropdown(),this.refs.dropdownContainer.focus()}}navigateItemByTabKey(e){if(!this.state.isOpen)return;e.preventDefault();const t=e.shiftKey?"previous":"next";this.focusSibling(t)}activateItem(){if(!this.state.isOpen)return this.openDropdown();document.activeElement.click()}focusSibling(e){if(!this.state.isOpen)return;let t,s;this.props.options.length?(t=Object(p.map)(Object(p.filter)(this.props.options,e=>e&&!e.isLabel),"value"),s="number"==typeof this.focused?this.focused:t.indexOf(this.state.selected)):(t=Object(p.filter)(this.props.children,function(e){return e.type===b.a}),s="number"==typeof this.focused?this.focused:Object(p.findIndex)(t,function(e){return e.props.selected}));const n=s+("previous"===e?-1:1);n>=t.length||n<0||(r.a.findDOMNode(this.refs["item-"+n].refs.itemLink).focus(),this.focused=n)}handleOutsideClick(e){r.a.findDOMNode(this.refs.dropdownContainer).contains(e.target)||this.closeDropdown()}}i()(y,"propTypes",{selectedText:_.a,selectedIcon:c.a.element,selectedCount:c.a.number,initialSelected:c.a.string,className:c.a.string,style:c.a.object,onSelect:c.a.func,onToggle:c.a.func,focusSibling:c.a.func,tabIndex:c.a.number,disabled:c.a.bool,options:c.a.arrayOf(c.a.shape({value:c.a.string.isRequired,label:_.a.isRequired,path:c.a.string,icon:c.a.element}))}),i()(y,"defaultProps",{options:[],onSelect:()=>{},onToggle:()=>{},style:{}}),i()(y,"instances",0),t.a=y},"./client/components/select-dropdown/item.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/prop-types/index.js"),r=s.n(o),a=s("./node_modules/react/index.js"),c=s.n(a),l=s("./node_modules/classnames/index.js"),d=s.n(l),p=s("./client/components/gridicon/index.jsx"),u=s("./client/components/count/index.jsx"),h=s("./client/components/translatable/proptype.js");class m extends a.Component{render(){const e=d()(this.props.className,{"select-dropdown__item":!0,"is-selected":this.props.selected,"is-disabled":this.props.disabled,"has-icon":!!this.props.icon});return c.a.createElement("li",{className:"select-dropdown__option"},c.a.createElement("a",{ref:"itemLink",href:this.props.path,className:e,onClick:this.props.disabled?null:this.props.onClick,"data-bold-text":this.props.value||this.props.children,role:"menuitem",tabIndex:this.props.isDropdownOpen?0:"","aria-selected":this.props.selected,"data-e2e-title":this.props.e2eTitle},c.a.createElement("span",{className:"select-dropdown__item-text"},this.props.icon&&this.props.icon.type===p.a?this.props.icon:null,this.props.children),"number"==typeof this.props.count&&c.a.createElement("span",{"data-text":this.props.count,className:"select-dropdown__item-count"},c.a.createElement(u.a,{count:this.props.count,compact:this.props.compactCount}))))}}i()(m,"propTypes",{children:h.a.isRequired,compactCount:r.a.bool,path:r.a.string,isDropdownOpen:r.a.bool,selected:r.a.bool,onClick:r.a.func,count:r.a.number,disabled:r.a.bool,icon:r.a.element}),i()(m,"defaultProps",{isDropdownOpen:!1,selected:!1}),t.a=m},"./client/components/select-dropdown/label.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var n=s("./node_modules/react/index.js"),i=s.n(n);const o=e=>e.stopPropagation();function r(e){return i.a.createElement("li",{onClick:o,className:"select-dropdown__label"},i.a.createElement("label",null,e.children))}},"./client/components/select-dropdown/separator.jsx":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),i=s.n(n);t.a=(()=>i.a.createElement("li",{className:"select-dropdown__separator"}))},"./client/components/tooltip/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),i=s.n(n),o=s("./node_modules/prop-types/index.js"),r=s.n(o),a=s("./node_modules/classnames/index.js"),c=s.n(a),l=s("./client/components/popover/index.jsx"),d=s("./client/lib/viewport/react.js");function p(e){const t=Object(d.a)();if(!e.showOnMobile&&t)return null;const s=c()("popover","tooltip","is-".concat(e.status),"is-".concat(e.position),e.className);return i.a.createElement(l.a,{autoPosition:e.autoPosition,className:s,rootClassName:e.rootClassName,context:e.context,id:e.id,isVisible:e.isVisible,position:e.position,showDelay:e.showDelay},e.children)}p.propTypes={autoPosition:r.a.bool,className:r.a.string,id:r.a.string,isVisible:r.a.bool,position:r.a.string,rootClassName:r.a.string,status:r.a.string,showDelay:r.a.number,showOnMobile:r.a.bool},p.defaultProps={showDelay:100,position:"top",showOnMobile:!1},t.a=p},"./client/lib/after-layout-flush/index.js":function(e,t,s){"use strict";function n(e){let t=void 0,s=void 0;const n="function"==typeof requestAnimationFrame;let i,o;let r=(a=e,function(){if(!n){i=this;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o=t}void 0===s&&(s=setTimeout(()=>{const e=o,t=i;o=void 0,i=void 0,s=void 0,a.apply(t,e)},0))});var a,c;return n&&(c=r,r=function(){i=this;for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];o=s,void 0===t&&(t=requestAnimationFrame(()=>{t=void 0,c()}))}),r.cancel=(()=>{i=void 0,o=void 0,void 0!==t&&(cancelAnimationFrame(t),t=void 0),void 0!==s&&(clearTimeout(s),s=void 0)}),r}s.d(t,"a",function(){return n})},"./client/my-sites/comments/comment-navigation/comment-navigation-tab.jsx":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),i=s.n(n),o=s("./node_modules/classnames/index.js"),r=s.n(o);t.a=(e=>{let t=e.children,s=e.className;return i.a.createElement("div",{className:r()("comment-navigation__tab",s)},t)})},"./client/my-sites/google-my-business/utils.js":function(e,t,s){"use strict";s.d(t,"a",function(){return a}),s.d(t,"b",function(){return c});var n=s("./node_modules/lodash/lodash.js"),i=s("./client/state/selectors/get-google-my-business-locations.js"),o=s("./client/state/selectors/get-google-my-business-stats-nudge-dismiss-count.js"),r=s("./client/state/ui/selectors.js");const a=(e,t)=>{const s=Object(r.e)(t());if(null!==s){const i=Object(o.a)(t(),s);return Object(n.merge)(e,{meta:{analytics:[{payload:{properties:{dismiss_count:i}}}]}})}return e},c=(e,t)=>{const s=Object(r.e)(t());if(null!==s){const o=Object(i.a)(t(),s),r=o.filter(e=>Object(n.get)(e,"meta.state.isVerified",!1)).length;return Object(n.merge)(e,{meta:{analytics:[{payload:{properties:{location_count:o.length,verified_location_count:r}}}]}})}return e}},"./client/state/selectors/get-google-my-business-locations.js":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var n=s("./node_modules/lodash/lodash.js"),i=s("./client/state/site-keyrings/selectors.js"),o=s("./client/state/sharing/selectors.js");function r(e,t){const s=Object(n.last)(Object(i.c)(e,t,"google_my_business"));if(!s)return[];const r=Object(n.filter)(Object(o.a)(e,"google_my_business"),{keyringConnectionId:s.keyring_id});return r.forEach(e=>{e.isConnected=e.ID===s.external_user_id}),r}},"./client/state/selectors/get-google-my-business-stats-nudge-dismiss-count.js":function(e,t,s){"use strict";s.d(t,"a",function(){return i});var n=s("./client/state/preferences/selectors.js");function i(e,t){return((Object(n.b)(e,"google-my-business-dismissible-nudge")||{})[t]||[]).filter(e=>"dismiss"===e.type).length}},"./client/state/selectors/is-google-my-business-location-connected.js":function(e,t,s){"use strict";s.d(t,"a",function(){return o});var n=s("./node_modules/lodash/lodash.js"),i=s("./client/state/sharing/keyring/selectors.js");function o(e,t){const s=Object(n.get)(e,"siteKeyrings.items.".concat(t),[]),o=Object(n.find)(s,e=>"google_my_business"===e.service);return!!o&&(0!==Object(i.c)(e,"google_my_business").filter(e=>e.ID===o.keyring_id).length&&!!o.external_user_id)}},"./client/state/selectors/is-site-google-my-business-eligible.js":function(e,t,s){"use strict";s.d(t,"a",function(){return l});var n=s("./client/lib/create-selector/index.js"),i=s("./client/state/sites/selectors.js"),o=s("./client/lib/plans/index.js"),r=s("./client/lib/plans/constants.js");const a=Object(n.a)((e,t)=>{const s=Object(i.t)(e,t);return Object(o.z)(s,r.X)},(e,t)=>[Object(i.t)(e,t)]),c=Object(n.a)((e,t)=>{const s=Object(i.t)(e,t);return Object(o.B)(s,{group:r.Xb,type:r.Cc})},(e,t)=>[Object(i.t)(e,t)]);function l(e,t){return a(e,t)||c(e,t)}},"./client/state/sharing/keyring/actions.js":function(e,t,s){"use strict";s.d(t,"c",function(){return r}),s.d(t,"a",function(){return a}),s.d(t,"b",function(){return c});var n=s("./node_modules/@babel/runtime/helpers/objectSpread.js"),i=s.n(n),o=s("./client/lib/wp/browser.js");function r(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>(t({type:"KEYRING_CONNECTIONS_REQUEST"}),o.a.undocumented().mekeyringConnections(e).then(e=>{let s=e.connections;t({type:"KEYRING_CONNECTIONS_RECEIVE",connections:s}),t({type:"KEYRING_CONNECTIONS_REQUEST_SUCCESS"})}).catch(e=>t({type:"KEYRING_CONNECTIONS_REQUEST_FAILURE",error:e})))}function a(e){return{type:"KEYRING_CONNECTION_DELETE",connection:e}}function c(e){return t=>o.a.undocumented().deletekeyringConnection(e.ID).then(()=>t(a(e))).catch(s=>{s&&404===s.statusCode&&t(a(e)),t({type:"KEYRING_CONNECTION_DELETE_FAILURE",error:i()({},s,{label:e.label})})})}},"./client/state/sharing/keyring/selectors.js":function(e,t,s){"use strict";s.d(t,"b",function(){return o}),s.d(t,"a",function(){return r}),s.d(t,"c",function(){return a}),s.d(t,"d",function(){return c});var n=s("./node_modules/lodash/lodash.js"),i=s("./client/lib/create-selector/index.js");function o(e){return Object(n.values)(e.sharing.keyring.items)}function r(e,t){return e.sharing.keyring.items[t]||null}const a=Object(i.a)((e,t)=>Object(n.filter)(o(e),{service:t}),e=>[e.sharing.keyring.items]);function c(e){return e.sharing.keyring.isFetching}},"./client/state/sharing/publicize/selectors.js":function(e,t,s){"use strict";s.d(t,"c",function(){return c}),s.d(t,"d",function(){return l}),s.d(t,"a",function(){return d}),s.d(t,"b",function(){return p}),s.d(t,"e",function(){return u}),s.d(t,"f",function(){return h}),s.d(t,"g",function(){return m}),s.d(t,"i",function(){return b}),s.d(t,"h",function(){return f});var n=s("./node_modules/lodash/lodash.js"),i=s("./client/lib/create-selector/index.js"),o=s("./client/state/selectors/can-current-user.js"),r=s("./client/state/current-user/selectors.js"),a=s("./client/state/ui/selectors.js");const c=Object(i.a)((e,t,s)=>Object(n.filter)(e.sharing.publicize.connections,e=>e.site_ID===t&&(e.shared||e.keyring_connection_user_ID===s)),e=>[e.sharing.publicize.connections]);function l(e,t,s,i){return Object(n.filter)(c(e,t,s),{service:i})}function d(e,t,s,i){return Object(n.filter)(l(e,t,s,i),{status:"broken"})}function p(e,t){const s=Object(a.e)(e),i=Object(r.g)(e),c=l(e,s,i,t);return Object(o.b)(e,s,"edit_others_posts")?c:Object(n.filter)(c,{user_ID:i})}function u(e,t){return Object(n.get)(e.sharing.publicize.fetchedConnections,[t],!1)}function h(e,t){return Object(n.get)(e.sharing.publicize.fetchingConnections,[t],!1)}function m(e,t,s){return Object(n.get)(e.sharing.publicize.sharePostStatus,[t,s,"requesting"],!1)}function b(e,t,s){return Object(n.get)(e.sharing.publicize.sharePostStatus,[t,s,"success"],!1)}function f(e,t,s){return!0===Object(n.get)(e.sharing.publicize.sharePostStatus,[t,s,"error"],!1)}},"./client/state/sharing/selectors.js":function(e,t,s){"use strict";s.d(t,"a",function(){return l});var n=s("./node_modules/lodash/lodash.js"),i=s("./client/state/current-user/selectors.js"),o=s("./client/state/ui/selectors.js"),r=s("./client/state/sharing/keyring/selectors.js"),a=s("./client/state/sharing/publicize/selectors.js"),c=s("./client/state/sharing/services/selectors.js");function l(e,t){const s=(s,r)=>{const c=Object(a.d)(e,Object(o.e)(e),Object(i.g)(e),t);return Object(n.some)(c,{keyring_connection_ID:s,external_ID:r})},l=Object(c.b)(e,t);return l?Object(r.c)(e,t).reduce((e,t)=>(l.external_users_only||(e=e.concat([{ID:t.external_ID,name:t.external_display||t.external_name,picture:t.external_profile_picture,keyringConnectionId:t.ID,isConnected:s(t.ID,t.external_ID),isExternal:!1}])),e.concat(t.additional_external_users.map(e=>({ID:e.external_ID,name:e.external_name,description:e.external_description,picture:e.external_profile_picture,meta:e.external_meta,keyringConnectionId:t.ID,isConnected:s(t.ID,e.external_ID),isExternal:!0})))),[]):[]}},"./client/state/sharing/services/selectors.js":function(e,t,s){"use strict";s.d(t,"b",function(){return l}),s.d(t,"a",function(){return d}),s.d(t,"c",function(){return p});var n=s("./node_modules/lodash/lodash.js"),i=s("./client/config/index.js"),o=s("./client/state/selectors/can-current-user.js"),r=s("./client/state/sites/selectors.js"),a=s("./client/state/selectors/is-site-google-my-business-eligible.js");function c(e){return e.sharing.services.items}function l(e,t){const s=c(e);return!!s[t]&&s[t]}function d(e,t,s){const l=function(e,t){return Object(n.filter)(c(e),{type:t})}(e,s);return t?l.filter(s=>!(Object(r.J)(e,t)&&!s.jetpack_support)&&(!(Object(r.J)(e,t)&&s.jetpack_module_required&&!Object(r.I)(e,t,s.jetpack_module_required))&&(!("eventbrite"===s.ID&&!Object(o.b)(e,t,"manage_options"))&&(!("publicize"===s.type&&!Object(o.b)(e,t,"publish_posts"))&&(!!("google_my_business"!==s.ID||Object(o.b)(e,t,"manage_options")&&Object(a.a)(e,t)&&i.a.isEnabled("google-my-business"))&&("google_site_verification"!==s.ID&&"path"!==s.ID)))))):l}function p(e){return e.sharing.services.isFetching}},"./client/state/site-keyrings/actions.js":function(e,t,s){"use strict";s.d(t,"c",function(){return i}),s.d(t,"a",function(){return o}),s.d(t,"d",function(){return r}),s.d(t,"b",function(){return a});var n=s("./client/lib/wp/browser.js");function i(e){return t=>(t({type:"SITE_KEYRINGS_REQUEST",siteId:e}),n.a.undocumented().getSiteKeyrings(e).then(s=>(t({type:"SITE_KEYRINGS_REQUEST_SUCCESS",siteId:e,keyrings:s}),s)).catch(s=>(t({type:"SITE_KEYRINGS_REQUEST_FAILURE",siteId:e,error:s}),Promise.reject(s))))}function o(e,t){return s=>(s({type:"SITE_KEYRINGS_SAVE",siteId:e}),n.a.undocumented().createSiteKeyring(e,t).then(n=>(s({type:"SITE_KEYRINGS_SAVE_SUCCESS",siteId:e,keyring:t}),n)).catch(t=>(s({type:"SITE_KEYRINGS_SAVE_FAILURE",siteId:e,error:t}),Promise.reject(t))))}function r(e,t,s){return i=>(i({type:"SITE_KEYRINGS_UPDATE",siteId:e,keyringId:t,externalUserId:s}),n.a.undocumented().updateSiteKeyring(e,t,s).then(n=>(i({type:"SITE_KEYRINGS_UPDATE_SUCCESS",siteId:e,keyringId:t,externalUserId:s}),n)).catch(n=>(i({type:"SITE_KEYRINGS_UPDATE_FAILURE",siteId:e,keyringId:t,externalUserId:s,error:n}),Promise.reject(n))))}function a(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return i=>(i({type:"SITE_KEYRINGS_DELETE",siteId:e,keyringId:t,externalUserId:s}),n.a.undocumented().deleteSiteKeyring(e,t,s).then(n=>(i({type:"SITE_KEYRINGS_DELETE_SUCCESS",siteId:e,keyringId:t,externalUserId:s}),n)).catch(n=>(i({type:"SITE_KEYRINGS_DELETE_FAILURE",error:n,siteId:e,keyringId:t,externalUserId:s}),Promise.reject(n))))}},"./client/state/site-keyrings/selectors.js":function(e,t,s){"use strict";s.d(t,"d",function(){return i}),s.d(t,"b",function(){return o}),s.d(t,"c",function(){return r}),s.d(t,"a",function(){return a});var n=s("./node_modules/lodash/lodash.js");function i(e,t){return Object(n.get)(e.siteKeyrings.requesting,[t],!1)}function o(e,t){return Object(n.get)(e.siteKeyrings.items,[t],[])}function r(e,t,s){return Object(n.filter)(o(e,t),{service:s})}function a(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(n.find)(o(e,t),e=>null===i?e.keyring_id===s:e.keyring_id===s&&e.external_user_id===i)}}}]);