(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{"./client/lib/cart-values/cart-items.js":function(e,t,n){"use strict";n.d(t,"e",function(){return O}),n.d(t,"k",function(){return S}),n.d(t,"m",function(){return A}),n.d(t,"n",function(){return D}),n.d(t,"b",function(){return T}),n.d(t,"d",function(){return U}),n.d(t,"o",function(){return G}),n.d(t,"i",function(){return K}),n.d(t,"g",function(){return J}),n.d(t,"l",function(){return Z}),n.d(t,"f",function(){return ee}),n.d(t,"h",function(){return te}),n.d(t,"j",function(){return ne}),n.d(t,"c",function(){return re});var r=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),i=n.n(r),a=n("./node_modules/immutability-helper/index.js"),o=n.n(a),c=n("./node_modules/lodash/lodash.js"),s=n("./client/lib/products-values/index.js"),u=n("./client/lib/products-values/sort.js"),d=n("./client/lib/domains/index.js"),l=n("./client/lib/domains/constants.js"),m=n("./client/lib/plans/index.js"),p=n("./client/lib/plans/constants.js");function f(e){function t(t){return(t=t||[]).some(function(t){return Object(c.isEqual)(e,t)})?t:t.concat([e])}return function(n){return function(e,t){if(Y(e)&&!Object(s.s)(e))return!0;if(!Y(e)&&v(t))return!0;if(Object(s.A)(e)||g(t))return!0;if(Object(s.F)(e))return!0;return!1}(e,n)?o()(n,{products:{$set:[e]}}):o()(n,{products:{$apply:t}})}}function h(e){function t(t){const n=Object(c.reject)(t,function(t){return e.product_slug===t.product_slug&&e.meta===t.meta}),r=Object(s.q)(e)||Object(s.t)(e);return n.map(t=>Object(s.K)(t)&&r&&Object(s.c)(e)===Object(s.c)(t)?o()(t,{extra:{$merge:{domain_to_bundle:""}}}):t)}return function(e){return o()(e,{products:{$apply:t}})}}function b(e,t){return function(n){return Object(c.flow)([h(e),f(t)])(n)}}function _(e){return e&&e.products||[]}function g(e){return Object(c.some)(_(e),"free_trial")}function y(e){return e&&Object(c.some)(_(e),s.K)}function j(e){return Object(c.some)(_(e),s.h)}function O(e,t){return e.products&&Object(c.every)(_(e),{product_slug:t})}function v(e){return Object(c.some)(_(e),Y)}function E(e){return Object(c.filter)(_(e),{product_slug:l.d.TRANSFER_IN})}function S(e,t){if(Object(m.x)(e))return null;const n=Object(c.get)(t,"domainToBundle","");return i()({product_slug:e,free_trial:Object(c.get)(t,"isFreeTrialItem",!1)},n?{extra:{domain_to_bundle:n}}:{})}function P(e,t){return S(e,t)}function C(e,t){return S(e,t)}function A(e,t){const n=Object(c.find)(t,["product_slug",e])||{};return Object(c.get)(n,"is_privacy_protection_product_purchase_allowed",!1)}function w(e,t,n){const r=n?{extra:{source:n}}:void 0;return Object.assign({product_slug:e,meta:t},r)}function D(e,t){return{product_slug:"premium_theme",meta:e,extra:{source:t}}}function T(e){return w("domain_map",e.domain,e.source)}function N(e){return w("offsite_redirect",e.domain,e.source)}function I(e){const t=w(e.product_slug||"gapps",e.meta?e.meta:e.domain);return Object(c.assign)(t,{extra:{google_apps_users:e.users}})}function x(){return{product_slug:"custom-design"}}function R(){return{product_slug:"no-adverts/no-adverts.php"}}function k(){return{product_slug:"videopress"}}function M(){return{product_slug:"unlimited_space"}}function L(){return{product_slug:"unlimited_themes"}}function F(e){return{product_slug:e}}function W(e){return Object(c.find)(_(e),{free_trial:!0})}function B(e){return Object(c.filter)(_(e),{is_domain_registration:!0})}function q(e){return Object(c.filter)(_(e),{product_slug:"domain_map"})}function V(e,t){return Object(c.merge)({},e,{extra:{purchaseId:t.id,purchaseDomain:t.domain,purchaseType:"renewal",includedDomain:t.includedDomain}})}function U(e,t){return Object(c.some)(_(e),{is_domain_registration:!0,meta:t})}function z(e){return B(e).filter(function(t){return!Object(c.some)(e.products,{meta:t.meta,extra:{privacy:!0}})})}function $(e){return E(e).filter(function(t){return!Object(c.some)(e.products,{meta:t.meta,extra:{privacy:!0}})})}function H(e,t,n,r){return c.flow.apply(null,t.map(function(e){return n(e,G(e,r))}))}function G(e,t){return Object(c.merge)({},e,{extra:{privacy:t}})}function Y(e){return e.extra&&"renewal"===e.extra.purchaseType}function X(e){return Object(c.get)(e,"extra.privacy_available",!0)}function K(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!(!e||!e.next_domain_is_free)&&("blog"!==e.next_domain_condition||"blog"===Object(d.n)(t))}function J(e,t){return""!==Object(c.get)(e,"bundled_domain","")&&Object(c.toLower)(t)===Object(c.toLower)(Object(c.get)(e,"bundled_domain",""))}function Q(e,t){if(!e||!t)return!1;if(!y(e))return!1;if(!(t===(B(e).concat(q(e)).shift()||{}).meta))return!1;if(j(e)){if("blog"!==t.split(".").pop())return!1}return!0}function Z(e,t,n,r){return e&&(Object(s.t)(r)||Object(s.q)(r)||r.domain_name&&!Object(s.B)(r))&&!Q(n,r.domain_name)&&!K(n)&&!y(n)&&(!t||t&&"free_plan"===t.plan.product_slug)}function ee(e,t,n){if(!n||!Object(d.n)(n))return!1;const r=((e||{}).plan||{}).product_slug,i="blog".startsWith(Object(d.n)(n));return!(!r||!Object(m.u)(r)||i)||!(!j(t)||i)}function te(e){return e&&Object(s.K)(e.plan)&&!Object(m.m)(e.plan)}function ne(e){return"PRICE"===e}function re(e,t,n,r,i){return r.product_slug&&"Free"!==r.cost?Q(n,r.domain_name)?"FREE_WITH_PLAN":Object(s.q)(r)?te(t)?"FREE_WITH_PLAN":e?"INCLUDED_IN_HIGHER_PLAN":"PRICE":i?"PRICE":K(n,r.domain_name)?"FREE_WITH_PLAN":Z(e,t,n,r)?"INCLUDED_IN_HIGHER_PLAN":ee(t,n,r.domain_name)?"UPGRADE_TO_HIGHER_PLAN_TO_BUY":"PRICE":"FREE_DOMAIN"}t.a={add:f,addPrivacyToAllDomains:function(e){return H(0,[...z(e),...$(e)],b,!0)},addWithoutReplace:function(e){function t(t){return(t=t||[]).some(function(t){return Object(c.isEqual)(e,t)})?t:t.concat([e])}return function(e){return o()(e,{products:{$apply:t}})}},businessPlan:C,clearCart:function(){return function(e){return o()(e,{products:{$set:[]}})}},customDesignItem:x,domainMapping:T,domainRegistration:function(e){return Object(c.assign)(w(e.productSlug,e.domain,e.source),i()({is_domain_registration:!0},e.extra?{extra:e.extra}:{}))},domainTransfer:function(e){return Object(c.assign)(w(l.d.TRANSFER_IN,e.domain,e.source),i()({},e.extra?{extra:e.extra}:{}))},fillGoogleAppsRegistrationData:function(e,t){const n=Object(c.filter)(_(e),s.C);return c.flow.apply(null,n.map(function(e){return e.extra=Object(c.assign)(e.extra,{google_apps_registration_data:t}),f(e)}))},findFreeTrial:W,getAll:_,getAllSorted:function(e){return Object(u.a)(_(e))},getDomainMappings:q,getDomainPriceRule:re,getDomainRegistrations:B,getDomainRegistrationsWithoutPrivacy:z,getDomainTransfers:E,getDomainTransfersWithoutPrivacy:$,getGoogleApps:function(e){return Object(c.filter)(_(e),s.C)},getIncludedDomain:function(e){return e.extra&&e.extra.includedDomain},getItemForPlan:function(e,t){if(t=t||{},Object(m.r)(e.product_slug))return function(e,t){return S(e,t)}(e.product_slug,t);if(Object(m.t)(e.product_slug))return P(e.product_slug,t);if(Object(m.n)(e.product_slug))return C(e.product_slug,t);throw new Error("Invalid plan product slug: "+e.product_slug)},getRenewalItemFromCartItem:V,getRenewalItemFromProduct:function(e,t){let n;if(e=Object(s.b)(e),Object(s.r)(e)&&(n=w(e.product_slug,t.domain,t.source)),Object(s.K)(e)&&(n=S(e.product_slug)),Object(s.C)(e)&&(n=I(e)),Object(s.M)(e)&&(n=N(t)),Object(s.I)(e)&&(n={product_slug:"no-adverts/no-adverts.php"}),Object(s.n)(e)&&(n={product_slug:"custom-design"}),Object(s.R)(e)&&(n={product_slug:"videopress"}),Object(s.P)(e)&&(n={product_slug:"unlimited_space"}),Object(s.Q)(e)&&(n={product_slug:"unlimited_themes"}),Object(s.N)(e)&&(n=F(e.product_slug)),!n)throw new Error("This product cannot be renewed.");return V(n,e)},getRenewalItems:function(e){return _(e).filter(Y)},getSiteRedirects:function(e){return Object(c.filter)(_(e),{product_slug:"offsite_redirect"})},getTlds:function(e){const t=Object(c.concat)(B(e),E(e));return Object(c.uniq)(Object(c.map)(t,e=>Object(d.n)(e.meta)))},googleApps:I,googleAppsExtraLicenses:function(e){const t=w("gapps_extra_license",e.domain,e.source);return Object(c.assign)(t,{extra:{google_apps_users:e.users}})},guidedTransferItem:function(){return{product_slug:"guided_transfer"}},isDomainBeingUsedForPlan:Q,isNextDomainFree:K,hasDomainBeingUsedForPlan:function(e){return Object(c.some)(B(e),t=>Q(e,t.meta))},hasDomainCredit:function(e){return e.has_bundle_credit||y(e)},hasDomainInCart:U,hasDomainMapping:function(e){return Object(c.some)(_(e),s.q)},hasDomainRegistration:function(e){return Object(c.some)(_(e),s.t)},hasEcommercePlan:function(e){return e&&Object(c.some)(_(e),s.w)},hasOnlyDomainProductsWithPrivacySupport:function(e){return Object(c.every)(Object(c.concat)(E(e),B(e)),X)},hasFreeTrial:g,hasGoogleApps:function(e){return Object(c.some)(_(e),s.C)},hasOnlyFreeTrial:function(e){return e.products&&W(e)&&Object(c.every)(_(e),{cost:0})},hasOnlyProductsOf:O,hasOnlyRenewalItems:function(e){return Object(c.every)(_(e),Y)},hasPlan:y,hasJetpackPlan:function(e){return Object(c.some)(_(e),s.F)},hasOnlyBundledDomainProducts:function(e){return e&&Object(c.every)([...B(e),...E(e)],s.i)},hasBloggerPlan:j,hasPersonalPlan:function(e){return Object(c.some)(_(e),s.J)},hasPremiumPlan:function(e){return Object(c.some)(_(e),s.L)},hasProduct:function(e,t){return _(e).some(function(e){return e.product_slug===t})},hasRenewableSubscription:function(e){return e.products&&Object(c.some)(_(e),e=>(function(e){let t=e.bill_period;if(!Number.isInteger(t)){const n=Object(m.h)(e.product_slug);n&&(t=Object(p.Hc)(n.term))}return t})(e)>0)},hasRenewalItem:v,hasTld:function(e,t){const n=Object(c.concat)(B(e),E(e));return Object(c.some)(n,e=>Object(d.n)(e.meta)===t)},hasConciergeSession:function(e){return Object(c.some)(_(e),s.l)},isPaidDomain:ne,noAdsItem:R,planItem:S,premiumPlan:P,remove:h,removeItemAndDependencies:function(e,t,n){const r=function e(t,n,r){const i=_(n).filter(function(e){return Object(s.p)(t,e,r)});return Object(c.uniq)(Object(c.flatten)(i.concat(i.map(t=>e(t,n)))))}(e,t,n).map(h).concat(h(e));return c.flow.apply(null,r)},removePrivacyFromAllDomains:function(e){return H(0,[...B(e),...E(e)],b,!1)},replaceItem:b,siteRedirect:N,shouldBundleDomainWithPlan:Z,spaceUpgradeItem:F,supportsPrivacyProtectionPurchase:A,themeItem:D,unlimitedSpaceItem:M,unlimitedThemesItem:L,updatePrivacyForDomain:G,videoPressItem:k,hasStaleItem:function(e){return Object(c.some)(_(e),function(e){return e.time_added_to_cart&&1e3*e.time_added_to_cart<Date.now()-6e5})},hasTransferProduct:function(e){return Object(c.some)(_(e),s.u)},conciergeSessionItem:function(){return{product_slug:"concierge-session"}}}},"./client/lib/cart-values/index.js":function(e,t,n){"use strict";n.d(t,"j",function(){return y}),n.d(t,"k",function(){return j}),n.d(t,"l",function(){return R}),n.d(t,"w",function(){return k}),n.d(t,"a",function(){return _}),n.d(t,"s",function(){return g}),n.d(t,"b",function(){return S}),n.d(t,"e",function(){return b}),n.d(t,"r",function(){return h}),n.d(t,"f",function(){return w}),n.d(t,"g",function(){return D}),n.d(t,"i",function(){return P}),n.d(t,"m",function(){return A}),n.d(t,"n",function(){return C}),n.d(t,"o",function(){return I}),n.d(t,"p",function(){return T}),n.d(t,"q",function(){return N}),n.d(t,"h",function(){return x}),n.d(t,"t",function(){return O}),n.d(t,"v",function(){return v}),n.d(t,"u",function(){return E});var r=n("./node_modules/url/url.js"),i=n.n(r),a=n("./node_modules/lodash/lodash.js"),o=n("./node_modules/immutability-helper/index.js"),c=n.n(o),s=n("./packages/i18n-calypso/dist/esm/index.js"),u=n.n(s),d=n("./client/config/index.js"),l=n("./client/lib/cart-values/cart-items.js");n.d(t,"c",function(){return l.a});var m=n("./client/lib/products-values/index.js"),p=n("./client/lib/web-payment/index.js");Object(o.extend)("$auto",function(e,t){return t?c()(t,e):c()({},e)});const f={alipay:"WPCOM_Billing_Stripe_Source_Alipay",bancontact:"WPCOM_Billing_Stripe_Source_Bancontact","credit-card":"WPCOM_Billing_MoneyPress_Paygate",ebanx:"WPCOM_Billing_Ebanx",eps:"WPCOM_Billing_Stripe_Source_Eps",giropay:"WPCOM_Billing_Stripe_Source_Giropay",ideal:"WPCOM_Billing_Stripe_Source_Ideal",netbanking:"WPCOM_Billing_Dlocal_Redirect_India_Netbanking",paypal:"WPCOM_Billing_PayPal_Express",p24:"WPCOM_Billing_Stripe_Source_P24","brazil-tef":"WPCOM_Billing_Ebanx_Redirect_Brazil_Tef",wechat:"WPCOM_Billing_Stripe_Source_Wechat","web-payment":"WPCOM_Billing_Web_Payment",sofort:"WPCOM_Billing_Stripe_Source_Sofort"};function h(e){let t=e.coupon,n=e.is_coupon_applied,r=e.is_coupon_removed,a=e.currency,o=e.temporary,c=e.extra,s=e.products,u=e.tax;const d=!(t||n||r||"undefined"==typeof document),l=d?i.a.parse(document.URL,!0).query.coupon:"";return Object.assign({coupon:t,is_coupon_applied:n,is_coupon_removed:r,currency:a,tax:u,temporary:o,extra:c,products:s.map(e=>{return{product_id:e.product_id,meta:e.meta,free_trial:e.free_trial,volume:e.volume,extra:e.extra}})},d&&l&&{coupon:l,is_coupon_applied:!1})}function b(e,t){return Object.assign({blog_id:e,products:[]},t)}function _(e){return function(t){return c()(t,{coupon:{$set:e},is_coupon_applied:{$set:!1},$unset:["is_coupon_removed"]})}}function g(){return function(e){return c()(e,{coupon:{$set:""},is_coupon_applied:{$set:!1},$merge:{is_coupon_removed:!0}})}}const y=e=>Object(a.get)(e,["tax","location","country_code"]),j=e=>Object(a.get)(e,["tax","location","postal_code"]);function O(e){return function(t){return c()(t,{$auto:{tax:{$auto:{location:{$auto:{country_code:{$set:e}}}}}}})}}function v(e){return function(t){return c()(t,{$auto:{tax:{$auto:{location:{$auto:{postal_code:{$set:e}}}}}}})}}function E(e){let t=e.postalCode,n=e.countryCode;return function(e){return c()(e,{$auto:{tax:{$auto:{location:{$auto:{$set:{postal_code:t,country_code:n}}}}}}})}}function S(e,t){return!Object(m.m)(t)&&(!l.a.hasRenewalItem(e)||!Object(m.s)(t))}function P(e,t){e=e||{};const n=(t=t||{}).messages||[];if(!e||!e.client_metadata||!t.client_metadata)return n;const r=e.client_metadata.last_server_response_date,i=t.client_metadata.last_server_response_date;return u.a.moment(i).isAfter(r)?n:[]}function C(e){return!l.a.hasFreeTrial(e)&&!l.a.hasProduct(e,"wordpress-com-credits")&&e.total_cost<=e.credits&&e.total_cost>0}function A(e){return 0===e.total_cost&&!l.a.hasFreeTrial(e)}function w(e,t){return c()(e,{products:{$apply:function(e){return e&&e.map(function(e){return function(e,t){const n=t[e.product_slug],r=Object(m.U)(n);return Object(a.extend)({},e,r)}(e,t)})}}})}function D(e){let t=e.allowed_payment_methods.slice(0);t=(t=t.filter(function(e){return"WPCOM_Billing_Ebanx"!==e})).filter(function(e){return"WPCOM_Billing_Web_Payment"!==e||null!==Object(p.c)()});const n=Object(a.invert)(f);return t.map(function(e){return n[e]})}function T(e){return f[e]||""}function N(e){return{alipay:"Alipay",bancontact:"Bancontact","credit-card":u.a.translate("Credit or debit card"),eps:"EPS",giropay:"Giropay",ideal:"iDEAL",netbanking:"Net Banking",paypal:"PayPal",p24:"Przelewy24","brazil-tef":"Transferência bancária","web-payment":"Apple Pay",wechat:u.a.translate("WeChat Pay",{comment:"Name for WeChat Pay - https://pay.weixin.qq.com/"}),sofort:"Sofort"}[e]||e}function I(e,t){const n=T(t);return""!==n&&(!(["alipay","bancontact","eps","giropay","ideal","netbanking","paypal","p24","brazil-tef","wechat","sofort"].indexOf(t)>=0&&!d.a.isEnabled("upgrades/redirect-payments"))&&(("web-payment"!==t||null!==Object(p.c)())&&(Object(a.isArray)(e.allowed_payment_methods)&&e.allowed_payment_methods.indexOf(n)>=0)))}function x(e){return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")}function R(e){return!(!e||!e.has_pending_payment)}function k(e){return Object(a.get)(e,["tax","display_taxes"],!1)}t.d={applyCoupon:_,removeCoupon:g,cartItems:l.a,emptyCart:b,isPaymentMethodEnabled:I,hasPendingPayment:R}},"./client/lib/cart/store/cart-analytics.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return d});var r=n("./node_modules/lodash/lodash.js"),i=n("./client/lib/analytics/index.js"),a=n("./client/lib/cart-values/index.js");function o(e,t){const n=a.c.getAll(e),i=a.c.getAll(t);Object(r.each)(Object(r.differenceWith)(i,n,r.isEqual),s),Object(r.each)(Object(r.differenceWith)(n,i,r.isEqual),u)}function c(e){return Object(r.omit)(e,["extra"])}function s(e){i.default.tracks.recordEvent("calypso_cart_product_add",c(e)),i.default.recordAddToCart({cartItem:e})}function u(e){i.default.tracks.recordEvent("calypso_cart_product_remove",c(e))}function d(e){const t=Object(r.get)(e,"payment"),n={payment_method:Object(r.get)(t,"paymentMethod","missing"),extra:JSON.stringify(t?Object(r.omit)(t,"paymentMethod"):e)};i.default.tracks.recordEvent("calypso_cart_unrecognized_payment_method",n)}},"./client/lib/cart/store/index.js":function(e,t,n){"use strict";var r=n("./node_modules/lodash/lodash.js"),i=n("./client/lib/upgrades/action-types.js"),a=n("./client/lib/mixins/emitter/index.js"),o=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),c=n.n(o),s=n("./packages/i18n-calypso/dist/esm/index.js"),u=n.n(s),d=n("./client/dispatcher/index.js"),l=n("./node_modules/debug/src/browser.js"),m=n.n(l),p=n("./client/lib/cart-values/index.js");const f=m()("calypso:cart-data:cart-synchronizer");function h(e){return Object(r.assign)({},e,{client_metadata:{last_server_response_date:u.a.moment().toISOString()},products:(n=e.products,n.map(function(e){return Object(r.assign)({},e,{product_id:parseInt(e.product_id,10)})})),tax:(t=e.tax,c()({},t,{location:c()({},Object(r.get)(t,"location"))}))});var t,n}function b(e,t){if(!(this instanceof b))return new b(e,t);this._cartKey=e,this._wpcom=t,this._latestValue=null,this._hasLoadedFromServer=!1,this._activeRequest=null,this._queuedChanges=null,this._paused=!1,this.dispatchToken=d.a.register(this.handleDispatch.bind(this))}Object(a.a)(b.prototype),b.prototype.handleDispatch=function(e){const t=e.action;if(t.type!==i.T)return;const n=t.step;n.first&&n.last||(n.first?this.pause():n.last&&this.resume())},b.prototype.update=function(e){this._hasLoadedFromServer?(this._activeRequest&&"canceled"!==this._activeRequest.state&&(this._activeRequest.state="canceled"),this._latestValue=e(this._latestValue),this._performRequest("update",this._postToServer.bind(this)),this.emit("change")):this._enqueueChange(e)},b.prototype.pause=function(){this._paused=!0},b.prototype.resume=function(){this._paused=!1},b.prototype._enqueueChange=function(e){this._queuedChanges?this._queuedChanges=Object(r.flowRight)(e,this._queuedChanges):this._queuedChanges=e},b.prototype._processQueuedChanges=function(){this._queuedChanges&&(this._activeRequest&&"canceled"!==this._activeRequest.state&&(this._activeRequest.state="canceled"),this._latestValue=this._queuedChanges(this._latestValue),this._queuedChanges=null,this._performRequest("update",this._postToServer.bind(this)))},b.prototype._postToServer=function(e){this._wpcom.setCart(this._cartKey,Object(p.r)(this._latestValue),function(t,n){t?e(t):e(null,h(n))})},b.prototype._poll=function(){this._performRequest("poll",this._getFromServer.bind(this))},b.prototype.fetch=function(){this._performRequest("fetch",this._getFromServer.bind(this))},b.prototype._getFromServer=function(e){this._wpcom.getCart(this._cartKey,function(t,n){t?e(t):e(null,h(n))})};let _=0;b.prototype._performRequest=function(e,t){if("poll"===e&&this._paused)return;if(this._activeRequest&&"pending"===this._activeRequest.state)return!1;const n={id:_++,type:e,state:"pending"};this._activeRequest=n,f(n.id+": starting "+n.type),t(function(e,t){if("canceled"!==n.state){if(e)throw e;f(n.id+": finishing "+n.type),this._latestValue=t,n.state="completed",this._hasLoadedFromServer||(this._processQueuedChanges(),this._hasLoadedFromServer=!0),this.emit("change")}else f(n.id+": canceled "+n.type)}.bind(this))},b.prototype.getLatestValue=function(){if(!this._hasLoadedFromServer)throw new Error("Value cannot be read before fetching from the server at least once.");return this._latestValue},b.prototype.hasLoadedFromServer=function(){return this._hasLoadedFromServer},b.prototype.hasPendingServerUpdates=function(){return this._activeRequest&&"update"===this._activeRequest.type&&"pending"===this._activeRequest.state};var g=b,y=n("./client/lib/data-poller/index.js"),j=n("./client/lib/cart/store/cart-analytics.js"),O=n("./client/lib/products-list/index.js"),v=n("./client/lib/wp/browser.js"),E=n("./client/lib/redux-bridge/index.js"),S=n("./client/state/ui/selectors.js"),P=n("./client/state/ui/payment/reducer.js");const C=Object(O.a)(),A=v.a.undocumented();let w=null,D=null,T=null;const N={get(){const e=I()?D.getLatestValue():{};return Object(r.assign)({},e,{hasLoadedFromServer:I(),hasPendingServerUpdates:D&&D.hasPendingServerUpdates()})},setSelectedSiteId(e){const t=e||"no-site";w!==t&&(w=t,D&&T&&(y.a.remove(T),D.off("change",x)),(D=g(w,A)).on("change",x),T=y.a.add(N,D._poll.bind(D)))}};function I(){return D&&D.hasLoadedFromServer()}function x(){N.emit("change")}function R(e){const t=t=>Object(p.f)(e(t),C.get()),n=N.get(),r=t(n);D&&D.update(t),Object(j.a)(n,r)}Object(a.a)(N),N.dispatchToken=d.a.register(e=>{const t=e.action;switch(t.type){case i.c:D&&T&&(y.a.remove(T),D.off("change",x)),D=null,T=null,w=null;break;case i.i:R(p.c.addPrivacyToAllDomains(N.get()));break;case i.j:R(p.c.removePrivacyFromAllDomains(N.get()));break;case i.A:R(p.c.fillGoogleAppsRegistrationData(N.get(),t.registrationData));break;case i.d:R(Object(r.flow)(...t.cartItems.map(e=>p.c.add(e))));break;case i.e:R(Object(r.flow)(p.c.clearCart(),...t.cartItems.map(e=>p.c.addWithoutReplace(e))));break;case i.a:R(Object(p.a)(t.coupon));break;case i.b:R(Object(p.s)());break;case i.f:R(p.c.removeItemAndDependencies(t.cartItem,N.get(),t.domainsWithPlansOnly));break;case i.g:R(p.c.replaceItem(t.oldItem,t.newItem));break;case i.Q:{const e=t.rawDetails;Object(r.has)(e,"country")&&R(Object(p.t)(Object(r.get)(e,"country"))),Object(r.has)(e,"postal-code")&&R(Object(p.v)(Object(r.get)(e,"postal-code")))}break;case i.R:{let e,n;switch(Object(r.get)(t,["payment","paymentMethod"])){case"WPCOM_Billing_MoneyPress_Stored":e=Object(P.b)(t,"card_zip"),n=Object(P.b)(t,"country_code");break;case"WPCOM_Billing_MoneyPress_Paygate":{const i=Object(r.get)(t,"payment.newCardDetails",{});e=i["postal-code"],n=i.country;break}case"WPCOM_Billing_WPCOM":e=null,n=null;break;default:Object(j.b)(t),e=null,n=null}R(Object(p.u)({postalCode:e,countryCode:n}))}break;case i.k:R(Object(p.t)(t.countryCode));break;case i.l:R(Object(p.v)(t.postalCode))}});t.a=N;Object(E.a)().then(e=>{N.setSelectedSiteId(Object(S.e)(e.getState())),e.subscribe(function(e,t,n){let r=t(e.getState());return()=>{const i=t(e.getState());i!==r&&(r=i,n(i))}}(e,S.e,N.setSelectedSiteId))})},"./client/lib/checkout/constants.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r={BR:{fields:["document","street-number","address-1","address-2","state","city","phone-number","postal-code"]},MX:{fields:["phone-number","postal-code"]},IN:{fields:["name","pan","street-number","address-1","address-2","state","city","postal-code"]}}},"./client/lib/checkout/index.js":function(e,t,n){"use strict";var r=n("./client/lib/cart-values/index.js"),i=n("./client/me/purchases/paths.js"),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(a),c=n("./node_modules/creditcards/index.js"),s=n.n(c),u=n("./node_modules/lodash/lodash.js"),d=n("./packages/i18n-calypso/dist/esm/index.js"),l=n.n(d),m=n("./client/lib/postal-code/index.jsx"),p=n("./client/lib/checkout/processor-specific.js");function f(e,t){switch(t){case"credit-card":return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(u.mergeWith)({},...t,(e,t)=>Object(u.isArray)(e)&&Object(u.isArray)(t)?Object(u.union)(e,t):void 0)}({name:{description:l.a.translate("Cardholder Name",{comment:"Cardholder name label on credit card form"}),rules:["required"]},number:{description:l.a.translate("Card Number",{comment:"Card number label on credit card form"}),rules:["validCreditCardNumber"]},"expiration-date":{description:l.a.translate("Credit Card Expiration Date"),rules:["validExpirationDate"]},cvv:{description:l.a.translate("Credit Card CVV Code"),rules:["validCvvNumber"]},country:{description:l.a.translate("Country"),rules:["required"]},"postal-code":{description:l.a.translate("Postal Code",{comment:"Postal code on credit card form"}),rules:["required"]}},function(e){switch(e.country){case"US":return{"postal-code":{description:l.a.translate("Postal Code",{comment:"Postal code on credit card form"}),rules:["required","validPostalCodeUS"]}}}return null}(e),function(e){let t=e.country;return t&&Object(p.b)(t)&&Object(p.a)(t)}(e));case"brazil-tef":return Object.assign({name:{description:l.a.translate("Your Name"),rules:["required"]},"tef-bank":{description:l.a.translate("Bank"),rules:["required"]}},Object(p.a)("BR"));case"netbanking":return Object(p.a)("IN");case"token":return{name:{description:l.a.translate("Cardholder Name",{comment:"Cardholder name label on credit card form"}),rules:["required"]},tokenized_payment_data:{description:l.a.translate("Tokenized Payment Data",{comment:"Tokenized payment data from the token provider"}),rules:["required"]}};default:return null}}function h(e){return l.a.translate("%(description)s is invalid",{args:{description:Object(u.capitalize)(e)}})}const b={};function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"credit-card";const n=f(e,t);let r=[];return n&&(r=Object.keys(n).reduce(function(t,r){const i=function(e,t,n){return Object(u.compact)(e.rules.map(function(r){const i=function(e){if(Object(u.isArray)(e))return b[e[0]].apply(null,e.slice(1));return b[e]}(r);if(!i.isValid(t,n))return i.error(e.description)}))}(n[r],e[r],e);return i.length&&(t[r]=i),t},{})),{errors:r}}function g(e){if(e){e=e.replace(/ /g,"");let t=s.a.card.type(e,!0);return void 0===t?null:("American Express"===t&&(t="amex"),"Diners Club"===t&&(t="diners"),t.toLowerCase())}return null}b.required={isValid:e=>!Object(u.isEmpty)(e),error:function(e){return l.a.translate("Missing required %(description)s field",{args:{description:e}})}},b.validCreditCardNumber={isValid:e=>!!e&&s.a.card.isValid(e),error:h},b.validCvvNumber={isValid:e=>!!e&&s.a.cvc.isValid(e),error:h},b.validExpirationDate={isValid:function(e){if(!e)return!1;const t=function(e){const t=e.split("/"),n=o()(t,2),r=n[0],i=n[1];return{month:s.a.expiration.month.parse(r),year:s.a.expiration.year.parse(i,!0)}}(e);return s.a.expiration.month.isValid(t.month)&&s.a.expiration.year.isValid(t.year)&&!s.a.expiration.isPast(t.month,t.year)},error:h},b.validBrazilTaxId={isValid:e=>!!e&&(Object(p.d)(e)||Object(p.c)(e)),error:function(e){return l.a.translate("%(description)s is invalid. Must be in format: 111.444.777-XX or 11.444.777/0001-XX",{args:{description:e}})}},b.validIndiaPan={isValid:e=>!!e&&/^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){1}?$/.test(e),error:function(e){return l.a.translate("%(description)s is invalid",{args:{description:Object(u.capitalize)(e)}})}},b.validPostalCodeUS={isValid:e=>Object(m.a)(e,"US"),error:function(e){return l.a.translate("%(description)s is invalid. Must be a 5 digit number",{args:{description:e}})}},b.validStreetNumber={isValid:e=>"0"!==e,error:h};const y={};function j(e,t,n){const r=y[e];return r?r.mask(t,n):n}function O(e,t,n){const r=y[e];return r?r.unmask(r.mask(t,n)):n}function v(e,t){let n="/plans/";if(r.c.hasRenewalItem(e)){const n=r.c.getRenewalItems(e)[0].extra,a=n.purchaseId,o=n.purchaseDomain,c=t||o;return Object(i.h)(c,a)}return r.c.hasDomainRegistration(e)?n="/domains/add/":r.c.hasDomainMapping(e)?n="/domains/add/mapping/":r.c.hasProduct(e,"offsite_redirect")?n="/domains/add/site-redirect/":r.c.hasProduct(e,"premium_theme")&&(n="/themes/"),t?n+t:n}y["expiration-date"]={mask:function(e,t){return e&&e.length>t.length?t:e&&2===e.length&&3===t.length&&"/"===t[2]?t:(t=t.replace(/[^\d]/g,"")).length<=2?t:t.substring(0,2)+"/"+t.substring(2,4)},unmask:u.identity},y.number={mask:function(e,t){return function(e){if("amex"===g(e))return function(e){const t=e.replace(/[^0-9]/g,"").slice(0,15);return"".concat(t.slice(0,4)," ").concat(t.slice(4,10)," ").concat(t.slice(10,15)).trim()}(e);const t=e.replace(/[^0-9]/g,"").slice(0,19);return"".concat(t.slice(0,4)," ").concat(t.slice(4,8)," ").concat(t.slice(8,12)," ").concat(t.slice(12)).trim()}(t)},unmask:function(e){return e.replace(/ /g,"")}},y.cvv={mask:function(e,t){return t.replace(/[^\d]/g,"").substring(0,4)},unmask:u.identity},y.document={mask:function(e,t){let n=t;const r=t.replace(/[^0-9]/g,"");return(n=r.length>11?r.slice(0,2)+"."+r.slice(2,5)+"."+r.slice(5,8)+"/"+r.slice(8,12)+"-"+r.slice(12,14):r.slice(0,3)+"."+r.slice(3,6)+"."+r.slice(6,9)+"-"+r.slice(9,11)).replace(/^[\s\.\-]+|[\s\.\-]+$/g,"")},unmask:u.identity},n.d(t,"b",function(){return v}),n.d(t,"a",function(){return g}),n.d(t,"e",function(){return _}),n.d(t,"c",function(){return j}),n.d(t,"d",function(){return O})},"./client/lib/checkout/processor-specific.js":function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"e",function(){return l}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return p}),n.d(t,"a",function(){return f}),n.d(t,"f",function(){return h});var r=n("./packages/i18n-calypso/dist/esm/index.js"),i=n.n(r),a=n("./node_modules/lodash/lodash.js"),o=n("./node_modules/cpf_cnpj/index.js"),c=n("./client/lib/checkout/constants.js"),s=n("./client/lib/cart-values/index.js"),u=n("./client/lib/cart/store/index.js");function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!Object(a.isUndefined)(c.a[e])&&Object(s.o)(u.a.get(),"ebanx")}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d(e)&&!Object(a.isEmpty)(c.a[e].fields)}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.CPF.isValid(e)}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.CNPJ.isValid(e)}function f(e){const t=c.a[e].fields||[];return Object(a.pick)(Object.assign({document:{description:i.a.translate("Taxpayer Identification Number"),rules:["validBrazilTaxId"]},"phone-number":{description:i.a.translate("Phone Number"),rules:["required"]},name:{description:i.a.translate("Your Name"),rules:["required"]},pan:{description:i.a.translate("PAN - Permanent account number"),rules:["validIndiaPan"]},"postal-code":{description:i.a.translate("Postal Code"),rules:["required"]}},{"street-number":{description:i.a.translate("Street Number"),rules:["required","validStreetNumber"]},"address-1":{description:i.a.translate("Address"),rules:["required"]},state:{description:i.a.translate("State"),rules:["required"]},city:{description:i.a.translate("City"),rules:["required"]},"postal-code":{description:i.a.translate("Postal Code"),rules:["required"]}}),t)}function h(e){let t=i.a.translate("Your payment was not processed this time due to an error, please try to submit it again.");switch(e.status_code){case"BP-DR-55":t={message:{cvv:i.a.translate("Invalid credit card CVV number")}};break;case"BP-DR-51":case"BP-DR-95":t={message:{name:i.a.translate("Please enter your name.")}}}return t}},"./client/lib/data-poller/index.js":function(e,t,n){"use strict";var r=n("./node_modules/debug/src/browser.js"),i=n.n(r);const a=i()("calypso:poller");let o=3e4,c=0;function s(e,t,n){n=n||{},this.id=c,c++,this.paused=!1,this.startOnFirstChange=this.startOnFirstChange.bind(this),this.stopOnNoChangeListeners=this.stopOnNoChangeListeners.bind(this),this.interval=n.interval||o,this.pauseWhenHidden=!0,"pauseWhenHidden"in n&&(this.pauseWhenHidden=n.pauseWhenHidden),void 0!==n.leading?this.leading=!!n.leading:this.leading=!0,this.dataStore=e,this.fetcher=t,this.dataStore.on("newListener",this.startOnFirstChange),this.dataStore.on("removeListener",this.stopOnNoChangeListeners),this.dataStore.listeners("change").length>0&&this.start()}s.prototype.start=function(){const e=function(){a("Calling fetcher for %o",{fetcher:this.fetcher,store:this.dataStore}),this.fetch()}.bind(this);this.timer||(a("Starting poller for %o",this.dataStore),this.leading&&e(),this.timer=setInterval(e,this.interval),this.paused=!1)},s.prototype.stop=function(){this.timer&&(a("Stopping poller for %o",this.dataStore),clearInterval(this.timer),this.timer=!1,this.paused=!1)},s.prototype.fetch=function(){"string"==typeof this.fetcher?this.dataStore[this.fetcher]():this.fetcher.call(null)},s.prototype.clear=function(){this.dataStore.off("newListener",this.startOnFirstChange),this.dataStore.off("removeListener",this.stopOnNoChangeListeners),this.stop()},s.prototype.startOnFirstChange=function(e){"change"===e&&this.start()},s.prototype.stopOnNoChangeListeners=function(e){"change"===e&&0===this.dataStore.listeners("change").length&&this.stop()};var u=s;const d=i()("calypso:poller"),l={};function m(){let e,t;for(t in d("Pausing active pollers"),l)(e=l[t]).timer&&e.pauseWhenHidden&&(e.stop(),e.paused=!0)}function p(){let e,t;for(t in d("Resuming paused pollers"),l)(e=l[t]).paused&&e.start()}function f(){document.hidden?m():p()}t.a={add:function(e,t,n){const r=new u(e,t,n);return 0===r.id&&document&&document.addEventListener("visibilitychange",f,!1),l[r.id]=r,d("Adding poller %o",r),r},remove:function(e){"object"!=typeof e&&l[e]&&(e=l[e]),e.clear(),d("Removing poller %o",e),delete l[e.id]},pauseAll:m,resumePaused:p}},"./client/lib/domains/dns/index.js":function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return o}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return i}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return h});var r=n("./node_modules/lodash/lodash.js");function i(e,t){return Object(r.mapValues)(e,(n,i)=>{return function(e){let t=e.name,n=e.value,i=e.type,o=e.domainName;switch(t){case"name":return function(e,t,n){if(c(e,n)&&s(t))return!0;switch(t){case"A":case"AAAA":return/^([a-z0-9]([a-z0-9-]*[a-z0-9])?\.)*[a-z0-9]([a-z0-9-]*[a-z0-9])?$/i.test(e);default:return/^([a-z0-9-_]{1,63}\.)*([a-z0-9-_]{1,63})$/i.test(e)}}(n,i,o);case"target":return a(n);case"data":return function(e,t){switch(t){case"A":return e.match(/^(\d{1,3}\.){3}\d{1,3}$/);case"AAAA":return e.match(/^[a-f0-9\:]+$/i);case"CNAME":case"MX":return a(e);case"TXT":return e.length>0&&e.length<256}}(n,i);case"protocol":return Object(r.includes)(["tcp","udp","tls"],n);case"weight":case"aux":case"port":const e=parseInt(n,10);return e>=0&&e<=65535;case"service":return n.match(/^[^\s\.]+$/);default:return!0}}({value:n,domainName:t,name:i,type:e.type})?[]:["Invalid"]})}function a(e){return!(e.length>253)&&/^([a-z0-9-_]{1,63}\.)*[a-z0-9-]{1,63}\.[a-z]{2,63}$/i.test(e)}function o(e,t){const n=Object.assign({},e);return n.data=u(e.data),n.name=function(e,t,n){const i=Object(r.endsWith)(e,"."+n);if(c(e,n)&&s(t))return n+".";if(i)return e.replace(new RegExp("\\.+"+n+"\\.?$","i"),"");return e}(e.name,e.type,t),e.target&&(n.target=u(e.target)),e.service&&(n.service=Object(r.trimStart)(e.service,"_")),n}function c(e,t){const n=["@",t,t+".","@."+t,"@."+t+"."];return!e||Object(r.includes)(n,e)}function s(e){return Object(r.includes)(["A","MX","SRV","TXT"],e)}function u(e){return"string"==typeof e&&e.match(/^([a-z0-9-_]+\.)+\.?[a-z]+$/i)?e+".":e}function d(e){return Object(r.startsWith)(e.id,"wpcom:")}function l(e){return Object(r.matches)({type:"A",name:"".concat(e,".")})}function m(e,t){const n=Object(r.filter)(t,l(e)),i=Object(r.find)(n,d),a=Object(r.find)(n,Object(r.negate)(d));return i&&a?Object(r.without)(t,i):t}function p(e,t){let n=t;if(!Object(r.some)(t,l(e))){const t={domain:e,id:"wpcom:A:".concat(e,".:").concat(e),name:"".concat(e,"."),protected_field:!0,type:"A"};n=n.concat([t])}if(!Object(r.some)(t,function(e){return Object(r.matches)({type:"NS",name:"".concat(e,".")})}(e))){const t={domain:e,id:"wpcom:NS:".concat(e,".:").concat(e),name:"".concat(e,"."),protected_field:!0,type:"NS"};n=n.concat([t])}return n}function f(e){return e.isBeingDeleted||e.isBeingAdded}function h(e,t){const n=Object(r.filter)(t,{type:"MX"});return"MX"===e.type&&1===n.length}},"./client/lib/domains/dns/store.js":function(e,t,n){"use strict";var r=n("./client/lib/store/index.js"),i=n("./node_modules/lodash/lodash.js"),a=n("./node_modules/immutability-helper/index.js"),o=n.n(a),c=n("./client/lib/upgrades/action-types.js"),s=n("./client/lib/domains/dns/index.js");function u(e,t,n){const r={[t]:{$set:Object.assign({},e[t]||{isFetching:!1,hasLoadedFromServer:!1,isSubmittingForm:!1,records:null},n)}};return o()(e,r)}function d(e,t,n){const r=m(e[t].records,n);if(-1===r)return e;const a={[t]:{records:{$apply:e=>{const n=Object(i.reject)(e,(e,t)=>r===t);return Object(s.a)(t,n)}}}};return o()(e,a)}function l(e,t,n,r){const i=m(e[t].records,n),a=Object.assign({},n,r);if(-1===i)return e;const c={[t]:{records:{[i]:{$merge:a}}}};return o()(e,c)}function m(e,t){const n=Object(i.pick)(t,["id","data","name","type"]);return Object(i.findIndex)(e,n)}const p=Object(r.a)(function(e,t){const n=t.action;switch(n.type){case c.t:e=u(e,n.domainName,{isFetching:!0});break;case c.u:e=u(e,n.domainName,{records:n.records,isFetching:!1,hasLoadedFromServer:!0});break;case c.v:e=u(e,n.domainName,{isFetching:!1});break;case c.m:e=function(e,t,n){const r=Object.assign({},n,{isBeingAdded:!0});return o()(e,{[t]:{isSubmittingForm:{$set:!0},records:{$apply:e=>{const n=e.concat([r]);return Object(s.e)(t,n)}}}})}(e,n.domainName,n.record);break;case c.n:e=l(e=u(e,n.domainName,{isSubmittingForm:!1}),n.domainName,n.record,{isBeingAdded:!1});break;case c.p:e=u(e,n.domainName,{records:n.records,isFetching:!1,hasLoadedFromServer:!0});break;case c.o:e=d(e=u(e,n.domainName,{isSubmittingForm:!1}),n.domainName,n.record);break;case c.q:e=l(e,n.domainName,n.record,{isBeingDeleted:!0});break;case c.r:e=d(e,n.domainName,n.record);break;case c.s:e=l(e,n.domainName,n.record,{isBeingDeleted:!1})}return e});p.getByDomainName=function(e){return this.get()[e]||{isFetching:!1,hasLoadedFromServer:!1,isSubmittingForm:!1,records:null}};t.a=p},"./client/lib/domains/index.js":function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"f",function(){return w}),n.d(t,"g",function(){return A}),n.d(t,"h",function(){return D}),n.d(t,"j",function(){return T}),n.d(t,"k",function(){return I}),n.d(t,"l",function(){return y}),n.d(t,"m",function(){return E}),n.d(t,"n",function(){return P}),n.d(t,"o",function(){return C}),n.d(t,"p",function(){return O}),n.d(t,"q",function(){return v}),n.d(t,"r",function(){return S}),n.d(t,"s",function(){return j}),n.d(t,"t",function(){return _}),n.d(t,"u",function(){return b}),n.d(t,"e",function(){return N}),n.d(t,"i",function(){return x});var r=n("./node_modules/inherits/inherits_browser.js"),i=n.n(r),a=n("./node_modules/lodash/lodash.js"),o=n("./packages/format-currency/dist/esm/index.js"),c=n.n(o),s=n("./client/lib/wp/browser.js"),u=n("./client/lib/domains/constants.js"),d=n("./client/lib/domains/utils.js"),l=n("./client/lib/domains/tlds/wpcom-multi-level-tlds.json");function m(e){this.code=e,this.message=e}function p(e,t,n){e&&t?s.a.undocumented().checkAuthCode(e,t,function(e,t){e?n({error:e.error,message:e.message}):n(null,t)}):n(null,{success:!1})}function f(e,t){const n=e.domainName,r=e.blogId,i=Object(a.get)(e,"isCartPreCheck",!1);n?s.a.undocumented().isDomainAvailable(n,r,i,function(e,n){e?t(e.error):t(null,n)}):t(null,{status:u.b.EMPTY_QUERY})}function h(e,t){e?s.a.undocumented().getInboundTransferStatus(e,function(e,n){e?t(e.error):t(null,n)}):t(null)}function b(e,t,n,r){t&&e?s.a.undocumented().startInboundTransfer(e,t,n,function(e,t){e?r(e.error):r(null,t)}):r(null)}function _(e,t){e?s.a.undocumented().resendInboundTransferEmail(e,function(e,n){e?t(e):t(null,n)}):t(null)}function g(e,t,n){t?(t.match(/^https?:\/\//i)||(t="http://"+t),s.a.undocumented().canRedirect(e,t,function(e,t){e?n(new m(e.error)):t.can_redirect?n(null):n(new m("cannot_redirect"))})):n(new m("empty_query"))}function y(e){return e.trim().toLowerCase().replace(/^(https?:\/\/)?(www[0-9]?\.)?/,"").replace(/^www[0-9]?\./,"").replace(/\/$/,"").replace(/_/g,"-")}function j(e){return e.match(/\..+\.[a-z]{2,3}\.[a-z]{2}$|\..+\.[a-z]{3,}$|\..{4,}\.[a-z]{2}$/)}function O(e,t){const n=Object(a.find)(t,["product_slug",e])||{};return Object(a.get)(n,"is_hsts_required",!1)}function v(e){return e.type===u.h.MAPPED}function E(e){let t=e.domains,n=e.selectedDomainName,r=e.isTransfer;return Object(a.find)(t,e=>e.name===n&&(!(!r||e.type!==u.h.TRANSFER)||e.type!==u.h.TRANSFER))}function S(e){return e.type===u.h.REGISTERED}function P(e){const t=e.lastIndexOf(".");if(-1===t)return"";let n=Object(d.f)(e,l);return n||(n=e.substring(t+1)),n}function C(e){return e.substring(e.lastIndexOf(".")+1)}function A(e){const t=P(e),n=Object(a.replace)(t,/\./g,"dot");return Object(a.includes)(["com","net","org"],n)?"domain_reg":"dot".concat(n,"_domain")}function w(e,t,n){let r=Object(a.get)(t,[e,"cost"],null);return r&&(r+=Object(a.get)(t,["domain_map","cost"],0),r=c()(r,n)),r}function D(e,t,n){const r=Object(a.get)(t,[e,"sale_cost"],null),i=Object(a.get)(t,[e,"sale_coupon","allowed_for_new_purchases"],null);return r&&i?c()(r,n):null}function T(e,t,n){const r=Object(a.get)(t,[e,"sale_cost"],null),i=Object(a.get)(t,[e,"sale_coupon","allowed_for_domain_transfers"],null);return r&&i?c()(r,n):null}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.a.undocumented().getAvailableTlds(e)}function I(){switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type){case u.h.MAPPED:return"Mapped Domain";case u.h.REGISTERED:return"Registered Domain";case u.h.SITE_REDIRECT:return"Site Redirect";case u.h.WPCOM:return"Wpcom Domain";case u.h.TRANSFER:return"Transfer";default:return""}}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=y(e);if(n.length<t)return"";return Object(a.includes)(["www","http","https"],n)?"":n}i()(m,Error)},"./client/lib/domains/nameservers/store.js":function(e,t,n){"use strict";var r=n("./client/lib/store/index.js"),i=n("./node_modules/immutability-helper/index.js"),a=n.n(i),o=n("./client/lib/upgrades/action-types.js");const c={isFetching:!1,hasLoadedFromServer:!1,error:!1,list:null};function s(e,t,n){const r={[t]:{$set:Object.assign({},e[t]||c,n)}};return a()(e,r)}const u=Object(r.a)(function(e,t){const n=t.action;switch(n.type){case o.C:e=s(e,n.domainName,{isFetching:!0,error:!1});break;case o.E:e=s(e,n.domainName,{isFetching:!1,error:!0});break;case o.D:case o.F:e=s(e,n.domainName,{isFetching:!1,hasLoadedFromServer:!0,list:n.nameservers})}return e});u.getByDomainName=function(e){return this.get()[e]||c};t.a=u},"./client/lib/domains/tlds/wpcom-multi-level-tlds.json":function(e){e.exports={"co.in":1,"com.br":0,"firm.in":1,"gen.in":1,"ind.in":1,"net.br":0,"net.in":1,"org.in":1}},"./client/lib/domains/wapi-domain-info/store.js":function(e,t,n){"use strict";var r=n("./client/lib/store/index.js"),i=n("./node_modules/immutability-helper/index.js"),a=n.n(i),o=n("./node_modules/lodash/lodash.js"),c=n("./client/lib/upgrades/action-types.js");const s={hasLoadedFromServer:!1,data:null,needsUpdate:!0};function u(e,t,n){const r={[t]:{$set:Object.assign({},e[t]||s,n)}};return a()(e,r)}const d=Object(r.a)(function(e,t){const n=t.action;switch(n.type){case c.U:return u(e,n.domainName,{needsUpdate:!1});case c.V:return u(e,n.domainName,{hasLoadedFromServer:!0,data:n.status,needsUpdate:!1});case c.W:return u(e,n.domainName,{needsUpdate:!0});case c.x:return u(e,n.domainName,{data:Object.assign({},e[n.domainName].data,{locked:n.locked,pendingTransfer:!1})});case c.H:return u(e,n.domainName,{data:Object.assign({},Object(o.get)(e[n.domainName],"data",{}),{pendingTransfer:!1})});case c.y:const t=e[n.domainName].data,r=!n.unlock&&t.locked;return u(e,n.domainName,{data:Object.assign({},e[n.domainName].data,{locked:r}),needsUpdate:!0});case c.w:case c.z:return u(e,n.domainName,{data:Object.assign({},e[n.domainName].data,{pendingTransfer:!1})});default:return e}},{});d.getByDomainName=function(e){const t=this.get();return t&&t[e]||s};t.a=d},"./client/lib/domains/whois/constants.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r={REGISTRANT:"registrant",PRIVACY_SERVICE:"privacy_service"}},"./client/lib/domains/whois/store.js":function(e,t,n){"use strict";var r=n("./client/lib/store/index.js"),i=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),a=n.n(i),o=n("./node_modules/lodash/lodash.js"),c=n("./node_modules/immutability-helper/index.js"),s=n.n(c),u=n("./client/lib/upgrades/action-types.js"),d=n("./client/lib/domains/whois/constants.js");const l={data:null,hasLoadedFromServer:!1,isFetching:!1,needsUpdate:!0};function m(e,t,n){const r={[t]:{$set:Object.assign({},e[t]||l,n)}};return s()(e,r)}const p=Object(r.a)(function(e,t){const n=t.action;switch(n.type){case u.X:e=m(e,n.domainName,{isFetching:!0,needsUpdate:!1});break;case u.Z:e=m(e,n.domainName,{isFetching:!1,needsUpdate:!0});break;case u.Y:e=m(e,n.domainName,{data:n.data,hasLoadedFromServer:!0,isFetching:!1,needsUpdate:!1});break;case u.ab:e=m(e,n.domainName,{needsUpdate:!0,data:(r=e[n.domainName],i=n.registrantContactDetails,Object(o.isArray)(r.data)?r.data.map(e=>e.type===d.a.REGISTRANT?a()({},e,i):e):[a()({},i,{type:d.a.REGISTRANT})])})}var r,i;return e});p.getByDomainName=function(e){return this.get()[e]||l};t.a=p},"./client/lib/postal-code/index.jsx":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r=n("./node_modules/lodash/lodash.js");function i(e,t){if(!t)return e;const n=Object(r.get)({BR:{length:[8],delimiter:"-",partLength:5},CA:{length:[6],delimiter:" ",partLength:3},GB:{length:[5,6,7],delimiter:" ",formatter:(e,t)=>e.substring(0,e.length-3)+t+e.substring(e.length-3)},IE:{length:[7],delimiter:" ",partLength:3},JP:{length:[7],delimiter:"-",partLength:3},KY:{length:[7],delimiter:"-",partLength:3},NL:{length:[6],delimiter:" ",partLength:4},PL:{length:[5],delimiter:"-",partLength:2},PT:{length:[7],delimiter:"-",partLength:4},SE:{length:[5],delimiter:" ",partLength:3}},t,!1);if(!n)return e;const i=Object(r.replace)(e,/[\s-]/g,"");return Object(r.includes)(n.length,i.length)?n.formatter?n.formatter(i,n.delimiter):function(e,t,n){return e.substring(0,n)+t+e.substring(n)}(i,n.delimiter,n.partLength):e}const a={US:/^\d{5}$/};function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"US";if(!e)return!1;const n=a[t];return!n||n.test(e)}},"./client/lib/products-list/index.js":function(e,t,n){"use strict";var r=n("./node_modules/debug/src/browser.js"),i=n.n(r),a=n("./client/lib/wp/browser.js"),o=n("./client/lib/mixins/emitter/index.js");const c=i()("calypso:ProductsList");function s(){if(!(this instanceof s))return new s;this.initialized=!1}Object(o.a)(s.prototype),s.prototype.get=function(){let e;if(!this.data){if(c("First time loading ProductsList, check store"),"undefined"!=typeof localStorage)try{e=JSON.parse(localStorage.getItem("ProductsList"))}catch(e){}e?this.initialize(e):this.data={},this.fetch()}return this.data},s.prototype.fetch=function(){c("getting ProductsList from api"),this.isFetching=!0,a.a.undocumented().getProducts(function(e,t){if(e)return void c("error fetching ProductsList from api",e);const n=t;if(c("ProductsList fetched from api:",n),this.initialized?this.data=n:this.initialize(n),this.isFetching=!1,this.emit("change"),"undefined"!=typeof localStorage)try{localStorage.setItem("ProductsList",JSON.stringify(n))}catch(e){}}.bind(this))},s.prototype.initialize=function(e){this.data=e,this.initialized=!0},s.prototype.hasLoadedFromServer=function(){return this.initialized};const u=new s;t.a=function(){return u.hasLoadedFromServer()||u.isFetching||u.get(),u}},"./client/lib/products-values/sort.js":function(e,t,n){"use strict";var r=n("./node_modules/lodash/lodash.js"),i=n("./client/lib/purchases/index.js"),a=n("./client/lib/products-values/index.js");t.a=function(e){let t,n,o,c,s;return t=e.filter(a.K),n=e.filter(i.o),o=(o=Object(r.difference)(e,n)).filter(a.r),o=Object(r.toPairs)(Object(r.groupBy)(o,"meta")),o=(o=Object(r.sortBy)(o,function(e){return e[1][0]&&0===e[1][0].cost?-1:e[0]})).map(function(e){return Object(r.sortBy)(e[1],a.d)}),o=Object(r.flatten)(o),c=e.filter(a.m),s=Object(r.difference)(e,t,o,n,c),t.concat(n).concat(o).concat(s).concat(c)}},"./client/lib/purchases/index.js":function(e,t,n){"use strict";n.d(t,"a",function(){return L}),n.d(t,"c",function(){return F}),n.d(t,"d",function(){return z}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return V}),n.d(t,"i",function(){return _}),n.d(t,"j",function(){return g}),n.d(t,"k",function(){return y}),n.d(t,"l",function(){return j}),n.d(t,"q",function(){return R}),n.d(t,"s",function(){return k}),n.d(t,"r",function(){return P}),n.d(t,"m",function(){return O}),n.d(t,"n",function(){return v}),n.d(t,"o",function(){return E}),n.d(t,"p",function(){return S}),n.d(t,"t",function(){return w}),n.d(t,"u",function(){return D}),n.d(t,"v",function(){return T}),n.d(t,"w",function(){return N}),n.d(t,"x",function(){return I}),n.d(t,"y",function(){return x}),n.d(t,"z",function(){return A}),n.d(t,"A",function(){return B}),n.d(t,"B",function(){return q}),n.d(t,"b",function(){return C}),n.d(t,"C",function(){return U}),n.d(t,"D",function(){return W});var r=n("./node_modules/lodash/lodash.js"),i=n("./node_modules/moment/moment.js"),a=n.n(i),o=n("./node_modules/page/page.js"),c=n.n(o),s=n("./packages/i18n-calypso/dist/esm/index.js"),u=n.n(s),d=n("./client/lib/analytics/index.js"),l=n("./client/lib/cart-values/index.js"),m=n("./client/lib/products-values/index.js"),p=n("./client/lib/upgrades/actions/index.js");function f(e){return e.includedDomain}function h(e,t){return e.reduce((e,n)=>{const i=Object(r.find)(e,{id:n.siteId});if(i)i.purchases=i.purchases.concat(n);else{const i=Object(r.find)(t,{ID:n.siteId});e=e.concat({id:n.siteId,name:n.siteName,slug:i?i.slug:n.domain,isDomainOnly:!!i&&i.options.is_domain_only,title:n.siteName||n.domain||"",purchases:[n],domain:i?i.domain:n.domain})}return e},[]).sort((e,t)=>e.title.toLowerCase()>t.title.toLowerCase()?1:-1)}function b(e){return Object(m.t)(e)?e.meta:e.productName}function _(e){return e.expiryMoment.format("LL")}function g(e,t){const n=[l.c.getRenewalItemFromProduct(e,{domain:e.meta})];d.default.tracks.recordEvent("calypso_purchases_renew_now_click",{product_slug:e.productSlug}),Object(p.d)(n),c()("/checkout/"+t)}function y(e){return Boolean(e.includedDomain)}function j(e){return!E(e)&&(!function(e){return e.pendingTransfer}(e)&&(!O(e)&&(!!w(e)||e.canDisableAutoRenew)))}function O(e){return"expired"===e.expiryStatus}function v(e){return Object(r.includes)(["cardExpired","cardExpiring","manualRenew","expiring"],e.expiryStatus)}function E(e){return"included"===e.expiryStatus}function S(e){return"oneTimePurchase"===e.expiryStatus}function P(e){return void 0!==e.payment&&"credits"===e.payment.type}function C(e){return R(e)&&"WPCOM_Billing_Ebanx"!==e.payment.creditCard.processor}function A(e){return!!w(e)||void 0!==e.subscribedDate&&void 0!==e.refundPeriodInDays&&a()().diff(a()(e.subscribedDate),"days")<=e.refundPeriodInDays}function w(e){return e.isRefundable}function D(e){return!E(e)&&(!Object(m.l)(e)&&(Object(m.F)(e)||v(e)||O(e)||Object(m.u)(e)&&!w(e)&&function(e){return e.isCancelable}(e)))}function T(e){return e.isRenewable}function N(e){return e.isRenewal}function I(e){return Object(r.includes)(["active","autoRenewing"],e.expiryStatus)}function x(e){return![m.t,S].some(t=>t(e))}function R(e){return"credit_card"===e.payment.type&&M(e)}function k(e){return"paypal_direct"===e.payment.type&&e.payment.expiryMoment}function M(e){return Boolean(e.payment.creditCard.expiryMoment)}function L(e){return e.canExplicitRenew}function F(e){return R(e)&&M(e)&&e.payment.creditCard.expiryMoment.diff(e.expiryMoment,"months")<0}function W(e){return void 0!==e.subscribedDate&&a()(e.subscribedDate).diff(a()(),"days")>=-7}function B(e){return R(e)?e.payment.creditCard.type:k(e)?"placeholder":e.payment.type||null}function q(e){return Object(m.O)(e)?u.a.translate("Premium Theme"):Object(m.l)(e)?u.a.translate("One-on-one Support"):Object(m.K)(e)?u.a.translate("Site Plan"):Object(m.t)(e)?e.productName:e.meta?e.meta:null}function V(e){return e.saleAmount||e.amount}function U(e){return!E(e)&&R(e)&&F(e)&&function(e){return e.payment.creditCard.expiryMoment.diff(a()(),"months")}(e)<3}function z(e){return e.domainRegistrationAgreementUrl}},"./client/lib/store-transactions/index.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),i=n.n(r),a=n("./node_modules/lodash/lodash.js"),o=n("./node_modules/debug/src/browser.js"),c=n.n(o),s=n("./node_modules/inherits/inherits_browser.js"),u=n.n(s),d=n("./client/lib/load-script/index.js");const l=c()("calypso:payment-gateway");function m(){if(!(this instanceof m))return new m}m.prototype.ready=function(e,t){return new Promise((n,r)=>{window[t]?n(window[t]):Object(d.a)(e,function(e){e?r(e):(l("Payment gateway "+t+" loaded for the first time"),n(window[t]))})})};var p=new m,f=n("./client/lib/checkout/index.js"),h=n("./client/lib/store-transactions/step-types.js"),b=n("./client/lib/wp/browser.js"),_=n("./client/lib/checkout/processor-specific.js"),g=n("./client/lib/analytics/index.js");n.d(t,"f",function(){return O}),n.d(t,"a",function(){return C}),n.d(t,"c",function(){return A}),n.d(t,"d",function(){return w}),n.d(t,"e",function(){return D}),n.d(t,"b",function(){return T});const y=c()("calypso:store-transactions"),j=b.a.undocumented();function O(e,t){return new E(e,t)}function v(e,t){this.code=e,this.message=t}function E(e,t){this._initialData=e,this._onStep=t;const n=this._initialData.payment.paymentMethod,r=this._paymentHandlers[n];if(!r)throw new Error("Invalid payment method: "+n);r.call(this)}function S(e,t,n){function r(e){if(e.is_error)return n(new Error("Paygate Response Error: "+e.error_msg));e.paymentMethod="WPCOM_Billing_MoneyPress_Paygate",n(null,e)}function a(){n(new Error("Paygate Request Error"))}y("creating token with Paygate"),j.paygateConfiguration({request_type:e,country:t.country,card_brand:t.brand},function(e,o){e?n(e):p.ready(o.js_url,"Paygate").then(e=>{e.setProcessor(o.processor),e.setApiUrl(o.api_url),e.setPublicKey(o.public_key),e.setEnvironment(o.environment);const n=function(e){if(e.tokenized_payment_data)return{token:i()({name:e.name,zip:e["postal-code"],country:e.country,card_display_name:e.card_display_name},e.tokenized_payment_data)};return{name:e.name,number:e.number,cvc:e.cvv,zip:e["postal-code"],country:e.country,exp_month:e["expiration-date"].substring(0,2),exp_year:"20"+e["expiration-date"].substring(3,5)}}(t);e.createToken(n,r,a)}).catch(e=>{n(e)})})}function P(e,t){return y("creating token with ebanx"),new Promise(function(n,r){j.ebanxConfiguration({request_type:e},function(e,i){return e&&r(e),p.ready(i.js_url,"EBANX",!1).then(e=>{e.config.setMode(i.environment),e.config.setPublishableKey(i.public_key),e.config.setCountry(t.country.toLowerCase());const a=function(e){return{card_name:e.name,card_number:e.number,card_cvv:e.cvv,card_due_date:e["expiration-date"].substring(0,2)+"/20"+e["expiration-date"].substring(3,5)}}(t);e.card.createToken(a,function(t){e.deviceFingerprint.setup(function(e){return t.data.deviceId=e,function(e,t,n){if(e.error.hasOwnProperty("err"))return n(Object(_.f)(e.error.err));return e.data.paymentMethod="WPCOM_Billing_Ebanx",t(e.data)}(t,n,r)})})}).catch(e=>{r(e)})})})}function C(e,t,n){return!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])&&Object(_.b)(t.country)?P(e,t).then(e=>n(null,e),function(r){return g.default.mc.bumpStat("cc_token_fallback","ebanx_to_paygate"),y("Error creating EBANX token, falling back to paygate",r),C(e,t,n,!0)}):S(e,t,n)}function A(e){return!Object(a.isEmpty)(e.domainDetails)}function w(e){return{paymentMethod:"WPCOM_Billing_MoneyPress_Paygate",newCardDetails:e||{}}}function D(e){return{paymentMethod:"WPCOM_Billing_MoneyPress_Stored",storedCard:e}}u()(v,Error),E.prototype._pushStep=function(e){const t={first:!1,last:!1,timestamp:Date.now()};this._onStep(Object.assign(t,e))},E.prototype._paymentHandlers={WPCOM_Billing_MoneyPress_Stored:function(){const e=this._initialData.payment.storedCard,t=e.mp_ref,n=e.stored_details_id,r=e.payment_partner,i=this._initialData,a=i.successUrl,o=i.cancelUrl;this._pushStep({name:h.b,first:!0}),y("submitting transaction with stored card"),this._submitWithPayment({payment_method:"WPCOM_Billing_MoneyPress_Stored",payment_key:t,payment_partner:r,stored_details_id:n,successUrl:a,cancelUrl:o})},WPCOM_Billing_MoneyPress_Paygate:function(){const e=this._initialData.payment.newCardDetails,t=this._initialData,n=t.successUrl,r=t.cancelUrl,o=e.tokenized_payment_data?"token":void 0,c=Object(f.e)(e,o);Object(a.isEmpty)(c.errors)?(this._pushStep({name:h.b,first:!0}),y("submitting transaction with new card"),this._createCardToken(function(t){const a=e.name,o=e.country,c=e["postal-code"];let s={payment_method:t.paymentMethod,payment_key:t.token,name:a,zip:c,country:o,successUrl:n,cancelUrl:r};if(Object(_.b)(o)){const n={state:e.state,city:e.city,address_1:e["address-1"],address_2:e["address-2"],street_number:e["street-number"],phone_number:e["phone-number"],document:e.document,device_id:t.deviceId};s=i()({},s,n)}this._submitWithPayment(s)}.bind(this))):this._pushStep({name:h.b,error:new v("invalid-card-details",c.errors),first:!0,last:!0})},WPCOM_Billing_WPCOM:function(){this._pushStep({name:h.b,first:!0}),this._submitWithPayment({payment_method:"WPCOM_Billing_WPCOM"})}},E.prototype._createCardToken=function(e){this._pushStep({name:h.f}),C("new_purchase",this._initialData.payment.newCardDetails,function(t,n){if(t)return this._pushStep({name:h.c,error:t,last:!0});this._pushStep({name:h.c}),e(n)}.bind(this))},E.prototype._submitWithPayment=function(e){const t={cart:Object(a.omit)(this._initialData.cart,["messages"]),domain_details:this._initialData.domainDetails,payment:e};this._pushStep({name:h.g}),j.transactions("POST",t,(e,t)=>e?this._pushStep({name:h.d,error:e,last:!0}):t.redirect_url?this._pushStep({name:h.e,data:t,last:!0}):void this._pushStep({name:h.d,data:t,last:!0}))};const T={paymentMethod:"WPCOM_Billing_WPCOM"}},"./client/lib/store-transactions/step-types.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return u});const r="before-submit",i="input-validation",a="received-payment-key-response",o="received-wpcom-response",c="redirecting-for-authorization",s="submitting-payment-key-request",u="submitting-wpcom-request"},"./client/lib/upgrades/action-types.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"i",function(){return l}),n.d(t,"j",function(){return m}),n.d(t,"k",function(){return p}),n.d(t,"l",function(){return f}),n.d(t,"m",function(){return h}),n.d(t,"n",function(){return b}),n.d(t,"o",function(){return _}),n.d(t,"p",function(){return g}),n.d(t,"q",function(){return y}),n.d(t,"r",function(){return j}),n.d(t,"s",function(){return O}),n.d(t,"t",function(){return v}),n.d(t,"u",function(){return E}),n.d(t,"v",function(){return S}),n.d(t,"w",function(){return P}),n.d(t,"x",function(){return C}),n.d(t,"y",function(){return A}),n.d(t,"z",function(){return w}),n.d(t,"A",function(){return D}),n.d(t,"B",function(){return T}),n.d(t,"C",function(){return N}),n.d(t,"D",function(){return I}),n.d(t,"E",function(){return x}),n.d(t,"F",function(){return R}),n.d(t,"G",function(){return k}),n.d(t,"H",function(){return M}),n.d(t,"I",function(){return L}),n.d(t,"J",function(){return F}),n.d(t,"K",function(){return W}),n.d(t,"L",function(){return B}),n.d(t,"M",function(){return q}),n.d(t,"N",function(){return V}),n.d(t,"O",function(){return U}),n.d(t,"P",function(){return z}),n.d(t,"Q",function(){return $}),n.d(t,"R",function(){return H}),n.d(t,"S",function(){return G}),n.d(t,"T",function(){return Y}),n.d(t,"U",function(){return X}),n.d(t,"V",function(){return K}),n.d(t,"W",function(){return J}),n.d(t,"X",function(){return Q}),n.d(t,"Y",function(){return Z}),n.d(t,"Z",function(){return ee}),n.d(t,"ab",function(){return te});const r="CART_COUPON_APPLY",i="CART_COUPON_REMOVE",a="CART_DISABLE",o="CART_ITEM_REMOVE",c="CART_ITEM_REPLACE",s="CART_ITEMS_ADD",u="CART_ITEMS_REPLACE_ALL",d="CART_ON_MOBILE_SHOW",l="CART_PRIVACY_PROTECTION_ADD",m="CART_PRIVACY_PROTECTION_REMOVE",p="CART_TAX_COUNTRY_CODE_SET",f="CART_TAX_POSTAL_CODE_SET",h="DNS_ADD",b="DNS_ADD_COMPLETED",_="DNS_ADD_FAILED",g="DNS_APPLY_TEMPLATE_COMPLETED",y="DNS_DELETE",j="DNS_DELETE_COMPLETED",O="DNS_DELETE_FAILED",v="DNS_FETCH",E="DNS_FETCH_COMPLETED",S="DNS_FETCH_FAILED",P="DOMAIN_TRANSFER_ACCEPT_COMPLETED",C="DOMAIN_TRANSFER_CANCEL_REQUEST_COMPLETED",A="DOMAIN_TRANSFER_CODE_REQUEST_COMPLETED",w="DOMAIN_TRANSFER_DECLINE_COMPLETED",D="GOOGLE_APPS_REGISTRATION_DATA_ADD",T="ICANN_VERIFICATION_RESEND_COMPLETED",N="NAMESERVERS_FETCH",I="NAMESERVERS_FETCH_COMPLETED",x="NAMESERVERS_FETCH_FAILED",R="NAMESERVERS_UPDATE_COMPLETED",k="PRIMARY_DOMAIN_SET",M="PRIVACY_PROTECTION_ENABLE_COMPLETED",L="SITE_REDIRECT_FETCH",F="SITE_REDIRECT_FETCH_COMPLETED",W="SITE_REDIRECT_FETCH_FAILED",B="SITE_REDIRECT_NOTICE_CLOSE",q="SITE_REDIRECT_UPDATE",V="SITE_REDIRECT_UPDATE_COMPLETED",U="SITE_REDIRECT_UPDATE_FAILED",z="TRANSACTION_DOMAIN_DETAILS_SET",$="TRANSACTION_NEW_CREDIT_CARD_DETAILS_SET",H="TRANSACTION_PAYMENT_SET",G="TRANSACTION_RESET",Y="TRANSACTION_STEP_SET",X="WAPI_DOMAIN_INFO_FETCH",K="WAPI_DOMAIN_INFO_FETCH_COMPLETED",J="WAPI_DOMAIN_INFO_FETCH_FAILED",Q="WHOIS_FETCH",Z="WHOIS_FETCH_COMPLETED",ee="WHOIS_FETCH_FAILED",te="WHOIS_UPDATE_COMPLETED"},"./client/lib/upgrades/actions/cart.js":function(e,t,n){"use strict";n.d(t,"f",function(){return c}),n.d(t,"o",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"j",function(){return d}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return m}),n.d(t,"k",function(){return p}),n.d(t,"i",function(){return f}),n.d(t,"l",function(){return h}),n.d(t,"a",function(){return b}),n.d(t,"h",function(){return _}),n.d(t,"e",function(){return g}),n.d(t,"g",function(){return y}),n.d(t,"m",function(){return j}),n.d(t,"n",function(){return O});var r=n("./node_modules/lodash/lodash.js"),i=n("./client/lib/upgrades/action-types.js"),a=n("./client/dispatcher/index.js"),o=n("./client/lib/cart-values/index.js");n("./client/lib/cart/store/index.js");function c(){a.a.handleViewAction({type:i.c})}function s(e){a.a.handleViewAction({type:i.h,show:e})}function u(){a.a.handleViewAction({type:i.i})}function d(){a.a.handleViewAction({type:i.j})}function l(e){m([e])}function m(e){const t=e.map(e=>{const t=Object(r.assign)({},e.extra,{context:"calypstore"});return Object(r.assign)({},e,{extra:t})});a.a.handleViewAction({type:i.d,cartItems:t})}function p(e){const t=e.map(e=>{const t=Object(r.assign)({},e.extra,{context:"calypstore"});return Object(r.assign)({},e,{extra:t})});a.a.handleViewAction({type:i.e,cartItems:t})}function f(e,t){a.a.handleViewAction({type:i.f,cartItem:e,domainsWithPlansOnly:t})}function h(e,t){a.a.handleViewAction({type:i.g,oldItem:e,newItem:t})}function b(e){a.a.handleViewAction({type:i.A,registrationData:e})}function _(e){f(o.c.domainRegistration({domain:e.domain_name,productSlug:e.product_slug}))}function g(e){a.a.handleViewAction({type:i.a,coupon:e})}function y(){a.a.handleViewAction({type:i.b})}function j(e){a.a.handleViewAction({type:i.k,countryCode:e})}function O(e){a.a.handleViewAction({type:i.l,postalCode:e})}},"./client/lib/upgrades/actions/domain-management.js":function(e,t,n){"use strict";var r=n("./node_modules/lodash/lodash.js"),i=n("./packages/i18n-calypso/dist/esm/index.js"),a=n.n(i),o=n("./client/lib/upgrades/action-types.js"),c=n("./client/dispatcher/index.js"),s=n("./client/lib/domains/dns/store.js"),u=n("./client/lib/domains/nameservers/store.js"),d=n("./client/state/sites/actions.js");var l={createDomainObject:function(e){return{locked:e.locked,pendingTransfer:e.pending_transfer,transferProhibited:e.transfer_prohibited}}},m=n("./client/lib/domains/wapi-domain-info/store.js"),p=n("./client/lib/domains/whois/constants.js");function f(e,t){const n=Object(r.find)(e,{type:t})||{};return{firstName:n.fname||"",lastName:n.lname||"",organization:n.org||"",address1:n.sa1||"",address2:n.sa2||"",city:n.city||"",state:n.state||"",stateName:n.sp||"",postalCode:n.pc||"",countryCode:n.country_code||"",countryName:n.cc||"",email:n.email||"",phone:n.phone||"",fax:n.fax||"",type:t}}var h={createDomainWhois:function(e){return[f(e,p.a.REGISTRANT),f(e,p.a.PRIVACY_SERVICE)]}},b=n("./client/lib/domains/whois/store.js"),_=n("./client/lib/wp/browser.js"),g=n("./node_modules/debug/src/browser.js"),y=n.n(g),j=n("./client/lib/domains/dns/index.js"),O=n("./client/state/sites/domains/actions.js");n.d(t,"p",function(){return S}),n.d(t,"l",function(){return P}),n.d(t,"s",function(){return C}),n.d(t,"h",function(){return A}),n.d(t,"a",function(){return w}),n.d(t,"e",function(){return D}),n.d(t,"b",function(){return T}),n.d(t,"i",function(){return N}),n.d(t,"q",function(){return I}),n.d(t,"o",function(){return x}),n.d(t,"d",function(){return R}),n.d(t,"j",function(){return k}),n.d(t,"r",function(){return M}),n.d(t,"k",function(){return L}),n.d(t,"n",function(){return F}),n.d(t,"c",function(){return W}),n.d(t,"g",function(){return B}),n.d(t,"f",function(){return q}),n.d(t,"m",function(){return V});const v=y()("actions:domain-management"),E=_.a.undocumented(),S=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.noop;return r=>{v("setPrimaryDomain",e,t),c.a.handleViewAction({type:o.G,siteId:e}),E.setPrimaryDomain(e,t,(t,i)=>{if(t)return n(t,i);Object(O.a)(e)(r).then(()=>{n(null,i),Object(d.e)(e)(r)})})}};function P(e){b.a.getByDomainName(e).needsUpdate&&(c.a.handleViewAction({type:o.X,domainName:e}),E.fetchWhois(e,(t,n)=>{t?c.a.handleServerAction({type:o.Z,domainName:e}):c.a.handleServerAction({type:o.Y,domainName:e,data:h.createDomainWhois(n)})}))}function C(e,t,n,r){E.updateWhois(e,t,n,(n,i)=>{n||(c.a.handleServerAction({type:o.ab,domainName:e,registrantContactDetails:t}),setTimeout(()=>{c.a.handleServerAction({type:o.ab,domainName:e,registrantContactDetails:t})},6e4)),r(n,i)})}function A(e){const t=s.a.getByDomainName(e);t.isFetching||t.hasLoadedFromServer||(c.a.handleViewAction({type:o.t,domainName:e}),E.fetchDns(e,(t,n)=>{t?c.a.handleServerAction({type:o.v,domainName:e}):c.a.handleServerAction({type:o.u,records:n&&n.records,domainName:e})}))}function w(e,t,n){c.a.handleServerAction({type:o.m,domainName:e,record:t});const r=s.a.getByDomainName(e);E.updateDns(e,r.records,r=>{const i=r?o.o:o.n;c.a.handleServerAction({type:i,domainName:e,record:t}),n(r)})}function D(e,t,n){if(Object(j.c)(t))return;c.a.handleServerAction({type:o.q,domainName:e,record:t});const r=s.a.getByDomainName(e);E.updateDns(e,r.records,r=>{const i=r?o.s:o.r;c.a.handleServerAction({type:i,domainName:e,record:t}),n(r)})}function T(e,t,n,r,i){E.applyDnsTemplate(e,t,n,r,(t,n)=>{t||c.a.handleServerAction({type:o.p,records:n&&n.records,domainName:e}),i(t)})}function N(e){const t=u.a.getByDomainName(e);t.isFetching||t.hasLoadedFromServer||(c.a.handleViewAction({type:o.C,domainName:e}),E.nameservers(e,(t,n)=>{t?c.a.handleServerAction({type:o.E,domainName:e}):c.a.handleServerAction({type:o.D,domainName:e,nameservers:n})}))}function I(e,t,n){const r=t.map(e=>({nameserver:e}));E.updateNameservers(e,{nameservers:r},r=>{r||c.a.handleServerAction({type:o.F,domainName:e,nameservers:t}),n(r)})}function x(e,t){E.resendIcannVerification(e,n=>{n||c.a.handleServerAction({type:o.B,domainName:e}),t(n)})}function R(e){c.a.handleViewAction({type:o.L,siteId:e})}function k(e){c.a.handleViewAction({type:o.I,siteId:e}),E.getSiteRedirect(e,(t,n)=>{n&&n.location?c.a.handleServerAction({type:o.J,location:n.location,siteId:e}):t&&t.message?c.a.handleServerAction({type:o.K,error:t.message,siteId:e}):c.a.handleServerAction({type:o.K,error:a.a.translate("There was a problem retrieving the redirect settings. Please try again later or contact support."),siteId:e})})}function M(e,t,n){c.a.handleViewAction({type:o.M,siteId:e}),E.setSiteRedirect(e,t,(r,i)=>{let s=!1;i&&i.success?(c.a.handleServerAction({type:o.N,location:t,siteId:e,success:a.a.translate("The redirect settings were updated successfully.")}),s=!0):r&&r.message?c.a.handleServerAction({type:o.O,error:r.message,siteId:e}):c.a.handleServerAction({type:o.O,error:a.a.translate("There was a problem updating the redirect settings. Please try again later or contact support."),siteId:e}),n(s)})}function L(e){m.a.getByDomainName(e).needsUpdate&&(c.a.handleViewAction({type:o.U,domainName:e}),E.fetchWapiDomainInfo(e,(t,n)=>{t?c.a.handleServerAction({type:o.W,error:t,domainName:e}):c.a.handleServerAction({type:o.V,status:l.createDomainObject(n),domainName:e})}))}function F(e,t){const n=e.siteId,r=e.domainName,i=e.unlock,a=e.disablePrivacy;E.requestTransferCode(e,e=>{e?t(e):(c.a.handleServerAction({type:o.y,siteId:n,domainName:r,unlock:i,disablePrivacy:a}),t(null))})}function W(e,t){E.cancelTransferRequest(e,n=>{n?t(n):(c.a.handleServerAction({type:o.x,domainName:e.domainName,locked:e.lockDomain}),e.enablePrivacy&&c.a.handleServerAction({type:o.H,siteId:e.siteId,domainName:e.domainName}),t(null))})}function B(e,t){E.enablePrivacyProtection(e,n=>{n?t(n):(c.a.handleServerAction({type:o.H,domainName:e}),t(null))})}function q(e,t){E.disablePrivacyProtection(e,e=>{t(e||null)})}function V(e,t){E.requestGdprConsentManagementLink(e,t)}},"./client/lib/upgrades/actions/index.js":function(e,t,n){"use strict";var r=n("./client/lib/upgrades/actions/cart.js"),i=n("./node_modules/lodash/lodash.js"),a=n("./client/lib/upgrades/action-types.js"),o=n("./client/dispatcher/index.js"),c=n("./client/lib/store-transactions/index.js");function s(e){o.a.handleViewAction({type:a.P,domainDetails:e})}function u(e){o.a.handleViewAction({type:a.R,payment:e})}function d(e){const t=e.rawDetails,n=e.maskedDetails;o.a.handleViewAction({type:a.Q,rawDetails:t,maskedDetails:n})}function l(e,t){let n=e.cart,r=e.transaction,s=e.successUrl,u=e.cancelUrl;Object(c.f)({cart:n,payment:r.payment,domainDetails:r.domainDetails,successUrl:s,cancelUrl:u},e=>Object(i.defer)(()=>{o.a.handleViewAction({type:a.T,step:e}),t&&"received-wpcom-response"===e.name&&t(e.error,e.data)}))}function m(){o.a.handleViewAction({type:a.S})}var p=n("./client/lib/upgrades/actions/domain-management.js"),f=n("./client/lib/gsuite/index.js"),h=n("./node_modules/page/page.js"),b=n.n(h),_=n("./client/lib/user/index.js");const g=Object(_.default)();function y(e,t){g.get().is_valid_google_apps_country&&Object(f.a)(e.domain_name)?b()("/domains/add/"+e.domain_name+"/google-apps/"+t):b()("/checkout/"+t)}n("./client/lib/cart-values/index.js");var j=n("./client/lib/products-list/index.js");Object(j.a)();var O=n("./node_modules/debug/src/browser.js"),v=n.n(O),E=n("./client/lib/wp/browser.js"),S=n("./client/notices/index.js");const P=v()("calypso:upgrades:actions:purchases"),C=E.a.undocumented();function A(e,t){C.cancelPurchase(e,(e,n)=>{P(e,n);const r=!e&&n.success;t(r)})}function w(e,t,n){C.cancelAndRefundPurchase(e,t,n)}function D(e,t,n){const r=E.a.marketing().survey(e,t);r.addResponses(n),P("Survey responses",r),r.submit().then(e=>{P("Survey submit response",e),e.success||S.a.error(e.err)}).catch(e=>P(e))}n.d(t,"b",function(){return r.a}),n.d(t,"c",function(){return r.b}),n.d(t,"d",function(){return r.c}),n.d(t,"e",function(){return r.d}),n.d(t,"f",function(){return r.e}),n.d(t,"v",function(){return r.g}),n.d(t,"m",function(){return r.f}),n.d(t,"w",function(){return r.h}),n.d(t,"x",function(){return r.i}),n.d(t,"y",function(){return r.j}),n.d(t,"z",function(){return r.k}),n.d(t,"A",function(){return r.l}),n.d(t,"J",function(){return r.o}),n.d(t,"E",function(){return m}),n.d(t,"F",function(){return s}),n.d(t,"G",function(){return d}),n.d(t,"H",function(){return u}),n.d(t,"L",function(){return l}),n.d(t,"a",function(){return p.a}),n.d(t,"g",function(){return p.b}),n.d(t,"j",function(){return p.c}),n.d(t,"k",function(){return p.d}),n.d(t,"l",function(){return p.e}),n.d(t,"n",function(){return p.f}),n.d(t,"o",function(){return p.g}),n.d(t,"p",function(){return p.h}),n.d(t,"q",function(){return p.i}),n.d(t,"r",function(){return p.j}),n.d(t,"s",function(){return p.k}),n.d(t,"t",function(){return p.l}),n.d(t,"C",function(){return p.n}),n.d(t,"D",function(){return p.o}),n.d(t,"I",function(){return p.p}),n.d(t,"M",function(){return p.q}),n.d(t,"N",function(){return p.r}),n.d(t,"O",function(){return p.s}),n.d(t,"B",function(){return p.m}),n.d(t,"u",function(){return y}),n.d(t,"h",function(){return w}),n.d(t,"i",function(){return A}),n.d(t,"K",function(){return D})},"./client/lib/web-payment/index.js":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return c});var r=n("./client/config/index.js");const i="basic-card",a="https://apple.com/apple-pay";function o(){return r.a.isEnabled("my-sites/checkout/web-payment")?r.a.isEnabled("my-sites/checkout/web-payment/apple-pay")&&window.ApplePaySession&&window.ApplePaySession.canMakePayments()&&window.PaymentRequest?a:r.a.isEnabled("my-sites/checkout/web-payment/basic-card")&&window.PaymentRequest?i:null:null}function c(e,t){switch(e){case i:return t("Browser wallet");case a:return"Apple Pay";default:return e}}}}]);