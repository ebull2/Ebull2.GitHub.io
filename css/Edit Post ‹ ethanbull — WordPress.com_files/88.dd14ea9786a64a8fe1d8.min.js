(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{"./client/blocks/post-likes/index.jsx":function(e,s,t){"use strict";var n=t("./node_modules/@babel/runtime/helpers/extends.js"),o=t.n(n),i=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=t.n(i),l=t("./node_modules/react/index.js"),r=t.n(l),c=t("./node_modules/classnames/index.js"),d=t.n(c),u=t("./node_modules/react-redux/es/index.js"),p=t("./packages/i18n-calypso/dist/esm/index.js"),m=t("./client/components/gravatar/index.jsx"),h=t("./client/components/data/query-post-likes/index.jsx"),b=t("./client/state/selectors/count-post-likes.js"),f=t("./client/state/selectors/get-post-likes.js"),k=t("./client/state/analytics/actions.js");class j extends r.a.PureComponent{constructor(){super(...arguments),a()(this,"trackLikeClick",()=>{this.props.recordGoogleEvent("Post Likes","Clicked on Gravatar")}),a()(this,"renderLike",e=>{const s=this.props.showDisplayNames,t=e.site_ID&&e.site_visible?"/read/blogs/"+e.site_ID:null,n=t?"a":"span";return r.a.createElement(n,{key:e.ID,href:t,className:"post-likes__item",onClick:t?this.trackLikeClick:null},r.a.createElement(m.a,{user:e,alt:e.login,title:e.login,size:24}),s&&r.a.createElement("span",{className:"post-likes__display-name"},e.name))})}renderExtraCount(){const e=this.props,s=e.likes,t=e.likeCount,n=e.showDisplayNames,o=e.translate,i=e.numberFormat;if(!s||t<=s.length)return null;const a=t-s.length;let l;return l=n?o("+ %(extraCount)s more","+ %(extraCount)s more",{count:a,args:{extraCount:i(a)}}):"+ "+i(a),r.a.createElement("span",{key:"placeholder",className:"post-likes__count"},l)}render(){const e=this.props,s=e.likeCount,t=e.likes,n=e.postId,i=e.postType,a=e.siteId,l=e.translate,c=e.showDisplayNames,u=e.onMouseEnter,p=e.onMouseLeave;let m;m=l("page"===i?"There are no likes on this page yet.":"There are no likes on this post yet.");const b=!t,f=d()("post-likes",{"has-display-names":c}),k={onMouseEnter:u,onMouseLeave:p};return r.a.createElement("div",o()({className:f},k),r.a.createElement(h.a,{siteId:a,postId:n,needsLikers:!0}),b&&r.a.createElement("span",{key:"placeholder",className:"post-likes__count is-loading"},"â€¦"),t&&t.map(this.renderLike),this.renderExtraCount(),0===s&&m)}}a()(j,"defaultProps",{postType:"post",showDisplayNames:!1}),s.a=Object(u.b)((e,s)=>{let t=s.siteId,n=s.postId;return{likeCount:Object(b.a)(e,t,n),likes:Object(f.a)(e,t,n)}},{recordGoogleEvent:k.g})(Object(p.localize)(j))},"./client/blocks/post-likes/popover.jsx":function(e,s,t){"use strict";var n=t("./node_modules/@babel/runtime/helpers/extends.js"),o=t.n(n),i=t("./node_modules/react/index.js"),a=t.n(i),l=t("./node_modules/react-redux/es/index.js"),r=t("./node_modules/lodash/lodash.js"),c=t("./node_modules/classnames/index.js"),d=t.n(c),u=t("./client/components/popover/index.jsx"),p=t("./client/blocks/post-likes/index.jsx"),m=t("./client/state/selectors/get-post-likes.js"),h=t("./client/state/selectors/count-post-likes.js");s.a=Object(l.b)((e,s)=>{const t=s.siteId,n=s.postId;return{likeCount:Object(h.a)(e,t,n),likes:Object(m.a)(e,t,n)}})(function(e){const s=e.className,t=e.siteId,n=e.postId,i=e.showDisplayNames,l=e.context,c=e.onClose,m=e.likes,h=e.likeCount,b=e.onMouseEnter,f=e.onMouseLeave,k=["likes",t,n,i?"large":"small",m?m.length:0,h].join("-"),j=Object(r.omit)(e,"className","siteId","postId","showDisplayNames","context","onClose","likes","onMouseEnter","onMouseLeave"),_=d()("post-likes-popover",s),v={siteId:t,postId:n,showDisplayNames:i,onMouseEnter:b,onMouseLeave:f};return a.a.createElement(u.a,o()({},j,{className:_,isVisible:!0,context:l,onClose:c,key:k}),a.a.createElement(p.a,v))})},"./client/components/data/query-post-likes/index.jsx":function(e,s,t){"use strict";var n=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=t.n(n),i=t("./node_modules/react/index.js"),a=t.n(i),l=t("./node_modules/prop-types/index.js"),r=t.n(l),c=t("./node_modules/react-redux/es/index.js"),d=t("./client/state/posts/likes/actions.js"),u=t("./node_modules/lodash/lodash.js");function p(e,s,t){return Object(u.get)(e.posts.likes.items,[s,t,"lastUpdated"])}var m=t("./client/state/selectors/get-post-likes.js"),h=t("./client/lib/interval/index.js");class b extends i.Component{constructor(){var e;super(...arguments),e=this,o()(this,"request",function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props,t=s.requestPostLikes,n=s.siteId,o=s.postId,i=s.maxAgeSeconds,a=s.hasPostLikes,l=s.needsLikers,r=s.lastUpdated;(!r||Date.now()-r>1e3*i||l&&!a)&&t(n,o,i)})}componentDidMount(){this.request()}componentWillReceiveProps(e){this.props.siteId===e.siteId&&this.props.postId===e.postId||this.request(e)}render(){return a.a.createElement(h.e,{period:this.props.maxAgeSeconds+1,onTick:this.request})}}o()(b,"propTypes",{siteId:r.a.number.isRequired,postId:r.a.number.isRequired,needsLikers:r.a.bool,hasPostLikes:r.a.bool,maxAgeSeconds:r.a.number,lastUpdated:r.a.number,requestPostLikes:r.a.func.isRequired}),o()(b,"defaultProps",{maxAgeSeconds:120,needsLikers:!1});s.a=Object(c.b)((e,s)=>{let t=s.siteId,n=s.postId;return{lastUpdated:p(e,t,n),hasPostLikes:null!==Object(m.a)(e,t,n)}},{requestPostLikes:d.e})(b)},"./client/components/ellipsis-menu/index.jsx":function(e,s,t){"use strict";var n=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=t.n(n),i=t("./node_modules/prop-types/index.js"),a=t.n(i),l=t("./node_modules/react/index.js"),r=t.n(l),c=t("./node_modules/classnames/index.js"),d=t.n(c),u=t("./packages/i18n-calypso/dist/esm/index.js"),p=t("./node_modules/lodash/lodash.js"),m=t("./client/components/gridicon/index.jsx"),h=t("./client/components/button/index.jsx"),b=t("./client/components/popover/menu.jsx");t("./client/components/ellipsis-menu/style.scss");class f extends l.Component{constructor(){super(...arguments),o()(this,"state",{isMenuVisible:!1}),o()(this,"popoverContext",r.a.createRef()),o()(this,"handleClick",e=>{const s=this.props.onClick,t=this.state.isMenuVisible;s(e),t?this.hideMenu():this.showMenu()}),o()(this,"hideMenu",()=>this.toggleMenu(!1)),o()(this,"showMenu",()=>this.toggleMenu(!0))}toggleMenu(e){this.props.disabled||(this.setState({isMenuVisible:e}),this.props.onToggle(e))}render(){const e=this.props,s=e.toggleTitle,t=e.translate,n=e.position,o=e.children,i=e.disabled,a=e.className,l=e.popoverClassName,c=this.state.isMenuVisible,u=d()("ellipsis-menu",a,{"is-menu-visible":c,"is-disabled":i}),p=d()("ellipsis-menu__menu","popover",l);return r.a.createElement("span",{className:u},r.a.createElement(h.a,{ref:this.popoverContext,onClick:this.handleClick,title:s||t("Toggle menu"),borderless:!0,disabled:i,className:"ellipsis-menu__toggle"},r.a.createElement(m.a,{icon:"ellipsis",className:"ellipsis-menu__toggle-icon"})),r.a.createElement(b.a,{isVisible:c,onClose:this.hideMenu,position:n,context:this.popoverContext.current,className:p},o))}}o()(f,"propTypes",{translate:a.a.func,toggleTitle:a.a.string,position:a.a.string,disabled:a.a.bool,onClick:a.a.func,onToggle:a.a.func,popoverClassName:a.a.string}),o()(f,"defaultProps",{onClick:p.noop,onToggle:p.noop}),s.a=Object(u.localize)(f)},"./client/components/ellipsis-menu/style.scss":function(e,s,t){},"./client/components/popover/menu-item.jsx":function(e,s,t){"use strict";t.d(s,"a",function(){return f});var n=t("./node_modules/@babel/runtime/helpers/extends.js"),o=t.n(n),i=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=t.n(i),l=t("./node_modules/prop-types/index.js"),r=t.n(l),c=t("./node_modules/react/index.js"),d=t.n(c),u=t("./node_modules/classnames/index.js"),p=t.n(u),m=t("./node_modules/lodash/lodash.js"),h=t("./client/components/gridicon/index.jsx"),b=t("./client/components/external-link/index.jsx");class f extends c.Component{constructor(){super(...arguments),a()(this,"handleMouseOver",e=>{this.props.focusOnHover&&e.target.focus(),this.props.onMouseOver()})}render(){const e=this.props,s=e.children,t=e.className,n=e.href,i=e.icon,a=e.isSelected,l=e.isExternalLink,r=Object(m.omit)(this.props,"icon","focusOnHover","isSelected","isExternalLink","className","itemComponent"),c=p()("popover__menu-item",t,{"is-selected":a});let u=this.props.itemComponent;return l&&n?(u=b.a,r.icon=!0):n&&(u="a"),d.a.createElement(u,o()({role:"menuitem",onMouseOver:this.handleMouseOver,tabIndex:"-1",className:c},r),i&&d.a.createElement(h.a,{icon:i,size:18}),s)}}a()(f,"propTypes",{href:r.a.string,className:r.a.string,isSelected:r.a.bool,icon:r.a.string,focusOnHover:r.a.bool,onMouseOver:r.a.func,isExternalLink:r.a.bool,itemComponent:r.a.oneOfType([r.a.func,r.a.string])}),a()(f,"defaultProps",{isSelected:!1,focusOnHover:!0,onMouseOver:m.noop,itemComponent:"button"})},"./client/components/popover/menu-separator.jsx":function(e,s,t){"use strict";var n=t("./node_modules/react/index.js");const o=t.n(n).a.createElement("hr",{className:"popover__menu-separator"});s.a=(()=>o)},"./client/components/seo/facebook-preview/index.jsx":function(e,s,t){"use strict";var n=t("./node_modules/prop-types/index.js"),o=t.n(n),i=t("./node_modules/react/index.js"),a=t.n(i),l=t("./node_modules/lodash/lodash.js"),r=t("./client/components/seo/helpers.js");t("./client/components/seo/facebook-preview/style.scss");const c=e=>e&&e.replace(/^[^\/]+[\/]*/,"").replace(/\/.*$/,""),d=Object(r.a)(Object(r.c)(80),Object(r.b)(80)),u=Object(r.a)(Object(r.c)(200),Object(r.b)(200));class p extends i.PureComponent{render(){const e=this.props,s=e.url,t=e.type,n=e.title,o=e.description,i=e.image,r=e.author;return a.a.createElement("div",{className:"facebook-preview facebook-preview__".concat(t)},a.a.createElement("div",{className:"facebook-preview__content"},a.a.createElement("div",{className:"facebook-preview__image"},i&&a.a.createElement("img",{alt:"Facebook Preview Thumbnail",src:i})),a.a.createElement("div",{className:"facebook-preview__body"},a.a.createElement("div",{className:"facebook-preview__title"},d(n||"")),a.a.createElement("div",{className:"facebook-preview__description"},u(o||"")),a.a.createElement("div",{className:"facebook-preview__url"},Object(l.compact)([c(s),r]).join(" | ")))))}}p.propTypes={url:o.a.string,type:o.a.string,title:o.a.string,description:o.a.string,image:o.a.string,author:o.a.string},s.a=p},"./client/components/seo/facebook-preview/style.scss":function(e,s,t){},"./client/components/seo/helpers.js":function(e,s,t){"use strict";t.d(s,"c",function(){return o}),t.d(s,"d",function(){return i}),t.d(s,"b",function(){return a}),t.d(s,"a",function(){return l});var n=t("./node_modules/lodash/lodash.js");const o=e=>s=>s.length<=e&&s,i=(e,s)=>t=>{const n=t.slice(0,s),o=n.lastIndexOf(" ");return o>e&&o<s&&n.slice(0,o).concat("â€¦")},a=e=>s=>s.slice(0,e).concat("â€¦"),l=function(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return e=>Object(n.find)(s,s=>!1!==s(e))(e)}},"./client/components/vertical-menu/index.jsx":function(e,s,t){"use strict";var n=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=t.n(n),i=t("./node_modules/react/index.js"),a=t.n(i),l=t("./node_modules/prop-types/index.js"),r=t.n(l),c=t("./node_modules/lodash/lodash.js");t("./client/components/vertical-menu/style.scss");class d extends i.PureComponent{constructor(e){var s;super(e),s=this,o()(this,"select",function(e){const t=s.props.onClick;for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];s.setState({selectedIndex:e},Object(c.partial)(t,...o))}),this.state={selectedIndex:e.initialItemIndex}}render(){const e=this.props.children,s=this.state.selectedIndex;return a.a.createElement("div",{className:"vertical-menu"},a.a.Children.map(e,(e,t)=>a.a.cloneElement(e,{isSelected:t===s,onClick:Object(c.partial)(this.select,t)})))}}o()(d,"propTypes",{onClick:r.a.func,initalItemIndex:r.a.number,children:r.a.arrayOf(r.a.element)}),o()(d,"defaultProps",{initialItemIndex:0,onClick:c.identity}),s.a=d},"./client/components/vertical-menu/items/index.js":function(e,s,t){"use strict";var n=t("./node_modules/react/index.js"),o=t.n(n),i=t("./node_modules/prop-types/index.js"),a=t.n(i),l=t("./node_modules/classnames/index.js"),r=t.n(l),c=t("./packages/i18n-calypso/dist/esm/index.js"),d=t("./node_modules/lodash/lodash.js"),u=t("./client/components/social-logo/index.jsx");t("./client/components/vertical-menu/items/style.scss");const p=e=>({facebook:{icon:"facebook",label:e("Facebook")},google:{icon:"google",label:e("Google search")},google_plus:{icon:"google-plus",label:e("Google+ ")},linkedin:{icon:"linkedin",label:e("LinkedIn")},tumblr:{icon:"tumblr",label:e("Tumblr")},twitter:{icon:"twitter",label:e("Twitter")},wordpress:{icon:"wordpress",label:e("WordPress.com Reader")}}),m=e=>{const s=e.isSelected,t=e.onClick,n=e.service,i=e.translate,a=Object(d.get)(p(i),n),l=a.icon,c=a.label,m=r()("vertical-menu__social-item","vertical-menu__items",{"is-selected":s});return o.a.createElement("div",{className:m,onClick:()=>t(n),role:"presentation"},o.a.createElement("div",{className:"vertical-menu__items__social-icon"},o.a.createElement(u.a,{icon:l,size:24})),o.a.createElement("span",{className:"vertical-menu__items__social-label"},c))};m.propTypes={isSelected:a.a.bool,onClick:a.a.func,service:a.a.oneOf(Object.keys(p(d.identity))).isRequired,translate:a.a.func},m.defaultProps={isSelected:!1,onClick:d.identity,translate:d.identity};var h=Object(c.localize)(m);t.d(s,"a",function(){return h})},"./client/components/vertical-menu/items/style.scss":function(e,s,t){},"./client/components/vertical-menu/style.scss":function(e,s,t){},"./client/lib/css-safe-url/index.js":function(e,s,t){"use strict";function n(e){return e&&e.replace(/([\(\)])/g,"\\$1")}t.d(s,"a",function(){return n})},"./client/lib/interval/index.js":function(e,s,t){"use strict";t.d(s,"c",function(){return r}),t.d(s,"a",function(){return c}),t.d(s,"d",function(){return d}),t.d(s,"b",function(){return u}),t.d(s,"e",function(){return p});var n=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=t.n(n),i=t("./node_modules/react/index.js"),a=t("./node_modules/prop-types/index.js"),l=t.n(a);const r=1e3,c=5e3,d=1e4,u=6e4;class p extends i.Component{constructor(){var e;super(...arguments),e=this,o()(this,"tick",()=>{this.props.onTick()}),o()(this,"start",function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props;e.interval=setInterval(e.tick,s.period)}),o()(this,"stop",()=>{this.interval=clearInterval(this.interval)})}componentDidMount(){this.start()}componentWillUnmount(){this.stop()}componentWillReceiveProps(e){e.period!==this.props.period&&(this.stop(),this.start(e))}render(){return null}}o()(p,"propTypes",{onTick:l.a.func.isRequired,period:l.a.number.isRequired})},"./client/lib/post-metadata/index.js":function(e,s,t){"use strict";var n=t("./node_modules/lodash/lodash.js");let o,i=/^_wpas_skip_(\d+)$/,a=/^_wpas_done_(\d+)$/;function l(e,s){const t=Object(n.find)(e,{key:s});if(t)return t.value}function r(e,s){return e?e.filter(function(e){return s.test(e.key)&&1===parseInt(e.value,10)}).map(function(e){return parseInt(e.key.match(s)[1],10)}):[]}o={publicizeMessage:function(e){if(e)return l(e.metadata,"_wpas_mess")},publicizeDone:function(e){if(e)return r(e.metadata,a)},publicizeSkipped:function(e){if(e)return r(e.metadata,i)},geoLabel:function(e){if(e)return l(e.metadata,"geo_address")},metaDescription:function(e){if(e)return l(e.metadata,"advanced_seo_description")},geoCoordinates:function(e){let s,t;if(e)return s=parseFloat(l(e.metadata,"geo_latitude")),t=parseFloat(l(e.metadata,"geo_longitude")),s&&t?[s,t]:void 0},geoIsSharedPublicly:function(e){if(!e)return null;const s=l(e.metadata,"geo_public");return!!parseInt(s,10)||void 0===s&&(!l(e.metadata,"geo_latitude")&&!l(e.metadata,"geo_longitude"))}},s.a=o},"./client/state/selectors/count-post-likes.js":function(e,s,t){"use strict";t.d(s,"a",function(){return o});var n=t("./node_modules/lodash/lodash.js");function o(e,s,t){return Object(n.get)(e.posts.likes.items,[s,t,"found"],null)}},"./client/state/selectors/get-post-likes.js":function(e,s,t){"use strict";t.d(s,"a",function(){return o});var n=t("./node_modules/lodash/lodash.js");function o(e,s,t){return Object(n.get)(e.posts.likes.items,[s,t,"likes"],null)}}}]);