(window.webpackJsonp=window.webpackJsonp||[]).push([[378],{"./client/blocks/app-promo/style.scss":function(e,t,s){},"./client/components/data/query-reader-followed-tags/index.jsx":function(e,t,s){"use strict";var a=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=s.n(a),r=s("./node_modules/prop-types/index.js"),o=s.n(r),i=s("./node_modules/react/index.js"),c=s("./node_modules/react-redux/es/index.js"),l=s("./client/state/reader/tags/items/actions.js");class d extends i.Component{componentDidMount(){this.props.requestFollowedTags()}render(){return null}}n()(d,"propTypes",{requestFollowedTags:o.a.func.isRequired}),t.a=Object(c.b)(null,{requestFollowedTags:l.d})(d)},"./client/components/data/query-user-settings/index.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),r=s("./client/state/user-settings/actions.js");t.a=Object(n.b)(null,{fetchUserSettings:r.b})(class extends a.Component{componentWillMount(){this.props.fetchUserSettings()}render(){return null}})},"./client/components/material-icon/index.jsx":function(e,t,s){"use strict";var a=s("./node_modules/@babel/runtime/helpers/extends.js"),n=s.n(a),r=s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),o=s.n(r),i=s("./node_modules/classnames/index.js"),c=s.n(i),l=s("./node_modules/react/index.js"),d=s.n(l),p=s("./node_modules/prop-types/index.js"),u=s.n(p),m=s("./packages/material-design-icons/svg-sprite/material-icons.svg"),b=s.n(m);function g(e){const t=e.size,s=void 0===t?24:t,a=e.style,r=void 0===a?"outline":a,i=e.icon,l=e.onClick,p=e.className,u=o()(e,["size","style","icon","onClick","className"]),m="material-icon-".concat(i),g=c()("material-icon",m,p),h="icon-".concat(r,"-").concat(i,"-").concat(s,"px");return d.a.createElement("svg",n()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:g,height:s,width:s,onClick:l},u),d.a.createElement("use",{xlinkHref:"".concat(b.a,"#").concat(h)}))}g.propTypes={icon:u.a.string.isRequired,style:u.a.string,size:u.a.number,onClick:u.a.func,className:u.a.string},t.a=d.a.memo(g)},"./client/layout/sidebar/expandable.jsx":function(e,t,s){"use strict";var a=s("./node_modules/classnames/index.js"),n=s.n(a),r=s("./node_modules/prop-types/index.js"),o=s.n(r),i=s("./node_modules/react/index.js"),c=s.n(i),l=s("./node_modules/lodash/lodash.js"),d=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),p=s.n(d),u=s("./client/components/gridicon/index.jsx"),m=s("./packages/i18n-calypso/dist/esm/index.js"),b=s("./client/components/button/index.jsx"),g=s("./client/components/translatable/proptype.js");class h extends i.Component{constructor(){super(...arguments),p()(this,"state",{isAdding:!1}),p()(this,"menuAddInput",c.a.createRef()),p()(this,"toggleAdd",()=>{this.state.isAdding||(this.menuAddInput.current.focus(),this.props.onAddClick()),this.setState({isAdding:!this.state.isAdding})}),p()(this,"handleAddKeyDown",e=>{const t=this.menuAddInput.current.value;13===e.keyCode&&t.length>0&&(e.preventDefault(),this.props.onAddSubmit(t),this.menuAddInput.current.value="",this.toggleAdd())})}render(){const e=this.props,t=e.translate,s=e.addLabel,a=e.addPlaceholder,r=n()("sidebar__menu-add-item",{"is-add-open":this.state.isAdding});return c.a.createElement("div",{className:r},this.props.hideAddButton?null:c.a.createElement(b.a,{compact:!0,className:"sidebar__menu-add-button",onClick:this.toggleAdd},t("Add")),c.a.createElement("div",{className:"sidebar__menu-add"},c.a.createElement("input",{"aria-label":s,className:"sidebar__menu-add-input",type:"text",placeholder:a,ref:this.menuAddInput,onKeyDown:this.handleAddKeyDown}),c.a.createElement(u.a,{icon:"cross-small",onClick:this.toggleAdd})))}}p()(h,"propTypes",{addLabel:g.a,addPlaceholder:g.a,onAddSubmit:o.a.func,onAddClick:o.a.func,hideAddButton:o.a.bool,translate:o.a.func}),p()(h,"defaultProps",{onAddSubmit:l.noop,onAddClick:l.noop,translate:l.identity});var _=Object(m.localize)(h),j=s("./client/components/count/index.jsx"),E=s("./client/components/material-icon/index.jsx"),f=s("./client/layout/sidebar/heading.jsx");const y=e=>{let t=e.title,s=e.count,a=e.onClick,n=e.icon,r=e.materialIcon,o=e.expanded,i=e.menuId;return c.a.createElement(f.a,{"aria-controls":i,"aria-expanded":o,onClick:a},n?c.a.createElement(u.a,{icon:n}):null,r?c.a.createElement(E.a,{icon:r}):null,c.a.createElement(u.a,{icon:"chevron-down"}),c.a.createElement("span",null,t),void 0!==s?c.a.createElement(j.a,{count:s}):null)};y.propTypes={title:g.a.isRequired,count:o.a.number,onClick:o.a.func,icon:o.a.string,materialIcon:o.a.string},y.defaultProps={onClick:l.noop};var O=y,k=s("./client/layout/sidebar/menu.jsx");const C=e=>{const t=e.className,s=e.title,a=e.count,r=e.onClick,o=e.icon,i=e.materialIcon,d=e.hideAddButton,p=e.addLabel,u=e.addPlaceholder,m=e.onAddClick,b=e.onAddSubmit;let g=e.expanded;null===g&&(g=function e(t){let s=!1;return c.a.Children.forEach(t,t=>{if(s)return!0;if(Object(l.get)(t,"props.selected"))s=!0;else{const a=Object(l.get)(t,"props.children");a&&(s=e(a))}}),s}(e.children));const h=n()(t,{"is-toggle-open":!!g,"is-togglable":!0}),j=Object(l.uniqueId)("menu");let E=null;return(m||b||p||u)&&(E=c.a.createElement(_,{hideAddButton:d,addLabel:p,addPlaceholder:u,onAddClick:m,onAddSubmit:b})),c.a.createElement(k.a,{className:h},c.a.createElement(O,{title:s,count:a,onClick:r,icon:o,materialIcon:i,expanded:g,menuId:j}),E,c.a.createElement("ul",{role:"region",id:j,className:"sidebar__menu-list",hidden:!g},e.children))};C.propTypes={title:o.a.oneOfType([o.a.string,o.a.element]).isRequired,count:o.a.number,addLabel:g.a,addPlaceholder:g.a,onAddSubmit:o.a.func,onAddClick:o.a.func,onClick:o.a.func,hideAddButton:o.a.bool,icon:o.a.string,expanded:o.a.bool},C.defaultProps={hideAddButton:!1};t.a=C},"./client/layout/sidebar/footer.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),n=s.n(a);t.a=(e=>{let t=e.children;return t?n.a.createElement("div",{className:"sidebar__footer"},t):null})},"./client/layout/sidebar/heading.jsx":function(e,t,s){"use strict";var a=s("./node_modules/@babel/runtime/helpers/extends.js"),n=s.n(a),r=s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),o=s.n(r),i=s("./node_modules/react/index.js"),c=s.n(i);t.a=(e=>{let t=e.children,s=e.onClick,a=o()(e,["children","onClick"]);const r=s?0:-1;let i=null;return s&&(i=(e=>{13===e.keyCode&&(e.preventDefault(),s())})),c.a.createElement("h2",n()({tabIndex:r,className:"sidebar__heading",onKeyDown:i,onClick:s},a),t)})},"./client/layout/sidebar/index.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return b});var a=s("./node_modules/@babel/runtime/helpers/extends.js"),n=s.n(a),r=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=s.n(r),i=s("./node_modules/prop-types/index.js"),c=s.n(i),l=s("./node_modules/react/index.js"),d=s.n(l),p=s("./node_modules/classnames/index.js"),u=s.n(p),m=s("./client/layout/sidebar/region.jsx");class b extends d.a.Component{render(){const e=d.a.Children.toArray(this.props.children).some(e=>e.type===m.a),t=void 0===this.props.onClick?{}:{onClick:this.props.onClick},s=u()(this.props.className,{"has-regions":e},{sidebar:void 0===this.props.hasSidebar||this.props.hasSidebar});return d.a.createElement("ul",n()({className:s},t,{"data-tip-target":"sidebar"}),this.props.children)}}o()(b,"displayName","Sidebar"),o()(b,"propTypes",{className:c.a.string,hasSidebar:c.a.bool,onClick:c.a.func})},"./client/layout/sidebar/menu.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),n=s.n(a),r=s("./node_modules/classnames/index.js"),o=s.n(r);t.a=(e=>{let t=e.children,s=e.className;return n.a.createElement("li",{className:o()("sidebar__menu",s)},t)})},"./client/layout/sidebar/region.jsx":function(e,t,s){"use strict";var a=s("./node_modules/react/index.js"),n=s.n(a),r=s("./node_modules/classnames/index.js"),o=s.n(r),i=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),c=s.n(i),l=s("./node_modules/prop-types/index.js"),d=s.n(l),p=s("./packages/i18n-calypso/dist/esm/index.js"),u=s("./client/components/button/index.jsx");class m extends n.a.Component{constructor(){super(...arguments),c()(this,"onClick",e=>{e.preventDefault();const t=document.getElementById(this.props.skipToElementId);/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus()})}render(){return n.a.createElement(u.a,{onClick:this.onClick,className:"sidebar__skip-navigation"},this.props.translate("Skip navigation"))}}c()(m,"propTypes",{skipToElementId:d.a.string});var b=Object(p.localize)(m);t.a=(e=>{let t=e.children,s=e.className;return n.a.createElement("div",{className:o()("sidebar__region",s)},n.a.createElement(b,{skipToElementId:"primary"}),t)})},"./client/reader/sidebar/index.jsx":function(e,t,s){"use strict";s.r(t);var a=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=s.n(a),r=s("./node_modules/component-closest/index.js"),o=s.n(r),i=s("./client/components/gridicon/index.jsx"),c=s("./packages/i18n-calypso/dist/esm/index.js"),l=s("./node_modules/lodash/lodash.js"),d=s("./node_modules/page/page.js"),p=s.n(d),u=s("./node_modules/react/index.js"),m=s.n(u),b=s("./node_modules/react-redux/es/index.js"),g=s("./node_modules/classnames/index.js"),h=s.n(g);const _={itemLinkClass:function(e,t,s){const a=decodeURIComponent(t).split("?")[0].replace(/\/manage$/,"").toLowerCase(),n=decodeURIComponent(e).replace(/\/manage$/,"").toLowerCase();let r=a===n,o=!1;"/"!==n||r||(r="/following"===a);const i=t.split("?")[0];return r&&i.match(/\/manage$/)&&(o=!0),h()(Object(l.assign)({selected:r,"is-action-button-selected":o},s))},itemLinkClassStartsWithOneOf:function(e,t,s){const a=this.pathStartsWithOneOf(e,t);return h()(Object(l.assign)({selected:a},s))},pathStartsWithOneOf:function(e,t){return Object(l.some)(e,function(e){return Object(l.startsWith)(t.toLowerCase(),e.toLowerCase())})}};var j=_;var E=s("./node_modules/prop-types/index.js"),f=s.n(E),y=s("./client/layout/sidebar/expandable.jsx"),O=s("./node_modules/react-dom/index.js"),k=s.n(O),C=s("./client/reader/stats.js");class S extends u.Component{constructor(){super(...arguments),n()(this,"handleListSidebarClick",()=>{Object(C.recordAction)("clicked_reader_sidebar_list_item"),Object(C.recordGaEvent)("Clicked Reader Sidebar List Item"),Object(C.recordTrack)("calypso_reader_sidebar_list_item_clicked",{list:decodeURIComponent(this.props.list.slug)})})}componentDidMount(){if(this.props.list.slug===this.props.currentListSlug&&this.props.list.owner===this.props.currentListOwner){k.a.findDOMNode(this).scrollIntoView()}}render(){const e=this.props,t=e.list,s=e.translate,a="/read/list/".concat(t.owner,"/").concat(t.slug),n=[a+"/tags",a+"/edit",a+"/sites"],r=Object(l.last)(this.props.path.split("/")),o=r&&r.toLowerCase()===t.slug.toLowerCase()&&j.pathStartsWithOneOf([a],this.props.path),i=j.pathStartsWithOneOf(n,this.props.path),c=h()({selected:o||i});return m.a.createElement("li",{className:c,key:t.ID},m.a.createElement("a",{className:"sidebar__menu-item-label",href:a,onClick:this.handleListSidebarClick,title:s("View list '%(currentListName)s'",{args:{currentListName:t.title}})},m.a.createElement("div",{className:"sidebar__menu-item-listname"},t.title)))}}n()(S,"propTypes",{list:f.a.object.isRequired,path:f.a.string.isRequired,currentListOwner:f.a.string,currentListSlug:f.a.string});var w=Object(c.localize)(S);class v extends m.a.Component{renderItems(){const e=this.props,t=e.currentListOwner,s=e.currentListSlug,a=e.path;return Object(l.map)(this.props.lists,function(e){return m.a.createElement(w,{key:e.ID,list:e,path:a,currentListOwner:t,currentListSlug:s})})}render(){const e=this.props,t=e.translate,s=e.lists;return s&&0!==s.length?m.a.createElement("div",null,this.renderItems()):m.a.createElement("li",{key:"empty",className:"sidebar__menu-empty"},t("Collect sites together by adding a list."))}}n()(v,"propTypes",{lists:f.a.array,path:f.a.string.isRequired,currentListOwner:f.a.string,currentListSlug:f.a.string,translate:f.a.func}),n()(v,"defaultProps",{translate:l.identity});var T=Object(c.localize)(v);class x extends u.Component{render(){const e=this.props,t=e.translate,s=e.lists,a=e.isOpen,n=e.onClick,r=s?s.length:0;return m.a.createElement(y.a,{expanded:a,title:t("Lists"),count:r,onClick:n,hideAddButton:!0},m.a.createElement(T,this.props))}}n()(x,"propTypes",{lists:f.a.array,path:f.a.string.isRequired,isOpen:f.a.bool,onClick:f.a.func,currentListOwner:f.a.string,currentListSlug:f.a.string,translate:f.a.func}),n()(x,"defaultProps",{translate:l.identity});var L=Object(c.localize)(x),R=s("./node_modules/@babel/runtime/helpers/extends.js"),A=s.n(R);class N extends u.Component{constructor(){super(...arguments),n()(this,"handleTagSidebarClick",()=>{Object(C.recordAction)("clicked_reader_sidebar_tag_item"),Object(C.recordGaEvent)("Clicked Reader Sidebar Tag Item"),Object(C.recordTrack)("calypso_reader_sidebar_tag_item_clicked",{tag:decodeURIComponent(this.props.tag.slug)})})}componentDidMount(){if(this.props.currentTag&&this.props.tag.slug===this.props.currentTag){k.a.findDOMNode(this).scrollIntoView()}}render(){const e=this.props,t=e.tag,s=e.path,a=e.onUnfollow,n=e.translate,r=t.displayName||t.slug;return m.a.createElement("li",{key:t.id,className:j.itemLinkClass("/tag/"+t.slug,s,{"sidebar-dynamic-menu__tag":!0})},m.a.createElement("a",{className:"sidebar__menu-item-label",href:t.url,onClick:this.handleTagSidebarClick,title:n("View tag '%(currentTagName)s'",{args:{currentTagName:r}})},m.a.createElement("div",{className:"sidebar__menu-item-tagname"},r)),"pending"!==t.id&&m.a.createElement("button",{className:"sidebar__menu-action","data-tag-slug":t.slug,onClick:a,title:n("Unfollow tag '%(currentTagName)s'",{args:{currentTagName:r}})},m.a.createElement(i.a,{icon:"cross-small"}),m.a.createElement("span",{className:"sidebar__menu-action-label"},n("Unfollow"))))}}n()(N,"propTypes",{tag:f.a.object.isRequired,onUnfollow:f.a.func.isRequired,path:f.a.string.isRequired,currentTag:f.a.string,translate:f.a.func}),n()(N,"defaultProps",{translate:l.identity});var I=Object(c.localize)(N);class U extends u.Component{constructor(){super(...arguments),n()(this,"renderItems",()=>{const e=this.props,t=e.path,s=e.onUnfollow,a=e.currentTag,n=e.tags;return Object(l.map)(n,function(e){return m.a.createElement(I,{key:e.id,tag:e,path:t,onUnfollow:s,currentTag:a})})})}render(){const e=this.props,t=e.tags,s=e.translate;return t&&0!==t.length?m.a.createElement("div",null,this.renderItems()):m.a.createElement("li",{key:"empty",className:"sidebar__menu-empty"},s("Find relevant posts by adding a tag."))}}n()(U,"propTypes",{tags:f.a.array,onUnfollow:f.a.func.isRequired,path:f.a.string.isRequired,currentTag:f.a.string,translate:f.a.func}),n()(U,"defaultProps",{translate:l.identity});var D=Object(c.localize)(U),P=s("./client/components/data/query-reader-followed-tags/index.jsx"),F=s("./client/state/reader/tags/items/actions.js"),q=s("./client/state/selectors/get-reader-followed-tags.js");class G extends u.Component{constructor(){super(...arguments),n()(this,"followTag",e=>{Object(l.startsWith)(e,"#")&&(e=e.substring(1)),this.props.followTag(decodeURIComponent(e)),Object(C.recordAction)("followed_topic"),Object(C.recordGaEvent)("Clicked Follow Topic",e),Object(C.recordTrack)("calypso_reader_reader_tag_followed",{tag:e}),this.props.onFollowTag(e)}),n()(this,"unfollowTag",e=>{const t=o()(e.target,"[data-tag-slug]");e.preventDefault();const s=t&&t.dataset&&t.dataset.tagSlug;s&&(Object(C.recordAction)("unfollowed_topic"),Object(C.recordGaEvent)("Clicked Unfollow Topic",s),Object(C.recordTrack)("calypso_reader_reader_tag_unfollowed",{tag:s}),this.props.unfollowTag(decodeURIComponent(s)))}),n()(this,"handleAddClick",()=>{Object(C.recordAction)("follow_topic_open_input"),Object(C.recordGaEvent)("Clicked Add Topic to Open Input"),Object(C.recordTrack)("calypso_reader_add_tag_clicked")})}render(){const e=this.props,t=e.tags,s=e.isOpen,a=e.translate,n=e.onClick,r=t?t.length:0;return m.a.createElement("div",null,!this.props.tags&&m.a.createElement(P.a,null),m.a.createElement(y.a,{expanded:s,title:a("Tags"),count:r,addLabel:a("New tag name"),addPlaceholder:a("Add any tag"),onAddSubmit:this.followTag,onAddClick:this.handleAddClick,onClick:n},m.a.createElement(D,A()({},this.props,{onUnfollow:this.unfollowTag}))))}}n()(G,"propTypes",{tags:f.a.array,path:f.a.string.isRequired,isOpen:f.a.bool,onClick:f.a.func,currentTag:f.a.string,onFollowTag:f.a.func,translate:f.a.func}),n()(G,"defaultProps",{translate:l.identity});var W=Object(b.b)(e=>({tags:Object(q.a)(e)}),{followTag:F.c,unfollowTag:F.e})(Object(c.localize)(G));const V=e=>()=>{Object(C.recordAction)("clicked_reader_sidebar_teams_list_item"),Object(C.recordGaEvent)("Clicked Reader Sidebar Teams List Item"),Object(C.recordTrack)("calypso_reader_sidebar_teams_list_item_clicked",{team:decodeURIComponent(e.slug)})},z=e=>{let t=e.path,s=e.team,a=e.translate;const n="/read/"+encodeURIComponent(s.slug);return m.a.createElement("li",{key:s.slug,className:j.itemLinkClass(n,t,{"sidebar-streams__team":!0})},m.a.createElement("a",{href:n,onClick:V(s),title:a("View team '%(currentTeamName)s'",{args:{currentTeamName:s.title}})},m.a.createElement("svg",{className:"gridicon gridicon-"+s.slug,width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},m.a.createElement("path",{d:"M12 21.5c-6.1 0-10-4.4-10-9V12c0-4.6 4-9 10-9 6.1 0 10.1 4.3 10.1 9v.6c0 4.5-3.9 8.9-10.1 8.9zm6.9-9.5c0-3.3-2.4-6.3-6.8-6.3s-6.8 3-6.8 6.3v.4c0 3.3 2.4 6.4 6.8 6.4s6.8-3 6.8-6.4V12z"}),m.a.createElement("path",{d:"M14.1 8.5c.6.4.7 1.2.4 1.7l-2.9 4.6c-.4.6-1.2.8-1.7.4-.7-.4-.9-1.2-.5-1.8l2.9-4.6c.4-.5 1.2-.7 1.8-.3z"})),m.a.createElement("span",{className:"menu-link-text"},s.title)))};z.propTypes={team:f.a.object.isRequired,path:f.a.string.isRequired};var M=Object(c.localize)(z);const Q=(e,t)=>Object(l.map)(e,e=>m.a.createElement(M,{key:e.slug,team:e,path:t}));class B extends u.Component{render(){return this.props.teams?m.a.createElement("div",null,Q(this.props.teams,this.props.path)):null}}n()(B,"propTypes",{teams:f.a.array,path:f.a.string.isRequired});var J=B,K=s("./node_modules/redux/es/redux.js"),$=s("./client/state/reader/lists/selectors.js"),H=s("./client/state/reader/lists/actions.js");class X extends u.Component{componentWillMount(){this.props.isRequestingSubscribedLists||this.props.requestSubscribedLists()}render(){return null}}X.propTypes={isRequestingSubscribedLists:f.a.bool,requestSubscribedLists:f.a.func},X.defaultProps={requestSubscribedLists:()=>{}};var Y=Object(b.b)(e=>({isRequestingSubscribedLists:Object($.e)(e)}),e=>Object(K.b)({requestSubscribedLists:H.c},e))(X),Z=s("./client/components/data/query-reader-teams/index.jsx"),ee=s("./client/layout/sidebar/index.jsx"),te=s("./client/layout/sidebar/footer.jsx"),se=s("./client/layout/sidebar/heading.jsx"),ae=s("./client/layout/sidebar/menu.jsx"),ne=s("./client/layout/sidebar/region.jsx"),re=s("./client/reader/discover/helper.js"),oe=s("./client/reader/lib/teams/index.js"),ie=s("./client/reader/route/index.js"),ce=s("./client/state/selectors/get-reader-teams.js"),le=s("./client/state/ui/layout-focus/actions.js");var de=s("./node_modules/store/dist/store.modern.js"),pe=s.n(de),ue=s("./client/state/analytics/actions.js");s("./client/blocks/app-promo/style.scss");const me=()=>{return Object(l.sample)([{promoCode:"a0001",message:"WordPress.com your way — desktop app now available for Mac, Windows, and Linux.",type:"desktop"},{promoCode:"a0002",message:"Get WordPress.com app for your desktop.",type:"desktop"},{promoCode:"a0003",message:"WordPress.com app now available for desktop.",type:"desktop"},{promoCode:"a0005",message:"WordPress.com at your fingertips — download app for desktop.",type:"desktop"},{promoCode:"a0006",message:"WordPress.com in the palm of your hands — download app for mobile.",type:"mobile"}])};class be extends m.a.Component{constructor(e){super(e),n()(this,"recordClickEvent",()=>{this.props.recordTracksEvent("calypso_desktop_promo_click",{promo_location:this.props.location,promo_code:this.state.promoItem.promoCode})}),n()(this,"dismiss",()=>{this.setState({showPromo:!1}),this.props.saveDismissal(),this.props.recordTracksEvent("calypso_desktop_promo_dismiss",{promo_location:this.props.location,promo_code:this.state.promoItem.promoCode})});const t=e.promoItem||me();this.state={promoItem:t,showPromo:!0}}componentDidMount(){this.props.recordTracksEvent("calypso_desktop_promo_view",{promo_location:this.props.location,promo_code:this.state.promoItem.promoCode})}render(){if(!this.state.showPromo)return null;const e=this.props,t=e.location,s=e.translate,a=this.state.promoItem;return m.a.createElement("div",{className:"app-promo"},m.a.createElement("button",{tabIndex:"0",className:"app-promo__dismiss",onClick:this.dismiss,"aria-label":s("Dismiss")},m.a.createElement(i.a,{icon:"cross",size:24})),m.a.createElement("a",{onClick:this.recordClickEvent,className:"app-promo__link",title:"Try the desktop app!",href:this.props.getPromoLink(t,a),target:"_blank",rel:"noopener noreferrer"},m.a.createElement("img",{className:"app-promo__icon",src:"/calypso/images/reader/promo-app-icon.png",width:"32",height:"32",alt:"WordPress Desktop Icon"}),a.message))}}n()(be,"displayName","AppPromo"),n()(be,"propTypes",{location:f.a.string.isRequired}),be.defaultProps={translate:l.identity,recordTracksEvent:l.noop,saveDismissal:()=>pe.a.set("desktop_promo_disabled",!0),getPromoLink:(e,t)=>{const s=t.type,a=t.promoCode;return"https://apps.wordpress.com/".concat(s,"/?ref=promo_").concat(e,"_").concat(a)}};var ge=Object(b.b)(null,{recordTracksEvent:ue.i})(Object(c.localize)(be)),he=s("./client/state/current-user/selectors.js"),_e=s("./client/components/data/query-user-settings/index.jsx"),je=s("./client/lib/viewport/index.js"),Ee=s("./client/config/index.js"),fe=s("./client/state/selectors/get-user-setting.js");var ye=Object(b.b)(e=>{const t={currentUserLocale:Object(he.h)(e),isDesktopAppUser:Object(fe.a)(e,"is_desktop_app_user")};return t.shouldRenderAppPromo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=null===e.isDesktopAppUser,s=e.isDesktopPromoDisabled,a=void 0===s?pe.a.get("desktop_promo_disabled"):s,n=e.isViewportMobile,r=void 0===n?Object(je.e)():n,o=e.isUserLocaleEnglish,i=void 0===o?"en"===e.currentUserLocale:o,c=e.isDesktopPromoConfiguredToRun,l=void 0===c?Ee.a.isEnabled("desktop-promo"):c,d=e.isUserDesktopAppUser,p=void 0===d?t||e.isDesktopAppUser:d,u=e.isUserOnChromeOs,m=void 0===u?/\bCrOS\b/.test(navigator.userAgent):u;return!a&&i&&!r&&!m&&l&&!p}(t),t})(Object(c.localize)(e=>{let t=e.currentUserLocale,s=e.shouldRenderAppPromo;return m.a.createElement(u.Fragment,null,m.a.createElement(_e.a,null),s&&m.a.createElement("div",{className:"sidebar__app-promo"},m.a.createElement(ge,{location:"reader",locale:t})))}));s("./client/reader/sidebar/style.scss");s.d(t,"ReaderSidebar",function(){return Oe});class Oe extends m.a.Component{constructor(){super(...arguments),n()(this,"state",{}),n()(this,"handleClick",e=>{!e.isDefaultPrevented()&&o()(e.target,"a,span")&&(this.props.setNextLayoutFocus("content"),window.scrollTo(0,0))}),n()(this,"openExpandableMenuForCurrentTagOrList",()=>{const e=this.props.path.split("/");if(Object(l.startsWith)(this.props.path,"/tag/")){const t=e[2];t&&(this.props.isTagsOpen||(this.props.toggleTagsVisibility(),this.setState({currentTag:t})))}if(Object(l.startsWith)(this.props.path,"/read/list/")){const t=e[3],s=e[4];t&&s&&(this.props.isListsOpen||(this.props.toggleListsVisibility(),this.setState({currentListOwner:t,currentListSlug:s})))}})}componentDidMount(){this.openExpandableMenuForCurrentTagOrList()}highlightNewTag(e){const t=Object(ie.h)(e);t!==p.a.current&&Object(l.defer)(function(){p()(t),window.scrollTo(0,0)})}handleReaderSidebarFollowedSitesClicked(){Object(C.recordAction)("clicked_reader_sidebar_followed_sites"),Object(C.recordGaEvent)("Clicked Reader Sidebar Followed Sites"),Object(C.recordTrack)("calypso_reader_sidebar_followed_sites_clicked")}handleReaderSidebarConversationsClicked(){Object(C.recordAction)("clicked_reader_sidebar_conversations"),Object(C.recordGaEvent)("Clicked Reader Sidebar Conversations"),Object(C.recordTrack)("calypso_reader_sidebar_conversations_clicked")}handleReaderSidebarA8cConversationsClicked(){Object(C.recordAction)("clicked_reader_sidebar_a8c_conversations"),Object(C.recordGaEvent)("Clicked Reader Sidebar A8C Conversations"),Object(C.recordTrack)("calypso_reader_sidebar_automattic_conversations_clicked")}handleReaderSidebarDiscoverClicked(){Object(C.recordAction)("clicked_reader_sidebar_discover"),Object(C.recordGaEvent)("Clicked Reader Sidebar Discover"),Object(C.recordTrack)("calypso_reader_sidebar_discover_clicked")}handleReaderSidebarSearchClicked(){Object(C.recordAction)("clicked_reader_sidebar_search"),Object(C.recordGaEvent)("Clicked Reader Sidebar Search"),Object(C.recordTrack)("calypso_reader_sidebar_search_clicked")}handleReaderSidebarLikeActivityClicked(){Object(C.recordAction)("clicked_reader_sidebar_like_activity"),Object(C.recordGaEvent)("Clicked Reader Sidebar Like Activity"),Object(C.recordTrack)("calypso_reader_sidebar_like_activity_clicked")}render(){return m.a.createElement(ee.a,{onClick:this.handleClick},m.a.createElement(ne.a,null,m.a.createElement(ae.a,null,m.a.createElement(se.a,null,this.props.translate("Streams")),m.a.createElement("ul",null,m.a.createElement("li",{className:j.itemLinkClass("/",this.props.path,{"sidebar-streams__following":!0})},m.a.createElement("a",{href:"/",onClick:this.handleReaderSidebarFollowedSitesClicked},m.a.createElement(i.a,{icon:"checkmark-circle",size:24}),m.a.createElement("span",{className:"menu-link-text"},this.props.translate("Followed Sites")))),m.a.createElement("li",{className:j.itemLinkClass("/read/conversations",this.props.path,{"sidebar-streams__conversations":!0})},m.a.createElement("a",{href:"/read/conversations",onClick:this.handleReaderSidebarConversationsClicked},m.a.createElement(i.a,{icon:"chat",size:24}),m.a.createElement("span",{className:"menu-link-text"},this.props.translate("Conversations")))),m.a.createElement(J,{teams:this.props.teams,path:this.props.path}),Object(oe.a)(this.props.teams)&&m.a.createElement("li",{className:j.itemLinkClass("/read/conversations/a8c",this.props.path,{"sidebar-streams__conversations":!0})},m.a.createElement("a",{href:"/read/conversations/a8c",onClick:this.handleReaderSidebarA8cConversationsClicked},m.a.createElement("svg",{className:"gridicon gridicon-automattic-conversations",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},m.a.createElement("path",{d:"M12.2 7.1c.5.3.6 1 .3 1.4L10 12.4c-.3.5-1 .7-1.4.3-.6-.3-.8-1-.4-1.5l2.5-3.9c.3-.4 1-.5 1.5-.2zM17.3 21.2h2.8c1 0 1.9-.8 1.9-1.9v-4.7c0-1-.8-1.9-1.9-1.9h-7.6c-1 .1-1.7.9-1.7 1.9v4.7c0 1 .8 1.8 1.7 1.9h2V24l2.8-2.8z"}),m.a.createElement("path",{d:"M8.8 15.2c-2.7-.7-4.1-2.9-4.1-5.2 0-5.8 5.8-5.7 5.8-5.7 5.8 0 5.8 5.7 5.8 5.7 0 .3 0 .6-.1.8H19v-.7C19 1.6 10.4 2 10.4 2c-8.6 0-8.5 8.1-8.5 8.1 0 3.5 2.7 6.8 6.9 7.5v-2.4z"})),m.a.createElement("span",{className:"menu-link-text"},"A8C Conversations"))),Object(re.h)()?m.a.createElement("li",{className:j.itemLinkClass("/discover",this.props.path,{"sidebar-streams__discover":!0})},m.a.createElement("a",{href:"/discover",onClick:this.handleReaderSidebarDiscoverClicked},m.a.createElement(i.a,{icon:"my-sites"}),m.a.createElement("span",{className:"menu-link-text"},this.props.translate("Discover")))):null,m.a.createElement("li",{className:j.itemLinkClass("/read/search",this.props.path,{"sidebar-streams__search":!0})},m.a.createElement("a",{href:"/read/search",onClick:this.handleReaderSidebarSearchClicked},m.a.createElement(i.a,{icon:"search",size:24}),m.a.createElement("span",{className:"menu-link-text"},this.props.translate("Search")))),m.a.createElement("li",{className:j.itemLinkClass("/activities/likes",this.props.path,{"sidebar-activity__likes":!0})},m.a.createElement("a",{href:"/activities/likes",onClick:this.handleReaderSidebarLikeActivityClicked},m.a.createElement(i.a,{icon:"star",size:24}),m.a.createElement("span",{className:"menu-link-text"},this.props.translate("My Likes")))))),m.a.createElement(Y,null),m.a.createElement(Z.a,null),this.props.subscribedLists&&this.props.subscribedLists.length?m.a.createElement(L,{lists:this.props.subscribedLists,path:this.props.path,isOpen:this.props.isListsOpen,onClick:this.props.toggleListsVisibility,currentListOwner:this.state.currentListOwner,currentListSlug:this.state.currentListSlug}):null,m.a.createElement(W,{tags:this.props.followedTags,path:this.props.path,isOpen:this.props.isTagsOpen,onClick:this.props.toggleTagsVisibility,onFollowTag:this.highlightNewTag,currentTag:this.state.currentTag})),m.a.createElement(ye,null),m.a.createElement(te.a,null))}}Oe.defaultProps={translate:l.identity};t.default=Object(b.b)(e=>({isListsOpen:e.ui.reader.sidebar.isListsOpen,isTagsOpen:e.ui.reader.sidebar.isTagsOpen,subscribedLists:Object($.b)(e),teams:Object(ce.a)(e)}),{toggleListsVisibility:function(){return Object(C.recordAction)("sidebar_toggle_lists_menu"),Object(C.recordGaEvent)("Toggle Lists Menu"),Object(C.recordTrack)("calypso_reader_sidebar_list_toggle"),{type:"READER_SIDEBAR_LISTS_TOGGLE"}},toggleTagsVisibility:function(){return Object(C.recordAction)("sidebar_toggle_tags_menu"),Object(C.recordGaEvent)("Toggle Tags Menu"),Object(C.recordTrack)("calypso_reader_sidebar_tags_toggle"),{type:"READER_SIDEBAR_TAGS_TOGGLE"}},setNextLayoutFocus:le.c})(Object(c.localize)(Oe))},"./client/reader/sidebar/style.scss":function(e,t,s){},"./client/state/reader/lists/actions.js":function(e,t,s){"use strict";s.d(t,"c",function(){return n}),s.d(t,"b",function(){return r}),s.d(t,"a",function(){return o}),s.d(t,"d",function(){return i});var a=s("./client/lib/wp/browser.js");function n(){return e=>(e({type:"READER_LISTS_REQUEST"}),new Promise((e,t)=>{a.a.undocumented().readLists((s,a)=>{s?t(s):e(a)})}).then(t=>{e(function(e){return{type:"READER_LISTS_RECEIVE",lists:e}}(t.lists)),e({type:"READER_LISTS_REQUEST_SUCCESS",data:t})}).catch(t=>{e({type:"READER_LISTS_REQUEST_FAILURE",error:t})}))}function r(e,t){return s=>{s({type:"READER_LIST_REQUEST"});const n=c(e,t);return new Promise((s,r)=>{a.a.undocumented().readList(n,(a,n)=>{if(a){r({error:a,owner:e,slug:t})}else s(n)})}).then(e=>{s({type:"READER_LIST_REQUEST_SUCCESS",data:e})}).catch(e=>{s({type:"READER_LIST_REQUEST_FAILURE",error:e.error,owner:e.owner,slug:e.slug})})}}function o(e,t){return s=>{s({type:"READER_LISTS_FOLLOW",owner:e,slug:t});const n=c(e,t);return new Promise((e,t)=>{a.a.undocumented().followList(n,(s,a)=>{s?t(s):e(a)})}).then(e=>{s({type:"READER_LISTS_FOLLOW_SUCCESS",data:e})}).catch(e=>{s({type:"READER_LISTS_FOLLOW_FAILURE",error:e})})}}function i(e,t){return s=>{s({type:"READER_LISTS_UNFOLLOW",owner:e,slug:t});const n=c(e,t);return new Promise((e,t)=>{a.a.undocumented().unfollowList(n,(s,a)=>{s?t(s):e(a)})}).then(e=>{s({type:"READER_LISTS_UNFOLLOW_SUCCESS",data:e})}).catch(e=>{s({type:"READER_LISTS_UNFOLLOW_FAILURE",error:e})})}}function c(e,t){return{owner:decodeURIComponent(e),slug:decodeURIComponent(t)}}},"./client/state/reader/lists/selectors.js":function(e,t,s){"use strict";s.d(t,"d",function(){return r}),s.d(t,"e",function(){return o}),s.d(t,"b",function(){return i}),s.d(t,"a",function(){return c}),s.d(t,"f",function(){return l}),s.d(t,"c",function(){return d});var a=s("./node_modules/lodash/lodash.js"),n=s("./client/lib/create-selector/index.js");function r(e){return!!e.reader.lists.isRequestingList}function o(e){return!!e.reader.lists.isRequestingLists}const i=Object(n.a)(e=>Object(a.sortBy)(Object(a.filter)(e.reader.lists.items,t=>Object(a.includes)(e.reader.lists.subscribedLists,t.ID)),"slug"),e=>[e.reader.lists.items,e.reader.lists.subscribedLists]);function c(e,t,s){if(!Object(a.has)(e,"reader.lists.items")||!t||!s)return;const n=t.toLowerCase(),r=s.toLowerCase();return Object(a.find)(e.reader.lists.items,e=>e.owner===n&&e.slug===r)}function l(e,t,s){const n=c(e,t,s);return!!n&&Object(a.includes)(e.reader.lists.subscribedLists,n.ID)}function d(e,t,s){const n=t.toLowerCase(),r=s.toLowerCase();return!!Object(a.find)(e.reader.lists.missingLists,e=>e.owner===n&&e.slug===r)}},"./client/state/reader/tags/items/actions.js":function(e,t,s){"use strict";var a=s("./node_modules/lodash/lodash.js"),n=s("./node_modules/@babel/runtime/helpers/objectSpread.js"),r=s.n(n),o=s("./packages/i18n-calypso/dist/esm/index.js"),i=s("./client/state/data-layer/wpcom-http/actions.js"),c=s("./client/state/data-layer/wpcom-http/utils.js"),l=s("./client/lib/formatting/index.js");function d(e){if(!e||!e.tag&&!e.tags)throw new Error("invalid tags response: ".concat(JSON.stringify(e)));const t=Object(a.compact)(Object(a.concat)([],Object(a.isObject)(e.tag)&&e.tag,Object(a.isArray)(e.tags)&&e.tags));return Object(a.map)(t,e=>({id:e.ID,displayName:Object(l.b)(e.display_name),url:"/tag/".concat(e.slug),title:Object(l.b)(e.title),slug:e.slug.toLowerCase()}))}var p=s("./client/state/notices/actions.js"),u=s("./client/state/data-layer/handler-registry.js");const m=e=>!Object(a.get)(e,"payload.slug");Object(u.b)("state/data-layer/wpcom/read/tags/index.js",{READER_TAGS_REQUEST:[Object(c.a)({fetch:function(e){const t=e.payload&&e.payload.slug?"/read/tags/".concat(e.payload.slug):"/read/tags";return Object(i.a)({path:t,method:"GET",apiVersion:"1.2",onSuccess:e,onFailure:e})},onSuccess:function(e,t){const s=m(e),n=s;return s&&(t=Object(a.map)(t,e=>r()({},e,{isFollowing:!0}))),h({payload:t,resetFollowingData:n})},onError:function(e,t){if(404===Object(a.get)(Object(c.b)(e),"status")){const t=e.payload.slug;return h({payload:[{id:t,slug:t,error:!0}]})}const s=e.payload&&e.payload.slug?Object(o.translate)("Could not load tag, try refreshing the page"):Object(o.translate)("Could not load your followed tags, try refreshing the page");return[Object(p.b)(s),h({payload:[]})]},fromApi:d})]});Object(u.b)("state/data-layer/wpcom/read/tags/mine/delete/index.js",{READER_UNFOLLOW_TAG_REQUEST:[Object(c.a)({fetch:function(e){return Object(i.a)({path:"/read/tags/".concat(e.payload.slug,"/mine/delete"),method:"POST",apiVersion:"1.1",onSuccess:e,onFailure:e})},onSuccess:function(e,t){return j({payload:t})},onError:function(e,t){const s=Object(o.translate)("Could not unfollow tag: %(tag)s",{args:{tag:e.payload.slug}});return Object(p.b)(s)},fromApi:e=>{if(e.subscribed)throw new Error("failed to unsubscribe to tag with response: ".concat(JSON.stringify(e)));return e.removed_tag}})]}),Object(u.b)("state/data-layer/wpcom/read/tags/mine/new/index.js",{READER_FOLLOW_TAG_REQUEST:[Object(c.a)({fetch:function(e){return Object(i.a)({path:"/read/tags/".concat(e.payload.slug,"/mine/new"),method:"POST",apiVersion:"1.1",onSuccess:e,onFailure:e})},onSuccess:function(e,t){return h({payload:t})},onError:function(e,t){if(t&&"already_subscribed"===t.error)return;const s=Object(o.translate)("Could not follow tag: %(tag)s",{args:{tag:e.payload.slug}});return Object(p.b)(s)},fromApi:function(e){if(!1===e.subscribed)throw new Error("following tag failed with response: ".concat(JSON.stringify(e)));return d({tag:Object(a.find)(e.tags,{ID:e.added_tag})}).map(e=>r()({},e,{isFollowing:!0}))}})]}),s.d(t,"d",function(){return g}),s.d(t,"a",function(){return h}),s.d(t,"e",function(){return _}),s.d(t,"b",function(){return j}),s.d(t,"c",function(){return E});const b=e=>encodeURIComponent(Object(a.trim)(e).toLowerCase().replace(/\s+/g,"-").replace(/-{2,}/g,"-")),g=e=>{if(!e)return{type:"READER_TAGS_REQUEST"};return{type:"READER_TAGS_REQUEST",payload:{tag:e,slug:b(e)}}},h=e=>{let t=e.payload,s=e.resetFollowingData;return{type:"READER_TAGS_RECEIVE",payload:t,meta:{resetFollowingData:void 0!==s&&s}}},_=e=>({type:"READER_UNFOLLOW_TAG_REQUEST",payload:{tag:e,slug:b(e)}}),j=e=>{return{type:"READER_UNFOLLOW_TAG_RECEIVE",payload:e.payload}},E=e=>({type:"READER_FOLLOW_TAG_REQUEST",payload:{tag:e,slug:b(e)}})},"./client/state/selectors/get-user-setting.js":function(e,t,s){"use strict";s.d(t,"a",function(){return n});var a=s("./node_modules/lodash/lodash.js");function n(e,t){const s=e.userSettings,n=s.settings,r=s.unsavedSettings;let o=null;const i=Object(a.get)(n,t);return void 0!==i&&(o=Object(a.get)(r,t,i)),o}},"./client/state/selectors/get-user-settings.js":function(e,t,s){"use strict";function a(e){return e.userSettings.settings}s.d(t,"a",function(){return a})},"./client/state/user-settings/actions.js":function(e,t,s){"use strict";var a=s("./node_modules/debug/src/browser.js"),n=s.n(a),r=s("./node_modules/lodash/lodash.js"),o=(s("./client/state/selectors/get-user-settings.js"),s("./client/lib/formatting/index.js")),i=s("./client/state/data-layer/wpcom-http/utils.js");var c=s("./client/state/data-layer/wpcom-http/actions.js"),l=s("./client/state/data-layer/handler-registry.js");const d=new Set(["display_name","description","user_URL"]),p=e=>Object(r.mapValues)(e,(e,t)=>d.has(t)?Object(o.b)(e):e);Object(l.b)("state/data-layer/wpcom/me/settings/index.js",{USER_SETTINGS_REQUEST:[Object(i.a)({fetch:e=>Object(c.a)({apiVersion:"1.1",method:"GET",path:"/me/settings"},e),onSuccess:(e,t)=>m(t),onError:r.noop,fromApi:p})],USER_SETTINGS_SAVE:[Object(i.a)({fetch:function(e){return(t,s)=>{const a=e.settingsOverride||function(e){return e.userSettings.unsavedSettings}(s());Object(r.isEmpty)(a)||t(Object(c.a)({apiVersion:"1.1",method:"POST",path:"/me/settings",body:a},e))}},onSuccess:(e,t)=>{let a=e.settingsOverride;return e=>{e(m(p(t))),e(b(a?Object(r.keys)(a):null));const n=s("./client/lib/user/index.js");(n.default?n.default:n)().fetch()}},onError:r.noop,fromApi:p})]}),s.d(t,"b",function(){return u}),s.d(t,"c",function(){return m}),s.d(t,"a",function(){return b});n()("calypso:user:settings");const u=()=>({type:"USER_SETTINGS_REQUEST"}),m=e=>({type:"USER_SETTINGS_UPDATE",settingValues:e}),b=function(){return{type:"USER_SETTINGS_UNSAVED_CLEAR",settingNames:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}}},"./packages/material-design-icons/svg-sprite/material-icons.svg":function(e,t,s){e.exports=s.p+"images/material-icons-6cf660ece4cca003fedfff247d71d750.svg"}}]);