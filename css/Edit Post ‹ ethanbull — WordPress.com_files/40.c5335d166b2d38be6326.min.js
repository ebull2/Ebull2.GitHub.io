(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"./client/blocks/upgrade-nudge/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(s),i=n("./node_modules/react/index.js"),r=n.n(i),c=n("./node_modules/prop-types/index.js"),a=n.n(c),u=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/classnames/index.js"),d=n.n(l),p=n("./node_modules/lodash/lodash.js"),m=n("./packages/i18n-calypso/dist/esm/index.js"),h=n("./client/components/gridicon/index.jsx"),E=n("./client/components/button/index.jsx"),_=n("./client/components/card/index.jsx"),I=n("./client/lib/plans/constants.js"),C=n("./client/lib/url/index.js"),g=n("./client/state/sites/plans/selectors.js"),f=n("./client/lib/products-values/index.js"),j=n("./client/lib/analytics/track-component-view/index.jsx"),b=n("./client/state/analytics/actions.js"),y=n("./client/state/selectors/can-current-user.js"),O=n("./client/state/ui/selectors.js"),N=n("./client/state/sites/selectors.js");n("./client/blocks/upgrade-nudge/style.scss");class T extends r.a.Component{constructor(){super(...arguments),o()(this,"handleClick",()=>{const e=this.props,t=e.event,n=e.feature,s=e.onClick,o=e.recordTracksEvent;(t||n)&&o("calypso_upgrade_nudge_cta_click",{cta_name:t,cta_feature:n,cta_size:"regular"}),s()})}shouldDisplay(){const e=this.props,t=e.feature,n=e.jetpack,s=e.planHasFeature,o=e.shouldDisplay,i=e.site,r=e.canManageSite;return!0===o||(o?o():!!r&&(!(!i||"object"!=typeof i||"boolean"!=typeof i.jetpack)&&((!t||!s)&&(!(!t&&!Object(f.z)(i.plan))&&((t!==I.gb||!i.options.wordads)&&!(!n&&i.jetpack||n&&!i.jetpack))))))}render(){const e=this.props,t=e.className,n=e.compact,s=e.event,o=e.plan,i=e.feature,c=e.icon,a=e.message,u=e.site,l=e.title,p=e.translate;if(!this.shouldDisplay())return null;let m=this.props.href;!m&&u&&(m=Object(C.a)({feature:i,plan:o},"/plans/".concat(u.slug)));const I=d()("upgrade-nudge",t);return n?r.a.createElement(E.a,{className:I,onClick:this.handleClick,href:m},r.a.createElement(h.a,{className:"upgrade-nudge__icon",icon:c}),r.a.createElement("div",{className:"upgrade-nudge__info"},r.a.createElement("span",{className:"upgrade-nudge__title"},l||p("Upgrade to Premium")),r.a.createElement("span",{className:"upgrade-nudge__message"},a))):r.a.createElement(_.a,{compact:!0,className:I,onClick:this.handleClick,href:m},r.a.createElement(h.a,{className:"upgrade-nudge__icon",icon:c,size:18}),r.a.createElement("div",{className:"upgrade-nudge__info"},r.a.createElement("span",{className:"upgrade-nudge__title"},l||p("Upgrade to Premium")),r.a.createElement("span",{className:"upgrade-nudge__message"},a)),(s||i)&&r.a.createElement(j.a,{eventName:"calypso_upgrade_nudge_impression",eventProperties:{cta_name:s,cta_feature:i,cta_size:"regular"}}))}}o()(T,"propTypes",{onClick:a.a.func,className:a.a.string,message:a.a.string,icon:a.a.string,event:a.a.string,href:a.a.string,jetpack:a.a.bool,compact:a.a.bool,plan:a.a.string,feature:a.a.string,shouldDisplay:a.a.oneOfType([a.a.func,a.a.bool]),site:a.a.object,translate:a.a.func}),o()(T,"defaultProps",{onClick:p.noop,message:"And get your own domain address.",icon:"star",event:null,jetpack:!1,plan:null,feature:null,compact:!1,shouldDisplay:null,site:null,translate:p.identity}),t.a=Object(u.b)((e,t)=>{const n=Object(O.e)(e);return{site:Object(N.k)(e,n),planHasFeature:Object(g.i)(e,n,t.feature),canManageSite:Object(y.b)(e,n,"manage_options")}},{recordTracksEvent:b.i})(Object(m.localize)(T))},"./client/blocks/upgrade-nudge/style.scss":function(e,t,n){},"./client/components/button-group/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(s),i=n("./node_modules/react/index.js"),r=n.n(i),c=n("./node_modules/classnames/index.js"),a=n.n(c);n("./client/components/button-group/style.scss");class u extends i.PureComponent{render(){const e=a()("button-group",this.props.className,{"is-busy":this.props.busy,"is-primary":this.props.primary});return r.a.createElement("span",{className:e},this.props.children)}}o()(u,"propTypes",{children(e){let t=null;return r.a.Children.forEach(e.children,e=>{!e||e.props&&"button"===e.props.type||(t=new Error("All children elements should be a Button."))}),t}}),t.a=u},"./client/components/button-group/style.scss":function(e,t,n){},"./client/components/data/query-jetpack-modules/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(s),i=n("./node_modules/prop-types/index.js"),r=n.n(i),c=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js"),u=n("./client/state/selectors/is-fetching-jetpack-modules.js"),l=n("./client/state/jetpack/modules/actions.js");class d extends c.Component{componentWillMount(){this.request(this.props)}componentWillReceiveProps(e){this.props.siteId!==e.siteId&&this.request(e)}request(e){e.requestingModules||e.fetchModuleList(e.siteId)}render(){return null}}o()(d,"propTypes",{siteId:r.a.number.isRequired,requestingModules:r.a.bool,fetchModuleList:r.a.func}),t.a=Object(a.b)((e,t)=>({requestingModules:Object(u.a)(e,t.siteId)}),{fetchModuleList:l.c})(d)},"./client/components/data/query-publicize-connections/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/prop-types/index.js"),o=n.n(s),i=n("./node_modules/react/index.js"),r=n("./node_modules/react-redux/es/index.js"),c=n("./client/state/sharing/publicize/selectors.js"),a=n("./client/state/sharing/publicize/actions.js"),u=n("./client/state/ui/selectors.js");class l extends i.Component{componentDidMount(){!this.props.requestingConnections&&this.props.siteId&&this.props.requestConnections(this.props.siteId)}componentDidUpdate(e){let t=e.siteId;this.props.siteId&&t!==this.props.siteId&&!this.props.requestingConnections&&this.props.requestConnections(this.props.siteId)}render(){return null}}l.propTypes={requestConnections:o.a.func,requestingConnections:o.a.bool,selectedSite:o.a.bool,siteId:o.a.number},l.defaultProps={requestConnections:()=>{},requestingConnections:!1,selectedSite:!1,siteId:0},t.a=Object(r.b)((e,t)=>{let n=t.siteId,s=t.selectedSite;return n=n||s&&Object(u.e)(e),{requestingConnections:Object(c.f)(e,n),siteId:n}},{requestConnections:a.f})(l)},"./client/components/segmented-control/index.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(s),i=n("./node_modules/prop-types/index.js"),r=n.n(i),c=n("./node_modules/react/index.js"),a=n.n(c),u=n("./node_modules/classnames/index.js"),l=n.n(u);class d extends a.a.Component{render(){const e={"is-compact":this.props.compact,"is-primary":this.props.primary};return a.a.createElement("ul",{className:l()("segmented-control",e,this.props.className),style:this.props.style,role:"radiogroup"},this.props.children)}}o()(d,"propTypes",{children:r.a.node.isRequired,className:r.a.string,compact:r.a.bool,onSelect:r.a.func,style:r.a.object})},"./client/components/segmented-control/item.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(s),i=n("./node_modules/prop-types/index.js"),r=n.n(i),c=n("./node_modules/react/index.js"),a=n.n(c),u=n("./node_modules/classnames/index.js"),l=n.n(u);class d extends a.a.Component{constructor(){super(...arguments),o()(this,"handleKeyEvent",e=>{switch(e.keyCode){case 13:case 32:e.preventDefault(),document.activeElement.click()}})}render(){const e=l()({"segmented-control__item":!0,"is-selected":this.props.selected}),t=l()("segmented-control__link",{["item-index-".concat(this.props.index)]:null!=this.props.index});return a.a.createElement("li",{className:e},a.a.createElement("a",{href:this.props.path,className:t,onClick:this.props.onClick,title:this.props.title,"data-e2e-value":this.props.value,role:"radio",tabIndex:0,"aria-checked":this.props.selected,onKeyDown:this.handleKeyEvent},a.a.createElement("span",{className:"segmented-control__text"},this.props.children)))}}o()(d,"propTypes",{children:r.a.node.isRequired,path:r.a.string,selected:r.a.bool,title:r.a.string,value:r.a.string,onClick:r.a.func,index:r.a.number}),o()(d,"defaultProps",{selected:!1}),t.a=d},"./client/components/track-input-changes/index.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(s),i=n("./node_modules/react/index.js"),r=n.n(i),c=n("./node_modules/prop-types/index.js"),a=n.n(c),u=n("./node_modules/lodash/lodash.js");class l extends i.Component{constructor(){super(...arguments),o()(this,"onInputChange",()=>{this.inputEdited=!0}),o()(this,"onInputBlur",e=>{this.inputEdited&&(this.props.onNewValue(e),this.inputEdited=!1)})}componentWillMount(){this.inputEdited=!1}render(){const e=r.a.Children.only(this.props.children),t=Object(u.assign)({},e.props,{onChange:t=>{"function"==typeof e.props.onChange&&e.props.onChange.call(e,t),this.onInputChange(t)},onBlur:t=>{"function"==typeof e.props.onBlur&&e.props.onBlur.call(e,t),this.onInputBlur(t)}});return r.a.cloneElement(e,t)}}o()(l,"displayName","TrackInputChanges"),o()(l,"propTypes",{onNewValue:a.a.func}),o()(l,"defaultProps",{onNewValue:u.noop})},"./client/state/jetpack/modules/actions.js":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return u});var s=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),o=n.n(s),i=n("./node_modules/lodash/lodash.js"),r=n("./client/lib/wp/browser.js");const c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s=>(s({type:"JETPACK_MODULE_ACTIVATE",siteId:e,moduleSlug:t,silent:n}),r.a.undocumented().jetpackModuleActivate(e,t).then(()=>{s({type:"JETPACK_MODULE_ACTIVATE_SUCCESS",siteId:e,moduleSlug:t,silent:n})}).catch(o=>{s({type:"JETPACK_MODULE_ACTIVATE_FAILURE",siteId:e,moduleSlug:t,silent:n,error:o.message})}))},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s=>(s({type:"JETPACK_MODULE_DEACTIVATE",siteId:e,moduleSlug:t,silent:n}),r.a.undocumented().jetpackModuleDeactivate(e,t).then(()=>{s({type:"JETPACK_MODULE_DEACTIVATE_SUCCESS",siteId:e,moduleSlug:t,silent:n})}).catch(o=>{s({type:"JETPACK_MODULE_DEACTIVATE_FAILURE",siteId:e,moduleSlug:t,silent:n,error:o.message})}))};const u=e=>t=>(t({type:"JETPACK_MODULES_REQUEST",siteId:e}),r.a.undocumented().getJetpackModules(e).then(n=>{let s=n.data;const r=Object(i.mapValues)(s,e=>o()({active:e.activated},Object(i.omit)(e,"activated")));t(function(e,t){return{type:"JETPACK_MODULES_RECEIVE",siteId:e,modules:t}}(e,r)),t({type:"JETPACK_MODULES_REQUEST_SUCCESS",siteId:e})}).catch(n=>{t({type:"JETPACK_MODULES_REQUEST_FAILURE",siteId:e,error:n.message})}))},"./client/state/selectors/is-fetching-jetpack-modules.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var s=n("./node_modules/lodash/lodash.js");function o(e,t){return Object(s.get)(e.jetpack.modules.requests,[t,"fetchingModules"],null)}},"./client/state/sharing/publicize/actions.js":function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"g",function(){return c}),n.d(t,"f",function(){return a}),n.d(t,"e",function(){return u}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"d",function(){return m});var s=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),o=n.n(s),i=n("./client/lib/wp/browser.js");function r(e,t){return{type:"PUBLICIZE_SHARE_DISMISS",siteId:e,postId:t}}function c(e,t,n,s){return o=>(o({type:"PUBLICIZE_SHARE",siteId:e,postId:t,skippedConnections:n,message:s}),new Promise(r=>{i.a.undocumented().publicizePost(e,t,s,n,(n,s)=>{n||!s.results?o({type:"PUBLICIZE_SHARE_FAILURE",siteId:e,postId:t,error:n}):o({type:"PUBLICIZE_SHARE_SUCCESS",siteId:e,postId:t}),r()})}))}function a(e){return t=>(t({type:"PUBLICIZE_CONNECTIONS_REQUEST",siteId:e}),i.a.undocumented().siteConnections(e).then(n=>{t(function(e,t){return{type:"PUBLICIZE_CONNECTIONS_RECEIVE",siteId:e,data:t}}(e,n)),t({type:"PUBLICIZE_CONNECTIONS_REQUEST_SUCCESS",siteId:e})}).catch(n=>t({type:"PUBLICIZE_CONNECTIONS_REQUEST_FAILURE",siteId:e,error:n})))}function u(e,t){return n=>(n({type:"PUBLICIZE_CONNECTION_REQUEST",connectionId:t,siteId:e}),i.a.undocumented().site(e).getConnection(t).then(s=>{n({type:"PUBLICIZE_CONNECTION_RECEIVE",connection:s,siteId:e}),n({type:"PUBLICIZE_CONNECTION_REQUEST_SUCCESS",connectionId:t,siteId:e})}).catch(s=>n({type:"PUBLICIZE_CONNECTION_REQUEST_FAILURE",connectionId:t,error:s,siteId:e})))}function l(e,t,n){return s=>i.a.undocumented().createConnection(t,e,n,{shared:!1}).then(e=>s({type:"PUBLICIZE_CONNECTION_CREATE",connection:e})).catch(e=>s(m(e)))}function d(e,t){return n=>i.a.undocumented().updateConnection(e.site_ID,e.ID,t).then(e=>n({type:"PUBLICIZE_CONNECTION_UPDATE",connection:e})).catch(t=>n({type:"PUBLICIZE_CONNECTION_UPDATE_FAILURE",error:o()({},t,{label:e.label})}))}function p(e){return t=>i.a.undocumented().deleteSiteConnection(e.site_ID,e.ID).then(()=>t(h(e))).catch(n=>{n&&404===n.statusCode&&t(h(e)),t({type:"PUBLICIZE_CONNECTION_DELETE_FAILURE",error:o()({},n,{label:e.label})})})}function m(e){return{type:"PUBLICIZE_CONNECTION_CREATE_FAILURE",error:e}}function h(e){return{type:"PUBLICIZE_CONNECTION_DELETE",connection:e}}},"./client/state/sharing/publicize/selectors.js":function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return m}),n.d(t,"g",function(){return h}),n.d(t,"i",function(){return E}),n.d(t,"h",function(){return _});var s=n("./node_modules/lodash/lodash.js"),o=n("./client/lib/create-selector/index.js"),i=n("./client/state/selectors/can-current-user.js"),r=n("./client/state/current-user/selectors.js"),c=n("./client/state/ui/selectors.js");const a=Object(o.a)((e,t,n)=>Object(s.filter)(e.sharing.publicize.connections,e=>e.site_ID===t&&(e.shared||e.keyring_connection_user_ID===n)),e=>[e.sharing.publicize.connections]);function u(e,t,n,o){return Object(s.filter)(a(e,t,n),{service:o})}function l(e,t,n,o){return Object(s.filter)(u(e,t,n,o),{status:"broken"})}function d(e,t){const n=Object(c.e)(e),o=Object(r.g)(e),a=u(e,n,o,t);return Object(i.b)(e,n,"edit_others_posts")?a:Object(s.filter)(a,{user_ID:o})}function p(e,t){return Object(s.get)(e.sharing.publicize.fetchedConnections,[t],!1)}function m(e,t){return Object(s.get)(e.sharing.publicize.fetchingConnections,[t],!1)}function h(e,t,n){return Object(s.get)(e.sharing.publicize.sharePostStatus,[t,n,"requesting"],!1)}function E(e,t,n){return Object(s.get)(e.sharing.publicize.sharePostStatus,[t,n,"success"],!1)}function _(e,t,n){return!0===Object(s.get)(e.sharing.publicize.sharePostStatus,[t,n,"error"],!1)}}}]);