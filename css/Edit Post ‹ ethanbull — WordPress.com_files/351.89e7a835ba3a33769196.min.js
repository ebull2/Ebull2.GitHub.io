(window.webpackJsonp=window.webpackJsonp||[]).push([[351],{"./client/components/card/compact.jsx":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var n=i("./node_modules/@babel/runtime/helpers/extends.js"),a=i.n(n),s=i("./node_modules/react/index.js"),o=i.n(s),c=i("./node_modules/classnames/index.js"),r=i.n(c),l=i("./client/components/card/index.jsx");function d(e){return o.a.createElement(l.a,a()({},e,{className:r()(e.className,"is-compact")}),e.children)}},"./client/components/data/query-site-settings/index.js":function(e,t,i){"use strict";var n=i("./node_modules/react/index.js"),a=i("./node_modules/prop-types/index.js"),s=i.n(a),o=i("./node_modules/react-redux/es/index.js"),c=i("./client/state/site-settings/selectors.js"),r=i("./client/state/site-settings/actions.js");class l extends n.Component{componentWillMount(){this.requestSettings(this.props)}componentWillReceiveProps(e){const t=this.props.siteId;e.siteId&&t!==e.siteId&&this.requestSettings(e)}requestSettings(e){const t=e.requestingSiteSettings,i=e.siteId;!t&&i&&e.requestSiteSettings(i)}render(){return null}}l.propTypes={siteId:s.a.number,requestingSiteSettings:s.a.bool,requestSiteSettings:s.a.func},t.a=Object(o.b)((e,t)=>{let i=t.siteId;return{requestingSiteSettings:Object(c.c)(e,i)}},{requestSiteSettings:r.a})(l)},"./client/components/forms/form-checkbox/index.jsx":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/extends.js"),a=i.n(n),s=i("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),o=i.n(s),c=i("./node_modules/react/index.js"),r=i.n(c),l=i("./node_modules/classnames/index.js"),d=i.n(l);t.a=(e=>{let t=e.className,i=o()(e,["className"]);return r.a.createElement("input",a()({},i,{type:"checkbox",className:d()(t,"form-checkbox")}))})},"./client/components/forms/form-label/index.jsx":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/extends.js"),a=i.n(n),s=i("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),o=i.n(s),c=i("./node_modules/@babel/runtime/helpers/objectSpread.js"),r=i.n(c),l=i("./node_modules/react/index.js"),d=i.n(l),m=i("./node_modules/prop-types/index.js"),u=i.n(m),p=i("./node_modules/classnames/index.js"),h=i.n(p),y=i("./packages/i18n-calypso/dist/esm/index.js"),g=i("./node_modules/lodash/lodash.js");const v=e=>{let t=e.children,i=e.required,n=e.optional,s=e.translate,c=e.className,l=o()(e,["children","required","optional","translate","className"]);return t=d.a.Children.toArray(t)||[],i&&t.push((e=>d.a.createElement("small",{className:"form-label__required"},e("Required")))(s)),n&&t.push((e=>d.a.createElement("small",{className:"form-label__optional"},e("Optional")))(s)),d.a.createElement("label",a()({},Object(g.omit)(l,"moment","numberFormat"),{className:h()(c,"form-label")}),t.length?(e=>e.map((e,t)=>Object(g.isObject)(e)?r()({},e,{key:t}):e))(t):null)};v.propTypes={required:u.a.bool},t.a=Object(y.localize)(v)},"./client/components/happychat/button.jsx":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=i.n(n),s=i("./node_modules/prop-types/index.js"),o=i.n(s),c=i("./node_modules/react/index.js"),r=i.n(c),l=i("./node_modules/page/page.js"),d=i.n(l),m=i("./node_modules/lodash/lodash.js"),u=i("./node_modules/react-redux/es/index.js"),p=i("./packages/i18n-calypso/dist/esm/index.js"),h=i("./client/components/gridicon/index.jsx"),y=i("./node_modules/classnames/index.js"),g=i.n(y),v=i("./client/lib/viewport/index.js"),b=i("./client/state/happychat/utils.js"),f=i("./client/lib/create-selector/index.js"),_=i("./client/state/happychat/selectors/get-happychat-timeline.js"),j=e=>Object(m.get)(e,"happychat.ui.lostFocusAt"),E=Object(f.a)(e=>{const t=Object(m.get)(Object(m.last)(Object(_.a)(e)),"timestamp"),i=j(e);return"number"==typeof t&&"number"==typeof i&&1e3*t>=i},[_.a,j]),x=i("./client/state/happychat/selectors/has-active-happychat-session.js"),C=i("./client/state/happychat/selectors/is-happychat-available.js"),k=i("./client/state/happychat/selectors/is-happychat-connection-uninitialized.js"),w=i("./client/state/happychat/connection/actions.js"),S=i("./client/state/happychat/ui/actions.js"),O=i("./client/components/button/index.jsx");class N extends c.Component{constructor(){super(...arguments),a()(this,"onClick",e=>{this.props.allowMobileRedirect&&Object(v.e)()?d()("/me/chat"):this.props.openChat(),this.props.onClick(e)})}componentDidMount(){this.props.isConnectionUninitialized&&this.props.initConnection(this.props.getAuth())}render(){const e=this.props,t=e.translate,i=e.children,n=e.className,a=e.primary,s=e.borderless,o=e.hasUnread,c=e.isChatAvailable,l=e.isChatActive,d=c||l,m=g()("happychat__button",n,{"has-unread":o});return d?r.a.createElement(O.a,{className:m,primary:a,borderless:s,onClick:this.onClick,title:t("Support Chat")},i||r.a.createElement(h.a,{icon:"chat"})):null}}a()(N,"propTypes",{allowMobileRedirect:o.a.bool,borderless:o.a.bool,primary:o.a.bool,getAuth:o.a.func,initConnection:o.a.func,isChatActive:o.a.bool,isChatAvailable:o.a.bool,isConnectionUninitialized:o.a.bool,onClick:o.a.func,openChat:o.a.func,translate:o.a.func}),a()(N,"defaultProps",{allowMobileRedirect:!1,borderless:!0,getAuth:m.noop,initConnection:m.noop,isChatActive:!1,isChatAvailable:!1,isConnectionUninitialized:!1,onClick:m.noop,openChat:m.noop,translate:m.identity});t.a=Object(u.b)(e=>({hasUnread:E(e),getAuth:Object(b.a)(e),isChatAvailable:Object(C.a)(e),isChatActive:Object(x.a)(e),isConnectionUninitialized:Object(k.a)(e)}),{openChat:S.f,initConnection:w.a})(Object(p.localize)(N))},"./client/components/popover/menu.jsx":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=i.n(n),s=i("./node_modules/react/index.js"),o=i.n(s),c=i("./node_modules/prop-types/index.js"),r=i.n(c),l=i("./client/components/popover/index.jsx");const d=e=>"HR"===e.tagName;class m extends s.Component{constructor(){var e;super(...arguments),e=this,a()(this,"menu",o.a.createRef()),a()(this,"_setPropsOnChild",e=>{if(null==e)return e;const t=e.props,i=t.action,n=t.onClick;return o.a.cloneElement(e,{action:null,onClick:()=>{n&&n(),this._onClose(i)}})}),a()(this,"_onShow",()=>{const e=this.menu.current;this._previouslyFocusedElement=document.activeElement,e&&e.focus()}),a()(this,"_getClosestSibling",function(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e.menu.current;let a=n.firstChild,s=n.lastChild;if(i||(a=n.lastChild,s=n.firstChild),t===n)return a;const o=t[i?"nextSibling":"previousSibling"]||s;return d(o)?e._getClosestSibling(o,i):o}),a()(this,"_onKeyDown",e=>{const t=e.target;let i,n=!1;switch(e.keyCode){case 9:this.props.onClose(),n=!0;break;case 38:i=this._getClosestSibling(t,!1),n=!0;break;case 40:i=this._getClosestSibling(t,!0),n=!0}i&&i.focus(),n&&e.preventDefault()}),a()(this,"_onClose",e=>{this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null),this.props.onClose&&this.props.onClose(e)})}componentWillUnmount(){this._previouslyFocusedElement=null}render(){const e=this.props,t=e.popoverComponent,i=e.autoPosition,n=e.className,a=e.context,s=e.customPosition,c=e.isVisible,r=e.popoverTitle,l=e.position,d=e.rootClassName;return o.a.createElement(t,{onClose:this._onClose,onShow:this._onShow,autoPosition:i,className:n,context:a,customPosition:s,isVisible:c,popoverTitle:r,position:l,rootClassName:d},o.a.createElement("div",{ref:this.menu,role:"menu",className:"popover__menu",onKeyDown:this._onKeyDown,tabIndex:"-1"},o.a.Children.map(this.props.children,this._setPropsOnChild,this)))}}a()(m,"propTypes",{autoPosition:r.a.bool,isVisible:r.a.bool.isRequired,onClose:r.a.func.isRequired,position:r.a.string,className:r.a.string,rootClassName:r.a.string,popoverComponent:r.a.func,popoverTitle:r.a.string,customPosition:r.a.object}),a()(m,"defaultProps",{autoPosition:!0,position:"top",popoverComponent:l.a}),t.a=m},"./client/lib/scroll-to/index.js":function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=i.n(n);const s=new Map;function o(e){return e=e&&void 0!==e.scrollTop?e:window,function(t,i){e===window?e.scrollTo(t,i):(e.scrollTop=i,e.scrollLeft=t)}}class c{constructor(e){a()(this,"finish",()=>{this.updater(this.end.x,this.end.y),this.onComplete&&this.onComplete(),s.delete(this.container)}),a()(this,"step",e=>{if(this.nextFrame=null,!this.startTime)return this.startTime=e,void this.animate();if(e-this.startTime>=this.duration)return void this.finish();const t=(e-this.startTime)/this.duration,i=this.easing(t),n=Math.round(this.start.x+(this.end.x-this.start.x)*i),a=Math.round(this.start.y+(this.end.y-this.start.y)*i);n===this.x&&a===this.y||(this.x=n,this.y=a,this.updater(n,a)),this.animate()}),this.x=e.x,this.y=e.y,this.startTime=null,this.duration=e.duration,this.start=e.start,this.end=e.end,this.onStart=e.onStart,this.onComplete=e.onComplete,this.updater=e.updater,this.easing=e.easing,this.container=e.container}animate(){this.nextFrame=requestAnimationFrame(this.step)}cancel(){this.nextFrame&&(cancelAnimationFrame(this.nextFrame),this.nextFrame=null),this.finishTimeout&&(clearTimeout(this.finishTimeout),this.finishTimeout=null)}jumpTo(e,t){this.cancel(),this.end={x:e,y:t},this.updater(e,t),this.finishTimeout=setTimeout(this.finish,this.duration)}}function r(e){const t=e-1;return Math.sqrt(1-t*t)}function l(e){const t=e.container||window;if(s.has(t)){return void s.get(t).jumpTo(e.x,e.y)}const i=function(e){return e&&void 0!==e.scrollTop?{x:e.scrollLeft,y:e.scrollTop}:{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}}(t),n=new c({start:i,end:{x:e.x,y:e.y},container:t,easing:e.easing||r,duration:e.duration||500,updater:o(t),x:i.x,y:i.y,onStart:e.onStart,onComplete:e.onComplete});return s.set(t,n),n.animate(),e.onStart&&e.onStart(),n}},"./client/lib/site/timezone.js":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("./node_modules/moment-timezone/index.js"),a=i.n(n);function s(e,t){let i=t.timezone,n=t.gmtOffset;return i?a.a.tz(e,i):n?a()(e).utcOffset(n):a()(e)}},"./client/lib/viewport/react.js":function(e,t,i){"use strict";i.d(t,"a",function(){return u}),i.d(t,"c",function(){return p}),i.d(t,"b",function(){return h});var n=i("./node_modules/@babel/runtime/helpers/extends.js"),a=i.n(n),s=i("./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=i.n(s),c=i("./node_modules/react/index.js"),r=i.n(c),l=i("./node_modules/@wordpress/compose/build-module/index.js"),d=i("./client/lib/viewport/index.js");function m(e){const t=Object(c.useState)(()=>({isActive:Object(d.f)(e),breakpoint:e})),i=o()(t,2),n=i[0],a=i[1];return Object(c.useEffect)(()=>{return Object(d.g)(e,function(t){a(i=>i.isActive===t&&i.breakpoint===e?i:{isActive:t,breakpoint:e})})},[e]),e===n.breakpoint?n.isActive:Object(d.f)(e)}function u(){return m(d.b)}const p=Object(l.a)(e=>Object(c.forwardRef)((t,i)=>{const n=m(d.b);return r.a.createElement(e,a()({},t,{isBreakpointActive:n,ref:i}))}),"WithMobileBreakpoint"),h=Object(l.a)(e=>Object(c.forwardRef)((t,i)=>{const n=m(d.a);return r.a.createElement(e,a()({},t,{isBreakpointActive:n,ref:i}))}),"WithDesktopBreakpoint")},"./client/my-sites/activity/activity-log-confirm-dialog/style.scss":function(e,t,i){},"./client/my-sites/activity/activity-log-item/activity-actor.jsx":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=i.n(n),s=i("./node_modules/react/index.js"),o=i.n(s),c=i("./node_modules/prop-types/index.js"),r=i.n(c),l=i("./client/components/gravatar/index.jsx"),d=i("./client/components/jetpack-logo/index.jsx"),m=i("./client/components/social-logo/index.jsx"),u=i("./packages/i18n-calypso/dist/esm/index.js"),p=i("./client/components/gridicon/index.jsx");class h extends s.PureComponent{render(){const e=this.props.icon;return o.a.createElement("div",{className:"activity-log-item__activity-actor"},o.a.createElement(p.a,{icon:e,size:18}))}}a()(h,"propTypes",{icon:r.a.string.isRequired}),i.d(t,"a",function(){return f});const y=o.a.createElement("div",{className:"activity-log-item__actor"},o.a.createElement(d.a,{size:40}),o.a.createElement("div",{className:"activity-log-item__actor-info"},o.a.createElement("div",{className:"activity-log-item__actor-name"},"Jetpack"))),g=o.a.createElement("div",{className:"activity-log-item__actor"},o.a.createElement(d.a,{size:40}),o.a.createElement("div",{className:"activity-log-item__actor-info"},o.a.createElement("div",{className:"activity-log-item__actor-name"},"Happiness Engineer"))),v=o.a.createElement("div",{className:"activity-log-item__actor"},o.a.createElement(m.a,{icon:"wordpress",size:40}),o.a.createElement("div",{className:"activity-log-item__actor-info"},o.a.createElement("div",{className:"activity-log-item__actor-name"},"WordPress"))),b=o.a.createElement("div",{className:"activity-log-item__actor"},o.a.createElement(h,{icon:"multiple-users"}),o.a.createElement("div",{className:"activity-log-item__actor-info"},o.a.createElement("div",{className:"activity-log-item__actor-name"},Object(u.translate)("Multiple users"))));class f extends s.PureComponent{render(){const e=this.props,t=e.actorAvatarUrl,i=e.actorName,n=e.actorRole,a=e.actorType;return"WordPress"===i&&"Application"===a?v:"Jetpack"===i&&"Application"===a?y:"Happiness Engineer"===i&&"Happiness Engineer"===a?g:"Multiple"===a?b:o.a.createElement("div",{className:"activity-log-item__actor"},o.a.createElement(l.a,{user:{avatar_URL:t},size:40}),o.a.createElement("div",{className:"activity-log-item__actor-info"},o.a.createElement("div",{className:"activity-log-item__actor-name"},i),n&&o.a.createElement("div",{className:"activity-log-item__actor-role"},n)))}}a()(f,"propTypes",{actor:r.a.shape({actorAvatarUrl:r.a.string,actorName:r.a.string,actorRole:r.a.string,actorType:r.a.string})})},"./client/my-sites/activity/activity-log-item/activity-description.jsx":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=i.n(n),s=i("./node_modules/react/index.js"),o=i.n(s),c=i("./packages/i18n-calypso/dist/esm/index.js"),r=i("./client/lib/analytics/index.js"),l=i("./node_modules/lodash/lodash.js");const d=e=>{let t=e.content,i=void 0===t?{}:t,n=e.onClick,a=void 0===n?null:n,s=e.meta,c=void 0===s?{}:s;const r=i.siteId,m=i.children,u=i.commentId,p=i.isTrashed,h=i.name,y=i.postId,g=i.text,v=void 0===g?null:g,b=i.type,f=i.siteSlug,_=i.pluginSlug,j=i.themeSlug,E=i.themeUri,x=c.activity,C=c.intent,k=c.section;if("string"==typeof i)return i;if(void 0===b&&!m)return v;const w=m.map((e,t)=>o.a.createElement(d,{key:t,content:e,onClick:a,meta:c}));switch(b){case"a":case"link":const e=Object(l.startsWith)(i.url,"https://wordpress.com/")?i.url.substr(21):i.url;return o.a.createElement("a",{href:e,onClick:a,"data-activity":x,"data-section":k,"data-intent":C},w);case"b":return o.a.createElement("strong",null,w);case"comment":return o.a.createElement("a",{href:"/read/blogs/".concat(r,"/posts/").concat(y,"#comment-").concat(u)},w);case"filepath":return o.a.createElement("div",null,o.a.createElement("code",null,w));case"i":return o.a.createElement("em",null,w);case"person":return o.a.createElement("a",{href:"/people/edit/".concat(r,"/").concat(h),onClick:a,"data-activity":x,"data-section":"users","data-intent":"edit"},o.a.createElement("strong",null,w));case"plugin":return o.a.createElement("a",{href:"/plugins/".concat(_,"/").concat(f),onClick:a,"data-activity":x,"data-section":"plugins","data-intent":"view"},w);case"post":return p?o.a.createElement("a",{href:"/posts/".concat(r,"/trash")},w):o.a.createElement("a",{href:"/read/blogs/".concat(r,"/posts/").concat(y)},o.a.createElement("em",null,w));case"pre":return o.a.createElement("pre",null,w);case"theme":return E?/wordpress\.com/.test(E)?o.a.createElement("a",{href:"/theme/".concat(j,"/").concat(f),onClick:a,"data-activity":x,"data-section":"themes","data-intent":"view"},w):o.a.createElement("a",{href:E,target:"_blank",rel:"noopener noreferrer",onClick:a,"data-activity":x,"data-section":"themes","data-intent":"view"},w):w;default:return w}};var m=d;t.a=Object(c.localize)(class extends s.Component{constructor(){super(...arguments),a()(this,"trackContentLinkClick",e=>{let t=e.target.dataset;const i={activity:t.activity,section:t.section,intent:t.intent};r.default.tracks.recordEvent("calypso_activitylog_item_click",i)})}render(){const e=this.props,t=e.activity,i=t.activityName,n=t.activityDescription,a=t.activityMeta,s=e.translate,c=e.rewindIsActive;return"rewind__backup_error"===i&&"bad_credentials"===a.errorCode&&c?s("Jetpack had some trouble connecting to your site, but that problem has been resolved."):n.map((e,t)=>{const n=e.intent,a=e.section;return o.a.createElement(m,{key:t,content:e,onClick:this.trackContentLinkClick,meta:{activity:i,intent:n,section:a}})})}})},"./client/my-sites/activity/activity-log-item/activity-icon.jsx":function(e,t,i){"use strict";i.d(t,"a",function(){return u});var n=i("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=i.n(n),s=i("./node_modules/react/index.js"),o=i.n(s),c=i("./node_modules/prop-types/index.js"),r=i.n(c),l=i("./node_modules/classnames/index.js"),d=i.n(l),m=i("./client/components/gridicon/index.jsx");class u extends s.PureComponent{render(){const e=this.props,t=e.activityIcon,i=e.activityStatus,n=d()("activity-log-item__activity-icon",i&&"is-".concat(i));return o.a.createElement("div",{className:n},o.a.createElement(m.a,{icon:t,size:24}))}}a()(u,"propTypes",{activityIcon:r.a.string.isRequired,activityStatus:r.a.string})},"./client/my-sites/activity/activity-log-item/activity-media.jsx":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var n=i("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=i.n(n),s=i("./node_modules/react/index.js"),o=i.n(s),c=i("./node_modules/prop-types/index.js"),r=i.n(c),l=i("./client/components/gridicon/index.jsx");class d extends s.PureComponent{render(){const e=this.props,t=e.icon,i=e.thumbnail,n=e.fullImage,a=e.name,s=e.className;return o.a.createElement("div",{className:s},t&&o.a.createElement(l.a,{icon:t,size:48}),i&&o.a.createElement("img",{src:i,alt:a,className:"is-thumbnail"}),n&&o.a.createElement("img",{src:n,alt:a,className:"is-full-width"}))}}a()(d,"propTypes",{icon:r.a.oneOfType([r.a.bool,r.a.string]),thumbnail:r.a.oneOfType([r.a.bool,r.a.string]),fullImage:r.a.oneOfType([r.a.bool,r.a.string]),name:r.a.oneOfType([r.a.bool,r.a.string]),className:r.a.string})},"./client/my-sites/activity/activity-log-item/index.jsx":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=i.n(n),s=i("./node_modules/react/index.js"),o=i.n(s),c=i("./node_modules/prop-types/index.js"),r=i.n(c),l=i("./node_modules/react-redux/es/index.js"),d=i("./node_modules/classnames/index.js"),m=i.n(d),u=i("./packages/i18n-calypso/dist/esm/index.js"),p=i("./node_modules/lodash/lodash.js"),h=i("./client/lib/scroll-to/index.js"),y=i("./client/lib/site/timezone.js"),g=i("./client/my-sites/activity/activity-log-item/activity-actor.jsx"),v=i("./client/my-sites/activity/activity-log-item/activity-description.jsx"),b=i("./client/my-sites/activity/activity-log-item/activity-media.jsx"),f=i("./client/my-sites/activity/activity-log-item/activity-icon.jsx"),_=i("./client/config/index.js"),j=i("./client/components/button/index.jsx"),E=i("./client/components/card/index.jsx"),x=i("./client/components/forms/form-label/index.jsx"),C=i("./client/components/forms/form-checkbox/index.jsx"),k=i("./client/components/gridicon/index.jsx"),w=i("./client/components/happychat/button.jsx"),S=i("./client/state/analytics/actions.js");i("./client/my-sites/activity/activity-log-confirm-dialog/style.scss");const O={happychatEvent:()=>Object(S.i)("calypso_activitylog_confirm_dialog")};var N=Object(l.b)(null,O)(Object(u.localize)(e=>{let t=e.children,i=e.confirmTitle,n=e.icon,a=void 0===n?"history":n,s=e.notice,c=e.onClose,r=e.onConfirm,l=e.onSettingsChange,d=e.supportLink,m=e.title,u=e.translate,p=e.happychatEvent;return o.a.createElement("div",{className:"activity-log-item activity-log-item__restore-confirm"},o.a.createElement("div",{className:"activity-log-item__type"},o.a.createElement(f.a,{activityIcon:a})),o.a.createElement(E.a,{className:"activity-log-item__card"},o.a.createElement("h5",{className:"activity-log-confirm-dialog__title"},m),o.a.createElement("div",{className:"activity-log-confirm-dialog__highlight"},t),_.a.isEnabled("rewind/partial-restores")&&o.a.createElement(E.a,{className:"activity-log-confirm-dialog__partial-restore-settings"},o.a.createElement("p",null,o.a.createElement("strong",null,u(s?"Partial Restore Settings (A8C Only)":"Partial Download Settings (A8C Only)"))),o.a.createElement("p",null,u(s?"Include the following things in this restore:":"Include the following things in this download:")),o.a.createElement(x.a,null,o.a.createElement(C.a,{name:"themes",onChange:l,defaultChecked:!0}),u("WordPress Themes")),o.a.createElement(x.a,null,o.a.createElement(C.a,{name:"plugins",onChange:l,defaultChecked:!0}),u("WordPress Plugins")),o.a.createElement(x.a,null,o.a.createElement(C.a,{name:"uploads",onChange:l,defaultChecked:!0}),u("Media Uploads")),o.a.createElement(x.a,null,o.a.createElement(C.a,{name:"roots",onChange:l,defaultChecked:!0}),u("WordPress Root (includes wp-config.php and any non-WordPress files)")),o.a.createElement(x.a,null,o.a.createElement(C.a,{name:"contents",onChange:l,defaultChecked:!0}),u("WP-Content Directory (excluding themes, plugins, and uploads)")),o.a.createElement(x.a,null,o.a.createElement(C.a,{name:"sqls",onChange:l,defaultChecked:!0}),u("Site Database (SQL)"))),s&&o.a.createElement("div",{className:"activity-log-confirm-dialog__notice"},o.a.createElement(k.a,{icon:"notice"}),o.a.createElement("span",{className:"activity-log-confirm-dialog__notice-content"},s)),o.a.createElement("div",{className:"activity-log-confirm-dialog__button-wrap"},o.a.createElement("div",{className:"activity-log-confirm-dialog__primary-actions"},o.a.createElement(j.a,{onClick:c},u("Cancel")),o.a.createElement(j.a,{primary:!0,onClick:r},i)),o.a.createElement("div",{className:"activity-log-confirm-dialog__secondary-actions"},o.a.createElement(j.a,{borderless:!0,className:"activity-log-confirm-dialog__more-info-link",href:d},o.a.createElement(k.a,{icon:"notice"}),o.a.createElement("span",null,u("More info"))),o.a.createElement(w.a,{className:"activity-log-confirm-dialog__more-info-link",onClick:p},o.a.createElement(k.a,{icon:"chat"}),o.a.createElement("span",null,u("Any Questions?")))))))})),T=i("./client/components/ellipsis-menu/index.jsx"),A=i("./client/components/foldable-card/index.jsx"),I=i("./client/components/popover/menu-item.jsx"),R=i("./client/components/popover/menu-separator.jsx"),P=i("./client/state/activity-log/actions.js"),q=i("./client/state/selectors/get-requested-backup.js"),z=i("./client/state/selectors/get-requested-rewind.js"),U=i("./client/state/selectors/get-rewind-state.js"),F=i("./client/state/selectors/get-site-gmt-offset.js"),H=i("./client/state/selectors/get-site-timezone-value.js"),L=i("./client/state/sites/selectors.js"),M=i("./client/lib/viewport/react.js"),B=i("./client/components/localized-moment/index.js");i("./client/my-sites/activity/activity-log-item/style.scss");class W extends s.Component{constructor(){super(...arguments),a()(this,"state",{restoreArgs:{themes:!0,plugins:!0,uploads:!0,sqls:!0,roots:!0,contents:!0},downloadArgs:{themes:!0,plugins:!0,uploads:!0,sqls:!0,roots:!0,contents:!0}}),a()(this,"confirmBackup",()=>this.props.confirmBackup(this.props.activity.rewindId,this.state.downloadArgs)),a()(this,"confirmRewind",()=>this.props.confirmRewind(this.props.activity.rewindId,this.props.activity.activityName,this.state.restoreArgs)),a()(this,"restoreSettingsChange",e=>{let t=e.target,i=t.name,n=t.checked;return this.setState({restoreArgs:Object.assign(this.state.restoreArgs,{[i]:n})})}),a()(this,"downloadSettingsChange",e=>{let t=e.target,i=t.name,n=t.checked;return this.setState({downloadArgs:Object.assign(this.state.downloadArgs,{[i]:n})})}),a()(this,"sizeChanged",()=>{this.forceUpdate()}),a()(this,"renderCloneAction",()=>{const e=this.props.translate;return o.a.createElement("div",{className:"activity-log-item__action"},o.a.createElement(j.a,{className:"activity-log-item__clone-action",primary:!0,compact:!0,onClick:this.performCloneAction},e("Clone from here")))}),a()(this,"performCloneAction",()=>this.props.cloneOnClick(this.props.activity.activityTs)),a()(this,"renderHelpAction",()=>o.a.createElement(w.a,{className:"activity-log-item__help-action",borderless:!1,onClick:this.handleTrackHelp},o.a.createElement(k.a,{icon:"chat",size:18}),this.props.translate("Get help"))),a()(this,"handleTrackHelp",()=>this.props.trackHelp(this.props.activity.activityName)),a()(this,"renderFixCredsAction",()=>{if(this.props.rewindIsActive)return null;const e=this.props,t=e.siteId,i=e.siteSlug,n=e.trackFixCreds,a=e.translate,s=e.canAutoconfigure;return o.a.createElement(j.a,{className:"activity-log-item__quick-action",primary:!0,compact:!0,href:s?"/start/rewind-auto-config/?blogid=".concat(t,"&siteSlug=").concat(i):"/start/rewind-setup/?siteId=".concat(t,"&siteSlug=").concat(i),onClick:n},a("Fix credentials"))})}renderHeader(){const e=this.props.activity,t=e.activityTitle,i=e.actorAvatarUrl,n=e.actorName,a=e.actorRole,s=e.actorType,c=e.activityMedia,r=e.isBreakpointActive;return o.a.createElement("div",{className:"activity-log-item__card-header"},o.a.createElement(g.a,{actorAvatarUrl:i,actorName:n,actorRole:a,actorType:s}),c&&r&&o.a.createElement(b.a,{className:m()({"activity-log-item__activity-media":!0,"is-desktop":!0,"has-gridicon":!c.available}),icon:!c.available&&c.gridicon,name:c.available&&c.name,thumbnail:c.available&&c.thumbnail_url,fullImage:!1}),o.a.createElement("div",{className:"activity-log-item__description"},o.a.createElement("div",{className:"activity-log-item__description-content"},o.a.createElement(v.a,{activity:this.props.activity,rewindIsActive:this.props.rewindIsActive})),o.a.createElement("div",{className:"activity-log-item__description-summary"},t)),c&&!r&&o.a.createElement(b.a,{className:"activity-log-item__activity-media is-mobile",icon:!1,name:c.available&&c.name,thumbnail:!1,fullImage:c.available&&c.medium_url}))}renderItemAction(){const e=this.props,t=e.enableClone,i=e.activity,n=i.activityIsRewindable,a=i.activityName,s=i.activityMeta;if(t)return n?this.renderCloneAction():null;switch(a){case"rewind__scan_result_found":return this.renderHelpAction();case"rewind__backup_error":return"bad_credentials"===s.errorCode?this.renderFixCredsAction():this.renderHelpAction()}}renderRewindAction(){const e=this.props,t=e.createBackup,i=e.createRewind,n=e.disableRestore,a=e.disableBackup,s=e.hideRestore,c=e.activity,r=e.translate;return s||!c.activityIsRewindable?null:o.a.createElement("div",{className:"activity-log-item__action"},o.a.createElement(T.a,null,o.a.createElement(I.a,{disabled:n,icon:"history",onClick:i},r("Rewind to this point")),o.a.createElement(R.a,null),o.a.createElement(I.a,{disabled:a,icon:"cloud-download",onClick:t},r("Download backup"))))}render(){const e=this.props,t=e.activity,i=e.className,n=e.dismissBackup,a=e.dismissRewind,s=e.gmtOffset,c=e.mightBackup,r=e.mightRewind,l=e.moment,d=e.timezone,u=e.translate,p=t.activityIcon,h=t.activityStatus,g=t.activityTs,v=m()("activity-log-item",i),b=Object(y.a)(l(g),{timezone:d,gmtOffset:s});return o.a.createElement(o.a.Fragment,null,r&&o.a.createElement(N,{key:"activity-rewind-dialog",confirmTitle:u("Confirm Rewind"),notice:u("This will remove all content and options created or changed since then."),onClose:a,onConfirm:this.confirmRewind,onSettingsChange:this.restoreSettingsChange,supportLink:"https://jetpack.com/support/how-to-rewind",title:u("Rewind Site")},u("This is the selected point for your site Rewind. Are you sure you want to rewind your site back to {{time/}}?",{components:{time:o.a.createElement("b",null,b.format("LLL"))}})),c&&o.a.createElement(N,{key:"activity-backup-dialog",confirmTitle:u("Create download"),onClose:n,onConfirm:this.confirmBackup,onSettingsChange:this.downloadSettingsChange,supportLink:"https://jetpack.com/support/backups",title:u("Create downloadable backup"),type:"backup",icon:"cloud-download"},u("We will build a downloadable backup of your site at {{time/}}. You will get a notification when the backup is ready to download.",{components:{time:o.a.createElement("b",null,b.format("LLL"))}})),o.a.createElement("div",{className:v},o.a.createElement("div",{className:"activity-log-item__type"},o.a.createElement("div",{className:"activity-log-item__time",title:b.format("LTS")},b.format("LT")),o.a.createElement(f.a,{activityIcon:p,activityStatus:h})),o.a.createElement(A.a,{className:"activity-log-item__card",expandedSummary:this.renderItemAction(),header:this.renderHeader(),actionButton:this.renderRewindAction(),summary:this.renderItemAction()})))}}a()(W,"propTypes",{siteId:r.a.number.isRequired,siteSlug:r.a.string.isRequired,translate:r.a.func.isRequired});t.a=Object(p.flowRight)(Object(l.b)((e,t)=>{let i=t.activity,n=t.siteId;const a=Object(U.a)(e,n),s=Object(L.k)(e,n);return{activity:i,gmtOffset:Object(F.a)(e,n),mightBackup:i&&i.activityId===Object(q.a)(e,n),mightRewind:i&&i.activityId===Object(z.a)(e,n),timezone:Object(H.a)(e,n),siteSlug:s.slug,rewindIsActive:"active"===a.state||"provisioning"===a.state,canAutoconfigure:a.canAutoconfigure,site:s}},(e,t)=>{let i=t.activity.activityId,n=t.siteId;return{createBackup:()=>e(Object(S.k)(Object(S.i)("calypso_activitylog_backup_request",{from:"item"}),Object(P.n)(n,i))),createRewind:()=>e(Object(S.k)(Object(S.i)("calypso_activitylog_restore_request",{from:"item"}),Object(P.p)(n,i))),dismissBackup:()=>e(Object(S.k)(Object(S.i)("calypso_activitylog_backup_cancel"),Object(P.i)(n))),dismissRewind:()=>e(Object(S.k)(Object(S.i)("calypso_activitylog_restore_cancel"),Object(P.o)(n))),confirmBackup:(t,i)=>(Object(h.a)({x:0,y:0,duration:250}),e(Object(S.k)(Object(S.i)("calypso_activitylog_backup_confirm",{action_id:t}),Object(P.h)(n,t,i)))),confirmRewind:(t,i,a)=>(Object(h.a)({x:0,y:0,duration:250}),e(Object(S.k)(Object(S.i)("calypso_activitylog_restore_confirm",{action_id:t,activity_name:i}),Object(P.q)(n,t,a)))),trackHelp:t=>e(Object(S.i)("calypso_activitylog_event_get_help",{activity_name:t})),trackFixCreds:()=>e(Object(S.i)("calypso_activitylog_event_fix_credentials"))}}),M.b,B.b,u.localize)(W)},"./client/my-sites/activity/activity-log-item/style.scss":function(e,t,i){},"./client/state/happychat/selectors/get-happychat-timeline.js":function(e,t,i){"use strict";var n=i("./node_modules/lodash/lodash.js"),a=i("./client/lib/create-selector/index.js");t.a=Object(a.a)(e=>e.happychat.chat.timeline,e=>Object(n.map)(e.happychat.chat.timeline,"id"))},"./client/state/happychat/selectors/has-active-happychat-session.js":function(e,t,i){"use strict";var n=i("./node_modules/lodash/lodash.js"),a=i("./client/state/happychat/constants.js"),s=i("./client/lib/create-selector/index.js");t.a=Object(s.a)(e=>!Object(n.includes)([a.d,a.e,a.f,a.h],e.happychat.chat.status),e=>e.happychat.chat.status)},"./client/state/happychat/selectors/is-happychat-available.js":function(e,t,i){"use strict";var n=i("./node_modules/lodash/lodash.js"),a=i("./client/state/happychat/selectors/is-happychat-client-connected.js");t.a=function(e){return Object(a.a)(e)&&Object(n.get)(e,"happychat.connection.isAvailable")}},"./client/state/happychat/selectors/is-happychat-connection-uninitialized.js":function(e,t,i){"use strict";var n=i("./client/state/happychat/constants.js"),a=i("./client/state/happychat/selectors/get-happychat-connection-status.js");t.a=function(e){return Object(a.a)(e)===n.p}},"./client/state/happychat/ui/actions.js":function(e,t,i){"use strict";i.d(t,"f",function(){return s}),i.d(t,"d",function(){return o}),i.d(t,"e",function(){return c}),i.d(t,"b",function(){return r}),i.d(t,"a",function(){return l}),i.d(t,"c",function(){return d}),i.d(t,"g",function(){return m});const n=e=>({type:"HAPPYCHAT_OPEN",isOpen:e}),a=e=>({type:"HAPPYCHAT_MINIMIZING",isMinimizing:e}),s=()=>n(!0),o=()=>a(!0),c=()=>a(!1),r=()=>n(!1),l=()=>({type:"HAPPYCHAT_BLUR"}),d=()=>({type:"HAPPYCHAT_FOCUS"}),m=e=>({type:"HAPPYCHAT_SET_CURRENT_MESSAGE",message:e})},"./client/state/selectors/get-requested-backup.js":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i("./node_modules/lodash/lodash.js");function a(e,t){return Object(n.get)(e,["activityLog","backupRequest",t],null)}},"./client/state/selectors/get-requested-rewind.js":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i("./node_modules/lodash/lodash.js");function a(e,t){return Object(n.get)(e,["activityLog","restoreRequest",t],null)}},"./client/state/selectors/get-rewind-state.js":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("./node_modules/lodash/lodash.js");const a={state:"uninitialized"};function s(e,t){return Object(n.get)(e.rewind,t,a)}},"./client/state/selectors/get-site-gmt-offset.js":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i("./node_modules/lodash/lodash.js");function a(e,t){const i=Object(n.get)(e.siteSettings.items,[t,"gmt_offset"],null);return i?Number(i):i}},"./client/state/selectors/get-site-timezone-value.js":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i("./node_modules/lodash/lodash.js");function a(e,t){const i=Object(n.get)(e.siteSettings.items,[t,"timezone_string"],null);return i&&i.length?i:null}},"./client/state/site-settings/actions.js":function(e,t,i){"use strict";var n=i("./node_modules/@babel/runtime/helpers/objectSpread.js"),a=i.n(n),s=i("./client/lib/wp/browser.js"),o=i("./node_modules/lodash/lodash.js");function c(e){return Object.keys(e).reduce((t,i)=>{switch(i){case"default_category":t[i]=parseInt(e[i]);break;case"sharing_show":Object(o.isPlainObject)(e[i])?t[i]=Object(o.values)(e[i]):t[i]=e[i];break;default:t[i]=e[i]}return t},{})}function r(e,t){return{type:"SITE_SETTINGS_UPDATE",siteId:e,settings:t}}function l(e){return t=>(t({type:"SITE_SETTINGS_REQUEST",siteId:e}),s.a.undocumented().settings(e).then(i=>{let n=i.name,s=i.description,o=i.settings;const r=a()({},c(o),{blogname:n,blogdescription:s});t(function(e,t){return{type:"SITE_SETTINGS_RECEIVE",siteId:e,settings:t}}(e,r)),t({type:"SITE_SETTINGS_REQUEST_SUCCESS",siteId:e})}).catch(i=>{t({type:"SITE_SETTINGS_REQUEST_FAILURE",siteId:e,error:i})}))}function d(e,t){return i=>(i({type:"SITE_SETTINGS_SAVE",siteId:e}),s.a.undocumented().settings(e,"post",t).then(t=>(i(r(e,c(t.updated))),i({type:"SITE_SETTINGS_SAVE_SUCCESS",siteId:e}),t)).catch(t=>(i({type:"SITE_SETTINGS_SAVE_FAILURE",siteId:e,error:t}),t)))}i.d(t,"c",function(){return r}),i.d(t,"a",function(){return l}),i.d(t,"b",function(){return d})}}]);