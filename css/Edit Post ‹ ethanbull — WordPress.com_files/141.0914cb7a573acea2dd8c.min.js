(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{"./client/components/vertical-nav/index.jsx":function(e,n,t){"use strict";var s=t("./node_modules/react/index.js"),i=t.n(s);t("./client/components/vertical-nav/style.scss");n.a=class extends s.Component{render(){return i.a.createElement("div",{className:"vertical-nav"},this.props.children)}}},"./client/components/vertical-nav/item/index.jsx":function(e,n,t){"use strict";var s=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=t.n(s),o=t("./node_modules/react/index.js"),a=t.n(o),r=t("./node_modules/prop-types/index.js"),c=t.n(r),m=t("./node_modules/lodash/lodash.js"),l=t("./client/components/card/compact.jsx"),p=t("./client/components/gridicon/index.jsx");t("./client/components/vertical-nav/item/style.scss");class d extends o.Component{constructor(){super(...arguments),i()(this,"placeholder",()=>a.a.createElement(l.a,{className:"vertical-nav-item is-placeholder"},a.a.createElement("span",null),a.a.createElement("span",null))),i()(this,"getIcon",()=>this.props.external?a.a.createElement(p.a,{icon:"external"}):a.a.createElement(p.a,{icon:"chevron-right"}))}render(){return this.props.isPlaceholder?this.placeholder():a.a.createElement("a",{href:this.props.path,onClick:this.props.onClick,target:this.props.external?"_blank":null},a.a.createElement(l.a,{className:"vertical-nav-item"},this.getIcon(),a.a.createElement("span",null,this.props.children)))}}i()(d,"propTypes",{external:c.a.bool,isPlaceholder:c.a.bool,onClick:c.a.func,path:c.a.string}),i()(d,"defaultProps",{external:!1,isPlaceholder:!1,onClick:m.noop}),n.a=d},"./client/components/vertical-nav/item/style.scss":function(e,n,t){},"./client/components/vertical-nav/style.scss":function(e,n,t){},"./client/my-sites/domains/components/domain-warnings/index.jsx":function(e,n,t){"use strict";var s=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=t.n(s),o=t("./node_modules/prop-types/index.js"),a=t.n(o),r=t("./node_modules/react/index.js"),c=t.n(r),m=t("./node_modules/debug/src/browser.js"),l=t.n(m),p=t("./node_modules/moment/moment.js"),d=t.n(p),g=t("./node_modules/lodash/lodash.js"),u=t("./packages/i18n-calypso/dist/esm/index.js"),h=t("./node_modules/react-redux/es/index.js"),f=t("./client/state/analytics/actions.js"),y=t("./client/components/notice/index.jsx"),w=t("./client/components/notice/notice-action.jsx"),b=t("./client/my-sites/domains/components/domain-warnings/pending-gsuite-tos-notice.jsx"),E=t("./client/me/purchases/paths.js"),k=t("./client/lib/domains/constants.js"),x=t("./client/lib/gsuite/index.js"),C=t("./client/lib/domains/index.js"),_=t("./client/lib/url/support.js"),S=t("./client/my-sites/domains/paths.js"),N=t("./client/lib/analytics/track-component-view/index.jsx");t("./client/my-sites/domains/components/domain-warnings/style.scss");const D=l()("calypso:domain-warnings"),j=c.a.createElement("a",{href:_.c,target:"_blank",rel:"noopener noreferrer"}),v=c.a.createElement("a",{href:_.l,target:"_blank",rel:"noopener noreferrer"}),M=c.a.createElement("p",null),T="expired-domains-can-manage",O="expired-domains-cannot-manage",I="expiring-domains-can-manage",L="expiring-domains-cannot-manage",R="new-transfer-wrong-ns";class P extends c.a.PureComponent{constructor(){super(...arguments),i()(this,"wrongNSMappedDomains",()=>{if(D("Rendering wrongNSMappedDomains"),Object(g.get)(this.props,"selectedSite.jetpack")||Object(g.get)(this.props,"selectedSite.options.is_automated_transfer"))return null;const e=this.getDomains().filter(e=>e.type===k.h.MAPPED&&!e.pointsToWpcom);if(D("NS error domains:",e),0===e.length)return null;const n=this.props.translate;let t,s,i=null;if(1===e.length){const i=e[0];Object(C.s)(i.name)?(s=n("{{strong}}%(domainName)s's{{/strong}} DNS records need to be configured.",{components:{strong:c.a.createElement("strong",null)},args:{domainName:i.name},context:"Notice for mapped subdomain that has DNS records need to set up"}),t=_.J):(s=n("{{strong}}%(domainName)s's{{/strong}} name server records need to be configured.",{components:{strong:c.a.createElement("strong",null)},args:{domainName:i.name},context:"Notice for mapped domain notice with NS records pointing to somewhere else"}),t=_.m+i.name)}else i=c.a.createElement("ul",null,e.map(e=>c.a.createElement("li",{key:e.name},e.name))),Object(g.every)(Object(g.map)(e,"name"),C.s)?(s=n("Some of your domains' DNS records need to be configured.",{context:"Notice for mapped subdomain that has DNS records need to set up"}),t=_.J):(s=n("Some of your domains' name server records need to be configured.",{context:"Mapped domain notice with NS records pointing to somewhere else"}),t=_.I);const o={isCompact:this.props.isCompact,status:"is-warning",className:"domain-warnings__notice",showDismiss:!1,key:"wrong-ns-mapped-domain"};let a;return this.props.isCompact?(o.text=n("DNS configuration required"),a=c.a.createElement(w.a,{href:Object(S.i)(this.props.selectedSite.slug)},n("Fix"))):a=c.a.createElement("span",null,s," ",c.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},n("Learn more")),i),c.a.createElement(y.b,o,a)}),i()(this,"onExpiredDomainsNoticeClick",()=>{this.trackClick(T)}),i()(this,"expiredDomainsCanManage",()=>{D("Rendering expiredDomainsCanManage");const e=this.getDomains().filter(e=>e.expired&&e.type===k.h.REGISTERED&&e.currentUserCanManage);if(0===e.length)return null;const n=this.props.translate;let t;return t=1===e.length?n("{{strong}}%(domainName)s{{/strong}} expired %(timeSince)s.",{components:{strong:c.a.createElement("strong",null)},args:{timeSince:e[0].expirationMoment.fromNow(),domainName:e[0].name},context:"Expired domain notice",comment:'%(timeSince)s is something like "a year ago"'}):n("Some of your domains have expired.",{context:"Expired domain notice"}),c.a.createElement(y.b,{isCompact:this.props.isCompact,status:"is-error",showDismiss:!1,key:T,text:t},this.renewLink(e,this.onExpiredDomainsNoticeClick),this.trackImpression(T,e.length))}),i()(this,"expiredDomainsCannotManage",()=>{const e=this.getDomains().filter(e=>e.expired&&e.type===k.h.REGISTERED&&!e.currentUserCanManage);if(0===e.length)return null;const n=this.props.translate;let t;return t=1===e.length?n("The domain {{strong}}%(domainName)s{{/strong}} expired %(timeSince)s. It can be renewed by the user {{strong}}%(owner)s{{/strong}}.",{components:{strong:c.a.createElement("strong",null)},args:{timeSince:e[0].expirationMoment.fromNow(),domainName:e[0].name,owner:e[0].owner},context:"Expired domain notice",comment:'%(timeSince)s is something like "a year ago"'}):n("Some domains on this site expired recently. They can be renewed by their owners.",{context:"Expired domain notice"}),c.a.createElement(y.b,{isCompact:this.props.isCompact,showDismiss:!1,key:O,text:t},this.trackImpression(O,e.length))}),i()(this,"onExpiringDomainsNoticeClick",()=>{this.trackClick(T)}),i()(this,"expiringDomainsCanManage",()=>{const e=this.getDomains().filter(e=>e.expirySoon&&e.type===k.h.REGISTERED&&e.currentUserCanManage);if(0===e.length)return null;const n=this.props.translate;let t;return t=1===e.length?n("{{strong}}%(domainName)s{{/strong}} is expiring %(timeUntil)s.",{components:{strong:c.a.createElement("strong",null)},args:{timeUntil:e[0].expirationMoment.fromNow(),domainName:e[0].name},context:"Expiring soon domain notice",comment:'%(timeUntil)s is something like "in a week"'}):n("Some of your domains are expiring soon.",{context:"Expiring domain notice"}),c.a.createElement(y.b,{isCompact:this.props.isCompact,status:"is-error",showDismiss:!1,key:I,text:t},this.renewLink(e,this.onExpiringDomainsNoticeClick),this.trackImpression(I,e.length))}),i()(this,"expiringDomainsCannotManage",()=>{const e=this.getDomains().filter(e=>e.expirySoon&&e.type===k.h.REGISTERED&&!e.currentUserCanManage);if(0===e.length)return null;const n=this.props.translate;let t;return t=1===e.length?n("The domain {{strong}}%(domainName)s{{/strong}} will expire %(timeUntil)s. It can be renewed by the user {{strong}}%(owner)s{{/strong}}.",{components:{strong:c.a.createElement("strong",null)},args:{timeUntil:e[0].expirationMoment.fromNow(),domainName:e[0].name,owner:e[0].owner},context:"Expiring soon domain notice",comment:'%(timeUntil)s is something like "in a week"'}):n("Some domains on this site are about to expire. They can be renewed by their owners.",{context:"Expiring domain notice"}),c.a.createElement(y.b,{isCompact:this.props.isCompact,showDismiss:!1,key:L,text:t},this.trackImpression(L,e.length))}),i()(this,"onNewTransfersWrongNSNoticeClick",()=>{this.trackClick(R)}),i()(this,"newTransfersWrongNS",()=>{const e=this.getDomains().filter(e=>e.registrationMoment&&d()(e.registrationMoment).add(3,"days").isAfter(d()())&&e.transferStatus===k.g.COMPLETED&&!e.hasWpcomNameservers);if(0===e.length)return null;const n=this.props,t=n.translate,s=n.isCompact;let i,o,a,r,m;if(e.length>1)o=_.f,a=t("Learn more",{comment:"Call to action link for updating the nameservers on a newly transferred domain"}),r=t("Info",{comment:"Call to action link for updating the nameservers on a newly transferred domain"}),i=t("Domains require updating"),m=t("To make your newly transferred domains work with WordPress.com, you need to update the nameservers.");else{const n=e[0].name;o=Object(S.k)(this.props.selectedSite.slug,n),a=t("Update now",{comment:"Call to action link for updating the nameservers on a newly transferred domain"}),r=t("Fix",{comment:"Call to action link for updating the nameservers on a newly transferred domain"}),i=t("Domain requires updating"),m=t("To make {{strong}}%(domain)s{{/strong}} work with your WordPress.com site, you need to update the nameservers.",{components:{strong:c.a.createElement("strong",null)},args:{domain:n}})}const l=c.a.createElement(w.a,{href:o,onClick:this.onNewTransfersWrongNSNoticeClick,rel:"noopener noreferrer"},s?r:a);return c.a.createElement(y.b,{isCompact:this.props.isCompact,showDismiss:!1,status:"is-warning",key:"new-transfer-wrong-ns",text:s?i:m},l,this.trackImpression(R,e.length))}),i()(this,"newDomains",()=>{if(Object(g.get)(this.props,"selectedSite.options.is_domain_only"))return null;const e=this.getDomains().filter(e=>e.registrationMoment&&d()(e.registrationMoment).add(3,"days").isAfter(d()())&&e.type===k.h.REGISTERED);if(0===e.length)return null;const n=this.props.translate,t=e.some(e=>this.props.selectedSite.domain===e.name);let s;if(e.length>1)s=t?n("{{pNode}}We are setting up your new domains for you. They should start working immediately, but may be unreliable during the first 72 hours.{{/pNode}}{{pNode}}If you are unable to access your site at %(primaryDomain)s, try setting the primary domain to a domain you know is working. {{domainsLink}}Learn more{{/domainsLink}} about setting the primary domain.{{/pNode}}",{args:{primaryDomain:this.props.selectedSite.domain},components:{pNode:M,domainsLink:v}}):n("We are setting up your new domains for you. They should start working immediately, but may be unreliable during the first 72 hours. {{allAboutDomainsLink}}Learn more{{/allAboutDomainsLink}}.",{components:{allAboutDomainsLink:j}});else{const i=e[0];s=t?n("{{pNode}}We are setting up {{strong}}%(domainName)s{{/strong}} for you. It should start working immediately, but may be unreliable during the first 72 hours.{{/pNode}}{{pNode}}If you are unable to access your site at {{strong}}%(domainName)s{{/strong}}, try setting the primary domain to a domain you know is working. {{domainsLink}}Learn more{{/domainsLink}} about setting the primary domain, or {{tryNowLink}}try {{strong}}%(domainName)s{{/strong}} now.{{/tryNowLink}}{{/pNode}}",{args:{domainName:i.name},components:{domainsLink:v,pNode:M,tryNowLink:c.a.createElement("a",{href:"http://".concat(i.name),target:"_blank",rel:"noopener noreferrer"}),strong:c.a.createElement("strong",null)}}):n("We are setting up {{strong}}%(domainName)s{{/strong}} for you. It should start working immediately, but may be unreliable during the first 72 hours. {{allAboutDomainsLink}}Learn more{{/allAboutDomainsLink}} about your new domain, or {{tryNowLink}} try it now{{/tryNowLink}}.",{args:{domainName:i.name},components:{allAboutDomainsLink:j,tryNowLink:c.a.createElement("a",{href:"http://".concat(i.name),target:"_blank",rel:"noopener noreferrer"}),strong:c.a.createElement("strong",null)}})}return c.a.createElement(y.b,{isCompact:this.props.isCompact,status:"is-warning",showDismiss:!1,key:"new-domains"},s)}),i()(this,"unverifiedDomainsCanManage",()=>{const e=this.getDomains().filter(e=>e.isPendingIcannVerification&&e.currentUserCanManage);if(0===e.length)return null;const n=e.some(e=>{let n=e.registrationMoment;return n&&d()(n).add(2,"days").isAfter()})?"is-info":"is-error",t=this.props.translate,s=t("Fix");if(1===e.length){const i=e[0].name;let o,a;return"is-error"===n?(o=t("Your domain {{strong}}%(domain)s{{/strong}} may be suspended because your email address is not verified.",{components:{strong:c.a.createElement("strong",null)},args:{domain:i}}),a=t("Issues with {{strong}}%(domain)s{{/strong}}.",{components:{strong:c.a.createElement("strong",null)},args:{domain:i}})):"is-info"===n&&(o=t("{{strong}}%(domain)s{{/strong}} needs to be verified. You should receive an email shortly with more information.",{components:{strong:c.a.createElement("strong",null)},args:{domain:i}}),a=t("Please verify {{strong}}%(domain)s{{/strong}}.",{components:{strong:c.a.createElement("strong",null)},args:{domain:i}})),c.a.createElement(y.b,{isCompact:this.props.isCompact,status:n,showDismiss:!1,className:"domain-warnings__notice",key:"unverified-domains-can-manage",text:this.props.isCompact?a:o},c.a.createElement(w.a,{href:Object(S.e)(this.props.selectedSite.slug,i)},s))}let i,o,a;const r=e=>Object(S.e)(this.props.selectedSite.slug,e);return"is-error"===n?(i=c.a.createElement("span",null,t("Your domains may be suspended because your email address is not verified."),c.a.createElement("ul",null,e.map(e=>{let n=e.name;return c.a.createElement("li",{key:n},n," ",c.a.createElement("a",{href:r(n)},s))}))),a=t("Issues with your domains"),o=c.a.createElement(w.a,{href:Object(S.i)(this.props.selectedSite.slug)},s)):"is-info"===n&&(i=c.a.createElement("span",null,t("Please verify ownership of domains:"),c.a.createElement("ul",null,e.map(e=>{let n=e.name;return c.a.createElement("li",{key:n},n," ",c.a.createElement("a",{href:r(n)},s))}))),a=t("Verification required for domains"),o=c.a.createElement(w.a,{href:Object(S.i)(this.props.selectedSite.slug)},s)),c.a.createElement(y.b,{isCompact:this.props.isCompact,status:n,showDismiss:!1,className:"domain-warnings__notice",key:"unverified-domains-can-manage",text:this.props.isCompact&&a},this.props.isCompact?o:i)}),i()(this,"unverifiedDomainsCannotManage",()=>{const e=this.getDomains().filter(e=>e.isPendingIcannVerification&&!e.currentUserCanManage);if(0===e.length)return null;const n=this.props.translate,t=c.a.createElement(w.a,{href:Object(S.i)(this.props.selectedSite.slug)},n("More"));if(1===e.length){const s=n("The domain {{strong}}%(domain)s{{/strong}} may be suspended because the owner, {{strong}}%(owner)s{{/strong}}, has not verified their contact information.",{components:{strong:c.a.createElement("strong",null)},args:{domain:e[0].name,owner:e[0].owner}}),i=n("Issues with {{strong}}%(domain)s{{/strong}}",{components:{strong:c.a.createElement("strong",null)},args:{domain:e[0].name}});return c.a.createElement(y.b,{isCompact:this.props.isCompact,showDismiss:!1,className:"domain-warnings__notice",key:"unverified-domains-cannot-manage",text:this.props.isCompact?i:s},this.props.isCompact&&t)}const s=c.a.createElement("span",null,n("Some domains on this site are about to be suspended because their owner has not verified their contact information."),c.a.createElement("ul",null,e.map(e=>c.a.createElement("li",{key:e.name},e.name)))),i=n("Issues with domains on this site");return c.a.createElement(y.b,{isCompact:this.props.isCompact,showDismiss:!1,className:"domain-warnings__notice",key:"unverified-domains-cannot-manage",text:this.props.isCompact&&i},this.props.isCompact?t:s)}),i()(this,"pendingGSuiteTosAcceptanceDomains",()=>{const e=this.getDomains().filter(x.k);return 0!==e.length&&c.a.createElement(b.a,{isCompact:this.props.isCompact,key:"pending-gsuite-tos-notice",siteSlug:this.props.selectedSite&&this.props.selectedSite.slug,domains:e,section:"domain-management"})}),i()(this,"pendingTransfer",()=>{const e=Object(g.find)(this.getDomains(),"pendingTransfer");if(!e)return null;const n=this.props.translate,t=n("{{strong}}%(domain)s{{/strong}} is pending transfer.",{components:{strong:c.a.createElement("strong",null)},args:{domain:e.name}}),s=n("{{strong}}%(domain)s{{/strong}} is pending transfer. You must wait for the transfer to finish, and then update the settings at the new registrar.",{components:{strong:c.a.createElement("strong",null)},args:{domain:e.name}});return c.a.createElement(y.b,{isCompact:this.props.isCompact,status:"is-warning",showDismiss:!1,className:"domain-warnings__notice",key:"pending-transfer",text:this.props.isCompact&&t},!this.props.isCompact&&s)}),i()(this,"transferStatus",()=>{const e=Object(g.find)(this.getDomains(),e=>e.type===k.h.TRANSFER);if(!e)return null;const n=this.props,t=n.isCompact,s=n.translate;let i,o="is-warning",a=null;const r=Object(S.p)(this.props.selectedSite.slug,e.name),m=c.a.createElement(w.a,{href:r},s("Info"));switch(e.transferStatus){case k.g.PENDING_OWNER:{a=s("Transfer confirmation required");const n={components:{strong:c.a.createElement("strong",null),a:c.a.createElement("a",{href:r,rel:"noopener noreferrer"})},args:{domain:e.name}};e.adminEmail?(n.args.email=e.adminEmail,i=s("We sent an email to {{strong}}%(email)s{{/strong}} to confirm the transfer of {{strong}}%(domain)s{{/strong}}. {{a}}More Info{{/a}}",n)):i=s("We'll send an email shortly to confirm the transfer of {{strong}}%(domain)s{{/strong}}. {{a}}More Info{{/a}}",n);break}case k.g.PENDING_REGISTRY:i=s("The transfer of {{strong}}%(domain)s{{/strong}} is in progress. We are waiting for authorization from your current domain provider to proceed. {{a}}Learn more{{/a}}",{components:{strong:c.a.createElement("strong",null),a:c.a.createElement("a",{href:_.z,rel:"noopener noreferrer",target:"_blank"})},args:{domain:e.name}}),e.transferEndDateMoment&&(i=s("The transfer of {{strong}}%(domain)s{{/strong}} is in progress. It should complete by %(transferFinishDate)s. We are waiting for authorization from your current domain provider to proceed. {{a}}Learn more{{/a}}",{components:{strong:c.a.createElement("strong",null),a:c.a.createElement("a",{href:_.z,rel:"noopener noreferrer",target:"_blank"})},args:{domain:e.name,transferFinishDate:e.transferEndDateMoment.format("LL")}}));break;case k.g.PENDING_START:a=s("Domain transfer waiting"),i=s("Your domain {{strong}}%(domain)s{{/strong}} is waiting for you to start the transfer. {{a}}More info{{/a}}",{components:{strong:c.a.createElement("strong",null),a:c.a.createElement("a",{href:_.z,rel:"noopener noreferrer",target:"_blank"})},args:{domain:e.name}});break;case k.g.CANCELLED:o="is-error",a=s("Domain transfer failed"),i=s("The transfer of {{strong}}%(domain)s{{/strong}} has failed. {{a}}More info{{/a}}",{components:{strong:c.a.createElement("strong",null),a:c.a.createElement("a",{href:r,rel:"noopener noreferrer"})},args:{domain:e.name}})}return t&&!a||!t&&!i?null:c.a.createElement(y.b,{isCompact:t,status:o,showDismiss:!1,className:"domain-warnings__notice",key:"transfer-status",text:t&&a},t?a&&m:i)}),i()(this,"pendingConsent",()=>{const e=this.getDomains().filter(e=>e.type===k.h.REGISTERED&&k.e.PENDING_ASYNC===e.gdprConsentStatus);if(0===e.length)return null;const n=this.props,t=n.isCompact,s=n.translate,i=n.selectedSite;let o;if(1===e.length){const n=e[0].name,a={components:{strong:c.a.createElement("strong",null),a:c.a.createElement("a",{href:Object(S.j)(i.slug,n),rel:"noopener noreferrer"})},args:{domain:n}};o=s(t?"The domain {{strong}}%(domain)s{{/strong}} requires explicit user consent to complete the registration.":"The domain {{strong}}%(domain)s{{/strong}} is still pending registration. Please check the domain owner email since explicit consent is required for the registration to complete or go to the {{a}}Consent Management{{/a}} page for more details.",a)}else o=s(t?"Some domains require explicit user consent to complete the registration.":"Some domains are still pending registration. Please check the domain owner email to give explicit consent before the registration can be completed.");return c.a.createElement(y.b,{isCompact:t,status:"is-error",showDismiss:!1,className:"domain-warnings__notice",key:"pending-consent"},o)})}renewLink(e,n){const t=e.length,s=this.props,i=s.selectedSite,o=s.translate,a=o("Renew it now.","Renew them now.",{count:t,context:"Call to action link for renewing an expiring/expired domain"}),r=o("Renew",{context:"Call to action link for renewing an expiring/expired domain"}),m=e[0].name,l=e[0].subscriptionId,p=1===t?"/checkout/domain_map:".concat(m,"/renew/").concat(l,"/").concat(i.slug):E.i;return c.a.createElement(w.a,{href:p,onClick:n},this.props.isCompact?r:a)}getPipe(){const e=[this.expiredDomainsCanManage,this.expiringDomainsCanManage,this.unverifiedDomainsCanManage,this.unverifiedDomainsCannotManage,this.pendingGSuiteTosAcceptanceDomains,this.expiredDomainsCannotManage,this.expiringDomainsCannotManage,this.wrongNSMappedDomains,this.newDomains,this.pendingTransfer,this.transferStatus,this.newTransfersWrongNS,this.pendingConsent],n=this.props.ruleWhiteList.map(e=>this[e]);return Object(g.intersection)(e,n)}getDomains(){return this.props.domains||[this.props.domain]}trackImpression(e,n){const t=this.props.position;return c.a.createElement(N.a,{eventName:"calypso_domain_warning_impression",eventProperties:{position:t,warning:e,count:n}})}trackClick(e){const n=this.props.position;this.props.recordTracksEvent("calypso_domain_warning_click",{position:n,warning:e})}componentWillMount(){this.props.domains||this.props.domain||D('You need provide either "domains" or "domain" property to this component.')}render(){D("Domains:",this.getDomains());const e=this.getPipe().map(e=>e()).filter(e=>e);return e.length?c.a.createElement("div",null,e):null}}i()(P,"propTypes",{domains:a.a.array,ruleWhiteList:a.a.array,domain:a.a.object,isCompact:a.a.bool,selectedSite:a.a.oneOfType([a.a.object,a.a.bool])}),i()(P,"defaultProps",{isCompact:!1,ruleWhiteList:["expiredDomainsCanManage","expiringDomainsCanManage","unverifiedDomainsCanManage","pendingGSuiteTosAcceptanceDomains","expiredDomainsCannotManage","expiringDomainsCannotManage","unverifiedDomainsCannotManage","wrongNSMappedDomains","newDomains","transferStatus","newTransfersWrongNS","pendingConsent"]});const q={recordTracksEvent:f.i};n.a=Object(h.b)(null,q)(Object(u.localize)(P))},"./client/my-sites/domains/components/domain-warnings/pending-gsuite-tos-notice-dialog.jsx":function(e,n,t){"use strict";var s=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=t.n(s),o=t("./node_modules/react-redux/es/index.js"),a=t("./client/components/gridicon/index.jsx"),r=t("./node_modules/prop-types/index.js"),c=t.n(r),m=t("./node_modules/react/index.js"),l=t.n(m),p=t("./packages/i18n-calypso/dist/esm/index.js"),d=t("./client/components/button/index.jsx"),g=t("./client/components/forms/clipboard-button/index.jsx"),u=t("./client/state/analytics/actions.js"),h=t("./client/components/dialog/index.jsx"),f=t("./client/lib/gsuite/index.js"),y=t("./client/components/vertical-nav/index.jsx"),w=t("./client/components/vertical-nav/item/index.jsx"),b=t("./client/lib/wp/browser.js");function E(e){const n=Object(m.useState)(!1),t=i()(n,2),s=t[0],o=t[1],r=Object(m.useState)(!1),c=i()(r,2),u=c[0],E=c[1],k=Object(m.useState)(!1),x=i()(k,2),C=x[0],_=x[1],S=Object(p.useTranslate)(),N=(n,t)=>{e.trackEvent({domainName:e.domainName,message:n,section:e.section,siteSlug:e.siteSlug,tracksEvent:t,user:e.user})};e.visible&&!C&&(N('Opened G Suite "ToS Dialog" via '.concat(e.section),"calypso_domain_management_gsuite_pending_account_open_dialog"),_(!0));return l.a.createElement(h.a,{className:"domain-warnings__dialog",isVisible:e.visible},l.a.createElement("header",null,l.a.createElement("h1",null,S("Log in to G Suite to finish setup")),l.a.createElement("button",{onClick:()=>{N('Clicked "Close ToS Dialog" link in G Suite pending ToS dialog via '.concat(e.section),"calypso_domain_management_gsuite_pending_account_close_dialog_click"),_(!1),e.onClose()}},l.a.createElement(a.a,{icon:"cross"}))),l.a.createElement("p",null,s?(()=>S("We have reset the password for %s. Copy the new password below and click to continue.",{args:e.user}))():(()=>S("Do you already have the password for %(gsuiteEmail)s?",{args:{gsuiteEmail:e.user}}))()),s&&l.a.createElement(m.Fragment,null,l.a.createElement("p",null,l.a.createElement("strong",{className:"domain-warnings__password"},s),l.a.createElement(g.a,{className:"domain-warnings__dialog-copy",onCopy:()=>{E(!0),N('Clicked "Copy Password" link in G Suite pending ToS dialog via '.concat(e.section),"calypso_domain_management_gsuite_pending_account_copy_password_click")},text:s,compact:!0},u&&l.a.createElement(a.a,{icon:"checkmark"}),S(u?"Copied!":"Copy"))),l.a.createElement(d.a,{href:Object(f.f)(e.user,e.domainName),onClick:()=>{N('Clicked "Login" link after reset in G Suite pending ToS dialog via '.concat(e.section),"calypso_domain_management_gsuite_pending_account_login_after_reset_click")},primary:u,rel:"noopener noreferrer",target:"_blank"},S("Log In to G Suite and Finish Setup"))),!s&&l.a.createElement(y.a,null,l.a.createElement(w.a,{onClick:n=>{n.preventDefault();const t=b.a.undocumented(),s=e.user.split("@")[0];t.resetPasswordForMailbox(e.domainName,s).then(e=>{o(e.password)}),N('Clicked "Get Password" link in G Suite pending ToS dialog via '.concat(e.section),"calypso_domain_management_gsuite_pending_account_get_password_click")},key:"0",path:"#"},S("I {{strong}}don't{{/strong}} have the password",{components:{strong:l.a.createElement("strong",null)}})),l.a.createElement(w.a,{onClick:()=>{N('Clicked "Get Password" link in G Suite pending ToS dialog via '.concat(e.section),"calypso_domain_management_gsuite_pending_account_login_click")},path:Object(f.f)(e.user,e.domainName),external:!0,key:"1"},S("I have the password, take me to the login page"))))}E.propTypes={domainName:c.a.string.isRequired,onClose:c.a.func.isRequired,section:c.a.string.isRequired,siteSlug:c.a.string.isRequired,trackEvent:c.a.func.isRequired,user:c.a.string.isRequired};n.a=Object(o.b)(null,{trackEvent:e=>{let n=e.domainName,t=e.message,s=e.section,i=e.siteSlug,o=e.tracksEvent,a=e.user;return Object(u.b)(Object(u.g)("Domain Management",t,"Domain Name",n),Object(u.i)(o,{domain_name:n,section:s,site_slug:i,user:a}))}})(E)},"./client/my-sites/domains/components/domain-warnings/pending-gsuite-tos-notice.jsx":function(e,n,t){"use strict";var s=t("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=t.n(s),o=t("./node_modules/prop-types/index.js"),a=t.n(o),r=t("./node_modules/react/index.js"),c=t.n(r),m=t("./node_modules/react-redux/es/index.js"),l=t("./packages/i18n-calypso/dist/esm/index.js"),p=t("./client/components/notice/index.jsx"),d=t("./client/components/notice/notice-action.jsx"),g=t("./client/my-sites/email/paths.js"),u=t("./node_modules/@babel/runtime/helpers/slicedToArray.js"),h=t.n(u),f=t("./client/components/button/index.jsx"),y=t("./client/my-sites/domains/components/domain-warnings/pending-gsuite-tos-notice-dialog.jsx");function w(e){const n=Object(r.useState)(!1),t=h()(n,2),s=t[0],i=t[1],o=Object(l.useTranslate)();return c.a.createElement(r.Fragment,null,c.a.createElement(f.a,{primary:!0,compact:!0,onClick:e=>{e.preventDefault(),i(!0)}},o("Finish Setup")),c.a.createElement(y.a,{domainName:e.domainName,onClose:()=>{i(!1)},section:e.section,siteSlug:e.siteSlug,user:e.user,visible:s}))}w.propTypes={domainName:a.a.string.isRequired,isMultipleDomains:a.a.bool.isRequired,section:a.a.string.isRequired,severity:a.a.string.isRequired,siteSlug:a.a.string.isRequired,user:a.a.string.isRequired};var b=w,E=t("./client/state/analytics/actions.js");t("./client/my-sites/domains/components/domain-warnings/style.scss");const k=c.a.createElement("strong",null);class x extends c.a.PureComponent{constructor(){super(...arguments),i()(this,"finishSetupClickHandler",()=>{this.props.finishSetupNoticeClick(this.props.siteSlug)})}componentDidMount(){this.props.recordShowPendingAccountNotice({siteSlug:this.props.siteSlug,severity:this.getNoticeSeverity(),isMultipleDomains:this.props.domains.length>1,section:this.props.section})}getNoticeSeverity(){const e=this.props.moment,n=n=>t=>e(t.googleAppsSubscription.subscribedDate).isBefore(e().subtract(n,"days"));return this.props.domains.some(n(21))?"error":this.props.domains.some(n(7))?"warning":"info"}getExclamation(e){const n=this.props.translate,t={context:"Beginning of Gapps pending account notice",comment:"Used as an exclamation in Gapps' pending account notice"};switch(e){case"warning":return n("Attention!",t);case"error":return n("Urgent!",t);default:return n("You're almost there!",t)}}compactNotice(){const e=this.getNoticeSeverity(),n=1===this.props.domains.length?Object(g.a)(this.props.siteSlug,this.props.domains[0].name):Object(g.a)(this.props.siteSlug);return c.a.createElement(p.b,{isCompact:this.props.isCompact,status:"is-".concat(e),showDismiss:!1,key:"pending-gapps-tos-acceptance-domain-compact",text:this.props.translate("Email requires action","Emails require action",{count:this.props.domains.length})},c.a.createElement(d.a,{href:n,onClick:this.finishSetupClickHandler},this.props.translate("Finish Setup")))}oneDomainNotice(){const e=this.props.translate,n=this.getNoticeSeverity(),t=this.getExclamation(n),s=this.props.domains[0].name,i=this.props.domains[0].googleAppsSubscription.pendingUsers;return c.a.createElement(p.b,{isCompact:this.props.isCompact,status:"is-".concat(n),className:"domain-warnings__pending-g-suite-tos-notice",showDismiss:!1,key:"pending-gapps-tos-acceptance-domain",text:e('%(exclamation)s To activate your email {{strong}}%(emails)s{{/strong}}, click "Finish Setup".','%(exclamation)s To activate your emails {{strong}}%(emails)s{{/strong}}, click "Finish Setup".',{count:i.length,args:{exclamation:t,emails:i.join(", ")},components:{strong:k}})},c.a.createElement(d.a,null,c.a.createElement(b,{domainName:s,isMultipleDomains:!1,section:this.props.section,severity:n,siteSlug:this.props.siteSlug,user:i[0]})))}multipleDomainsNotice(){const e=this.props.translate,n=this.getNoticeSeverity(),t=this.getExclamation(n);return c.a.createElement(p.b,{status:"is-".concat(n),showDismiss:!1,key:"pending-gapps-tos-acceptance-domains"},e('%(exclamation)s To activate your new email addresses, click "Finish Setup".',{args:{exclamation:t}}),c.a.createElement("ul",null,this.props.domains.map(e=>{let t=e.name,s=e.googleAppsSubscription.pendingUsers;return c.a.createElement("li",{key:"pending-gapps-tos-acceptance-domain-".concat(t)},c.a.createElement("strong",null,t," "),c.a.createElement(b,{domainName:t,isMultipleDomains:!0,section:this.props.section,severity:n,siteSlug:this.props.siteSlug,user:s[0]}))})))}render(){if(this.props.isCompact)return this.compactNotice();switch(this.props.domains.length){case 0:return null;case 1:return this.oneDomainNotice();default:return this.multipleDomainsNotice()}}}i()(x,"propTypes",{siteSlug:a.a.string.isRequired,domains:a.a.array.isRequired,section:a.a.string.isRequired,isCompact:a.a.bool}),i()(x,"defaultProps",{isCompact:!1});n.a=Object(m.b)(null,{finishSetupNoticeClick:e=>Object(E.b)(Object(E.g)("Domain Management",'Clicked "Finish Setup" link in site notice for email requiring action',"Site",e),Object(E.i)("calypso_domain_management_gsuite_site_fix_click",{site_slug:e})),recordShowPendingAccountNotice:e=>{let n=e.siteSlug,t=e.severity,s=e.isMultipleDomains,i=e.section;return Object(E.b)(Object(E.g)("Domain Management","Showed pending account notice","Site",n),Object(E.i)("calypso_domain_management_gsuite_pending_account_notice_show",{site_slug:n,severity:t,is_multiple_domains:s,section:i}))}})(Object(l.localize)(x))},"./client/my-sites/domains/components/domain-warnings/style.scss":function(e,n,t){}}]);