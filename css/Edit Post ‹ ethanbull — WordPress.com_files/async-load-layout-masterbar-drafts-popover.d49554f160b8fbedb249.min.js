(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"./client/components/card/compact.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return d});var n=s("./node_modules/@babel/runtime/helpers/extends.js"),a=s.n(n),r=s("./node_modules/react/index.js"),i=s.n(r),o=s("./node_modules/classnames/index.js"),c=s.n(o),l=s("./client/components/card/index.jsx");function d(e){return i.a.createElement(l.a,a()({},e,{className:c()(e.className,"is-compact")}),e.children)}},"./client/components/time-since/index.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return m});var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=s.n(n),r=s("./node_modules/react/index.js"),i=s.n(r),o=s("./node_modules/moment/moment.js"),c=s.n(o),l=s("./client/lib/human-date/index.js"),d=s("./client/lib/interval/index.js"),p=s("./client/lib/react-smart-set-state/index.js");class m extends r.PureComponent{constructor(){super(...arguments),a()(this,"smartSetState",p.a),a()(this,"update",e=>{const t=this.props.dateFormat;e=e||this.props.date,this.smartSetState({humanDate:Object(l.a)(e,t),fullDate:c()(e).format("llll")})})}componentWillMount(){this.update()}componentWillReceiveProps(e){this.update(e.date)}render(){return i.a.createElement("time",{className:this.props.className,dateTime:this.props.date,title:this.state.fullDate},i.a.createElement(d.e,{period:d.d,onTick:this.update}),this.state.humanDate)}}},"./client/layout/masterbar/drafts-popover.jsx":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/react/index.js"),a=s.n(n),r=s("./node_modules/react-redux/es/index.js"),i=s("./packages/i18n-calypso/dist/esm/index.js"),o=s("./client/lib/create-selector/index.js"),c=s("./client/lib/paths/index.js"),l=s("./client/components/popover/index.jsx"),d=s("./client/components/count/index.jsx"),p=s("./client/state/posts/selectors.js"),m=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),u=s.n(m),h=s("./node_modules/prop-types/index.js"),f=s.n(h),j=s("./node_modules/classnames/index.js"),b=s.n(j),x=s("./node_modules/url/url.js"),_=s.n(x),g=s("./node_modules/lodash/lodash.js"),k=s("./client/components/card/compact.jsx"),v=s("./client/components/gridicon/index.jsx"),y=s("./packages/photon/dist/esm/index.js"),E=s.n(y),N=s("./client/lib/touch-detect/index.js"),O=s("./client/state/posts/utils.js"),I=s("./client/state/sites/selectors.js"),w=s("./client/components/time-since/index.jsx"),D=s("./client/state/selectors/get-editor-url.js");class C extends n.Component{render(){const e=this.props.post;let t,s,n=null;if(this.props.isPlaceholder)return this.postPlaceholder();O.I("edit_post",e)&&(s=this.props.editorUrl),this.props.postImages&&this.props.postImages.canonical_image&&(t="//"+(n=_.a.parse(this.props.postImages.canonical_image.uri,!0)).hostname+n.pathname+"?w=680px"),e&&e.canonical_image&&(t=(n=_.a.parse(e.canonical_image.uri,!0)).hostname.indexOf("files.wordpress.com")>0?"//"+n.hostname+n.pathname+"?w=680px":E()(e.canonical_image.uri,{width:680}));const r=b()("draft","is-".concat(e.format),{"has-image":!!n,"is-placeholder":this.props.isPlaceholder,"is-touch":Object(N.a)(),"is-selected":this.props.selected}),i=e.title||a.a.createElement("span",{className:"draft__empty-text"},this.props.translate("Untitled"));return a.a.createElement(k.a,{className:r,key:"draft-"+e.ID,href:s,onClick:this.props.onTitleClick},a.a.createElement("h3",{className:"draft__title"},i),a.a.createElement(w.a,{className:"draft__time",date:e.modified}),n?this.renderImage(t):null)}renderImage(e){const t={backgroundImage:"url("+e+")"};return a.a.createElement("div",{className:"draft__featured-image",style:t})}postPlaceholder(){return a.a.createElement(k.a,{className:"draft is-placeholder"},a.a.createElement("h3",{className:"draft__title"}),a.a.createElement("div",{className:"draft__actions"},a.a.createElement("p",{className:"post-relative-time-status"},a.a.createElement("span",{className:"time"},a.a.createElement(v.a,{icon:"time",size:18}),a.a.createElement("span",{className:"time-text"})))))}}u()(C,"propTypes",{post:f.a.object,isPlaceholder:f.a.bool,onTitleClick:f.a.func,postImages:f.a.object,selected:f.a.bool,showAuthor:f.a.bool,translate:f.a.func.isRequired}),u()(C,"defaultProps",{onTitleClick:g.noop,selected:!1,showAuthor:!1});var P=Object(g.flow)(i.localize,Object(r.b)((e,t)=>{let s=t.siteId,n=t.post;return{site:Object(I.k)(e,s),editorUrl:Object(D.b)(e,s,Object(g.get)(n,"ID"))}}))(C),T=s("./client/components/data/query-posts/index.jsx"),R=s("./client/components/button/index.jsx"),S=s("./client/state/current-user/selectors.js");const q=Object(o.a)((e,t)=>{const s=Object(S.g)(e),n=Object(I.k)(e,t);return{type:"post",status:"draft",number:5,order_by:"modified",author:n.jetpack||n.single_user_site?null:s}},(e,t)=>[Object(S.g)(e),Object(I.k)(e,t)]);t.default=Object(r.b)((e,t)=>{let s=t.siteId;const n=q(e,s);return{site:Object(I.k)(e,s),draftsQuery:n,drafts:Object(p.i)(e,s,n),loadingDrafts:Object(p.s)(e,s,n)}})(Object(i.localize)(class extends n.Component{render(){const e=this.props.translate;return a.a.createElement(l.a,{isVisible:!0,onClose:this.props.closeDrafts,position:"bottom left",context:this.props.context,className:"masterbar__recent-drafts"},a.a.createElement(T.a,{siteId:this.props.site.ID,query:this.props.draftsQuery}),a.a.createElement("div",{className:"masterbar__recent-drafts-heading"},a.a.createElement("h3",null,e("Recent Drafts")),a.a.createElement(R.a,{compact:!0,className:"masterbar__recent-drafts-add-new",href:Object(c.b)(this.props.site),onClick:this.props.newDraftClicked},e("New Draft"))),a.a.createElement("div",{className:"masterbar__recent-drafts-list"},this.renderDrafts(),this.props.loadingDrafts&&a.a.createElement(P,{isPlaceholder:!0}),a.a.createElement(R.a,{compact:!0,borderless:!0,className:"masterbar__recent-drafts-see-all",href:"/posts/drafts/".concat(this.props.site.slug),onClick:this.props.seeAllDraftsClicked},e("See All"),this.props.draftCount?a.a.createElement(d.a,{count:this.props.draftCount}):null)))}renderDrafts(){const e=this.props,t=e.site,s=e.drafts;return s?s.map(e=>a.a.createElement(P,{key:e.global_ID,post:e,siteId:t.ID,showAuthor:!t.single_user_site&&!this.props.userId,onTitleClick:this.props.draftClicked})):null}}))},"./client/lib/human-date/index.js":function(e,t,s){"use strict";s.d(t,"a",function(){return i});var n=s("./packages/i18n-calypso/dist/esm/index.js"),a=s.n(n);const r=6e4;function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ll";const s=a.a.moment();e=a.a.moment(e);let n=s.diff(e);if(n<0&&(n=0),n<r)return a.a.translate("just now");if(n<60*r){const e=Math.ceil(n/r);return a.a.translate("%(minutes)dm ago",{args:{minutes:e},comment:"example for a resulting string: 2m ago"})}if(n<60*r*24){const t=s.diff(e,"hours");return a.a.translate("%(hours)dh ago",{args:{hours:t},comment:"example for a resulting string: 5h ago"})}if(n<60*r*24*7){const t=s.diff(e,"days");return a.a.translate("%(days)dd ago",{args:{days:t},comment:"example for a resulting string: 4d ago"})}return e.format(t)}},"./client/lib/interval/index.js":function(e,t,s){"use strict";s.d(t,"c",function(){return c}),s.d(t,"a",function(){return l}),s.d(t,"d",function(){return d}),s.d(t,"b",function(){return p}),s.d(t,"e",function(){return m});var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=s.n(n),r=s("./node_modules/react/index.js"),i=s("./node_modules/prop-types/index.js"),o=s.n(i);const c=1e3,l=5e3,d=1e4,p=6e4;class m extends r.Component{constructor(){var e;super(...arguments),e=this,a()(this,"tick",()=>{this.props.onTick()}),a()(this,"start",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props;e.interval=setInterval(e.tick,t.period)}),a()(this,"stop",()=>{this.interval=clearInterval(this.interval)})}componentDidMount(){this.start()}componentWillUnmount(){this.stop()}componentWillReceiveProps(e){e.period!==this.props.period&&(this.stop(),this.start(e))}render(){return null}}a()(m,"propTypes",{onTick:o.a.func.isRequired,period:o.a.number.isRequired})},"./client/lib/react-smart-set-state/index.js":function(e,t,s){"use strict";function n(e){return!!Object.keys(e).some(function(t){return!(this.state&&this.state.hasOwnProperty(t))||this.state[t]!==e[t]},this)&&(this.setState(e),!0)}s.d(t,"a",function(){return n})}}]);