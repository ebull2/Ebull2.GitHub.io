(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{"./client/components/data/query-post-formats/index.jsx":function(t,e,s){"use strict";var o=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),r=s.n(o),a=s("./node_modules/prop-types/index.js"),n=s.n(a),i=s("./node_modules/react/index.js"),c=s("./node_modules/react-redux/es/index.js"),l=s("./client/state/post-formats/selectors.js"),d=s("./client/lib/wp/browser.js");class m extends i.Component{componentWillMount(){this.request(this.props)}componentWillReceiveProps(t){this.props.siteId!==t.siteId&&this.request(t)}request(t){t.requestingPostFormats||t.requestPostFormats(t.siteId)}render(){return null}}r()(m,"propTypes",{siteId:n.a.number.isRequired,requestingPostFormats:n.a.bool,requestPostFormats:n.a.func});e.a=Object(c.b)((t,e)=>({requestingPostFormats:Object(l.b)(t,e.siteId)}),{requestPostFormats:function(t){return e=>(e({type:"POST_FORMATS_REQUEST",siteId:t}),d.a.undocumented().site(t).postFormatsList().then(s=>{let o=s.formats;e({type:"POST_FORMATS_RECEIVE",siteId:t,formats:o}),e({type:"POST_FORMATS_REQUEST_SUCCESS",siteId:t})}).catch(s=>{e({type:"POST_FORMATS_REQUEST_FAILURE",siteId:t,error:s})}))}})(m)},"./client/post-editor/editor-post-formats/accordion.jsx":function(t,e,s){"use strict";s.r(e);var o=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),r=s.n(o),a=s("./node_modules/prop-types/index.js"),n=s.n(a),i=s("./packages/i18n-calypso/dist/esm/index.js"),c=s("./node_modules/react/index.js"),l=s.n(c),d=s("./node_modules/react-redux/es/index.js"),m=s("./node_modules/lodash/lodash.js"),p=s("./client/components/accordion/index.jsx"),u=s("./client/components/data/query-post-formats/index.jsx"),f=s("./client/components/gridicon/index.jsx"),j=s("./client/components/forms/form-radio/index.jsx"),b=s("./client/state/posts/stats.js"),h=s("./client/components/accordion/section.jsx"),_=s("./client/post-editor/editor-theme-help/index.jsx"),g=s("./client/state/ui/selectors.js"),E=s("./client/state/post-formats/selectors.js"),F=s("./client/state/ui/editor/selectors.js"),O=s("./client/state/posts/selectors.js"),x=s("./client/state/sites/selectors.js"),P=s("./client/state/selectors/get-raw-site.js"),I=s("./client/state/site-settings/selectors.js");function S(t,e){const s=Object(I.a)(t,e);if(!s&&!Object(P.a)(t,e))return null;let o=Object(m.get)(s,"default_post_format");return o||(o=Object(x.r)(t,e,"default_post_format")),o&&"0"!==o||(o="standard"),o}var y=s("./client/state/posts/actions.js");s("./client/post-editor/editor-post-formats/style.scss");const q={aside:"aside",image:"image",video:"video-camera",quote:"quote",link:"link",gallery:"image-multiple",status:"pencil",audio:"audio",chat:"comment"};function T(t){return Object(m.get)(q,[t],"posts")}class v extends l.a.Component{constructor(){super(...arguments),r()(this,"onChange",t=>{const e=t.target.value;this.props.editPost(this.props.siteId,this.props.postId,{format:e}),this.props.recordEditorStat("post_format_changed"),this.props.recordEditorEvent("Changed Post Format",e)})}getSelectedPostFormat(){const t=this.props.formatValue;return!!this.getPostFormats()[t]?t:"standard"}getPostFormats(){let t={standard:this.props.translate("Standard",{context:"Post format"})};return this.props.postFormats&&(t=Object.assign(t,this.props.postFormats)),t}renderPostFormats(){const t=this.getSelectedPostFormat();return Object(m.map)(this.getPostFormats(),(e,s)=>l.a.createElement("li",{key:s,className:"editor-post-formats__format"},l.a.createElement("label",null,l.a.createElement(j.a,{name:"format",value:s,checked:s===t,onChange:this.onChange}),l.a.createElement("span",{className:"editor-post-formats__format-label"},l.a.createElement("span",{className:"editor-post-formats__format-icon"},l.a.createElement(f.a,{icon:T(s),size:18})),e))))}render(){return l.a.createElement(h.a,null,l.a.createElement(_.a,{className:"editor-post-formats__help-link"}),l.a.createElement(u.a,{siteId:this.props.siteId}),l.a.createElement("ul",{className:"editor-post-formats"},this.renderPostFormats()))}}r()(v,"propTypes",{siteId:n.a.number,postId:n.a.number,postFormats:n.a.object,formatValue:n.a.string});var R=Object(d.b)(t=>{const e=Object(g.e)(t),s=Object(F.f)(t);return{siteId:e,postId:s,postFormats:Object(E.a)(t,e),formatValue:Object(O.c)(t,e,s,"format")||S(t,e)}},{editPost:y.e,recordEditorStat:b.b,recordEditorEvent:b.a})(Object(i.localize)(v));class w extends c.Component{getSubtitle(){const t=this.props,e=t.postFormats,s=t.formatValue;return Object(m.has)(e,s)?e[s]:this.props.translate("Standard",{context:"Post format"})}render(){const t=this.props,e=t.siteId,s=t.postFormats;return l.a.createElement(c.Fragment,null,e&&l.a.createElement(u.a,{siteId:e}),!Object(m.isEmpty)(s)&&l.a.createElement(p.a,{title:this.props.translate("Post Format"),subtitle:this.getSubtitle(),className:"editor-drawer__accordion editor-post-formats__accordion",e2eTitle:"post-format"},l.a.createElement(R,null)))}}r()(w,"propTypes",{siteId:n.a.number,isLoading:n.a.bool,postFormats:n.a.object,formatValue:n.a.string});e.default=Object(d.b)(t=>{const e=Object(g.e)(t),s=Object(F.f)(t);return{siteId:e,postFormats:Object(E.a)(t,e),formatValue:Object(O.c)(t,e,s,"format")||S(t,e)}})(Object(i.localize)(w))},"./client/post-editor/editor-post-formats/style.scss":function(t,e,s){},"./client/state/post-formats/selectors.js":function(t,e,s){"use strict";function o(t,e){return!!t.postFormats.requesting[e]}function r(t,e){return t.postFormats.items[e]||null}s.d(e,"b",function(){return o}),s.d(e,"a",function(){return r})}}]);