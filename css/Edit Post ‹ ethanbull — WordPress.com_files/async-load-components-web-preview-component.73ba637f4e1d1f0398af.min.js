(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{"./client/components/clipboard-button-input/index.jsx":function(e,t,s){"use strict";var i=s("./node_modules/@babel/runtime/helpers/extends.js"),n=s.n(i),o=s("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=s.n(o),r=s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),l=s.n(r),c=s("./node_modules/react/index.js"),p=s.n(c),d=s("./node_modules/prop-types/index.js"),u=s.n(d),m=s("./node_modules/classnames/index.js"),h=s.n(m),w=s("./packages/i18n-calypso/dist/esm/index.js"),v=s("./node_modules/react-redux/es/index.js"),b=s("./client/lib/url/index.js"),f=s("./client/components/forms/clipboard-button/index.jsx"),g=s("./client/components/forms/form-text-input/index.jsx"),_=s("./client/state/analytics/actions.js");s("./client/components/clipboard-button-input/style.scss");function j(e){let t=e.value,s=void 0===t?"":t,i=e.className,o=e.disabled,r=e.hideHttp,c=e.dispatch,d=l()(e,["value","className","disabled","hideHttp","dispatch"]);const u=Object(w.useTranslate)(),m=p.a.useState(!1),v=a()(m,2),j=v[0],E=v[1];p.a.useEffect(()=>{if(j){const e=setTimeout(()=>E(!1),4e3);return()=>clearTimeout(e)}},[j]);return p.a.createElement("span",{className:h()("clipboard-button-input",i)},p.a.createElement(g.a,n()({},d,{disabled:o,value:r?Object(b.m)(s):s,type:"text",selectOnFocus:!0,readOnly:!0})),p.a.createElement(f.a,{text:s,onCopy:()=>{E(!0),c(Object(_.i)("calypso_editor_clipboard_url_button_click"))},disabled:o,compact:!0},j?u("Copied!"):u("Copy",{context:"verb"})))}j.propTypes={value:u.a.string,disabled:u.a.bool,className:u.a.string,hideHttp:u.a.bool},t.a=Object(v.b)()(j)},"./client/components/clipboard-button-input/style.scss":function(e,t,s){},"./client/components/data/query-plans/index.jsx":function(e,t,s){"use strict";var i=s("./node_modules/prop-types/index.js"),n=s.n(i),o=s("./node_modules/react/index.js"),a=s("./node_modules/react-redux/es/index.js"),r=s("./client/state/plans/selectors.js"),l=s("./client/state/data-layer/handler-registry.js"),c=s("./client/state/data-layer/wpcom-http/actions.js"),p=s("./client/state/data-layer/wpcom-http/utils.js");const d=Object(p.a)({fetch:e=>Object(c.a)({apiVersion:"1.5",method:"GET",path:"/plans"},e),onSuccess:(e,t)=>[m(),u(t)],onError:(e,t)=>h(t instanceof Error?t.message:t)});Object(l.b)("state/data-layer/wpcom/plans",{PLANS_REQUEST:[d]});const u=e=>({type:"PLANS_RECEIVE",plans:e}),m=()=>({type:"PLANS_REQUEST_SUCCESS"}),h=e=>({type:"PLANS_REQUEST_FAILURE",error:e});class w extends o.Component{componentWillMount(){this.props.requestingPlans||this.props.requestPlans()}render(){return null}}w.propTypes={requestingPlans:n.a.bool,requestPlans:n.a.func},w.defaultProps={requestPlans:()=>{}};t.a=Object(a.b)(e=>({requestingPlans:Object(r.e)(e)}),{requestPlans:()=>({type:"PLANS_REQUEST"})})(w)},"./client/components/feature-example/index.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=s.n(i),o=s("./node_modules/react/index.js"),a=s.n(o);s("./client/components/feature-example/style.scss");class r extends a.a.Component{render(){return a.a.createElement("div",{className:"feature-example"},a.a.createElement("div",{className:"feature-example__content"},this.props.children),a.a.createElement("div",{className:"feature-example__gradient"}))}}n()(r,"displayName","FeatureExample")},"./client/components/feature-example/style.scss":function(e,t,s){},"./client/components/forms/clipboard-button/index.jsx":function(e,t,s){"use strict";var i=s("./node_modules/@babel/runtime/helpers/extends.js"),n=s.n(i),o=s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),a=s.n(o),r=s("./node_modules/react/index.js"),l=s.n(r),c=s("./node_modules/prop-types/index.js"),p=s.n(c),d=s("./node_modules/react-dom/index.js"),u=s.n(d),m=s("./node_modules/clipboard/dist/clipboard.js"),h=s.n(m),w=s("./node_modules/lodash/lodash.js"),v=s("./node_modules/classnames/index.js"),b=s.n(v),f=s("./client/components/button/index.jsx");function g(e){let t=e.className,s=e.text,i=e.onCopy,o=void 0===i?w.noop:i,r=a()(e,["className","text","onCopy"]);const c=l.a.useRef(),p=l.a.useRef(),d=l.a.useRef();return l.a.useEffect(()=>{p.current=(()=>s),d.current=o},[s,o]),l.a.useEffect(()=>{const e=u.a.findDOMNode(c.current),t=new h.a(e,{text:()=>p.current()});return t.on("success",()=>d.current()),()=>t.destroy()},[]),l.a.createElement(f.a,n()({},r,{ref:c,className:b()("clipboard-button",t)}))}g.propTypes={className:p.a.string,text:p.a.string,onCopy:p.a.func},t.a=g},"./client/components/forms/form-input-validation/index.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return u});var i=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=s.n(i),o=s("./node_modules/react/index.js"),a=s.n(o),r=s("./node_modules/prop-types/index.js"),l=s.n(r),c=s("./node_modules/classnames/index.js"),p=s.n(c),d=s("./client/components/gridicon/index.jsx");class u extends a.a.Component{render(){const e=p()(this.props.className,{"form-input-validation":!0,"is-warning":this.props.isWarning,"is-error":this.props.isError,"is-hidden":this.props.isHidden}),t=this.props.isError||this.props.isWarning?"notice-outline":"checkmark";return a.a.createElement("div",{className:e,role:"alert"},a.a.createElement("span",{id:this.props.id},a.a.createElement(d.a,{size:24,icon:this.props.icon?this.props.icon:t})," ",this.props.text))}}n()(u,"displayName","FormInputValidation"),n()(u,"propTypes",{isError:l.a.bool,isWarning:l.a.bool,text:l.a.node,icon:l.a.string,id:l.a.string}),n()(u,"defaultProps",{isError:!1,id:null})},"./client/components/popover/menu.jsx":function(e,t,s){"use strict";var i=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=s.n(i),o=s("./node_modules/react/index.js"),a=s.n(o),r=s("./node_modules/prop-types/index.js"),l=s.n(r),c=s("./client/components/popover/index.jsx");const p=e=>"HR"===e.tagName;class d extends o.Component{constructor(){var e;super(...arguments),e=this,n()(this,"menu",a.a.createRef()),n()(this,"_setPropsOnChild",e=>{if(null==e)return e;const t=e.props,s=t.action,i=t.onClick;return a.a.cloneElement(e,{action:null,onClick:()=>{i&&i(),this._onClose(s)}})}),n()(this,"_onShow",()=>{const e=this.menu.current;this._previouslyFocusedElement=document.activeElement,e&&e.focus()}),n()(this,"_getClosestSibling",function(t){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.menu.current;let n=i.firstChild,o=i.lastChild;if(s||(n=i.lastChild,o=i.firstChild),t===i)return n;const a=t[s?"nextSibling":"previousSibling"]||o;return p(a)?e._getClosestSibling(a,s):a}),n()(this,"_onKeyDown",e=>{const t=e.target;let s,i=!1;switch(e.keyCode){case 9:this.props.onClose(),i=!0;break;case 38:s=this._getClosestSibling(t,!1),i=!0;break;case 40:s=this._getClosestSibling(t,!0),i=!0}s&&s.focus(),i&&e.preventDefault()}),n()(this,"_onClose",e=>{this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null),this.props.onClose&&this.props.onClose(e)})}componentWillUnmount(){this._previouslyFocusedElement=null}render(){const e=this.props,t=e.popoverComponent,s=e.autoPosition,i=e.className,n=e.context,o=e.customPosition,r=e.isVisible,l=e.popoverTitle,c=e.position,p=e.rootClassName;return a.a.createElement(t,{onClose:this._onClose,onShow:this._onShow,autoPosition:s,className:i,context:n,customPosition:o,isVisible:r,popoverTitle:l,position:c,rootClassName:p},a.a.createElement("div",{ref:this.menu,role:"menu",className:"popover__menu",onKeyDown:this._onKeyDown,tabIndex:"-1"},a.a.Children.map(this.props.children,this._setPropsOnChild,this)))}}n()(d,"propTypes",{autoPosition:l.a.bool,isVisible:l.a.bool.isRequired,onClose:l.a.func.isRequired,position:l.a.string,className:l.a.string,rootClassName:l.a.string,popoverComponent:l.a.func,popoverTitle:l.a.string,customPosition:l.a.object}),n()(d,"defaultProps",{autoPosition:!0,position:"top",popoverComponent:c.a}),t.a=d},"./client/components/select-dropdown/index.jsx":function(e,t,s){"use strict";var i=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=s.n(i),o=s("./node_modules/react-dom/index.js"),a=s.n(o),r=s("./node_modules/prop-types/index.js"),l=s.n(r),c=s("./node_modules/react/index.js"),p=s.n(c),d=s("./node_modules/lodash/lodash.js"),u=s("./node_modules/classnames/index.js"),m=s.n(u),h=s("./client/components/gridicon/index.jsx"),w=s("./client/components/select-dropdown/item.jsx"),v=s("./client/components/select-dropdown/separator.jsx"),b=s("./client/components/select-dropdown/label.jsx"),f=s("./client/components/count/index.jsx"),g=s("./client/components/translatable/proptype.js");class _ extends c.Component{constructor(e){super(e),this.navigateItem=this.navigateItem.bind(this),this.toggleDropdown=this.toggleDropdown.bind(this),this.handleOutsideClick=this.handleOutsideClick.bind(this);const t={isOpen:!1};e.options.length&&(t.selected=this.getInitialSelectedItem(e)),this.state=t}componentWillMount(){this.setState({instanceId:++_.instances})}componentWillReceiveProps(e){this.state.isOpen&&this.closeDropdown(),void 0!==this.state.selected&&this.props.initialSelected!==e.initialSelected&&this.setState({selected:e.initialSelected})}componentWillUnmount(){window.removeEventListener("click",this.handleOutsideClick)}componentDidUpdate(e,t){this.state.isOpen?window.addEventListener("click",this.handleOutsideClick):window.removeEventListener("click",this.handleOutsideClick),this.state.isOpen!==t.isOpen&&this.props.onToggle({target:this,open:this.state.isOpen})}getInitialSelectedItem(e){if((e=e||this.props).initialSelected)return e.initialSelected;if(!e.options.length)return;const t=Object(d.find)(e.options,e=>!e.isLabel);return t&&t.value}getSelectedText(){const e=this.props,t=e.options,s=e.selectedText,i=this.state.selected;if(s)return s;const n=i||this.getInitialSelectedItem(this.props);return Object(d.result)(Object(d.find)(t,{value:n}),"label")}getSelectedIcon(){const e=this.props,t=e.options,s=e.selectedIcon,i=this.state.selected;if(s)return s;const n=i||this.getInitialSelectedItem(this.props);return Object(d.result)(Object(d.find)(t,{value:n}),"icon")}dropdownOptions(){let e=0;const t=this;return this.props.children?p.a.Children.map(this.props.children,function(s,i){if(!s)return null;const n=p.a.cloneElement(s,{ref:s.type===w.a?"item-"+e:null,key:"item-"+i,isDropdownOpen:this.state.isOpen,onClick:function(e){t.refs.dropdownContainer.focus(),"function"==typeof s.props.onClick&&s.props.onClick(e)}});return s.type===w.a&&e++,n},this):this.props.options.map(function(t,s){if(!t)return p.a.createElement(v.a,{key:"dropdown-separator-"+this.state.instanceId+"-"+s});if(t.isLabel)return p.a.createElement(b.a,{key:"dropdown-label-"+this.state.instanceId+"-"+s},t.label);const i=p.a.createElement(w.a,{key:"dropdown-item-"+this.state.instanceId+"-"+t.value,ref:"item-"+e,isDropdownOpen:this.state.isOpen,selected:this.state.selected===t.value,onClick:this.onSelectItem(t),path:t.path,icon:t.icon},t.label);return e++,i},this)}render(){const e=m()(this.props.className,{"select-dropdown":!0,"is-compact":this.props.compact,"is-open":this.state.isOpen&&!this.props.disabled,"is-disabled":this.props.disabled,"has-count":"number"==typeof this.props.selectedCount}),t=this.getSelectedText(),s=this.getSelectedIcon();return p.a.createElement("div",{style:this.props.style,className:e},p.a.createElement("div",{ref:"dropdownContainer",className:"select-dropdown__container",onKeyDown:this.navigateItem,tabIndex:this.props.tabIndex||0,"aria-haspopup":"true","aria-owns":"select-submenu-"+this.state.instanceId,"aria-controls":"select-submenu-"+this.state.instanceId,"aria-expanded":this.state.isOpen,"aria-disabled":this.props.disabled,"data-tip-target":this.props.tipTarget,onClick:this.toggleDropdown},p.a.createElement("div",{id:"select-dropdown-"+this.state.instanceId,className:"select-dropdown__header"},p.a.createElement("span",{className:"select-dropdown__header-text"},s&&s.type===h.a?s:null,t),"number"==typeof this.props.selectedCount&&p.a.createElement(f.a,{count:this.props.selectedCount}),p.a.createElement(h.a,{icon:"chevron-down",size:18})),p.a.createElement("ul",{id:"select-submenu-"+this.state.instanceId,className:"select-dropdown__options",role:"menu","aria-labelledby":"select-dropdown-"+this.state.instanceId,"aria-expanded":this.state.isOpen},this.dropdownOptions())))}toggleDropdown(){this.props&&this.props.disabled||this.setState({isOpen:!this.state.isOpen})}openDropdown(){this.props&&this.props.disabled||this.setState({isOpen:!0})}closeDropdown(){this.state.isOpen&&(delete this.focused,this.setState({isOpen:!1}))}onSelectItem(e){return this.selectItem.bind(this,e)}selectItem(e){e&&(this.props.onSelect&&this.props.onSelect(e),this.setState({selected:e.value}),this.refs.dropdownContainer.focus())}navigateItem(e){switch(e.keyCode){case 9:this.navigateItemByTabKey(e);break;case 32:case 13:e.preventDefault(),this.activateItem();break;case 38:e.preventDefault(),this.focusSibling("previous"),this.openDropdown();break;case 40:e.preventDefault(),this.focusSibling("next"),this.openDropdown();break;case 27:e.preventDefault(),this.closeDropdown(),this.refs.dropdownContainer.focus()}}navigateItemByTabKey(e){if(!this.state.isOpen)return;e.preventDefault();const t=e.shiftKey?"previous":"next";this.focusSibling(t)}activateItem(){if(!this.state.isOpen)return this.openDropdown();document.activeElement.click()}focusSibling(e){if(!this.state.isOpen)return;let t,s;this.props.options.length?(t=Object(d.map)(Object(d.filter)(this.props.options,e=>e&&!e.isLabel),"value"),s="number"==typeof this.focused?this.focused:t.indexOf(this.state.selected)):(t=Object(d.filter)(this.props.children,function(e){return e.type===w.a}),s="number"==typeof this.focused?this.focused:Object(d.findIndex)(t,function(e){return e.props.selected}));const i=s+("previous"===e?-1:1);i>=t.length||i<0||(a.a.findDOMNode(this.refs["item-"+i].refs.itemLink).focus(),this.focused=i)}handleOutsideClick(e){a.a.findDOMNode(this.refs.dropdownContainer).contains(e.target)||this.closeDropdown()}}n()(_,"propTypes",{selectedText:g.a,selectedIcon:l.a.element,selectedCount:l.a.number,initialSelected:l.a.string,className:l.a.string,style:l.a.object,onSelect:l.a.func,onToggle:l.a.func,focusSibling:l.a.func,tabIndex:l.a.number,disabled:l.a.bool,options:l.a.arrayOf(l.a.shape({value:l.a.string.isRequired,label:g.a.isRequired,path:l.a.string,icon:l.a.element}))}),n()(_,"defaultProps",{options:[],onSelect:()=>{},onToggle:()=>{},style:{}}),n()(_,"instances",0),t.a=_},"./client/components/select-dropdown/item.jsx":function(e,t,s){"use strict";var i=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),n=s.n(i),o=s("./node_modules/prop-types/index.js"),a=s.n(o),r=s("./node_modules/react/index.js"),l=s.n(r),c=s("./node_modules/classnames/index.js"),p=s.n(c),d=s("./client/components/gridicon/index.jsx"),u=s("./client/components/count/index.jsx"),m=s("./client/components/translatable/proptype.js");class h extends r.Component{render(){const e=p()(this.props.className,{"select-dropdown__item":!0,"is-selected":this.props.selected,"is-disabled":this.props.disabled,"has-icon":!!this.props.icon});return l.a.createElement("li",{className:"select-dropdown__option"},l.a.createElement("a",{ref:"itemLink",href:this.props.path,className:e,onClick:this.props.disabled?null:this.props.onClick,"data-bold-text":this.props.value||this.props.children,role:"menuitem",tabIndex:this.props.isDropdownOpen?0:"","aria-selected":this.props.selected,"data-e2e-title":this.props.e2eTitle},l.a.createElement("span",{className:"select-dropdown__item-text"},this.props.icon&&this.props.icon.type===d.a?this.props.icon:null,this.props.children),"number"==typeof this.props.count&&l.a.createElement("span",{"data-text":this.props.count,className:"select-dropdown__item-count"},l.a.createElement(u.a,{count:this.props.count,compact:this.props.compactCount}))))}}n()(h,"propTypes",{children:m.a.isRequired,compactCount:a.a.bool,path:a.a.string,isDropdownOpen:a.a.bool,selected:a.a.bool,onClick:a.a.func,count:a.a.number,disabled:a.a.bool,icon:a.a.element}),n()(h,"defaultProps",{isDropdownOpen:!1,selected:!1}),t.a=h},"./client/components/select-dropdown/label.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s("./node_modules/react/index.js"),n=s.n(i);const o=e=>e.stopPropagation();function a(e){return n.a.createElement("li",{onClick:o,className:"select-dropdown__label"},n.a.createElement("label",null,e.children))}},"./client/components/select-dropdown/separator.jsx":function(e,t,s){"use strict";var i=s("./node_modules/react/index.js"),n=s.n(i);t.a=(()=>n.a.createElement("li",{className:"select-dropdown__separator"}))},"./client/components/seo-preview-pane/style.scss":function(e,t,s){},"./client/components/seo/preview-upgrade-nudge/preview-upgrade-nudge.png":function(e,t,s){e.exports=s.p+"images/preview-upgrade-nudge-3ffc5ef7333d3ddaaf52df7faff6a89a.png"},"./client/components/seo/preview-upgrade-nudge/style.scss":function(e,t,s){},"./client/components/seo/search-preview/style.scss":function(e,t,s){},"./client/components/seo/twitter-preview/style.scss":function(e,t,s){},"./client/components/spinner-line/index.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return c});var i=s("./node_modules/prop-types/index.js"),n=s.n(i),o=s("./node_modules/react/index.js"),a=s.n(o),r=s("./node_modules/classnames/index.js"),l=s.n(r);s("./client/components/spinner-line/style.scss");class c extends o.PureComponent{render(){const e=l()("spinner-line",this.props.className);return a.a.createElement("hr",{className:e})}}c.propTypes={className:n.a.string}},"./client/components/spinner-line/style.scss":function(e,t,s){},"./client/components/web-preview/component.jsx":function(e,t,s){"use strict";s.r(t);var i=s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),n=s.n(i),o=s("./node_modules/@babel/runtime/helpers/extends.js"),a=s.n(o),r=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=s.n(r),c=s("./node_modules/react/index.js"),p=s.n(c),d=s("./node_modules/prop-types/index.js"),u=s.n(d),m=s("./node_modules/react-redux/es/index.js"),h=s("./node_modules/classnames/index.js"),w=s.n(h),v=s("./node_modules/lodash/lodash.js"),b=s("./client/lib/touch-detect/index.js"),f=s("./client/lib/viewport/index.js"),g=s("./packages/i18n-calypso/dist/esm/index.js"),_=s("./client/components/root-child/index.jsx"),j=s("./client/state/ui/actions.js"),E=s("./node_modules/debug/src/browser.js"),x=s.n(E),y=s("./node_modules/page/page.js"),O=s.n(y),k=s("./node_modules/uuid/index.js"),S=s("./client/lib/route/index.js"),C=s("./client/components/gridicon/index.jsx"),N=s("./client/components/button/index.jsx"),P=s("./client/components/select-dropdown/index.jsx"),D=s("./client/components/select-dropdown/item.jsx"),I=s("./client/components/clipboard-button-input/index.jsx"),T=s("./client/state/analytics/actions.js");const U=["computer","tablet","phone"];class L extends c.Component{constructor(e){super(),l()(this,"handleEditorWebPreviewExternalClick",()=>{this.props.recordTracksEvent("calypso_editor_preview_toolbar_external_click")}),l()(this,"handleEditorWebPreviewClose",()=>{this.props.recordTracksEvent("calypso_editor_preview_close_click"),this.props.onClose()}),l()(this,"handleEditorWebPreviewEdit",()=>{this.props.recordTracksEvent("calypso_editor_preview_edit_click"),this.props.onEdit()}),this.devices={computer:{title:e.translate("Desktop"),icon:"computer"},tablet:{title:e.translate("Tablet"),icon:"tablet"},phone:{title:e.translate("Phone"),icon:"phone"},seo:{title:e.translate("Search & Social"),icon:"globe"}}}render(){const e=this.props,t=e.device,s=e.editUrl,i=e.externalUrl,n=e.isModalWindow,o=e.previewUrl,a=e.setDeviceViewport,r=e.showClose,l=e.showDeviceSwitcher,c=e.showUrl,d=e.showEdit,u=e.showExternal,m=e.showSEO,h=e.translate,w=this.devices[t],b=m?U.concat("seo"):U;return p.a.createElement("div",{className:"web-preview__toolbar"},r&&p.a.createElement(N.a,{borderless:!0,"aria-label":h("Close preview"),className:"web-preview__close","data-tip-target":"web-preview__close",onClick:this.handleEditorWebPreviewClose},h("Close")),l&&p.a.createElement(P.a,{compact:!0,className:"web-preview__device-switcher",selectedText:w.title,selectedIcon:p.a.createElement(C.a,{size:18,icon:w.icon}),ref:this.setDropdown},b.map(e=>p.a.createElement(D.a,{key:e,selected:e===t,onClick:Object(v.partial)(a,e),icon:p.a.createElement(C.a,{size:18,icon:this.devices[e].icon}),e2eTitle:e},this.devices[e].title))),c&&p.a.createElement(I.a,{className:"web-preview__url-clipboard-input",value:i||o,hideHttp:!0}),p.a.createElement("div",{className:"web-preview__toolbar-actions"},d&&p.a.createElement(N.a,{className:"web-preview__edit",href:s,onClick:this.handleEditorWebPreviewEdit},h("Edit")),u&&p.a.createElement(N.a,{primary:!0,className:"web-preview__external",href:i||o,target:n?"_blank":null,rel:"noopener noreferrer",onClick:this.handleEditorWebPreviewExternalClick},h("Visit Site")),p.a.createElement("div",{className:"web-preview__toolbar-tray"},this.props.children)))}}l()(L,"propTypes",{showDeviceSwitcher:u.a.bool,showUrl:u.a.bool,showExternal:u.a.bool,showClose:u.a.bool,showSEO:u.a.bool,showEdit:u.a.bool,editUrl:u.a.string,device:u.a.string,children:u.a.node,setDeviceViewport:u.a.func,onClose:u.a.func.isRequired,onEdit:u.a.func}),l()(L,"defaultProps",{showSEO:!0});var M=Object(m.b)(null,{recordTracksEvent:T.i})(Object(g.localize)(L)),W=s("./client/components/spinner-line/index.jsx"),R=s("./node_modules/@babel/runtime/helpers/objectSpread.js"),V=s.n(R),q=s("./client/components/data/query-plans/index.jsx"),F=s("./client/lib/analytics/track-component-view/index.jsx"),A=s("./client/lib/formatting/index.js"),z=s("./client/state/sites/selectors.js"),H=s("./client/components/feature-example/index.jsx"),K=s("./client/components/banner/index.jsx"),J=s("./client/lib/plans/index.js"),B=s("./client/lib/plans/constants.js"),Q=(s("./client/components/seo/preview-upgrade-nudge/style.scss"),s("./client/components/seo/preview-upgrade-nudge/preview-upgrade-nudge.png")),G=s.n(Q);const $=e=>{let t=e.translate,s=e.site,i=e.isJetpack,n=void 0!==i&&i;return p.a.createElement("div",{className:"preview-upgrade-nudge"},p.a.createElement(q.a,null),p.a.createElement(F.a,{eventName:"calypso_seo_preview_upgrade_nudge_impression"}),p.a.createElement(K.a,{plan:s&&Object(J.c)(s.plan.product_slug,V()({type:B.Cc},n?{term:B.yc}:{})),title:t("Upgrade to a Business Plan to unlock the power of our SEO tools!"),event:"site_preview_seo_plan_upgrade",className:"preview-upgrade-nudge__banner"}),p.a.createElement("div",{className:"preview-upgrade-nudge__features"},p.a.createElement(H.a,null,p.a.createElement("img",{src:G.a,alt:""})),p.a.createElement("div",{className:"preview-upgrade-nudge__features-details"},p.a.createElement("ul",{className:"preview-upgrade-nudge__features-list"},p.a.createElement("li",{className:"preview-upgrade-nudge__features-list-item"},p.a.createElement(C.a,{className:"preview-upgrade-nudge__features-list-item-checkmark",icon:"checkmark"}),Object(A.d)(t("Preview your site's content as it will appear on Facebook, Twitter, and the WordPress.com Reader."))),p.a.createElement("li",{className:"preview-upgrade-nudge__features-list-item"},p.a.createElement(C.a,{className:"preview-upgrade-nudge__features-list-item-checkmark",icon:"checkmark"}),Object(A.d)(t("Control how page titles will appear on Google search results and social networks."))),p.a.createElement("li",{className:"preview-upgrade-nudge__features-list-item"},p.a.createElement(C.a,{className:"preview-upgrade-nudge__features-list-item-checkmark",icon:"checkmark"}),Object(A.d)(t("Customize your front page meta data to change how your site appears to search engines.")))))))};$.propTypes={translate:u.a.func.isRequired};var Y=Object(m.b)((e,t)=>{const s=t.site;return{isJetpack:Object(z.J)(e,s.ID)}})(Object(g.localize)($)),X=s("./client/state/reader/posts/display-types.js"),Z=s("./client/blocks/reader-post-card/index.jsx");class ee extends c.PureComponent{render(){const e=this.props,t=e.site,s=e.post,i=e.postExcerpt,n=e.postImage,o=Object.assign({},s,{better_excerpt:i},n&&{canonical_media:{src:n}},n&&!i&&{display_type:X.a.PHOTO_ONLY},{author:Object.assign({},s.author,{has_avatar:!0})});return p.a.createElement(Z.a,{site:t,post:o})}}ee.propTypes={site:u.a.object,post:u.a.object,postExcerpt:u.a.string,postImage:u.a.string};var te=ee,se=s("./client/components/seo/facebook-preview/index.jsx");s("./client/components/seo/twitter-preview/style.scss");const ie=e=>e.replace(/^[^\/]+[\/]*/,"").replace(/\/.*$/,"");class ne extends c.PureComponent{render(){const e=this.props,t=e.url,s=e.title,i=e.type,n=e.description,o=e.image,a={backgroundImage:"url("+o+")"};return p.a.createElement("div",{className:"twitter-preview"},p.a.createElement("div",{className:"twitter-preview__".concat(i)},o&&p.a.createElement("div",{className:"twitter-preview__image",style:a}),p.a.createElement("div",{className:"twitter-preview__body"},p.a.createElement("div",{className:"twitter-preview__title"},s),p.a.createElement("div",{className:"twitter-preview__description"},n),p.a.createElement("div",{className:"twitter-preview__url"},ie(t)))))}}ne.propTypes={url:u.a.string,title:u.a.string,type:u.a.string,description:u.a.string,image:u.a.string};var oe=ne,ae=s("./client/components/seo/helpers.js");s("./client/components/seo/search-preview/style.scss");const re=Object(ae.a)(Object(ae.c)(63),Object(ae.d)(23,73),Object(ae.b)(63)),le=Object(ae.a)(Object(ae.c)(160),Object(ae.d)(80,170),Object(ae.b)(160)),ce=Object(ae.b)(79);function pe(e){let t=e.snippet,s=e.title,i=e.url;const n=Object(g.useTranslate)();return p.a.createElement("div",{className:"search-preview"},p.a.createElement("h2",{className:"search-preview__header"},n("Search Preview")),p.a.createElement("div",{className:"search-preview__display"},p.a.createElement("div",{className:"search-preview__title"},re(s)),p.a.createElement("div",{className:"search-preview__url"},ce(i)," ▾"),p.a.createElement("div",{className:"search-preview__snippet"},le(t||""))))}pe.propTypes={title:u.a.string,url:u.a.string,snippet:u.a.string},pe.defaultProps={title:"",url:"",snippet:""};var de=s("./client/components/vertical-menu/index.jsx"),ue=s("./client/lib/post-metadata/index.js"),me=s("./client/lib/post-normalizer/rule-create-better-excerpt.js"),he=s("./client/lib/products-values/index.js"),we=s("./client/components/vertical-menu/items/index.js"),ve=s("./client/state/ui/editor/selectors.js"),be=s("./client/state/posts/selectors.js"),fe=s("./client/state/ui/selectors.js");s("./client/components/seo-preview-pane/style.scss");const ge=Object(v.overSome)(he.j,he.x,he.G,he.w),_e=e=>{const t=Object(v.get)(e,"icon.img");return t?"".concat(t,"?s=").concat(512):null},je=e=>{if(!e)return null;if(e.featured_image)return e.featured_image;const t=e.content;if(!t)return null;const s=Object(A.c)(t).querySelectorAll("img"),i=Object(v.get)(Object(v.find)(s,e=>{return e.width>=512}),"src",null);return i?"".concat(i,"?s=").concat(512):null},Ee=e=>e?Object(me.b)(Object(v.find)([ue.a.metaDescription(e),e.excerpt,e.content],v.identity)):null,xe=e=>e?Object(me.b)(Object(v.find)([Object(v.get)(e,"options.advanced_seo_front_page_description"),e.description],v.identity)):null,ye=e=>p.a.createElement("div",{className:"seo-preview-pane__message"},e("Coming Soon!")),Oe=(e,t,s)=>p.a.createElement(te,{site:e,post:t,postExcerpt:Object(me.b)(s||Object(v.get)(t,"excerpt",!1)||Object(v.get)(t,"content",!1)),postImage:je(t)}),ke=(e,t)=>p.a.createElement(pe,{title:e.name,url:e.URL,snippet:t||xe(e)}),Se=(e,t,s)=>p.a.createElement(pe,{title:Object(v.get)(t,"seoTitle",""),url:Object(v.get)(t,"URL",""),snippet:s||Ee(t)}),Ce=(e,t)=>p.a.createElement(se.a,{title:e.name,url:e.URL,type:"website",description:t||xe(e),image:_e(e)}),Ne=(e,t,s)=>p.a.createElement(se.a,{title:Object(v.get)(t,"seoTitle",""),url:Object(v.get)(t,"URL",""),type:"article",description:s||Ee(t),image:je(t),author:Object(v.get)(t,"author.name","")}),Pe=(e,t)=>p.a.createElement(oe,{title:e.name,url:e.URL,type:"summary",description:t||xe(e),image:_e(e)}),De=(e,t,s)=>p.a.createElement(oe,{title:Object(v.get)(t,"seoTitle",""),url:Object(v.get)(t,"URL",""),type:"large_image_summary",description:s||Ee(t),image:je(t)});var Ie=Object(m.b)((e,t)=>{let s=t.overridePost;const i=Object(fe.d)(e),n=s||Object(be.l)(e,i.ID,Object(ve.f)(e)),o=["gutenberg-editor","post-editor"].includes(Object(fe.c)(e));return{site:V()({},i,{name:Object(z.i)(e,"frontPage",{site:i})}),post:o&&V()({},n,{seoTitle:Object(z.i)(e,"posts",{site:i,post:n})}),showNudge:i&&i.plan&&!ge(i.plan)}},e=>({trackPreviewService:t=>e(Object(T.i)("calypso_seo_tools_social_preview",{service:t}))}))(Object(g.localize)(class extends c.PureComponent{constructor(e){super(e),this.state={selectedService:e.post?"wordpress":"google"},this.selectPreview=this.selectPreview.bind(this)}componentDidMount(){(0,this.props.trackPreviewService)(this.state.selectedService)}selectPreview(e){this.setState({selectedService:e}),(0,this.props.trackPreviewService)(e)}render(){const e=this.props,t=e.post,s=e.site,i=e.translate,n=e.showNudge,o=e.frontPageMetaDescription,a=this.state.selectedService,r=Object(v.compact)([t&&"wordpress","google","facebook","twitter"]);return n?p.a.createElement(Y,{site:s}):p.a.createElement("div",{className:"seo-preview-pane"},p.a.createElement("div",{className:"seo-preview-pane__sidebar"},p.a.createElement("div",{className:"seo-preview-pane__explanation"},p.a.createElement("h1",{className:"seo-preview-pane__title"},i("External previews")),p.a.createElement("p",{className:"seo-preview-pane__description"},i("Below you'll find previews that represent how your post will look when it's found or shared across a variety of networks."))),p.a.createElement(de.a,{onClick:this.selectPreview},r.map(e=>p.a.createElement(we.a,{key:e,service:e})))),p.a.createElement("div",{className:"seo-preview-pane__preview-area"},p.a.createElement("div",{className:"seo-preview-pane__preview"},t&&Object(v.get)({wordpress:Oe(s,t,o),facebook:Ne(s,t,o),google:Se(s,t,o),twitter:De(s,t,o)},a,ye(i)),!t&&Object(v.get)({facebook:Ce(s,o),google:ke(s,o),twitter:Pe(s,o)},a,ye(i)))))}})),Te=s("./client/state/inline-help/selectors.js");const Ue=x()("calypso:web-preview");class Le extends c.Component{constructor(){var e;super(...arguments),e=this,l()(this,"previewId",Object(k.v4)()),l()(this,"_hasTouch",!1),l()(this,"state",{iframeUrl:null,device:this.props.defaultViewportDevice||"computer",loaded:!1,isLoadingSubpage:!1}),l()(this,"setIframeInstance",e=>{this.iframe=e}),l()(this,"handleMessage",e=>{let t;try{t=JSON.parse(e.data)}catch(e){return}if(t&&t.channel==="preview-"+this.previewId)switch(Ue("message from iframe",t),t.type){case"link":return O()(t.payload.replace(/^https:\/\/wordpress\.com\//i,"/")),void this.props.onClose();case"close":return void this.props.onClose();case"partially-loaded":return void this.setLoaded();case"location-change":return void this.handleLocationChange(t.payload);case"focus":return this.removeSelection(),void(this.wrapperElementRef&&this.wrapperElementRef.click());case"loading":return void this.setState({isLoadingSubpage:!0})}}),l()(this,"handleLocationChange",e=>{this.props.onLocationUpdate(e.pathname),this.setState({isLoadingSubpage:!1})}),l()(this,"setWrapperElement",e=>{this.wrapperElementRef=e}),l()(this,"removeSelection",()=>{if("undefined"!=typeof window)if(Object(v.isFunction)(window.getSelection)){const e=window.getSelection();Object(v.isFunction)(e.empty)?e.empty():Object(v.isFunction)(e.removeAllRanges)&&e.removeAllRanges()}else document.selection&&Object(v.isFunction)(document.selection.empty)&&document.selection.empty()}),l()(this,"focusIfNeeded",()=>{this.iframe.contentWindow&&"about:blank"!==this.state.iframeUrl&&(Ue("focusing iframe contents"),this.iframe.contentWindow.focus())}),l()(this,"setIframeUrl",e=>{if(this.iframe&&(this.props.showPreview||!this.props.isModalWindow)&&e!==this.state.iframeUrl){Ue("setIframeUrl",e);try{const t="about:blank"===e?e:Object(S.a)({calypso_token:this.previewId},e);this.iframe.contentWindow.location.replace(t),this.setState({iframeUrl:e}),e.replace(/#.*$/,"")===this.state.iframeUrl.replace(/#.*$/,"")||this.setState({loaded:!1})}catch(e){}}}),l()(this,"setDeviceViewport",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"computer";e.setState({device:t}),e.props.recordTracksEvent("calypso_web_preview_select_viewport_device",{device:t}),"function"==typeof e.props.onDeviceUpdate&&e.props.onDeviceUpdate(t)}),l()(this,"selectSEO",()=>{this.setDeviceViewport("seo")}),l()(this,"setLoaded",()=>{!this.state.loaded||this.state.isLoadingSubpage?this.state.iframeUrl||this.props.previewMarkup?(this.props.previewMarkup?(Ue("preview loaded with markup"),this.props.onLoad(this.iframe.contentDocument)):Ue("preview loaded for url:",this.state.iframeUrl),this.setState({loaded:!0,isLoadingSubpage:!1}),this.props.isInlineHelpPopoverVisible||this.focusIfNeeded()):Ue("preview loaded, but nothing to show"):Ue("already loaded")})}UNSAFE_componentWillMount(){this._hasTouch=Object(b.a)()}componentDidMount(){window.addEventListener("message",this.handleMessage),this.props.previewUrl&&this.setIframeUrl(this.props.previewUrl),this.props.previewMarkup&&this.setIframeMarkup(this.props.previewMarkup),this.props.onDeviceUpdate(this.state.device)}componentWillUnmount(){window.removeEventListener("message",this.handleMessage)}componentDidUpdate(e){const t=this.props.previewUrl;this.setIframeUrl(t),this.props.previewMarkup&&this.props.previewMarkup!==e.previewMarkup&&this.setIframeMarkup(this.props.previewMarkup),!this.props.previewMarkup&&e.previewMarkup&&(Ue("removing iframe contents"),this.setIframeMarkup("")),this.props.showPreview&&!e.showPreview&&this.state.loaded&&this.focusIfNeeded()}setIframeMarkup(e){this.iframe?(Ue("adding markup to iframe",e.length),this.iframe.contentDocument.open(),this.iframe.contentDocument.write(e),this.iframe.contentDocument.close()):Ue("no iframe to update")}render(){const e=this.props.translate,t=w()(this.props.className,"web-preview__inner",{"is-touch":this._hasTouch,"is-with-sidebar":this.props.hasSidebar,"is-visible":this.props.showPreview,"is-computer":"computer"===this.state.device,"is-tablet":"tablet"===this.state.device,"is-phone":"phone"===this.state.device,"is-seo":"seo"===this.state.device,"is-loaded":this.state.loaded}),s=!this.state.loaded&&this.props.loadingMessage&&(this.props.showPreview||!this.props.isModalWindow)&&"seo"!==this.state.device;return p.a.createElement("div",{className:t,ref:this.setWrapperElement},p.a.createElement(M,a()({setDeviceViewport:this.setDeviceViewport,device:this.state.device},this.props,{showExternal:!!this.props.previewUrl&&this.props.showExternal,showDeviceSwitcher:this.props.showDeviceSwitcher&&Object(f.f)(">660px"),selectSeoPreview:this.selectSEO,isLoading:this.state.isLoadingSubpage})),this.props.belowToolbar,(!this.state.loaded||this.state.isLoadingSubpage)&&p.a.createElement(W.a,null),p.a.createElement("div",{className:"web-preview__placeholder"},s&&p.a.createElement("div",{className:"web-preview__loading-message-wrapper"},p.a.createElement("span",{className:"web-preview__loading-message"},this.props.loadingMessage)),p.a.createElement("div",{className:w()("web-preview__frame-wrapper",{"is-resizable":!this.props.isModalWindow}),style:{display:"seo"===this.state.device?"none":"inherit"}},p.a.createElement("iframe",{ref:this.setIframeInstance,className:"web-preview__frame",src:"about:blank",onLoad:this.setLoaded,title:this.props.iframeTitle||e("Preview")})),"seo"===this.state.device&&p.a.createElement(Ie,{overridePost:this.props.overridePost,frontPageMetaDescription:this.props.frontPageMetaDescription})))}}Le.propTypes={belowToolbar:u.a.element,showPreview:u.a.bool,showExternal:u.a.bool,showUrl:u.a.bool,showClose:u.a.bool,showSEO:u.a.bool,showDeviceSwitcher:u.a.bool,showEdit:u.a.bool,editUrl:u.a.string,previewUrl:u.a.string,externalUrl:u.a.string,previewMarkup:u.a.string,defaultViewportDevice:u.a.string,children:u.a.node,onLoad:u.a.func,onLocationUpdate:u.a.func,onClose:u.a.func,onEdit:u.a.func,loadingMessage:u.a.oneOfType([u.a.array,u.a.string]),iframeTitle:u.a.string,hasSidebar:u.a.bool,onDeviceUpdate:u.a.func,isModalWindow:u.a.bool,frontPageMetaDescription:u.a.string,isInlineHelpPopoverVisible:u.a.bool,overridePost:u.a.object},Le.defaultProps={belowToolbar:null,showExternal:!0,showClose:!0,showSEO:!0,showDeviceSwitcher:!0,showEdit:!1,editUrl:null,previewUrl:null,previewMarkup:null,onLoad:v.noop,onLocationUpdate:v.noop,onClose:v.noop,onEdit:v.noop,onDeviceUpdate:v.noop,hasSidebar:!1,isModalWindow:!1,overridePost:null};var Me=Object(m.b)(e=>({isInlineHelpPopoverVisible:Object(Te.i)(e)}),{recordTracksEvent:T.i})(Object(g.localize)(Le));s("./client/components/web-preview/style.scss");s.d(t,"WebPreviewModal",function(){return We});class We extends c.Component{constructor(e){super(e),this._hasTouch=!1,this._isMobile=!1,this.state={device:e.defaultViewportDevice||"computer"},this.keyDown=this.keyDown.bind(this),this.setDeviceViewport=this.setDeviceViewport.bind(this)}componentWillMount(){this._hasTouch=Object(b.a)(),this._isMobile=Object(f.e)()}componentDidMount(){this.props.showPreview&&document.documentElement.classList.add("no-scroll","is-previewing"),this.props.setPreviewShowing(this.props.showPreview)}componentDidUpdate(e){const t=this.props.showPreview;t!==e.showPreview&&(this.props.setPreviewShowing(t),t?(window.addEventListener("keydown",this.keyDown),document.documentElement.classList.add("no-scroll","is-previewing")):(window.removeEventListener("keydown",this.keyDown),document.documentElement.classList.remove("no-scroll","is-previewing")))}componentWillUnmount(){this.props.setPreviewShowing(!1),window.removeEventListener("keydown",this.keyDown),document.documentElement.classList.remove("no-scroll","is-previewing")}keyDown(e){27===e.keyCode&&(this.props.onClose(),e.preventDefault())}setDeviceViewport(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"computer";this.setState({device:e})}render(){const e=w()(this.props.className,"web-preview",{"is-touch":this._hasTouch,"is-with-sidebar":this.props.hasSidebar,"is-visible":this.props.showPreview,"is-computer":"computer"===this.state.device,"is-tablet":"tablet"===this.state.device,"is-phone":"phone"===this.state.device,"is-seo":"seo"===this.state.device});return p.a.createElement(_.a,null,p.a.createElement("div",{className:e},p.a.createElement("div",{className:"web-preview__backdrop",onClick:this.props.onClose}),p.a.createElement("div",{className:"web-preview__content"},p.a.createElement(Me,a()({},this.props,{onDeviceUpdate:this.setDeviceViewport,isModalWindow:!0,frontPageMetaDescription:this.props.frontPageMetaDescription||null})))))}}l()(We,"propTypes",{showPreview:u.a.bool,showExternal:u.a.bool,showUrl:u.a.bool,showClose:u.a.bool,showSEO:u.a.bool,showDeviceSwitcher:u.a.bool,showEdit:u.a.bool,editUrl:u.a.string,previewUrl:u.a.string,externalUrl:u.a.string,previewMarkup:u.a.string,defaultViewportDevice:u.a.string,children:u.a.node,onLoad:u.a.func,onClose:u.a.func,onEdit:u.a.func,loadingMessage:u.a.string,iframeTitle:u.a.string,hasSidebar:u.a.bool,frontPageMetaDescription:u.a.string,overridePost:u.a.object}),l()(We,"defaultProps",{showExternal:!0,showClose:!0,showSEO:!0,showDeviceSwitcher:!0,showEdit:!1,editUrl:null,previewUrl:null,previewMarkup:null,onLoad:v.noop,onClose:v.noop,onEdit:v.noop,hasSidebar:!1,overridePost:null});const Re=Object(m.b)(null,{setPreviewShowing:j.e})(Object(g.localize)(We));t.default=(e=>{let t=e.isContentOnly,s=n()(e,["isContentOnly"]);const i=t?Me:Re;return p.a.createElement(i,s)})},"./client/components/web-preview/style.scss":function(e,t,s){},"./client/lib/after-layout-flush/index.js":function(e,t,s){"use strict";function i(e){let t=void 0,s=void 0;const i="function"==typeof requestAnimationFrame;let n,o;let a=(r=e,function(){if(!i){n=this;for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];o=t}void 0===s&&(s=setTimeout(()=>{const e=o,t=n;o=void 0,n=void 0,s=void 0,r.apply(t,e)},0))});var r,l;return i&&(l=a,a=function(){n=this;for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];o=s,void 0===t&&(t=requestAnimationFrame(()=>{t=void 0,l()}))}),a.cancel=(()=>{n=void 0,o=void 0,void 0!==t&&(cancelAnimationFrame(t),t=void 0),void 0!==s&&(clearTimeout(s),s=void 0)}),a}s.d(t,"a",function(){return i})},"./client/state/plans/selectors.js":function(e,t,s){"use strict";s.d(t,"e",function(){return r}),s.d(t,"a",function(){return l}),s.d(t,"b",function(){return c}),s.d(t,"c",function(){return p}),s.d(t,"d",function(){return d});var i=s("./node_modules/lodash/lodash.js"),n=s("./client/lib/create-selector/index.js"),o=s("./client/lib/plans/index.js");const a=e=>e.plans.items,r=e=>e.plans.requesting,l=Object(n.a)((e,t)=>Object(i.find)(a(e),{product_id:t}),e=>a(e)),c=Object(n.a)((e,t)=>Object(i.find)(a(e),{product_slug:t}),e=>a(e));function p(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=l(e,t);return Object(i.get)(n,"raw_price",-1)<0?null:s?Object(o.b)(n.product_slug,n.raw_price):n.raw_price}function d(e,t){const s=l(e,t);return Object(i.get)(s,"product_slug",null)}}}]);