(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./apps/notifications/index.jsx":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/react/index.js"),r=s.n(o),a=s("./node_modules/classnames/index.js"),l=s.n(a),c=s("./node_modules/page/page.js"),p=s.n(c),u=s("./client/lib/wp/browser.js"),h=s("./node_modules/react-redux/es/index.js"),d=s("./client/lib/analytics/index.js"),m=s("./client/config/index.js"),g=s("./client/state/analytics/actions.js"),f=s("./node_modules/prop-types/index.js"),v=s.n(f),y=s("./node_modules/lodash/lodash.js"),b=s("./node_modules/redux/es/redux.js");const w=(e,t)=>Object(y.isArray)(e)?e.concat(t):void 0,_=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.length>1?Object(y.mergeWith)(Object.create(null),...t,w):t[0]},E="SET_IS_SHOWING";var N=e=>e.notes;var S=(e,t)=>((e,t)=>{const s=e.noteReads;if(s.hasOwnProperty(t.id))return s[t.id];try{const e=localStorage.getItem("note_read_status_".concat(t.id));if(null!==e&&"1"===e)return!0}catch(e){}return!!t.read})(N(e),t);let k;const x=()=>k,T=e=>k=e,L=(e,t,s)=>x().req.get({path:"/notifications/".concat(e),apiVersion:"1.1"},t,s),I=(e,t)=>x().req.get({path:"/notifications/",apiVersion:"1.1"},e,t),O=e=>x().req.post({path:"/notifications/seen"},null,{time:e}),C=e=>x().pinghub.connect("/wpcom/me/newest-note-data",e),M=(e,t)=>{let s="";if(void 0!==e){if("object"==typeof e)for(const t in e)"string"==typeof e[t]&&(s+="&x_"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]));else"string"==typeof e&&"string"==typeof t&&(s="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(t));s.length&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+s+"&baba="+Math.random())}},D=e=>{try{localStorage.removeItem("note_read_status_".concat(e))}catch(e){}},A=(e,t)=>{(t.notes?t.notes.map(e=>{return e.id}):t.noteIds).forEach(D)};var j=_({NOTES_ADD:[A],NOTES_REMOVE:[A],SELECT_NOTE:[(e,t)=>{let s=e.getState,n=t.noteId;const i=s(),o=((e,t)=>((e,t)=>e.allNotes[t])(N(e),t))(i,n);if(o&&!S(i,o)){try{localStorage.setItem("note_read_status_".concat(n),"1")}catch(e){}M("notes-read-type",o.type),((e,t,s)=>x().req.post({path:"/notifications/read"},null,{counts:{[e]:t?9999:-1}},s))(n,!0,(e,t)=>{if(e||!t.success)try{return localStorage.removeItem("note_read_status_".concat(n))}catch(e){}try{localStorage.setItem("note_read_status_".concat(n),"1")}catch(e){}})}}]});const R=e=>t=>({type:e,noteId:t}),V=R("READ_NOTE"),P=R("SPAM_NOTE"),z=R("TRASH_NOTE");const F=e=>({type:"SELECT_NOTE",noteId:e}),U=(e,t,s,n)=>({type:"EDIT_COMMENT",siteId:e,postId:t,commentId:s,href:n});var H={notes:{addNotes:e=>({type:"NOTES_ADD",notes:e}),approveNote:(e,t)=>({type:"APPROVE_NOTE",noteId:e,isApproved:t}),likeNote:(e,t)=>({type:"LIKE_NOTE",noteId:e,isLiked:t}),readNote:V,removeNotes:e=>({type:"NOTES_REMOVE",noteIds:e}),resetLocalApproval:e=>({type:"RESET_LOCAL_APPROVAL",noteId:e}),resetLocalLike:e=>({type:"RESET_LOCAL_LIKE",noteId:e}),spamNote:P,trashNote:z},suggestions:{fetchSuggestions:e=>({type:"SUGGESTIONS_FETCH",siteId:e}),storeSuggestions:(e,t)=>({type:"SUGGESTIONS_STORE",siteId:e,suggestions:t})},ui:{closePanel:()=>({type:"CLOSE_PANEL"}),loadNotes:()=>({type:"NOTES_LOADING"}),loadedNotes:()=>({type:"NOTES_LOADED"}),selectNote:F,setLayout:e=>({type:"SET_LAYOUT",layout:e}),undoAction:e=>({type:"UNDO_ACTION",noteId:e}),unselectNote:()=>F(null),viewSettings:()=>({type:"VIEW_SETTINGS"}),setFilter:e=>({type:"SET_FILTER",filterName:e}),editComment:U}};const B={},q={},K=(e,t)=>{let s=e.dispatch,n=t.noteId;const i=B;i.hasOwnProperty(n)&&clearTimeout(i[n]),i[n]=setTimeout(()=>s(H.notes.resetLocalApproval(n)),1e4)},W=(e,t)=>{let s=e.dispatch,n=t.noteId;const i=q;i.hasOwnProperty(n)&&clearTimeout(i[n]),i[n]=setTimeout(()=>s(H.notes.resetLocalLike(n)),1e4)};var G={APPROVE_NOTE:[K,W],LIKE_NOTE:[W],SPAM_NOTE:[K,W],TRASH_NOTE:[K,W]},$=s("./node_modules/@babel/runtime/helpers/objectSpread.js"),Y=s.n($);var Q=e=>e.suggestions;let J=!1;var Z={SUGGESTIONS_FETCH:[(e,t)=>{let s=e.dispatch,n=e.getState,i=t.siteId;J||((e,t)=>((e,t)=>e.bySite.hasOwnProperty(t))(Q(e),t))(n(),i)||(J=!0,((e,t)=>x().req.get({path:"/users/suggest",apiVersion:"1"},e,t))({site_id:i},(e,t)=>{if(J=!1,e)return;const n=t.suggestions.map(e=>Y()({},e,{name:e.name||"".concat(e.user_login," ").concat(e.display_name)}));s(H.suggestions.storeSuggestions(i,n))}))}]};let X,ee=[];const te=e=>{return e.id},se=e=>{let t=e.timestamp;return Date.parse(t)};var ne=e=>(e=>{const t=e.allNotes;return X===t?ee:(X=t,ee=Object(y.sortBy)(Object(y.values)(t),[se,te]).reverse())})(N(e));var ie=(e,t)=>((e,t)=>!0===e.hiddenNoteIds[t])(N(e),t),oe=s("./node_modules/react-dom/index.js"),re=s.n(oe),ae=s("./packages/i18n-calypso/dist/esm/index.js"),le=s.n(ae),ce=s("./node_modules/@babel/runtime/helpers/extends.js"),pe=s.n(ce);class ue extends r.a.Component{render(){const e=this.props,t=e.onClick,s=e.size,n=void 0===s?24:s,i="gridicons-".concat(this.props.icon),o={className:l()("gridicon",i),height:n,width:n,onClick:t};switch(i){default:return r.a.createElement("svg",{height:n,width:n});case"gridicons-checkmark":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.a.createElement("path",{d:"M9 19.414l-6.707-6.707 1.414-1.414L9 16.586 20.293 5.293l1.414 1.414"}));case"gridicons-spam":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.a.createElement("path",{d:"M17 2H7L2 7v10l5 5h10l5-5V7l-5-5zm-4 15h-2v-2h2v2zm0-4h-2l-.5-6h3l-.5 6z"}));case"gridicons-star":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.a.createElement("path",{d:"M12 2l2.582 6.953L22 9.257l-5.822 4.602L18.18 21 12 16.89 5.82 21l2.002-7.14L2 9.256l7.418-.304"}));case"gridicons-star-outline":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Star Outline"),r.a.createElement("g",null,r.a.createElement("path",{d:"M12 6.308l1.176 3.167.347.936.997.042 3.374.14-2.647 2.09-.784.62.27.963.91 3.25-2.813-1.872-.83-.553-.83.552-2.814 1.87.91-3.248.27-.962-.783-.62-2.648-2.092 3.374-.14.996-.04.347-.936L12 6.308M12 2L9.418 8.953 2 9.257l5.822 4.602L5.82 21 12 16.89 18.18 21l-2.002-7.14L22 9.256l-7.418-.305L12 2z"})));case"gridicons-trash":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.a.createElement("path",{d:"M6.187 8h11.625l-.695 11.125C17.05 20.18 16.177 21 15.12 21H8.88c-1.057 0-1.93-.82-1.997-1.875L6.187 8zM19 5v2H5V5h3V4c0-1.105.895-2 2-2h4c1.105 0 2 .895 2 2v1h3zm-9 0h4V4h-4v1z"}));case"gridicons-reader-follow":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Reader Follow"),r.a.createElement("g",null,r.a.createElement("path",{d:"M23 16v2h-3v3h-2v-3h-3v-2h3v-3h2v3h3zM20 2v9h-4v3h-3v4H4c-1.1 0-2-.9-2-2V2h18zM8 13v-1H4v1h4zm3-3H4v1h7v-1zm0-2H4v1h7V8zm7-4H4v2h14V4z"})));case"gridicons-reader-following":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Reader Following"),r.a.createElement("g",null,r.a.createElement("path",{d:"M23 13.482L15.508 21 12 17.4l1.412-1.388 2.106 2.188 6.094-6.094L23 13.482zm-7.455 1.862L20 10.89V2H2v14c0 1.1.9 2 2 2h4.538l4.913-4.832 2.095 2.176zM8 13H4v-1h4v1zm3-2H4v-1h7v1zm0-2H4V8h7v1zm7-3H4V4h14v2z"})));case"gridicons-mention":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Mention"),r.a.createElement("g",null,r.a.createElement("path",{d:"M12 2a10 10 0 0 0 0 20v-2a8 8 0 1 1 8-8v.5a1.5 1.5 0 0 1-3 0V7h-2v1a5 5 0 1 0 1 7 3.5 3.5 0 0 0 6-2.46V12A10 10 0 0 0 12 2zm0 13a3 3 0 1 1 3-3 3 3 0 0 1-3 3z"})));case"gridicons-comment":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Comment"),r.a.createElement("g",null,r.a.createElement("path",{d:"M3 6v9c0 1.105.895 2 2 2h9v5l5.325-3.804c1.05-.75 1.675-1.963 1.675-3.254V6c0-1.105-.895-2-2-2H5c-1.105 0-2 .895-2 2z"})));case"gridicons-add":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Add"),r.a.createElement("g",null,r.a.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})));case"gridicons-info":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Info"),r.a.createElement("g",null,r.a.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})));case"gridicons-lock":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Lock"),r.a.createElement("g",null,r.a.createElement("path",{d:"M18 8h-1V7c0-2.757-2.243-5-5-5S7 4.243 7 7v1H6c-1.105 0-2 .895-2 2v10c0 1.105.895 2 2 2h12c1.105 0 2-.895 2-2V10c0-1.105-.895-2-2-2zM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v1H9V7zm4 8.723V18h-2v-2.277c-.595-.346-1-.984-1-1.723 0-1.105.895-2 2-2s2 .895 2 2c0 .738-.405 1.376-1 1.723z"})));case"gridicons-stats-alt":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Stats Alt"),r.a.createElement("g",null,r.a.createElement("path",{d:"M21 21H3v-2h18v2zM8 10H4v7h4v-7zm6-7h-4v14h4V3zm6 3h-4v11h4V6z"})));case"gridicons-reblog":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Reblog"),r.a.createElement("g",null,r.a.createElement("path",{d:"M22.086 9.914L20 7.828V18c0 1.105-.895 2-2 2h-7v-2h7V7.828l-2.086 2.086L14.5 8.5 19 4l4.5 4.5-1.414 1.414zM6 16.172V6h7V4H6c-1.105 0-2 .895-2 2v10.172l-2.086-2.086L.5 15.5 5 20l4.5-4.5-1.414-1.414L6 16.172z"})));case"gridicons-trophy":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Trophy"),r.a.createElement("g",null,r.a.createElement("path",{d:"M18 5.062V3H6v2.062H2V8c0 2.525 1.89 4.598 4.324 4.932.7 2.058 2.485 3.61 4.676 3.978V18c0 1.105-.895 2-2 2H8v2h8v-2h-1c-1.105 0-2-.895-2-2v-1.09c2.19-.368 3.976-1.92 4.676-3.978C20.11 12.598 22 10.525 22 8V5.062h-4zM4 8v-.938h2v3.766C4.836 10.416 4 9.304 4 8zm16 0c0 1.304-.836 2.416-2 2.83V7.06h2V8z"})));case"gridicons-notice":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Notice"),r.a.createElement("g",null,r.a.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 15h-2v-2h2v2zm0-4h-2l-.5-6h3l-.5 6z"})));case"gridicons-time":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Time"),r.a.createElement("g",null,r.a.createElement("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm3.8 13.4L13 11.667V7h-2v5.333l3.2 4.266 1.6-1.2z"})));case"gridicons-reply":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Reply"),r.a.createElement("g",null,r.a.createElement("path",{d:"M9 16h7.2l-2.6 2.6L15 20l5-5-5-5-1.4 1.4 2.6 2.6H9c-2.2 0-4-1.8-4-4s1.8-4 4-4h2V4H9c-3.3 0-6 2.7-6 6s2.7 6 6 6z"})));case"gridicons-arrow-up":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Arrow Up"),r.a.createElement("g",null,r.a.createElement("path",{d:"M13 20V7.83l5.59 5.59L20 12l-8-8-8 8 1.41 1.41L11 7.83V20h2z"})));case"gridicons-arrow-down":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Arrow Down"),r.a.createElement("g",null,r.a.createElement("path",{d:"M11 4v12.17l-5.59-5.59L4 12l8 8 8-8-1.41-1.41L13 16.17V4h-2z"})));case"gridicons-arrow-left":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Arrow Left"),r.a.createElement("g",null,r.a.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})));case"gridicons-cross":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Cross"),r.a.createElement("g",null,r.a.createElement("path",{d:"M18.36 19.78L12 13.41l-6.36 6.37-1.42-1.42L10.59 12 4.22 5.64l1.42-1.42L12 10.59l6.36-6.36 1.41 1.41L13.41 12l6.36 6.36z"})));case"gridicons-cog":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Cog"),r.a.createElement("g",null,r.a.createElement("path",{d:"M20,12c0-0.568-0.061-1.122-0.174-1.656l1.834-1.612l-2-3.464l-2.322,0.786c-0.819-0.736-1.787-1.308-2.859-1.657L14,2h-4 L9.521,4.396c-1.072,0.349-2.04,0.921-2.859,1.657L4.34,5.268l-2,3.464l1.834,1.612C4.061,10.878,4,11.432,4,12 s0.061,1.122,0.174,1.656L2.34,15.268l2,3.464l2.322-0.786c0.819,0.736,1.787,1.308,2.859,1.657L10,22h4l0.479-2.396 c1.072-0.349,2.039-0.921,2.859-1.657l2.322,0.786l2-3.464l-1.834-1.612C19.939,13.122,20,12.568,20,12z M12,16 c-2.209,0-4-1.791-4-4c0-2.209,1.791-4,4-4c2.209,0,4,1.791,4,4C16,14.209,14.209,16,12,16z"})));case"gridicons-cart":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("title",null,"Cart"),r.a.createElement("g",null,r.a.createElement("path",{d:"M9 20c0 1.1-.9 2-2 2s-1.99-.9-1.99-2S5.9 18 7 18s2 .9 2 2zm8-2c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm.396-5c.937 0 1.75-.65 1.952-1.566L21 5H7V4c0-1.105-.895-2-2-2H3v2h2v11c0 1.105.895 2 2 2h12c0-1.105-.895-2-2-2H7v-2h10.396z"})));case"gridicons-pencil":return r.a.createElement("svg",pe()({},o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.a.createElement("g",null,r.a.createElement("path",{d:"M13,6l5,5l-9.507,9.507c-0.686-0.686-0.689-1.794-0.012-2.485l-0.003-0.003c-0.691,0.677-1.799,0.674-2.485-0.012 c-0.677-0.677-0.686-1.762-0.036-2.455l-0.008-0.008c-0.693,0.649-1.779,0.64-2.455-0.036L13,6z M20.586,5.586l-2.172-2.172 c-0.781-0.781-2.047-0.781-2.828,0L14,5l5,5l1.586-1.586C21.367,7.633,21.367,6.367,20.586,5.586z M3,18v3h3 C6,19.343,4.657,18,3,18z"})))}}}i()(ue,"displayName","Gridicons"),i()(ue,"propTypes",{icon:v.a.string.isRequired,size:v.a.number,onClick:v.a.func});const he=(e,t)=>s=>{s.stopPropagation(),s.preventDefault(),e.input.lastInputWasKeyboard=!1,t()},de=e=>{let t=e.global,s=e.isEnabled,n=e.translate,i=e.unselectNote;const o=n("Back",{context:"go back (like the back button in a browser)"});return s?r.a.createElement("button",{className:"wpnc__back",onClick:he(t,i)},r.a.createElement(ue,{icon:"arrow-left",size:18}),o):r.a.createElement("button",{className:"wpnc__back disabled",disabled:"disabled"},r.a.createElement(ue,{icon:"arrow-left",size:18}),o)};de.propTypes={isEnabled:v.a.bool.isRequired};const me={unselectNote:H.ui.unselectNote};var ge=Object(h.b)(null,me)(Object(ae.localize)(de));class fe extends o.Component{constructor(){super(...arguments),i()(this,"navigate",e=>{e.stopPropagation(),e.preventDefault(),this.props.navigate()})}render(){const e=this.props,t=e.className,s=e.iconName,n=e.isEnabled;return r.a.createElement("button",{className:l()(t,{disabled:!n}),disabled:!n,onClick:n?this.navigate:y.noop},r.a.createElement(ue,{icon:s,size:18}))}}i()(fe,"propTypes",{iconName:v.a.string.isRequired,className:v.a.string,isEnabled:v.a.bool.isRequired,navigate:v.a.func.isRequired});var ve=fe,ye=s("./node_modules/@babel/runtime/helpers/slicedToArray.js"),be=s.n(ye);var we=e=>e.ui;var _e=e=>(e=>e.filterName)(we(e));var Ee=e=>(e=>e.isLoading)(we(e));var Ne=e=>(e=>e.isPanelOpen)(we(e));var Se=e=>(e=>e.selectedNoteId)(we(e));const ke=38;var xe=class extends o.Component{constructor(){super(...arguments),i()(this,"handleClick",()=>M("notes-empty-message",this.props.name+"_clicked"))}componentWillMount(){this.props.showing&&M("notes-empty-message",this.props.name+"_shown")}componentDidUpdate(){this.props.showing&&M("notes-empty-message",this.props.name+"_shown")}render(){const e=this.props,t=e.emptyMessage,s=e.link,n=e.linkMessage;return r.a.createElement("div",{className:"wpnc__empty-notes-container",style:{height:this.props.height-ke+"px"}},s&&n&&r.a.createElement("div",{className:"wpnc__empty-notes"},r.a.createElement("h2",null,t),r.a.createElement("p",null,r.a.createElement("a",{href:s,target:"_blank",onClick:this.handleClick},n))),!s&&n&&r.a.createElement("div",{className:"wpnc__empty-notes"},r.a.createElement("h2",null,t),r.a.createElement("p",null,n)),!s&&!n&&r.a.createElement("div",{className:"wpnc__empty-notes"},r.a.createElement("h2",null,t)))}};var Te={all:function(){return{name:"all",index:0,label:le.a.translate("All",{comment:"Notifications filter: all of a users' notifications"}),emptyMessage:le.a.translate("No notifications yet.",{comment:"Notifications all filter: no notifications"}),emptyLinkMessage:le.a.translate("Get active! Comment on posts from blogs you follow.",{comment:"Notifications all filter: no notifications"}),emptyLink:"https://wordpress.com/read/",filter:()=>!0}},unread:function(){return{name:"unread",index:1,label:le.a.translate("Unread",{comment:"Notifications filter: unread notifications"}),emptyMessage:le.a.translate("You're all caught up!",{comment:"Notifications unread filter: no notifications"}),emptyLinkMessage:le.a.translate("Reignite the conversation: write a new post.",{comment:"Notifications unread filter: no notifications"}),emptyLink:"https://wordpress.com/post/",filter:e=>!S(an.getState(),e)}},comments:function(){return{name:"comments",index:2,label:le.a.translate("Comments",{comment:"Notifications filter: comment notifications"}),emptyMessage:le.a.translate("No new comments yet!",{comment:"Notifications comments filter: no notifications"}),emptyLinkMessage:le.a.translate("Join a conversation: search for blogs that share your interests in the Reader.",{comment:"Notifications comments filter: no notifications"}),emptyLink:"https://wordpress.com/read/search/",filter:e=>{return"comment"===e.type}}},follows:function(){return{name:"follows",index:3,label:le.a.translate("Follows",{comment:"Notifications filter: notifications about users following your blogs"}),emptyMessage:le.a.translate("No new followers to report yet.",{comment:"Notifications follows filter: no notifications"}),emptyLinkMessage:le.a.translate("Get noticed: comment on posts you've read.",{comment:"Notifications follows filter: no notifications"}),emptyLink:"https://wordpress.com/activities/likes/",filter:e=>{return"follow"===e.type}}},likes:function(){return{name:"likes",index:4,label:le.a.translate("Likes",{comment:"Notifications filter: notifications about users liking your posts or comments"}),emptyMessage:le.a.translate("No new likes to show yet.",{comment:"Notifications likes filter: no Notifications"}),emptyLinkMessage:le.a.translate("Get noticed: comment on posts you've read.",{comment:"Notifications likes filter: no Notifications"}),emptyLink:"https://wordpress.com/activities/likes/",filter:e=>{let t=e.type;return"comment_like"===t||"like"===t}}}};var Le=Object(h.b)(e=>({filterName:_e(e)}))(Object(ae.localize)(class extends o.Component{constructor(){super(...arguments),i()(this,"selectFilter",e=>{e&&(e.stopPropagation(),e.preventDefault());const t=e.target.dataset.filterName;this.props.controller.selectFilter(t)})}render(){const e=this.props.filterName,t=Object.keys(Te).map(e=>Te[e]()).sort((e,t)=>e.index-t.index);return r.a.createElement("div",{className:"wpnc__filter"},r.a.createElement("ul",{className:"wpnc__filter__segmented-control"},t.map(t=>{let s=t.label,n=t.name;return r.a.createElement("li",{key:n,"data-filter-name":n,className:l()("wpnc__filter__segmented-control-item",{selected:n===e}),onClick:this.selectFilter},s)})))}}));const Ie={viewSettings:H.ui.viewSettings};var Oe=Object(h.b)(null,Ie)(e=>{let t=e.isFirst,s=e.title,n=e.viewSettings;return r.a.createElement("li",{className:"wpnc__time-group-wrap"},r.a.createElement("div",{className:"wpnc__time-group-title"},r.a.createElement(ue,{icon:"time",size:18}),s,t&&r.a.createElement(ue,{icon:"cog",size:18,onClick:n})))});function Ce(e){return e.filter(e=>e.hasOwnProperty("actions")).slice(-1)[0]||{}}function Me(e){return Ce(e.body).actions}function De(e,t){return e.meta&&e.meta.ids&&e.meta.ids[t]?e.meta.ids[t]:null}var Ae=(e,t)=>((e,t)=>{const s=e.noteApprovals;if(s.hasOwnProperty(t.id))return s[t.id];const n=Me(t);return n&&!0===n["approve-comment"]})(N(e),t);var je=e=>Object(y.get)({"":"mention","":"comment","":"add","":"info","":"lock","":"stats-alt","":"reblog","":"star","":"trophy","":"reply","":"warning","":"checkmark","":"cart"},e,"info");const Re={PENDING:"PENDING",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED"};class Ve extends o.Component{constructor(){super(...arguments),i()(this,"state",{status:Re.PENDING}),i()(this,"createLoader",e=>{const t=(e||this.props).src;this.destroyLoader(),this.image=new Image,this.image.src=t,this.image.onload=this.onLoadComplete,this.image.onerror=this.onLoadComplete,this.setState({status:Re.LOADING})}),i()(this,"destroyLoader",()=>{this.image&&(this.image.onload=y.noop,this.image.onerror=y.noop,delete this.image)}),i()(this,"onLoadComplete",e=>{this.destroyLoader(),this.setState({status:"load"===e.type?Re.LOADED:Re.FAILED})})}componentWillMount(){this.createLoader()}componentWillReceiveProps(e){e.src!==this.props.src&&this.createLoader(e)}componentWillUnmount(){this.destroyLoader()}render(){const e=this.props,t=e.children,s=e.placeholder,n=e.src,i=this.state.status;return r.a.createElement("div",{className:"image-preloader"},i===Re.LOADING&&s,i===Re.LOADED&&r.a.createElement("img",{src:n}),i===Re.FAILED&&t)}}i()(Ve,"propTypes",{src:v.a.string.isRequired,placeholder:v.a.element.isRequired,children:v.a.node});var Pe=Ve,ze=s("./node_modules/react-dom/server.browser.js"),Fe=s.n(ze);function Ue(e,t,s,n,i){let o,a=null,l=[],c=s.type;switch(void 0!==s.type&&(o={b:"strong",i:"em",noticon:"gridicon"},s.type in o&&(c=o[s.type]),l.push("wpnc__".concat(c))),c){case"badge":s.hasOwnProperty("width")||(s.width=256),s.hasOwnProperty("height")||(s.height=256);case"image":(a=document.createElement("img")).setAttribute("src",s.url),s.hasOwnProperty("width")&&a.setAttribute("width",s.width),s.hasOwnProperty("height")&&a.setAttribute("height",s.height),e.trim().length>0&&a.setAttribute("alt",e);break;case"blockquote":case"code":case"strong":case"em":case"list":switch(c){case"list":c="span"}He(e,t,n,a=document.createElement(c),i);break;case"gridicon":(a=document.createElement("span")).innerHTML=Fe.a.renderToStaticMarkup(r.a.createElement(ue,{icon:je(s.value),size:18}));break;case"button":l.push("is-primary");default:i.links&&s.url?((a=document.createElement("a")).setAttribute("href",s.url),"stat"==c?a.setAttribute("target","_parent"):a.setAttribute("target","_blank"),"post"===s.type?(a.setAttribute("data-post-id",s.id),a.setAttribute("data-site-id",s.site_id),a.setAttribute("data-link-type","post"),a.setAttribute("target","_self")):"tracks"===s.type&&s.context&&(a.setAttribute("data-link-type","tracks"),a.setAttribute("data-tracks-event",s.context)),He(e,t,n,a,i)):(a=document.createElement("span"),e.length>0&&He(e,t,n,a,i))}return l.length>0&&(a.className=l.join(" ")),a}function He(e,t,s,n,i){let o,r,a,l,c,p,u,h,d,m=null,g=null;for(o=0;o<t.length;o++)if(0==t[o].index.length)null==m&&(m=o);else{for(a in null!=m&&(g=o,n.appendChild(document.createTextNode(e.substring(m,g))),m=null,g=null),r=null,t[o].index)(null===r||t[o].index[a].len>t[o].index[r].len)&&(r=a);for(p=s[c=t[o].index[r].id],u=o+t[o].index[r].len-1,h=e.substring(o,o+t[o].index[r].len),d=t.slice(o,1+o+t[o].index[r].len),l=0;l<d.length;l++)d[l].index.splice(r,1);n.appendChild(Ue(h,d,p,s,i)),o=u}null!=m&&n.appendChild(document.createTextNode(e.substring(m,e.length))),n.normalize()}function Be(e){let t,s=-1,n=0;if(e.length<1)return null;for(t=0;t<e.length;t++)null!==e[t]&&(-1===s||e[t].indices[1]-e[t].indices[0]>n)&&(s=t,n=e[t].indices[1]-e[t].indices[0]);return s}function qe(e,t){let s=new Array;return(t=t||{}).links=void 0===t.links||t.links,s=(s=s.concat(e.ranges||[])).concat(e.media||[]),function(e,t,s){const n=document.createDocumentFragment(),i=JSON.parse(JSON.stringify(t)),o=[];let r,a,l,c;for(r=0;r<=e.length;r++)o[r]={index:[]};for(r=0;r<i.length;r++){if(0==t[a=Be(i)].indices[1]&&0==t[a].indices[1])n.appendChild(Ue("",[],t[a],t,s));else for(c=t[a].indices[1]-t[a].indices[0],l=t[a].indices[0];l<=t[a].indices[1];l++)o[l].index.push({id:a,len:c});i[a]=null}return He(e,o,t,n,s),n}(e.text,s,t)}function Ke(e,t){const s=document.createElement("div");return s.appendChild(qe(e,t)),s.innerHTML}s("./node_modules/debug/src/browser.js")("notifications:summary-in-list");var We=s("./apps/notifications/src/panel/helpers/stats.js").recordTracksEvent;var Ge=Object(h.b)(null,e=>({selectNote:Object(y.flowRight)(e,H.ui.selectNote),unselectNote:Object(y.flowRight)(e,H.ui.unselectNote)}),null,{pure:!1})(class extends r.a.Component{constructor(){super(...arguments),i()(this,"handleClick",e=>{e.stopPropagation(),e.preventDefault(),e.metaKey||e.shiftKey?window.open(this.props.note.url,"_blank"):this.props.currentNote==this.props.note.id?this.props.unselectNote():(We("calypso_notification_note_open",{note_type:this.props.note.type}),this.props.selectNote(this.props.note.id))})}render(){var e=Ke(this.props.note.subject[0],{links:!1}),t=null;return 1<this.props.note.subject.length&&(t=r.a.createElement("div",{className:"wpnc__excerpt"},this.props.note.subject[1].text)),r.a.createElement("div",{className:"wpnc__summary",onClick:this.handleClick},r.a.createElement("div",{className:"wpnc__note-icon"},r.a.createElement(Pe,{src:this.props.note.icon,placeholder:r.a.createElement("img",{src:"https://www.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=128"})}),r.a.createElement("span",{className:"wpnc__gridicon"},r.a.createElement(ue,{icon:je(this.props.note.noticon),size:16}))),r.a.createElement("div",{className:"wpnc__text-summary"},r.a.createElement("div",{className:"wpnc__subject",dangerouslySetInnerHTML:{__html:e}}),t))}});const $e=e=>e.split("\n").reduce((e,t)=>{let s=e.out,n=e.inFence,i=e.inList;if(/^(```|“`)[a-z1-9]*\s*$/i.test(t))return n?{out:s+"</code></pre>",inFence:!1,inList:i}:{out:s+"<pre><code>",inFence:!0,inList:i};if(n)return{out:s+t+"\n",inFence:n,inList:i};const o=(/^[\w\s-_]+:/.test(t)?"<strong>".concat(t.split(":")[0],":</strong>").concat(t.replace(/^[^:]+:/,"")):t).replace(/`([^`]+)`/,"<code>$1</code>");return/^\s*[*\-\u2012-\u2015\u2022]\s/.test(o)?{out:s+(i?"":'<ul class="wpnc__body-list">')+"<li>".concat(o.replace(/^\s*[*\-\u2012-\u2015\u2022]\s/,""),"</li>"),inFence:n,inList:!0}:/^\s*x\s/i.test(o)?{out:s+(i?"":'<ul class="wpnc__body-todo">')+'<li class="wpnc__todo-done">'.concat(o.replace(/^\s*x\s/i,""),"</li>"),inFence:n,inList:!0}:/^\s*o\s/i.test(o)?{out:s+(i?"":'<ul class="wpnc__body-todo">')+'<li class="wpnc__todo-not-done">'.concat(o.replace(/^\s*o\s/i,""),"</li>"),inFence:n,inList:!0}:{out:s+(i?"</ul>":"")+"<div>".concat(o,"</div>"),inFence:n,inList:!1}},{out:"",inFence:!1,inList:!1}).out;function Ye(e){return e.split("\n\n").map((e,t)=>{const s="block-text-".concat(t,"-").concat(e.length,"-").concat(e.slice(0,3),"-").concat(e.slice(-3)),n=$e(e);return r.a.createElement("div",{key:s,dangerouslySetInnerHTML:{__html:n}})})}function Qe(e,t){return void 0===t&&(t="wpnc__paragraph"),e.split("\n\n").map((e,s)=>{const n="block-text-".concat(s,"-").concat(e.length,"-").concat(e.slice(0,3),"-").concat(e.slice(-3)),i=$e(e);return r.a.createElement("div",{className:t,key:n,dangerouslySetInnerHTML:{__html:i}})})}function Je(e,t){var s=function(e,t){return e&&e.length?e.map(function(e){var s="text",n=null;return void 0!==e.type&&(s=e.type),t&&t.meta&&t.meta.ids&&t.meta.ids.reply_comment&&e.ranges&&e.ranges.length>1&&e.ranges[1].id==t.meta.ids.reply_comment&&(s="reply",n=e.ranges[1].id),void 0===e.meta||void 0===e.meta.ids||Object.keys(e.meta.ids).length<1?{type:s,id:n}:(void 0!==e.meta.ids.comment?(s="comment",n=e.meta.ids.comment):void 0!==e.meta.ids.post?(s="post",n=e.meta.ids.post):void 0!==e.meta.ids.user&&(s="user",n=e.meta.ids.user),{type:s,id:n})}):[]}(e,t);return e.map(function(e,t){return{block:e,signature:s[t]}})}const Ze=/^(?:http(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|blog|[a-z]{2}))|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/i,Xe=(e,t)=>{const s=Object(y.get)(e,"meta.ids",{}),n=s.site,i=s.comment,o=s.post,r=Object(y.get)(t,"meta.ids",{}).site,a=t?r:n;let l;if(t?l="site":i?l="comment":o&&(l="post"),"site"===l&&!a)return{};switch(l){case"site":case"post":case"comment":return Object(y.pickBy)({"data-link-type":l,"data-site-id":a,"data-post-id":o,"data-comment-id":i});default:return{}}},et=e=>{let t=e.note,s=e.snippet,n=e.url;return r.a.createElement("a",pe()({href:n},Xe(t),{target:"_blank"}),r.a.createElement("span",{className:"wpnc__excerpt"},s.text))};class tt extends r.a.Component{render(){var e=this.props.user.media[0],t=r.a.createElement("img",{src:e.url,height:e.height,width:e.width}),s=this.props.user.ranges[0].url;const n=this.props.note;var i=function(e,t){return s?r.a.createElement("a",{className:e,href:s,target:"_blank"},t):r.a.createElement("a",{className:e+" disabled",disabled:"disabled"},t)};if(this.props.user.ranges.length>1){var o={};return o.ranges=this.props.user.ranges,o.text=this.props.user.text,r.a.createElement("div",{className:"wpnc__user wpnc__header"},r.a.createElement("img",{src:e.url}),r.a.createElement("div",{className:"wpnc__user__usertitle",dangerouslySetInnerHTML:{__html:Ke(o)}}),r.a.createElement(et,{note:n,snippet:this.props.snippet,url:this.props.url}))}return r.a.createElement("div",{className:"wpnc__user wpnc__header"},i("wpnc__user__site",t),r.a.createElement("div",null,r.a.createElement("span",{className:"wpnc__user__username"},i("wpnc__user__home",this.props.user.text))),r.a.createElement(et,{note:n,snippet:this.props.snippet,url:this.props.url}))}}var st=r.a.createFactory(class extends r.a.Component{render(){var e=r.a.createElement("div",{className:"wpnc__subject",dangerouslySetInnerHTML:{__html:Ke(this.props.subject)}});return r.a.createElement("div",{className:"wpnc__summary"},e,r.a.createElement(et,{note:this.props.note,snippet:this.props.snippet,url:this.props.url}))}});var nt=class extends r.a.Component{render(){var e,t;return this.props.note.header&&0!==this.props.note.header.length?this.props.note.header.length>1?"user"===this.props.note.header[0].ranges[0].type?(e=this.props.note.url,"comment"===this.props.note.type&&this.props.note.meta.ids.parent_comment&&((t=document.createElement("a")).href=this.props.note.url,t.hash="#comment-"+this.props.note.meta.ids.parent_comment,e=t.href),r.a.createElement(tt,{note:this.props.note,snippet:this.props.note.header[1],url:e,user:this.props.note.header[0]})):r.a.createElement(st,{note:this.props.note,snippet:this.props.note.header[1],subject:this.props.note.header[0],url:this.props.note.url}):r.a.createElement(st,{note:this.props.note,snippet:"",subject:this.props.note.header[0],url:this.props.note.url}):r.a.createElement("span",null)}},it=s("./node_modules/create-react-class/index.js"),ot=s.n(it);var rt=e=>{let t=e.block,s=e.meta;return r.a.createElement("div",{className:l()("wpnc__comment",{"comment-other":s.ids.comment!==t.meta.ids.comment,"comment-self":s.ids.comment===t.meta.ids.comment})},Qe(Ke(t)))};var at=(e,t)=>((e,t)=>{const s=e.noteLikes;return s.hasOwnProperty(t.id)?s[t.id]:Me(t)[t.meta.ids.comment?"like-comment":"like-post"]})(N(e),t),lt=s("./node_modules/events/events.js"),ct=s.n(lt);const pt=Object.freeze({DISABLE_KEYBOARD_SHORTCUTS:"notes-disable-keyboard-shortcuts",ENABLE_KEYBOARD_SHORTCUTS:"notes-enable-keyboard-shortcuts",SET_GLOBAL_DATA:"notes-set-global-data"});var ut=(e,t)=>{let s;switch(t.type){case pt.DISABLE_KEYBOARD_SHORTCUTS:case pt.ENABLE_KEYBOARD_SHORTCUTS:const n=t.type===pt.ENABLE_KEYBOARD_SHORTCUTS;e.global.keyboardShortcutsAreEnabled=n,s=Y()({},e,{input:Y()({},e.input,{shortcutsAreEnabled:n})});break;default:s=e}return s};const ht=new ct.a.EventEmitter;let dt=Y()({},{input:{shortcutsAreEnabled:!0}});var mt={dispatch(e){dt!==(dt=function(e,t){let s;switch(t.type){case pt.SET_GLOBAL_DATA:s=Y()({},e,{global:t.data});break;default:s=e}return s=ut(s,t)}(dt,e))&&ht.emit("change")},get:e=>e?dt[e]:dt};const gt=s("./apps/notifications/src/panel/helpers/stats.js").recordTracksEvent;function ft(e){M("notes-click-action",e)}function vt(e){const t=mt.get("global").client;return()=>t.getNote(e)}const yt=65,bt=69,wt=76,_t=83,Et=84,Nt=e=>e.altKey||e.ctrlKey||e.metaKey,St=()=>mt.get().input.shortcutsAreEnabled,kt=(e,t)=>{e.preventDefault(),e.stopPropagation(),t()};class xt extends o.Component{constructor(){super(...arguments),i()(this,"handleKeyDown",e=>{this.props.shortcuts&&St()&&this.props.shortcuts.filter(t=>t.hotkey===e.keyCode).filter(t=>(t.withModifiers||!1)===Nt(e)).forEach(t=>kt(e,t.action))})}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown,!1)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown,!1)}render(){return this.props.children}}i()(xt,"propTypes",{shortcuts:v.a.arrayOf(v.a.shape({action:v.a.func.isRequired,hotkey:v.a.number.isRequired,withModifiers:v.a.bool}))});var Tt=xt;const Lt=e=>{let t=e.isActive,s=e.hotkey,n=e.icon,i=e.onToggle,o=e.text,a=e.title;return r.a.createElement(Tt,{shortcuts:s?[{hotkey:s,action:i}]:null},r.a.createElement("button",{className:l()("wpnc__action-link",{"active-action":t,"inactive-action":!t}),title:a,onClick:i},r.a.createElement(ue,{icon:n,size:24}),r.a.createElement("p",null,o)))};Lt.propTypes={isActive:v.a.bool.isRequired,hotkey:v.a.number,icon:v.a.string,onToggle:v.a.func.isRequired,text:v.a.string.isRequired,title:v.a.string.isRequired};var It=Lt;const Ot=e=>{let t=e.isApproved,s=e.note,n=e.translate;return r.a.createElement(It,{icon:"checkmark",isActive:t,hotkey:yt,onToggle:()=>(function(e,t,s,n,i){const o=x().site(t).comment(s);an.dispatch(H.notes.approveNote(e,n)),ft(n?"unapprove-comment":"approve-comment"),gt("calypso_notification_note_"+(n?"approve":"unapprove"),{note_type:i}),o.update({status:n?"approved":"unapproved"},vt(e))})(s.id,De(s,"site"),De(s,"comment"),!t,s.type),text:t?n("Approved",{context:"verb: past-tense"}):n("Approve",{context:"verb: imperative"}),title:n(t?"Unapprove comment":"Approve comment",{context:"verb: imperative"})})};Ot.propTypes={isApproved:v.a.bool.isRequired,note:v.a.object.isRequired,translate:v.a.func.isRequired};var Ct=Object(ae.localize)(Ot);const Mt=e=>{let t=e.editComment,s=e.note,n=e.translate;const i=Object(y.get)(s,"meta.ids",{}),o=i.site,a=i.post,l=i.comment;return r.a.createElement(It,{icon:"pencil",isActive:!1,hotkey:bt,onToggle:()=>t(o,a,l,function(e){return Ce(e.body).edit_comment_link}(s)),text:n("Edit",{context:"verb: imperative"}),title:n("Edit comment",{context:"verb: imperative"})})};Mt.propTypes={editComment:v.a.func.isRequired,note:v.a.object.isRequired,translate:v.a.func.isRequired};var Dt=Object(h.b)(null,{editComment:U})(Object(ae.localize)(Mt));const At=e=>{let t=e.commentId,s=e.isLiked,n=e.note,i=e.translate;return r.a.createElement(It,{icon:"star",isActive:s,hotkey:wt,onToggle:()=>(function(e,t,s,n,i){const o=n?"comment":"post",r="comment"===o?x().site(t).comment(n):x().site(t).post(s);return an.dispatch(H.notes.likeNote(e,i)),ft("".concat(i?"unlike":"like","-").concat(o)),gt("calypso_notification_note_"+(i?"like":"unlike"),{note_type:o}),i?r.like().add(vt(e)):r.like().del(vt(e))})(n.id,De(n,"site"),De(n,"post"),De(n,"comment"),!s),text:s?i("Liked",{context:"verb: past-tense"}):i("Like",{context:"verb: imperative"}),title:s?i(t?"Remove like from comment":"Remove like from post"):i(t?"Like comment":"Like post",{context:"verb: imperative"})})};At.propTypes={commentId:v.a.number,isLiked:v.a.bool.isRequired,note:v.a.object.isRequired,translate:v.a.func.isRequired};var jt=Object(ae.localize)(At);var Rt=(e,t)=>((e,t)=>e.bySite[t]||[])(Q(e),t);const Vt=()=>{mt.dispatch({type:pt.DISABLE_KEYBOARD_SHORTCUTS})},Pt=()=>{mt.dispatch({type:pt.ENABLE_KEYBOARD_SHORTCUTS})};class zt extends o.PureComponent{render(){const e=l()("wpnc__spinner",this.props.className),t={width:this.props.size,height:this.props.size,fontSize:this.props.size};return r.a.createElement("div",{className:e},r.a.createElement("div",{className:"wpnc__spinner__outer",style:t},r.a.createElement("div",{className:"wpnc__spinner__inner"})))}}i()(zt,"propTypes",{className:v.a.string,size:v.a.number}),i()(zt,"defaultProps",{size:20});const Ft=(e,t,s)=>{const n=t.toLowerCase(),i=function(e,t){var s={};return s.username="(^"+t+")(\\w*)\\s*",s.fullname="(^.*?)(\\b"+t+")(.*)",new RegExp(s[e],"ig")}(s,t).exec(e);return i?i.slice(1).reduce((e,t)=>{let s=be()(e,2),i=s[0];const o=!s[1]&&n===t.toLowerCase();return[[...i,{type:o?"strong":"text",text:t}],o]},[[],!1])[0]:[{type:"text",text:e}]};var Ut=class extends r.a.Component{render(){var e=Ft(this.props.username,this.props.suggestionsQuery,"username");e.unshift({type:"text",text:"@"});var t=Ft(this.props.fullName,this.props.suggestionsQuery,"fullname");return r.a.createElement("li",{ref:this.props.getElement,key:this.props.username,className:this.props.selected?"cur":"",onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter},r.a.createElement("img",{src:this.props.avatarUrl}),r.a.createElement("span",{className:"wpnc__username"},e.map((e,t)=>{let s=e.type,n=e.text;return"strong"===s?r.a.createElement("strong",{key:t},n):r.a.createElement("span",{key:t},n)})),r.a.createElement("small",null,t.map((e,t)=>{let s=e.type,n=e.text;return"strong"===s?r.a.createElement("strong",{key:t},n):r.a.createElement("span",{key:t},n)})))}};s("./node_modules/debug/src/browser.js")("notifications:note");const Ht=/(?:^|\s)@([^\s]*)$/i,Bt=e=>{const t=e.offsetTop;return e.offsetParent?t+Bt(e.offsetParent):t},qt=function(e){this.state.suggestionsVisible&&(e.stopPropagation(),e.preventDefault())};var Kt={componentWillUnmount(){window.removeEventListener("keydown",this.handleSuggestionsKeyDown,!1),window.removeEventListener("keyup",this.handleSuggestionsKeyUp,!1),window.removeEventListener("blur",this.handleSuggestionBlur,!0)},componentDidMount(){window.addEventListener("keydown",this.handleSuggestionsKeyDown,!1),window.addEventListener("keyup",this.handleSuggestionsKeyUp,!1),window.addEventListener("blur",this.handleSuggestionBlur,!0),this.props.fetchSuggestions(this.props.note.meta.ids.site)},componentDidUpdate(){if(!this.suggestionsMixin_suggestionList)return;const e=this.suggestionsMixin_suggestionList;this.suggestionListMarginTop||(this.suggestionListMarginTop=window.getComputedStyle(e)["margin-top"]);const t=this.replyInput.getBoundingClientRect();this.suggestionsAbove=e.offsetHeight>window.innerHeight-t.top&&e.offsetHeight<t.top,this.suggestionsAbove&&(e.style.top="-"+(e.offsetHeight+t.height+parseInt(this.suggestionListMarginTop))+"px",e.style.marginTop="0")},getCaretPosition:e=>e.selectionStart,setCaretPosition(e,t){e.focus(),setTimeout(()=>e.setSelectionRange(t,t),0)},getQueryText(e){if(!e.value)return null;const t=e.value.slice(0,this.getCaretPosition(e)),s=Ht.exec(t);if(!s)return null;const n=be()(s,2)[1];return Object(y.escapeRegExp)(n)},insertSuggestion(e,t){if(!t)return;const s=this.getCaretPosition(e),n=this.state.value.slice(0,Math.max(s-this.state.suggestionsQuery.length,0)),i=this.state.value.slice(s);this.setState({value:n+t.user_login+" "+i,suggestionsVisible:!1}),this.setCaretPosition(e,n.length+t.user_login.length+1)},handleSuggestionsKeyDown(e){if(!this.state.suggestionsVisible||0===this.props.suggestions.length)return;if(13===e.keyCode)return void qt.call(this,e);if(38!==e.keyCode&&40!==e.keyCode)return;qt.call(this,e);const t=this.state.suggestions,s=function(e){if(!this.state.selectedSuggestionId)return 0;const t=Object(y.findIndex)(e,e=>e.ID===this.state.selectedSuggestionId);return t>-1?t:null}.call(this,t);if(null===s)return;const n={38:-1,40:1}[e.keyCode];this.setState({selectedSuggestionId:t[(s+n+t.length)%t.length].ID},this.ensureSelectedSuggestionVisibility)},handleSuggestionsKeyUp(e){let t=e.keyCode,s=e.target;if(13===t){if(!this.state.suggestionsVisible||0===this.props.suggestions.length)return;return this.insertSuggestion(s,function(){return!this.state.selectedSuggestionId&&this.props.suggestions.length>0?this.props.suggestions[0]:Object(y.find)(this.props.suggestions,e=>e.ID===this.state.selectedSuggestionId)||null}.call(this)),this.setState({suggestionsVisible:!1})}if(27===t||32===t)return this.setState({suggestionsVisible:!1});if(38===t||40===t)return;const n=this.getQueryText(s),i=(e=>new RegExp("^".concat(e,"| ").concat(e),"i"))(n),o=this.props.suggestions.filter(e=>{let t=e.name;return i.test(t)}).slice(0,10);this.setState({suggestionsQuery:n,suggestionsVisible:"string"==typeof n,selectedSuggestionId:o.length>0?o[0].ID:null,suggestions:o})},handleSuggestionClick(e){this.insertSuggestion(this.replyInput,e)},handleSuggestionBlur(){!this.suggestionsCancelBlur&&this.isMounted()&&this.setState({suggestionsVisible:!1})},ensureSelectedSuggestionVisibility(){if(this.suggestionsAbove||!this.suggestionsMixin_suggestionNodes)return;const e=this.suggestionsMixin_suggestionNodes[this.state.selectedSuggestionId];e&&Bt(e)+e.offsetHeight>window.innerHeight&&e.scrollIntoView()},renderSuggestions(){const e=this.state,t=e.suggestions,s=e.suggestionsVisible,n=e.selectedSuggestionId;if(s&&t.length)return r.a.createElement("div",{className:"wpnc__suggestions",ref:e=>this.suggestionsMixin_suggestionList=e,onMouseEnter:()=>this.suggestionsCancelBlur=!0,onMouseLeave:()=>this.suggestionsCancelBlur=!1},r.a.createElement("ul",null,t.map(e=>r.a.createElement(Ut,{key:"user-suggestion-"+e.ID,getElement:t=>this.suggestionsMixin_suggestionNodes=Y()({},this.suggestionsMixin_suggestionNodes,{[e.ID]:t}),onClick:this.handleSuggestionClick.bind(this,e),onMouseEnter:function(e){this.setState({selectedSuggestionId:e.ID})}.bind(this,e),avatarUrl:e.image_URL,username:e.user_login,fullName:e.display_name,selected:e.ID===n,suggestionsQuery:this.state.suggestionsQuery}))))}};const Wt=s("./node_modules/debug/src/browser.js")("notifications:note");function Gt(e){let t;try{return t=localStorage.getItem(e),JSON.parse(t)}catch(s){if(s instanceof SyntaxError)return t;Wt("couldnt get localStorage item for: %s",e)}return null}function $t(e){try{localStorage.removeItem(e)}catch(t){Wt("couldnt remove item from localStorage for: %s",e)}}var Yt={cleanup:function(){const e=[];try{for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);if("reply_"==localStorage.key(t).substring(0,6)){const t=Gt(s);t&&Date.now()-t[1]>=864e5&&e.push(s)}}}catch(e){Wt("couldnt cleanup cache")}e.forEach(function(e){$t(e)})},LocalStorageMixin:{localStorage:{getItem:Gt,setItem:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){Wt("couldnt set localStorage item for: %s",e)}},removeItem:$t}}},Qt=s("./node_modules/debug/src/browser.js")("notifications:reply"),Jt=s("./apps/notifications/src/panel/helpers/stats.js").recordTracksEvent;const Zt=ot()({displayName:"CommentReplyInput",mixins:[Yt.LocalStorageMixin,Kt],statics:{stopEvent:function(e){e.stopPropagation(),e.preventDefault()}},getInitialState:function(){return this.savedReplyKey="reply_"+this.props.note.id,{value:function(){var e=this.localStorage.getItem(this.savedReplyKey);return e?e[0]:""}.apply(this),hasClicked:!1,isSubmitting:!1,rowCount:1,retryCount:0}},componentDidMount:function(){window.addEventListener("keydown",this.handleKeyDown,!1),window.addEventListener("keydown",this.handleCtrlEnter,!1)},componentWillUnmount:function(){window.removeEventListener("keydown",this.handleKeyDown,!1),window.removeEventListener("keydown",this.handleCtrlEnter,!1),Pt()},handleKeyDown:function(e){this.props.global.keyboardShortcutsAreEnabled&&(this.props.global.input.modifierKeyIsActive(e)||82==e.keyCode&&(this.replyInput.focus(),Zt.stopEvent(e)))},handleCtrlEnter:function(e){this.state.isSubmitting||!e.ctrlKey&&!e.metaKey||10!=e.keyCode&&13!=e.keyCode||(Zt.stopEvent(e),this.handleSubmit())},handleSendEnter:function(e){this.state.isSubmitting||13==e.keyCode&&(Zt.stopEvent(e),this.handleSubmit())},handleChange:function(e){var t=this.replyInput;Vt(),this.setState({value:e.target.value,rowCount:Math.min(4,Math.ceil(t.scrollHeight*this.state.rowCount/t.clientHeight))}),this.savedReplyKey&&this.localStorage.setItem(this.savedReplyKey,[e.target.value,Date.now()])},handleClick:function(e){Vt(),this.state.hasClicked||this.setState({hasClicked:!0})},handleFocus:function(){Vt()},handleBlur:function(){Pt(),""==this.state.value.replace(/^\s+|\s+$/g,"")&&this.setState({value:"",hasClicked:!1,rowCount:1})},handleSubmit(e){var t,s,n=this,i=this.props.translate("Reply posted!"),o=this.props.translate("View your comment.");e&&e.preventDefault(),""!=this.state.value&&(this.props.global.toggleNavigation(!1),this.setState({isSubmitting:!0}),0==this.state.retryCount&&(M("notes-click-action","replyto-comment"),Jt("calypso_notification_note_reply",{note_type:this.props.note.type})),(this.props.note.meta.ids.comment?(t=x().site(this.props.note.meta.ids.site).comment(this.props.note.meta.ids.comment)).reply:(t=x().site(this.props.note.meta.ids.site).post(this.props.note.meta.ids.post).comment()).add).call(t,this.state.value,(e,t)=>{if(e){const t=this.props.translate("Duplicate comment; you've already said that!"),s=this.props.translate("Reply Failed: Please, try again.");"CommentDuplicateError"===e.name?(this.setState({isSubmitting:!1,retryCount:0}),this.replyInput.focus(),this.props.global.updateStatusBar(t,["fail"],6e3),this.props.unselectNote()):n.state.retryCount<3?(n.setState({retryCount:n.state.retryCount+1}),window.setTimeout(function(){n.handleSubmit()},2e3*n.state.retryCount)):(n.setState({isSubmitting:!1,retryCount:0}),n.props.global.updateStatusBar(s,["fail"],6e3),Pt(),n.props.global.toggleNavigation(!0),Qt("Failed to submit comment reply: %s",e.message))}else n.props.note.meta.ids.comment&&(n.props.approveNote(n.props.note.id,!0),n.props.global.client.getNote(n.props.note.id)),n.replyInput.blur(),s=t.URL&&Ze.test(t.URL)?function(){var e=[].slice.apply(arguments);return e.shift().replace(/{(\d+)}/g,function(t,s){return void 0!==e[s]?e[s]:t})}('{0} <a target="_blank" href="{1}">{2}</a>',i,t.URL,o):i,n.props.global.updateStatusBar(s,["success"],12e3),Pt(),n.props.global.toggleNavigation(!0),n.setState({value:"",isSubmitting:!1,hasClicked:!1,rowCount:1,retryCount:0}),n.localStorage.removeItem(n.savedReplyKey),n.props.selectNote(n.props.note.id)}))},storeReplyInput(e){this.replyInput=e},render:function(){var e=this.state.value,t="",s=this.props.translate("Send",{context:"verb: imperative"});if(this.state.isSubmitting)t=r.a.createElement(zt,{className:"wpnc__spinner"});else if(e.length){var n=this.props.translate("Submit reply",{context:"verb: imperative"});t=r.a.createElement("button",{title:n,className:"active",onClick:this.handleSubmit,onKeyDown:this.handleSendEnter},s)}else{n=this.props.translate("Write your response in order to submit");t=r.a.createElement("button",{title:n,className:"inactive"},s)}return r.a.createElement("div",{className:"wpnc__reply-box"},r.a.createElement("textarea",{ref:this.storeReplyInput,rows:this.state.rowCount,value:e,placeholder:this.props.defaultValue,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange}),t,this.renderSuggestions())}}),Xt={approveNote:H.notes.approveNote,fetchSuggestions:H.suggestions.fetchSuggestions,selectNote:H.ui.selectNote,unselectNote:H.ui.unselectNote};var es=Object(h.b)((e,t)=>{let s=t.note;return{suggestions:Rt(e,s.meta.ids.site)}},Xt,null,{pure:!1})(Object(ae.localize)(Zt));const ts=e=>{let t=e.note,s=e.translate;return r.a.createElement(It,{icon:"spam",isActive:!1,hotkey:_t,onToggle:()=>(function(e){const t=mt.get("global");ft("spam-comment"),gt("calypso_notification_note_spam",{note_type:e.type}),an.dispatch(H.notes.spamNote(e.id)),t.updateUndoBar("spam",e)})(t),text:s("Spam",{context:"verb: Mark as Spam"}),title:s("Mark comment as spam",{context:"verb: imperative"})})};ts.propTypes={note:v.a.object.isRequired,translate:v.a.func.isRequired};var ss=Object(ae.localize)(ts);const ns=e=>{let t=e.note,s=e.translate;return r.a.createElement(It,{icon:"trash",isActive:!1,hotkey:Et,onToggle:()=>(function(e){const t=mt.get("global");ft("trash-comment"),gt("calypso_notification_note_trash",{note_type:e.type}),an.dispatch(H.notes.trashNote(e.id)),t.updateUndoBar("trash",e)})(t),text:s("Trash",{context:"verb: imperative"}),title:s("Trash comment",{context:"verb: imperative"})})};ns.propTypes={note:v.a.object.isRequired,translate:v.a.func.isRequired};var is=Object(ae.localize)(ns);const os=(e,t)=>{let s,n;return"user"===e.subject[0].ranges[0].type?(s=e.subject[0].ranges[0].indices,n=e.subject[0].text.substring(s[0],s[1])):n="user"===e.body[0].type?e.body[0].text:null,n?t("Reply to %(username)s...",{args:{username:n}}):"post"===(e=>null===De(e,"comment")?"post":"comment")(e)?t("Reply to post..."):t("Reply to comment...")},rs=e=>{let t=e.global,s=e.isApproved,n=e.isLiked,i=e.note,o=e.translate;const a=Me(i),l=e=>[].concat(e).some(e=>a.hasOwnProperty(e));return r.a.createElement("div",{className:"wpnc__note-actions"},r.a.createElement("div",{className:"wpnc__note-actions__buttons"},l("approve-comment")&&r.a.createElement(Ct,{note:i,isApproved:s}),l("spam-comment")&&r.a.createElement(ss,{note:i}),l("trash-comment")&&r.a.createElement(is,{note:i}),l(["like-post","like-comment"])&&r.a.createElement(jt,{note:i,isLiked:n}),l("edit-comment")&&r.a.createElement(Dt,{note:i})),!!a["replyto-comment"]&&r.a.createElement(es,{note:i,defaultValue:os(i,o),global:t}))};rs.propTypes={global:v.a.object.isRequired,isApproved:v.a.bool.isRequired,isLiked:v.a.bool.isRequired,note:v.a.object.isRequired,translate:v.a.func.isRequired};var as=Object(h.b)((e,t)=>{let s=t.note;return{isApproved:Ae(e,s),isLiked:at(e,s)}})(Object(ae.localize)(rs));var ls=e=>{let t=e.blocks;return r.a.createElement("div",{className:"wpnc__preface"},(e=>e.map(Ke).map(Ye))(t))};var cs=e=>{let t=e.block;return r.a.createElement("div",{className:"wpnc__post"},Qe(Ke(t)))};const ps=ot()({displayName:"FollowLink",propTypes:{site:v.a.number,isFollowing:v.a.bool},followStatTypes:{comment:"note_commented_post",comment_like:"note_liked_comment",like:"note_liked_post",follow:"note_followed",reblog:"note_reblog_post"},getInitialState:function(){return{isFollowing:this.props.isFollowing}},toggleFollowStatus:function(e){var t=this.state.isFollowing,s=x().site(this.props.site).follow(),n=this,i=function(e,t){if(e)throw e;n.isMounted()&&n.setState({isFollowing:t.is_following})};if(t)s.del(i),M("notes-click-action","unfollow");else{s.add(i);var o={"notes-click-action":"follow"};o.follow_source=this.followStatTypes[this.props.noteType],M(o)}this.setState({isFollowing:!t})},render:function(){var e,t;return this.state.isFollowing?(e="reader-following",t=this.props.translate("Following",{context:"you are following"})):(e="reader-follow",t=this.props.translate("Follow",{context:"verb: imperative"})),r.a.createElement("button",{className:"follow-link",onClick:this.toggleFollowStatus},r.a.createElement(ue,{icon:e,size:18}),t)}});var us=Object(ae.localize)(ps);function hs(e){var t=document.createElement("a");return t.href=e,(t.hostname+t.pathname).replace(/\/$/,"")}var ds=Object(h.b)((e,t)=>{let s=t.note;return{isApproved:Ae(e,s)}})(Object(ae.localize)(class extends r.a.Component{constructor(){super(...arguments),i()(this,"getTimeString",e=>{var t,s,n=Date.parse(e);return isNaN(n)?"":(t=this.props.moment(e),Date.now()-n>432e6?(s=t.format("ll")).length>15&&(s=t.format("l")):s=t.fromNow(!0),s)})}render(){var e,t,s,n=this.props.block.media[0],i="",o="";if(this.props.block.meta&&(this.props.block.meta.links&&(i=this.props.block.meta.links.home||""),this.props.block.meta.titles&&(o=this.props.block.meta.titles.home||"")),!o&&i&&(o=hs(i)),"comment"===this.props.note.type?(!this.props.isApproved&&i&&(o=hs(i)),e=r.a.createElement("span",{className:"wpnc__user__timeIndicator"},r.a.createElement("a",pe()({href:this.props.note.url,target:"_blank"},Xe(this.props.note)),this.getTimeString(this.props.note.timestamp)),r.a.createElement("span",{className:"wpnc__user__bullet"}))):e="",o){var a=""!=e?"wpnc__user__meta wpnc__user__bulleted":"wpnc__user__meta";t=r.a.createElement("p",{className:a},r.a.createElement("span",{className:"wpnc__user__ago"},e),r.a.createElement("a",pe()({className:"wpnc__user__site",href:i,target:"_blank"},Xe(this.props.note,this.props.block)),o))}else t=r.a.createElement("div",{className:"wpnc__user__meta"},r.a.createElement("span",{className:"wpnc__user__ago"},e));return this.props.block.actions&&"undefined"!=this.props.block.meta.ids.site&&(s=r.a.createElement(us,{site:this.props.block.meta.ids.site,isFollowing:this.props.block.actions.follow,noteType:this.props.note.type})),i?r.a.createElement("div",{className:"wpnc__user"},r.a.createElement("a",{className:"wpnc__user__site",href:i,target:"_blank"},r.a.createElement("img",{src:n.url,height:n.height,width:n.width})),r.a.createElement("span",{className:"wpnc__user__username"},r.a.createElement("a",{className:"wpnc__user__home",href:i,target:"_blank"},this.props.block.text)),t,s):r.a.createElement("div",{className:"wpnc__user"},r.a.createElement("img",{src:n.url,height:n.height,width:n.width}),r.a.createElement("span",{className:"wpnc__user__username"},this.props.block.text),t,s)}}));class ms extends r.a.Component{render(){var e=Qe(Ke(this.props.block),"");return r.a.createElement("div",{className:"wpnc__reply"},e)}}const gs=ot()({displayName:"NoteBody",getInitialState:function(){return{reply:null}},componentDidMount:function(){M("notes-click-type",this.props.note.type)},replyLoaded:function(e,t){!e&&this.isMounted()&&this.setState({reply:t})},componentWillMount:function(){var e=this.props.note;e.meta&&e.meta.ids.reply_comment&&(e.body.filter(function(t){return t.ranges&&t.ranges.length>1&&t.ranges[1].id==e.meta.ids.reply_comment}).length>0||x().site(this.props.note.meta.ids.site).comment(this.props.note.meta.ids.reply_comment).get(this.replyLoaded))},render:function(){var e,t,s,n=Je(this.props.note.body,this.props.note),i="",o="",a=null;for(s=0;s<n.length;s++)if("text"!==n[s].signature.type){t=s;break}t&&(o=r.a.createElement(ls,{blocks:this.props.note.body.slice(0,s)}),n=n.slice(s));var l=[];for(s=0;s<n.length;s++){var c=n[s],p="block-"+this.props.note.id+"-"+s;switch(c.block.actions&&"user"!==c.signature.type&&(i=r.a.createElement(as,{note:this.props.note,block:c.block,global:this.props.global})),c.signature.type){case"user":l.push(r.a.createElement(ds,{key:p,block:c.block,noteType:this.props.note.type,note:this.props.note,timestamp:this.props.note.timestamp,url:this.props.note.url}));break;case"comment":l.push(r.a.createElement(rt,{key:p,block:c.block,meta:this.props.note.meta}));break;case"post":l.push(r.a.createElement(cs,{key:p,block:c.block,meta:this.props.note.meta}));break;case"reply":a=r.a.createElement(ms,{key:p,block:c.block});break;default:l.push(Qe(Ke(c.block)))}}return this.state.reply&&this.state.reply.URL&&(e=this.props.note.meta.ids.comment?this.props.translate("You {{a}}replied{{/a}} to this comment.",{components:{a:r.a.createElement("a",{href:this.state.reply.URL,target:"_blank"})}}):this.props.translate("You {{a}}replied{{/a}} to this post.",{components:{a:r.a.createElement("a",{href:this.state.reply.URL,target:"_blank"})}}),a=r.a.createElement("div",{className:"wpnc__reply"},r.a.createElement("span",{className:"wpnc__gridicon"},""),e)),r.a.createElement("div",{className:"wpnc__body"},o,r.a.createElement("div",{className:"wpnc__body-content"},l),a,i)}});var fs=Object(ae.localize)(gs);const vs=e=>e.some(e=>{let t=e.media;return t&&t.some(e=>{return"badge"===e.type})});var ys=Object(h.b)((e,t)=>{let s=t.note;return{isApproved:Ae(e,s),isRead:S(e,s)}})(e=>{const t=e.currentNote,s=e.detailView,n=e.global,i=e.isApproved,o=e.isRead,a=e.note,c=e.selectedNote;let p=!1,u=!1;if("comment"===a.type){const e=a.body,t=Me(a);e.length>1&&t&&(e[1]&&e[1].nest_level&&e[1].nest_level>0&&(p=!0),"approve-comment"in t&&!i&&(u=!0))}const h=l()("wpnc__note","wpnc__".concat(a.type),{"comment-reply":p,read:o,unread:!o,wpnc__badge:vs(a.body),"wpnc__comment-unapproved":u,wpnc__current:s,"wpnc__selected-note":parseInt(c,10)===parseInt(a.id,10)});return r.a.createElement("li",{id:"note-"+a.id,className:h},s&&a.header&&a.header.length>0&&r.a.createElement(nt,{key:"note-summary-single-"+a.id,note:a}),!s&&r.a.createElement(Ge,{currentNote:t,key:"note-summary-list"+a.id,note:a,global:n}),s&&r.a.createElement(fs,{key:"note-body-"+a.id,note:a,global:n}))});class bs extends r.a.Component{constructor(){super(...arguments),i()(this,"state",{isVisible:!1,timeoutHandle:null}),i()(this,"disappear",()=>{this.setState({isVisible:!1,timeoutHandle:null}),this.props.statusReset()})}componentWillReceiveProps(e){if(""!=e.statusMessage&&e.statusMessage!=this.props.statusMessage){var t=this,s=window.setTimeout(function(){t.disappear()},e.statusTimeout?e.statusTimeout:this.props.statusTimeout);this.setState({isVisible:!0,timeoutHandle:s})}}render(){var e=this.state.isVisible?{display:"flex"}:{display:"none"},t=["wpnc__status-bar"];return void 0!==this.props.statusClasses&&this.props.statusClasses.length>0&&t.push.apply(t,this.props.statusClasses),r.a.createElement("div",{className:t.join(" "),style:e},r.a.createElement("span",null),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.statusMessage}}),r.a.createElement("button",{className:"wpnc__close-link",onClick:this.disappear},r.a.createElement(ue,{icon:"cross",size:18})))}}i()(bs,"defaultProps",{statusTimeout:4e3});var ws=bs,_s=s("./apps/notifications/src/panel/helpers/stats.js").recordTracksEvent;const Es=85;const Ns={removeNotes:H.notes.removeNotes,selectNote:H.ui.selectNote,undoAction:H.ui.undoAction};var Ss=Object(h.b)(e=>({selectedNoteId:Se(e)}),Ns,null,{pure:!1})(Object(ae.localize)(class extends r.a.Component{constructor(){super(...arguments),i()(this,"state",{undoTimer:null,undoTimeout:4500,isVisible:!0}),i()(this,"handleKeyDown",e=>{this.props.global.keyboardShortcutsAreEnabled&&(this.props.global.input.modifierKeyIsActive(e)||null===this.state.undoTimer||this.props.selectedNoteId||Es!==e.keyCode||this.cancelAction(e))}),i()(this,"startUndoSequence",()=>{var e=setTimeout(this.executor,this.state.undoTimeout);this.instance&&this.setState({undoTimer:e})}),i()(this,"executor",()=>{var e={spam:this.spamComment,trash:this.deleteComment};this.props.action in e?e[this.props.action]():this.props.global.resetUndoBar()}),i()(this,"spamComment",()=>{var e=x().site(this.props.note.meta.ids.site).comment(this.props.note.meta.ids.comment),t=function(e,t){if(e)throw e;t.status};e.get(function(s,n){if(s)throw s;n.status="spam",e.update(n,t)}),this.props.removeNotes([this.props.note.id]),this.finishExecution()}),i()(this,"deleteComment",()=>{x().site(this.props.note.meta.ids.site).comment(this.props.note.meta.ids.comment).del(e=>{if(e)throw e}),this.instance&&this.setState({isVisible:!1}),this.props.removeNotes([this.props.note.id]),this.finishExecution()}),i()(this,"actImmediately",e=>{e&&e.preventDefault&&e.preventDefault(),clearTimeout(this.state.undoTimer),this.instance&&this.setState({isVisible:!1}),this.executor()}),i()(this,"cancelAction",e=>{switch(e&&(e.preventDefault(),e.stopPropagation()),this.props.undoAction(this.props.note.id),clearTimeout(this.state.undoTimer),this.props.action){case"spam":M("notes-click-action","unspam-comment"),_s("calypso_notification_note_unspam",{note_type:this.props.note.type});break;case"trash":M("notes-click-action","untrash-comment"),_s("calypso_notification_note_untrash",{note_type:this.props.note.type})}this.finishExecution(),this.props.selectNote(this.props.note.id)}),i()(this,"finishExecution",()=>{this.instance&&this.setState({undoTimer:null}),this.props.global.resetUndoBar()}),i()(this,"storeInstance",e=>{this.instance=e})}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown,!1),this.props.storeImmediateActor&&this.props.storeImmediateActor(this.actImmediately),this.props.storeStartSequence&&this.props.storeStartSequence(this.startUndoSequence)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown,!1)}componentDidUpdate(e){null!==this.props.action&&""!==this.props.action&&null===this.state.undoTimer&&e.action!==this.props.action&&this.startUndoSequence()}render(){var e={spam:this.props.translate("Comment marked as spam"),trash:this.props.translate("Comment trashed")},t=this.props.translate("Undo",{context:"verb: imperative"}),s=e[this.props.action],n=this.state.isVisible?{display:"block"}:{display:"none"};return r.a.createElement("div",{ref:this.storeInstance,className:"wpnc__summary wpnc__undo-item",style:n},r.a.createElement("p",null,r.a.createElement("button",{className:"wpnc__undo-link",onClick:this.cancelAction},t),r.a.createElement("span",{className:"wpnc__undo-message"},s),r.a.createElement("button",{className:"wpnc__close-link",onClick:this.actImmediately},r.a.createElement(ue,{icon:"cross",size:24}))))}})),ks=864e5,xs=38;const Ts=e=>{try{return re.a.findDOMNode(e)}catch(e){return}};class Ls extends r.a.Component{constructor(){super(...arguments),i()(this,"state",{undoAction:null,undoNote:null,scrollY:0,scrolling:!1,statusMessage:""}),i()(this,"onScroll",()=>{if(this.isScrolling)return;this.isScrolling=!0,requestAnimationFrame(()=>this.isScrolling=!1);const e=re.a.findDOMNode(this.scrollableContainer);this.state.scrolling&&this.state.scrollY===e.scrollTop||this.setState({scrolling:!0,scrollY:e.scrollTop}),clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(this.onScrollEnd,this.props.scrollTimeout)}),i()(this,"onScrollEnd",()=>{this.setState({scrolling:!1})}),i()(this,"updateStatusBar",(e,t,s)=>{this.setState({statusClasses:t,statusMessage:e,statusTimeout:s})}),i()(this,"resetStatusBar",()=>{this.setState({statusClasses:[],statusMessage:""})}),i()(this,"updateUndoBar",(e,t)=>{this.setState({undoAction:e,undoNote:t},()=>{this.startUndoSequence&&this.startUndoSequence()})}),i()(this,"resetUndoBar",()=>{this.setState({undoAction:null,undoNote:null})}),i()(this,"ensureSelectedNoteVisibility",()=>{var e,t=null,s=this.props.selectedNote,n=Ts((this.notes||{})[s]),i=null;if(null!==s&&n){e=(i=this.noteList).offsetTop+xs;var o=i.parentNode.scrollTop;n.offsetTop-o<=e?t=n.offsetTop-e:o+this.props.height<=n.offsetTop+e&&(t=n.offsetTop+n.offsetHeight-this.props.height)}else t=this.state.scrollY+1;null!==t&&i&&(i.parentNode.scrollTop=t)}),i()(this,"storeNote",e=>{e&&(this.notes=Y()({},this.notes,{[e.props["data-note-id"]]:e}))}),i()(this,"storeNoteList",e=>{this.noteList=e}),i()(this,"storeScrollableContainer",e=>{this.scrollableContainer=e}),i()(this,"storeUndoActImmediately",e=>{this.undoActImmediately=e}),i()(this,"storeUndoBar",e=>{this.undoBar=e}),i()(this,"storeUndoStartSequence",e=>{this.startUndoSequence=e})}componentWillMount(){this.props.global.updateStatusBar=this.updateStatusBar,this.props.global.resetStatusBar=this.resetStatusBar,this.props.global.updateUndoBar=this.updateUndoBar,this.props.global.resetUndoBar=this.resetUndoBar,"function"==typeof this.props.storeVisibilityUpdater&&this.props.storeVisibilityUpdater(this.ensureSelectedNoteVisibility)}componentDidMount(){re.a.findDOMNode(this.scrollableContainer).addEventListener("scroll",this.onScroll)}componentWillUnmount(){re.a.findDOMNode(this.scrollableContainer).removeEventListener("scroll",this.onScroll)}componentWillReceiveProps(e){this.props.isPanelOpen&&!e.isPanelOpen&&this.setState({lastSelectedIndex:0,scrollY:0})}componentDidUpdate(e){if(this.noteList&&!this.props.isLoading){const e=re.a.findDOMNode(this.scrollableContainer);e.clientHeight>0&&e.scrollTop+e.clientHeight>=this.noteList.clientHeight-300&&this.props.client.loadMore()}e.selectedNoteId!==this.props.selectedNoteId&&this.ensureSelectedNoteVisibility()}render(){const e=[this.props.translate("Today",{comment:"heading for a list of notifications from today"}),this.props.translate("Yesterday",{comment:"heading for a list of notifications from yesterday"}),this.props.translate("Older than 2 days",{comment:"heading for a list of notifications that are more than 2 days old"}),this.props.translate("Older than a week",{comment:"heading for a list of notifications that are more than a week old"}),this.props.translate("Older than a month",{comment:"heading for a list of notifications that are more than a month old"})],t=(new Date).setHours(0,0,0,0),s=[1/0,t,new Date(t-ks),new Date(t-6*ks),new Date(t-30*ks),-1/0],n=Object(y.zip)(s.slice(0,-1),s.slice(1)),i=e=>this.state.undoNote&&e.id==this.state.undoNote.id?r.a.createElement(Ss,{ref:this.storeUndoBar,storeImmediateActor:this.storeUndoActImmediately,storeStartSequence:this.storeUndoStartSequence,key:"undo-"+this.state.undoAction+"-"+e.id,action:this.state.undoAction,note:this.state.undoNote,global:this.props.global}):this.props.isNoteHidden(e.id)?void 0:r.a.createElement(ys,{note:e,ref:this.storeNote,key:"note-"+e.id,"data-note-id":e.id,detailView:!1,client:this.props.client,global:this.props.global,currentNote:this.props.selectedNoteId,selectedNote:this.props.selectedNote}),o=Object(y.groupBy)(this.props.notes,e=>{let t=e.timestamp;const s=new Date(t);return Object(y.findIndex)(n,e=>{let t=be()(e,2),n=t[0];return t[1]<s&&s<=n})});let a=Object(y.reduce)(o,(t,s,n)=>{let o=be()(t,2),a=o[0],l=o[1];const c=e[n];return[[...a,r.a.createElement(Oe,{key:c,title:c,isFirst:l}),...s.map(i)],!1]},[[],!0]),c=be()(a,1)[0];const p=0===c.length;var u=Te[this.props.filterName](),h={opacity:0};this.props.isLoading?(h.opacity=1,p&&(h.height=this.props.height-xs+"px")):!this.props.initialLoad&&p&&u.emptyMessage?c=r.a.createElement(xe,{emptyMessage:u.emptyMessage,height:this.props.height,linkMessage:u.emptyLinkMessage,link:u.emptyLink,name:u.name,showing:this.props.isPanelOpen}):!this.props.selectedNoteId&&c.length>0&&90*c.length>this.props.height&&c.push(r.a.createElement("div",{key:"done-message",className:"wpnc__done-message"},this.props.translate("The End",{comment:"message when end of notifications list reached"})));const d=l()("wpnc__note-list",{"disable-sticky":!!window.chrome||!!window.electron,"is-note-open":!!this.props.selectedNoteId}),m=l()("wpnc__list-view",{wpnc__current:!!this.props.selectedNoteId,"is-empty-list":p});return r.a.createElement("div",{className:d},r.a.createElement(Le,{controller:this.props.filterController}),r.a.createElement("div",{ref:this.storeScrollableContainer,className:m},r.a.createElement("ol",{ref:this.storeNoteList,className:"wpnc__notes"},r.a.createElement(ws,{statusClasses:this.state.statusClasses,statusMessage:this.state.statusMessage,statusTimeout:this.state.statusTimeout,statusReset:this.resetStatusBar}),c,this.props.isLoading&&r.a.createElement("div",{style:h,className:"wpnc__loading-indicator"},r.a.createElement(zt,null)))))}}i()(Ls,"defaultProps",{scrollTimeout:200});const Is={selectNote:H.ui.selectNote};var Os=Object(h.b)(e=>({isLoading:Ee(e),isNoteHidden:t=>ie(e,t),isPanelOpen:Ne(e),selectedNoteId:Se(e),filterName:_e(e)}),Is,null,{pure:!1})(Object(ae.localize)(Ls));var Cs=e=>{let t=e.error;return r.a.createElement("div",{className:"error"},t)};var Ms=(e,t)=>((e,t)=>Object(y.includes)(e.filteredNoteReads,t))(N(e),t);function Ds(e){if(!(this instanceof Ds))return new Ds(e);this.refreshFunction=e}Ds.prototype.selectFilter=function(e){-1!==Object.keys(Te).indexOf(e)&&(an.dispatch(H.ui.setFilter(e)),this.refreshFunction&&this.refreshFunction(),M("notes-filter-select",e))},Ds.prototype.getFilteredNotes=function(e){const t=an.getState(),s=_e(t),n=Te[s];if(!e||!n)return[];return e.filter(e=>Object(y.some)(["unread"===s&&Ms(t,e.id),n().filter(e)]))};var As=Ds;const js=e=>{const t=e.target;if("A"!==t.tagName&&"A"!==t.parentNode.tagName)return!0;const s="A"===t.tagName?t:t.parentNode,n=s.dataset,i=void 0===n?{}:n,o=s.href,r=i.linkType,a=i.postId,l=i.siteId,c=i.commentId,p=i.tracksEvent;return!r||(!(!e.ctrlKey&&!e.metaKey)||(e.stopPropagation(),e.preventDefault(),"post"===r?an.dispatch(((e,t,s)=>({type:"OPEN_POST",siteId:e,postId:t,href:s}))(l,a,o)):"comment"===r?an.dispatch((e=>{return{type:"OPEN_COMMENT",siteId:e.siteId,postId:e.postId,href:e.href,commentId:e.commentId}})({siteId:l,postId:a,href:o,commentId:c})):"site"===r?an.dispatch((e=>{return{type:"OPEN_SITE",siteId:e.siteId,href:e.href}})({siteId:l,href:o})):an.dispatch(((e,t)=>({type:"OPEN_LINK",href:e,tracksEvent:t}))(o,p)),!1))};const Rs=13,Vs=27,Ps=37,zs=38,Fs=39,Us=40,Hs=65,Bs=67,qs=70,Ks=74,Ws=75,Gs=76,$s=78,Ys=85;const Qs={closePanel:H.ui.closePanel,selectNote:H.ui.selectNote,unselectNote:H.ui.unselectNote};var Js=Object(h.b)(e=>({isNoteHidden:t=>ie(e,t),isPanelOpen:Ne(e),notes:ne(e),selectedNoteId:Se(e)}),Qs)(class extends r.a.Component{constructor(){super(...arguments),i()(this,"state",{lastSelectedIndex:0,navigationEnabled:!0,previousDetailScrollTop:0,previouslySelectedNoteId:null,selectedNote:null}),i()(this,"navigateByDirection",e=>{const t=this.filterController.getFilteredNotes(this.props.notes);if(!this.props.global.keyboardShortcutsAreEnabled)return;if(t.length<1)return void this.setState({selectedNote:null,lastSelectedIndex:0});if(null===this.state.selectedNote)return this.setState({selectedNote:t[0].id,lastSelectedIndex:0},this.noteListVisibilityUpdater);const s=e>0?1:-1,n=e=>void 0!==t[e]&&!this.props.isNoteHidden(t[e].id);let i,o=Object(y.findIndex)(t,Object(y.matchesProperty)("id",this.state.selectedNote));if(-1===o){let e=0;for(let s=this.state.lastSelectedIndex;0<=s&&s<t.length;s=o+e){if(n(s)){o=s;break}e=-e+(e>0)}}if(!(o+s<0||o+s>=t.length)){for(i=o+s;i>=0&&i<t.length&&!n(i);i+=s);if(!n(i))for(i=o-s;i>=0&&i<t.length&&!n(i);i-=s);return n(i)?this.props.selectedNoteId?this.props.selectNote(t[i].id):void this.setState({selectedNote:t[i].id,lastSelectedIndex:i},this.noteListVisibilityUpdater):void 0}}),i()(this,"navigateToNextNote",()=>{this.navigateByDirection(1)}),i()(this,"navigateToPrevNote",()=>{this.navigateByDirection(-1)}),i()(this,"toggleNavigation",e=>"boolean"==typeof e&&this.setState({navigationEnabled:e})),i()(this,"redraw",()=>{this.isRefreshing||(this.isRefreshing=!0,requestAnimationFrame(()=>this.isRefreshing=!1),this.noteList&&(this.height=re.a.findDOMNode(this.noteList).clientHeight),this.forceUpdate())}),i()(this,"modifierKeyIsActive",e=>e.altKey||e.ctrlKey||e.metaKey),i()(this,"handleKeyDown",e=>{if(!this.props.isShowing)return;const t=function(){e.stopPropagation(),e.preventDefault()};if(!this.props.isPanelOpen)return;if(Vs===e.keyCode)return this.props.closePanel(),void t();if(!this.props.global.keyboardShortcutsAreEnabled)return;if(this.props.global.input.modifierKeyIsActive(e))return;const s=()=>this.props.global.input.lastInputWasKeyboard=!0;switch(e.keyCode){case Fs:s(),this.props.unselectNote();break;case Rs:case Ps:this.props.selectedNoteId||null===this.state.selectedNote?this.props.selectedNoteId&&this.props.unselectNote():(s(),this.props.selectNote(this.state.selectedNote));break;case Us:case Ks:t(),s(),this.navigateToNextNote();break;case zs:case Ws:t(),s(),this.navigateToPrevNote();break;case $s:this.props.closePanel(),t();break;case Hs:this.props.selectedNoteId||this.filterController.selectFilter("all");break;case Ys:this.props.selectedNoteId||this.noteList&&this.noteList.state.undoNote||this.filterController.selectFilter("unread");break;case Bs:this.props.selectedNoteId||this.filterController.selectFilter("comments");break;case qs:this.props.selectedNoteId||this.filterController.selectFilter("follows");break;case Gs:this.props.selectedNoteId||this.filterController.selectFilter("likes")}}),i()(this,"refreshNotesToDisplay",e=>{const t=this.filterController.getFilteredNotes(e);this.state.selectedNote&&null===Object(y.find)(t,Object(y.matchesProperty)("id",this.state.selectedNoteId))&&this.props.unselectNote(),this.setState({notes:t})}),i()(this,"storeNoteList",e=>{this.noteList=e}),i()(this,"storeNoteListVisibilityUpdater",e=>{this.noteListVisibilityUpdater=e}),i()(this,"storeDetailViewRef",e=>{this.detailView=e})}componentWillMount(){this.filterController=As(this.refreshNotesToDisplay),this.props.global.client=this.props.client,this.props.global.toggleNavigation=this.toggleNavigation,void 0===this.props.global.navigation&&(this.props.global.navigation={},this.props.global.keyboardShortcutsAreEnabled=!0,this.props.global.input={modifierKeyIsActive:this.modifierKeyIsActive,lastInputWasKeyboard:!1}),window.addEventListener("keydown",this.handleKeyDown,!1)}componentDidMount(){window.addEventListener("resize",this.redraw),this.noteList&&(this.height=re.a.findDOMNode(this.noteList).clientHeight)}componentWillReceiveProps(e){if(this.props.selectedNoteId&&this.setState({previousDetailScrollTop:this.detailView?this.detailView.scrollTop:0,previouslySelectedNoteId:this.props.selectedNoteId}),e.state!==this.props.state&&this.setState(e.state),!e.selectedNoteId)return;const t=Object(y.findIndex)(e.notes,Object(y.matchesProperty)("id",e.selectedNoteId));this.setState({index:t>=0?t:null,lastSelectedIndex:null===t?0:t,selectedNote:e.selectedNoteId,navigationEnabled:!0})}componentWillUpdate(e){const t=e.selectedNoteId,s=this.props.selectedNoteId,n=re.a.findDOMNode(this.noteList);t&&null===s&&(this.noteListTop=n.scrollTop),!this.height&&e.isShowing&&(this.height=n.clientHeight),null===t&&s&&(n.scrollTop=this.noteListTop),e.selectedNoteId&&(Object(y.find)(e.notes,Object(y.matchesProperty)("id",e.selectedNoteId))||this.props.unselectNote())}componentDidUpdate(){if(!this.detailView)return;const e=this.state,t=e.previousDetailScrollTop,s=e.previouslySelectedNoteId,n=e.selectedNote;this.detailView.scrollTop=n===s?t:0}componentWillUnmount(){window.removeEventListener("resize",this.redraw)}render(){const e=Object(y.find)(this.props.notes,Object(y.matchesProperty)("id",this.props.selectedNoteId)),t=this.filterController.getFilteredNotes(this.props.notes);return r.a.createElement("div",{onClick:js},this.props.error&&r.a.createElement(Cs,{error:this.props.error}),!this.props.error&&r.a.createElement(Os,{ref:this.storeNoteList,storeVisibilityUpdater:this.storeNoteListVisibilityUpdater,client:this.props.client,filterController:this.filterController,global:this.props.global,height:this.height,initialLoad:null===this.props.notes,notes:t,selectedNote:this.state.selectedNote}),r.a.createElement("div",{className:e?"wpnc__single-view wpnc__current":"wpnc__single-view"},this.props.selectedNoteId&&e&&r.a.createElement("header",null,r.a.createElement("h1",null,e.title),r.a.createElement("nav",null,r.a.createElement(ge,{isEnabled:this.state.navigationEnabled,global:this.props.global}),r.a.createElement("div",null,r.a.createElement(ve,{iconName:"arrow-up",className:"wpnc__prev",isEnabled:t[0]&&t[0].id!=this.props.selectedNoteId||!1,navigate:this.navigateToPrevNote}),r.a.createElement(ve,{iconName:"arrow-down",className:"wpnc__next",isEnabled:t[0]&&t[t.length-1].id!=this.props.selectedNoteId||!1,navigate:this.navigateToNextNote})))),e&&r.a.createElement("ol",{ref:this.storeDetailViewRef},r.a.createElement(ys,{key:"note-"+e.id,client:this.props.client,currentNote:this.props.selectedNoteId,detailView:!0,global:this.props.global,note:e,selectedNote:this.state.selectedNote}))))}});const Zs=(e,t)=>{let s=e.dispatch,n=e.getState,i=t.noteId;const o=n(),r=((e,t)=>{if(0===t.length)return null;const s=Object(y.findIndex)(t,e);if(-1===s)return null;const n=s+1;return n>=t.length?null:t[n].id})(i,ne(o).filter(e=>{let t=e.id;return!ie(o,t)}));r&&window.innerWidth>=800?s(H.ui.selectNote(r)):s(H.ui.unselectNote())};const Xs=_(j,G,Z,{SELECT_NOTE:[(e,t)=>{let s=e.dispatch,n=t.noteId;return s(H.ui.setLayout(n?"widescreen":"narrow"))}],SPAM_NOTE:[Zs],TRASH_NOTE:[Zs]});var en=Object(b.c)({allNotes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.notes,i=t.noteIds;return"NOTES_ADD"===s?Y()({},e,Object(y.keyBy)(n,"id")):"NOTES_REMOVE"===s?Object(y.omit)(e,i):e},hiddenNoteIds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.noteId;return"TRASH_NOTE"===s||"SPAM_NOTE"===s?Y()({},e,{[n]:!0}):"UNDO_ACTION"===s?Object(y.omit)(e,[n]):e},noteApprovals:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.noteId,i=t.isApproved;return"APPROVE_NOTE"===s?Y()({},e,{[n]:i}):"RESET_LOCAL_APPROVAL"===s?Object(y.omit)(e,[n]):e},noteLikes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.noteId,i=t.isLiked;return"LIKE_NOTE"===s?Y()({},e,{[n]:i}):"RESET_LOCAL_LIKE"===s?Object(y.omit)(e,[n]):e},noteReads:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.noteId;return"READ_NOTE"!==s&&"SELECT_NOTE"!==s||!n?e:Y()({},e,{[n]:!0})},filteredNoteReads:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.noteId;return"SELECT_NOTE"===s?[...e,n]:"SET_FILTER"===s?[]:e}});var tn=Object(b.c)({bySite:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.siteId,i=t.suggestions;return"SUGGESTIONS_STORE"===s?Y()({},e,{[n]:i}):e}});var sn=Object(b.c)({isLoading:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(arguments.length>1?arguments[1]:void 0).type;return"NOTES_LOADING"===t||"NOTES_LOADED"!==t&&e},isPanelOpen:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.isShowing;return E===s?n:e},selectedNoteId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.noteId;return"SELECT_NOTE"===s?n:"SET_FILTER"===s?null:e},filterName:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1?arguments[1]:void 0,s=t.type,n=t.filterName;return"SET_FILTER"===s?n:e}});const nn=Object(b.c)({notes:en,suggestions:tn,ui:sn}),on=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.d,rn=e=>on(Object(b.a)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=>t=>s=>n=>{const i=e[n.type];return i?(i.forEach(e=>e(t,n)),s(n)):s(n)})(_(e,Xs))}(e)))(b.e);let an=null;function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customEnhancer,s=e.customMiddleware;const n=rn(void 0===s?{}:s),i=t?t(n):n;return an=i(nn,nn(void 0,{type:"@@INIT"}))}ln();const cn=s("./node_modules/debug/src/browser.js")("notifications:rest-client"),pn={max_refresh_ms:18e4,refresh_ms:3e4,initial_limit:10,increment_limit:10,max_limit:100};function un(){this.noteList=[],this.gettingNotes=!1,this.timeout=!1,this.isVisible=!1,this.isShowing=!1,this.lastSeenTime=0,this.hasNewNoteData=!1,this.noteRequestLimit=pn.initial_limit,this.retries=0,this.subscribeTry=0,this.subscribeTries=3,this.subscribing=!1,this.subscribed=!1,this.firstRender=!0,this.inbox=[],window.addEventListener("storage",function(e){if(!e)return;if("notesLastMarkedSeen"===e.key){try{const t=Number(e.newValue);yn.call(this,t,!0)&&an.dispatch({type:"APP_RENDER_NOTES",newNoteCount:0})}catch(e){}return}if("note_read_status_"===e.key.substring(0,17)){const t=parseInt(e.key.slice(17),10);return an.dispatch(H.notes.readNote(t))}}.bind(this)),this.main(this)}function hn(){if(!this.subscribed&&!this.subscribing){if(this.subscribeTry<this.subscribeTries)cn("main: trying to subscribe"),this.subscribing=!0,C(function(e,t){const s=Object(y.get)(t,"response.type");if(this.subscribing=!1,e||!s||"error"===s)cn("pinghubCallback: error","err =",e),this.subscribed=!1;else if("open"===s)cn("pinghubCallback: connected",t.response),this.subscribeTry=0,this.subscribed=!0;else if("close"===s)cn("pinghubCallback: disconnected",t.response),this.subscribeTry=0,this.subscribed=!1;else{if("message"!==s)throw cn("pinghubCallback: unknown event.response.type",t.response),new Error("notifications:rest-client:pinghubCallback unknown event.response.type: "+s);{let e=!0;try{e=JSON.parse(Object(y.get)(t,"response.data"))}catch(e){}this.inbox.push(e),cn("pinghubCallback: received message",t.response,"this.inbox =",this.inbox),this.main()}}this.reschedule()}.bind(this));else if(this.subscribeTry===this.subscribeTries){const e=12e4;cn("main: polling until next subscribe attempt","sub_retry_ms =",e),setTimeout(function(){this.subscribeTry=0}.bind(this),e)}this.subscribeTry++}const e=ne(an.getState());if(e.length&&this.subscribed&&!this.inbox.length)return cn("main: subscribed, no new messages; sleeping");if(this.reschedule(),!this.isVisible)return cn("main: not visible. sleeping.");if(1===this.inbox.length&&this.inbox[0].action&&"push"===this.inbox[0].action){const e=this.inbox[0].note_id;cn("main: have one push message with note_id, calling getNote(%d)",e,this.inbox),this.inbox=[],this.getNote(e)}else this.inbox.length?(cn("main: have messages, calling getNotes",this.inbox),this.inbox=[],this.getNotes()):e.length?(cn("main: polling, have notes in local cache, calling getNotesList"),this.getNotesList()):(cn("main: no notes in local cache, calling getNotes"),this.getNotes())}function dn(){if(!ne(an.getState()).length)return;if(this.gettingNotes)return;this.gettingNotes=!0;const e={fields:"id,note_hash",number:this.noteRequestLimit};I(e,(e,t)=>{if(cn("getNotesList callback:",e,t),this.gettingNotes=!1,e){this.retries=this.retries+1;const e=Math.min(pn.refresh_ms*(this.retries+1),pn.max_refresh_ms);return cn("getNotesList error, using backoff_ms=%d",e),this.reschedule(e)}this.retries=0;const s=t.notes.map(Object(y.property)("id")),n=this.noteList.map(Object(y.property)("id")),i=Object(y.difference)(n,s);this.hasNewNoteData=Object(y.difference)(s,n).length;const o=this.hasNewNoteData||Object(y.difference)(t.notes.map(Object(y.property)("note_hash")),this.noteList.map(Object(y.property)("note_hash"))).length>0;return i.length&&an.dispatch(H.notes.removeNotes(i)),this.noteList=t.notes,this.updateLastSeenTime(Number(t.last_seen_time)),Yt.cleanup(),o?this.getNotes():mn.call(this)})}function mn(){const e=ne(an.getState());let t=e.map(Object(y.property)("timestamp")).map(e=>Date.parse(e)/1e3).filter(e=>e>this.lastSeenTime).length;this.firstRender||0!==this.lastSeenTime||(t=0);const s=Object(y.get)(e.slice(-1)[0],"type",null);an.dispatch({type:"APP_RENDER_NOTES",newNoteCount:t,latestType:s}),this.hasNewNoteData=!1,this.firstRender=!1}const gn=/^(note_read_status|reply)_(\d+)/,fn=e=>{try{localStorage.removeItem(e)}catch(e){}},vn=()=>{try{return Object(y.range)(localStorage.length).map(e=>localStorage.key(e))}catch(e){return[]}};function yn(e,t){let s=!1,n=0;if(e>11234736e5&&(e/=1e3),cn("updateLastSeenTime 0",{proposedTime:e,fromStorage:t,lastSeenTime:this.lastSeenTime}),t)return!(e<=this.lastSeenTime)&&(this.lastSeenTime=e,!0);const i=ne(an.getState());if(i.length&&(n=Date.parse(i[0].timestamp)/1e3),cn("updateLastSeenTime 1",{proposedTime:e,showing:this.showing,visible:this.visible,lastSeenTime:this.lastSeenTime,mostRecentNoteTime:n}),this.isShowing&&this.isVisible&&n>e&&(e=n,s=!0),cn("updateLastSeenTime 2",{proposedTime:e,fromNote:s,oldNews:e<=this.lastSeenTime}),e<=this.lastSeenTime)return!1;this.lastSeenTime=e;try{localStorage.setItem("notesLastMarkedSeen",this.lastSeenTime)}catch(e){}return s&&(cn("updateLastSeenTime 3",this.lastSeenTime),O(this.lastSeenTime)),!0}un.prototype.main=hn,un.prototype.reschedule=function(e){e||(e=pn.refresh_ms),this.timeout&&(clearTimeout(this.timeout),this.timeout=!1),this.subscribed?cn("reschedule","subscribed; not polling"):(cn("reschedule","refresh_ms =",e),this.timeout=setTimeout(hn.bind(this),e))},un.prototype.getNote=function(e){0===this.noteList.length&&this.getNotes(),L(e,{fields:"id,type,unread,body,subject,timestamp,meta,note_hash"},(e,t)=>{e||(an.dispatch(H.notes.addNotes(t.notes)),mn.call(this))})},un.prototype.getNotes=function(){if(this.gettingNotes)return;this.gettingNotes=!0;const e={fields:"id,type,unread,body,subject,timestamp,meta,note_hash",number:this.noteRequestLimit},t=ne(an.getState());(!t.length||this.noteRequestLimit>t.length)&&an.dispatch(H.ui.loadNotes()),I(e,(t,s)=>{if(this.gettingNotes=!1,t){this.retries=this.retries+1;const e=Math.min(pn.refresh_ms*(this.retries+1),pn.max_refresh_ms);return cn("getNotes error, using backoff_ms=%d",e),this.noteList=[],void this.reschedule(e)}an.dispatch(H.ui.loadedNotes());const n=ne(an.getState()).map(Object(y.property)("id")),i=s.notes.map(Object(y.property)("id")),o=Object(y.difference)(n,i);o.length&&an.dispatch(H.notes.removeNotes(o)),an.dispatch(H.notes.addNotes(s.notes)),this.noteList=s.notes.map(e=>Object(y.pick)(e,["id","note_hash"])),this.updateLastSeenTime(Number(s.last_seen_time)),e.number===pn.max_limit&&function(){const e=ne(an.getState()).map(Object(y.property)("id"));vn().map(e=>gn.exec(e)).filter(t=>t&&!e.includes(t[1])).forEach(fn)}.call(this),this.retries=0,mn.call(this)})},un.prototype.getNotesList=dn,un.prototype.updateLastSeenTime=yn,un.prototype.loadMore=function(){const e=ne(an.getState());!e.length||this.noteRequestLimit>e.length||this.noteRequestLimit>=pn.max_limit||(this.noteRequestLimit=this.noteRequestLimit+pn.increment_limit,this.noteRequestLimit>pn.max_limit&&(this.noteRequestLimit=pn.max_limit),this.getNotes())},un.prototype.refreshNotes=function(){this.subscribed||dn.call(this)},un.prototype.setVisibility=function(e){let t=e.isShowing,s=e.isVisible;this.isShowing===t&&this.isVisible===s||(this.isShowing=t,this.isVisible=s,s&&t&&(this.updateLastSeenTime(0),this.main()))};var bn=un;s("./apps/notifications/src/panel/boot/stylesheets/style.scss");let wn;const _n={};(e=>mt.dispatch({type:pt.SET_GLOBAL_DATA,data:e}))(_n),Yt.cleanup();const En=()=>wn&&wn.refreshNotes.call(wn);class Nn extends o.PureComponent{componentWillMount(){const e=this.props,t=e.customEnhancer,s=e.customMiddleware,n=e.isShowing,i=e.isVisible,o=e.receiveMessage,r=e.wpcom;ln({customEnhancer:t,customMiddleware:_(s,{APP_REFRESH_NOTES:[(e,t)=>{wn&&("boolean"==typeof t.isVisible&&wn.setVisibility.call(wn,{isShowing:n,isVisible:t.isVisible}),wn.refreshNotes.call(wn,t.isVisible))}]})}),T(r),(wn=new bn).global=_n,wn.sendMessage=o,an.dispatch({type:E,isShowing:n}),wn.setVisibility({isShowing:n,isVisible:i})}componentDidMount(){an.dispatch({type:"APP_IS_READY"})}componentWillReceiveProps(e){let t=e.isShowing,s=e.isVisible,n=e.wpcom;n!==this.props.wpcom&&T(n),this.props.isShowing&&!t&&an.dispatch(H.ui.unselectNote()),t!==this.props.isShowing&&an.dispatch({type:E,isShowing:t}),t===this.props.isShowing&&s===this.props.isVisible||wn.setVisibility({isShowing:t,isVisible:s})}render(){return r.a.createElement(h.a,{store:an},r.a.createElement(Js,{client:wn,data:_n,global:_n,isShowing:this.props.isShowing,locale:this.props.locale}))}}i()(Nn,"propTypes",{customEnhancer:v.a.func,customMiddleware:v.a.object,isShowing:v.a.bool,isVisible:v.a.bool,locale:v.a.string,receiveMessage:v.a.func,wpcom:v.a.object.isRequired}),i()(Nn,"defaultProps",{customEnhancer:e=>e,customMiddleware:{},isShowing:!1,isVisible:!1,locale:"en",receiveMessage:y.noop});var Sn=Nn,kn=s("./client/state/selectors/get-current-locale-slug.js"),xn=s("./client/lib/create-selector/index.js");var Tn=Object(xn.a)(e=>Object(y.get)(e,"ui.language.localeVariant",null),e=>e.ui.language),Ln=s("./client/state/notifications/index.js");s("./apps/notifications/style.scss");s.d(t,"Notifications",function(){return On});const In=()=>!document||(!document.visibilityState||"visible"===document.visibilityState);class On extends o.Component{constructor(){super(...arguments),i()(this,"state",{isVisible:In()}),i()(this,"handleKeyPress",e=>{e.target!==document.body&&"A"!==e.target.tagName||e.altKey||e.ctrlKey||e.metaKey||(78===e.keyCode&&(e.stopPropagation(),e.preventDefault(),this.props.checkToggle(null,!0)),27===e.keyCode&&this.props.isShowing&&(e.stopPropagation(),e.preventDefault(),this.props.checkToggle(null,!0)))}),i()(this,"handleVisibilityChange",()=>this.setState({isVisible:In()})),i()(this,"receiveServiceWorkerMessage",e=>{if((!e.origin||e.origin===location.origin)&&"action"in e.data)switch(e.data.action){case"openPanel":return this.props.checkToggle(),this.props.checkToggle(null,!0),En();case"trackClick":return void d.default.tracks.recordEvent("calypso_web_push_notification_clicked",{push_notification_note_id:e.data.notification.note_id,push_notification_type:e.data.notification.type})}}),i()(this,"postServiceWorkerMessage",e=>{"serviceWorker"in window.navigator&&window.navigator.serviceWorker.ready.then(t=>"active"in t&&t.active.postMessage(e))})}componentDidMount(){window.addEventListener("mousedown",this.props.checkToggle),window.addEventListener("touchstart",this.props.checkToggle),window.addEventListener("keydown",this.handleKeyPress),void 0!==document.hidden&&document.addEventListener("visibilitychange",this.handleVisibilityChange),"serviceWorker"in window.navigator&&"addEventListener"in window.navigator.serviceWorker&&(window.navigator.serviceWorker.addEventListener("message",this.receiveServiceWorkerMessage),this.postServiceWorkerMessage({action:"sendQueuedMessages"}))}componentWillUnmount(){window.removeEventListener("mousedown",this.props.checkToggle),window.removeEventListener("touchstart",this.props.checkToggle),window.removeEventListener("keydown",this.handleKeyPress),void 0!==document.hidden&&document.removeEventListener("visibilitychange",this.handleVisibilityChange),"serviceWorker"in window.navigator&&"removeEventListener"in window.navigator.serviceWorker&&window.navigator.serviceWorker.removeEventListener("message",this.receiveServiceWorkerMessage)}render(){const e=this.props.currentLocaleSlug||Object(m.a)("i18n_default_locale_slug"),t={APP_RENDER_NOTES:[(e,t)=>{let s=t.newNoteCount;this.props.setIndicator(s),this.props.setUnseenCount(s)}],OPEN_LINK:[(e,t)=>{let s=t.href,n=t.tracksEvent;n&&this.props.recordTracksEvent("calypso_notifications_"+n,{link:s}),window.open(s,"_blank")}],OPEN_POST:[(e,t)=>{let s=t.siteId,n=t.postId;this.props.checkToggle(),this.props.recordTracksEvent("calypso_notifications_open_post",{site_id:s,post_id:n}),p()("/read/blogs/".concat(s,"/posts/").concat(n))}],OPEN_COMMENT:[(e,t)=>{let s=t.siteId,n=t.postId,i=t.commentId;this.props.checkToggle(),this.props.recordTracksEvent("calypso_notifications_open_comment",{site_id:s,post_id:n,comment_id:i}),p()("/read/blogs/".concat(s,"/posts/").concat(n,"#comment-").concat(i))}],OPEN_SITE:[(e,t)=>{let s=t.siteId;this.props.checkToggle(),this.props.recordTracksEvent("calypso_notifications_open_site",{site_id:s}),p()("/read/blogs/".concat(s))}],VIEW_SETTINGS:[()=>{this.props.checkToggle(),p()("/me/notifications")}],EDIT_COMMENT:[(e,t)=>{let s=t.siteId,n=t.postId,i=t.commentId;this.props.checkToggle(),this.props.recordTracksEvent("calypso_notifications_edit_comment",{site_id:s,post_id:n,comment_id:i}),p()("/comment/".concat(s,"/").concat(i,"?action=edit"))}]};return r.a.createElement("div",{id:"wpnc-panel",className:l()("wide","wpnc__main",{"wpnt-open":this.props.isShowing,"wpnt-closed":!this.props.isShowing})},r.a.createElement(Sn,{customMiddleware:t,isShowing:this.props.isShowing,isVisible:this.state.isVisible,locale:e,wpcom:u.a}))}}t.default=Object(h.b)(e=>({currentLocaleSlug:Tn(e)||Object(kn.a)(e)}),{recordTracksEvent:g.i,setUnseenCount:Ln.a})(On)},"./apps/notifications/src/panel/boot/stylesheets/style.scss":function(e,t,s){},"./apps/notifications/src/panel/helpers/stats.js":function(e,t,s){"use strict";function n(e,t){window._tkq=window._tkq||[],window._tkq.push(["recordEvent",e,t])}s.r(t),s.d(t,"recordTracksEvent",function(){return n})},"./apps/notifications/style.scss":function(e,t,s){},"./node_modules/react-dom/cjs/react-dom-server.browser.production.min.js":function(e,t,s){"use strict";
/** @license React v16.8.6
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=s("./node_modules/object-assign/index.js"),i=s("./node_modules/react/index.js");function o(e){for(var t=arguments.length-1,s="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)s+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,t,s,n,i,o,r,a){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[s,n,i,o,r,a],c=0;(e=Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",s)}var r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.portal"):60106,l=r?Symbol.for("react.fragment"):60107,c=r?Symbol.for("react.strict_mode"):60108,p=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.concurrent_mode"):60111,m=r?Symbol.for("react.forward_ref"):60112,g=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116;function y(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case d:return"ConcurrentMode";case l:return"Fragment";case a:return"Portal";case p:return"Profiler";case c:return"StrictMode";case g:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case h:return"Context.Consumer";case u:return"Context.Provider";case m:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case f:return y(e.type);case v:if(e=1===e._status?e._result:null)return y(e)}return null}var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;b.hasOwnProperty("ReactCurrentDispatcher")||(b.ReactCurrentDispatcher={current:null});var w={};function _(e,t){for(var s=0|e._threadCount;s<=t;s++)e[s]=e._currentValue2,e._threadCount=s+1}for(var E=new Uint16Array(16),N=0;15>N;N++)E[N]=N+1;E[15]=0;var S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k=Object.prototype.hasOwnProperty,x={},T={};function L(e){return!!k.call(T,e)||!k.call(x,e)&&(S.test(e)?T[e]=!0:(x[e]=!0,!1))}function I(e,t,s,n){if(null==t||function(e,t,s,n){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,n))return!0;if(n)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function O(e,t,s,n,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=e,this.type=t}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new O(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];C[t]=new O(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new O(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new O(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new O(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new O(e,3,!0,e,null)}),["capture","download"].forEach(function(e){C[e]=new O(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){C[e]=new O(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){C[e]=new O(e,5,!1,e.toLowerCase(),null)});var M=/[\-:]([a-z])/g;function D(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(M,D);C[t]=new O(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(M,D);C[t]=new O(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(M,D);C[t]=new O(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new O(e,1,!1,e.toLowerCase(),null)});var A=/["'&<>]/;function j(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=A.exec(e);if(t){var s,n="",i=0;for(s=t.index;s<e.length;s++){switch(e.charCodeAt(s)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==s&&(n+=e.substring(i,s)),i=s+1,n+=t}e=i!==s?n+e.substring(i,s):n}return e}var R=null,V=null,P=null,z=!1,F=!1,U=null,H=0;function B(){return null===R&&o("321"),R}function q(){return 0<H&&o("312"),{memoizedState:null,queue:null,next:null}}function K(){return null===P?null===V?(z=!1,V=P=q()):(z=!0,P=V):null===P.next?(z=!1,P=P.next=q()):(z=!0,P=P.next),P}function W(e,t,s,n){for(;F;)F=!1,H+=1,P=null,s=e(t,n);return V=R=null,H=0,P=U=null,s}function G(e,t){return"function"==typeof t?t(e):t}function $(e,t,s){if(R=B(),P=K(),z){var n=P.queue;if(t=n.dispatch,null!==U&&void 0!==(s=U.get(n))){U.delete(n),n=P.memoizedState;do{n=e(n,s.action),s=s.next}while(null!==s);return P.memoizedState=n,[n,t]}return[P.memoizedState,t]}return e=e===G?"function"==typeof t?t():t:void 0!==s?s(t):t,P.memoizedState=e,e=(e=P.queue={last:null,dispatch:null}).dispatch=function(e,t,s){if(25>H||o("301"),e===R)if(F=!0,e={action:s,next:null},null===U&&(U=new Map),void 0===(s=U.get(t)))U.set(t,e);else{for(t=s;null!==t.next;)t=t.next;t.next=e}}.bind(null,R,e),[P.memoizedState,e]}function Y(){}var Q=0,J={readContext:function(e){var t=Q;return _(e,t),e[t]},useContext:function(e){B();var t=Q;return _(e,t),e[t]},useMemo:function(e,t){if(R=B(),t=void 0===t?null:t,null!==(P=K())){var s=P.memoizedState;if(null!==s&&null!==t){e:{var n=s[1];if(null===n)n=!1;else{for(var i=0;i<n.length&&i<t.length;i++){var o=t[i],r=n[i];if((o!==r||0===o&&1/o!=1/r)&&(o==o||r==r)){n=!1;break e}}n=!0}}if(n)return s[0]}}return e=e(),P.memoizedState=[e,t],e},useReducer:$,useRef:function(e){R=B();var t=(P=K()).memoizedState;return null===t?(e={current:e},P.memoizedState=e):t},useState:function(e){return $(G,e)},useLayoutEffect:function(){},useCallback:function(e){return e},useImperativeHandle:Y,useEffect:Y,useDebugValue:Y},Z={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function X(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ee={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},te=n({menuitem:!0},ee),se={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ne=["Webkit","ms","Moz","O"];Object.keys(se).forEach(function(e){ne.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),se[t]=se[e]})});var ie=/([A-Z])/g,oe=/^ms-/,re=i.Children.toArray,ae=b.ReactCurrentDispatcher,le={listing:!0,pre:!0,textarea:!0},ce=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,pe={},ue={};var he=Object.prototype.hasOwnProperty,de={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function me(e,t){void 0===e&&o("152",y(t)||"Component")}function ge(e,t,s){function r(i,r){var a=function(e,t,s){var n=e.contextType;if("object"==typeof n&&null!==n)return _(n,s),n[s];if(e=e.contextTypes){for(var i in s={},e)s[i]=t[i];t=s}else t=w;return t}(r,t,s),l=[],c=!1,p={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===l)return null},enqueueReplaceState:function(e,t){c=!0,l=[t]},enqueueSetState:function(e,t){if(null===l)return null;l.push(t)}},u=void 0;if(r.prototype&&r.prototype.isReactComponent){if(u=new r(i.props,a,p),"function"==typeof r.getDerivedStateFromProps){var h=r.getDerivedStateFromProps.call(null,i.props,u.state);null!=h&&(u.state=n({},u.state,h))}}else if(R={},u=r(i.props,a,p),null==(u=W(r,i.props,u,a))||null==u.render)return void me(e=u,r);if(u.props=i.props,u.context=a,u.updater=p,void 0===(p=u.state)&&(u.state=p=null),"function"==typeof u.UNSAFE_componentWillMount||"function"==typeof u.componentWillMount)if("function"==typeof u.componentWillMount&&"function"!=typeof r.getDerivedStateFromProps&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&"function"!=typeof r.getDerivedStateFromProps&&u.UNSAFE_componentWillMount(),l.length){p=l;var d=c;if(l=null,c=!1,d&&1===p.length)u.state=p[0];else{h=d?p[0]:u.state;var m=!0;for(d=d?1:0;d<p.length;d++){var g=p[d];null!=(g="function"==typeof g?g.call(u,h,i.props,a):g)&&(m?(m=!1,h=n({},h,g)):n(h,g))}u.state=h}}else l=null;if(me(e=u.render(),r),i=void 0,"function"==typeof u.getChildContext&&"object"==typeof(a=r.childContextTypes))for(var f in i=u.getChildContext())f in a||o("108",y(r)||"Unknown",f);i&&(t=n({},t,i))}for(;i.isValidElement(e);){var a=e,l=a.type;if("function"!=typeof l)break;r(a,l)}return{child:e,context:t}}var fe=function(){function e(t,s){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");i.isValidElement(t)?t.type!==l?t=[t]:(t=t.props.children,t=i.isValidElement(t)?[t]:re(t)):t=re(t),t={type:null,domNamespace:Z.html,children:t,childIndex:0,context:w,footer:""};var n=E[0];if(0===n){var r=E,a=2*(n=r.length);65536>=a||o("304");var c=new Uint16Array(a);for(c.set(r),(E=c)[0]=n+1,r=n;r<a-1;r++)E[r]=r+1;E[a-1]=0}else E[0]=E[n];this.threadID=n,this.stack=[t],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=s,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}return e.prototype.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;E[e]=E[0],E[0]=e}},e.prototype.pushProvider=function(e){var t=++this.contextIndex,s=e.type._context,n=this.threadID;_(s,n);var i=s[n];this.contextStack[t]=s,this.contextValueStack[t]=i,s[n]=e.props.value},e.prototype.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],s=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=s},e.prototype.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},e.prototype.read=function(e){if(this.exhausted)return null;var t=Q;Q=this.threadID;var s=ae.current;ae.current=J;try{for(var n=[""],i=!1;n[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var r=this.threadID;E[r]=E[0],E[0]=r;break}var a=this.stack[this.stack.length-1];if(i||a.childIndex>=a.children.length){var l=a.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===a.type)this.currentSelectValue=null;else if(null!=a.type&&null!=a.type.type&&a.type.type.$$typeof===u)this.popProvider(a.type);else if(a.type===g){this.suspenseDepth--;var c=n.pop();if(i){i=!1;var p=a.fallbackFrame;p||o("303"),this.stack.push(p);continue}n[this.suspenseDepth]+=c}n[this.suspenseDepth]+=l}else{var h=a.children[a.childIndex++],d="";try{d+=this.render(h,a.context,a.domNamespace)}catch(e){throw e}n.length<=this.suspenseDepth&&n.push(""),n[this.suspenseDepth]+=d}}return n[0]}finally{ae.current=s,Q=t}},e.prototype.render=function(e,t,s){if("string"==typeof e||"number"==typeof e)return""===(s=""+e)?"":this.makeStaticMarkup?j(s):this.previousWasTextNode?"\x3c!-- --\x3e"+j(s):(this.previousWasTextNode=!0,j(s));if(e=(t=ge(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!i.isValidElement(e)){if(null!=e&&null!=e.$$typeof){var r=e.$$typeof;r===a&&o("257"),o("258",r.toString())}return e=re(e),this.stack.push({type:null,domNamespace:s,children:e,childIndex:0,context:t,footer:""}),""}if("string"==typeof(r=e.type))return this.renderDOM(e,t,s);switch(r){case c:case d:case p:case l:return e=re(e.props.children),this.stack.push({type:null,domNamespace:s,children:e,childIndex:0,context:t,footer:""}),"";case g:o("294")}if("object"==typeof r&&null!==r)switch(r.$$typeof){case m:R={};var y=r.render(e.props,e.ref);return y=W(r.render,e.props,y,e.ref),y=re(y),this.stack.push({type:null,domNamespace:s,children:y,childIndex:0,context:t,footer:""}),"";case f:return e=[i.createElement(r.type,n({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:s,children:e,childIndex:0,context:t,footer:""}),"";case u:return s={type:e,domNamespace:s,children:r=re(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(s),"";case h:r=e.type,y=e.props;var b=this.threadID;return _(r,b),r=re(y.children(r[b])),this.stack.push({type:e,domNamespace:s,children:r,childIndex:0,context:t,footer:""}),"";case v:o("295")}o("130",null==r?r:typeof r,"")},e.prototype.renderDOM=function(e,t,s){var r=e.type.toLowerCase();s===Z.html&&X(r),pe.hasOwnProperty(r)||(ce.test(r)||o("65",r),pe[r]=!0);var a=e.props;if("input"===r)a=n({type:void 0},a,{defaultChecked:void 0,defaultValue:void 0,value:null!=a.value?a.value:a.defaultValue,checked:null!=a.checked?a.checked:a.defaultChecked});else if("textarea"===r){var l=a.value;if(null==l){l=a.defaultValue;var c=a.children;null!=c&&(null!=l&&o("92"),Array.isArray(c)&&(1>=c.length||o("93"),c=c[0]),l=""+c),null==l&&(l="")}a=n({},a,{value:void 0,children:""+l})}else if("select"===r)this.currentSelectValue=null!=a.value?a.value:a.defaultValue,a=n({},a,{value:void 0});else if("option"===r){c=this.currentSelectValue;var p=function(e){if(null==e)return e;var t="";return i.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(a.children);if(null!=c){var u=null!=a.value?a.value+"":p;if(l=!1,Array.isArray(c)){for(var h=0;h<c.length;h++)if(""+c[h]===u){l=!0;break}}else l=""+c===u;a=n({selected:void 0,children:void 0},a,{selected:l,children:p})}}for(w in(l=a)&&(te[r]&&(null!=l.children||null!=l.dangerouslySetInnerHTML)&&o("137",r,""),null!=l.dangerouslySetInnerHTML&&(null!=l.children&&o("60"),"object"==typeof l.dangerouslySetInnerHTML&&"__html"in l.dangerouslySetInnerHTML||o("61")),null!=l.style&&"object"!=typeof l.style&&o("62","")),l=a,c=this.makeStaticMarkup,p=1===this.stack.length,u="<"+e.type,l)if(he.call(l,w)){var d=l[w];if(null!=d){if("style"===w){h=void 0;var m="",g="";for(h in d)if(d.hasOwnProperty(h)){var f=0===h.indexOf("--"),v=d[h];if(null!=v){var y=h;if(ue.hasOwnProperty(y))y=ue[y];else{var b=y.replace(ie,"-$1").toLowerCase().replace(oe,"-ms-");y=ue[y]=b}m+=g+y+":",g=h,m+=f=null==v||"boolean"==typeof v||""===v?"":f||"number"!=typeof v||0===v||se.hasOwnProperty(g)&&se[g]?(""+v).trim():v+"px",g=";"}}d=m||null}h=null;e:if(f=r,v=l,-1===f.indexOf("-"))f="string"==typeof v.is;else switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":f=!1;break e;default:f=!0}f?de.hasOwnProperty(w)||(h=L(h=w)&&null!=d?h+'="'+j(d)+'"':""):(f=w,h=d,d=C.hasOwnProperty(f)?C[f]:null,(v="style"!==f)&&(v=null!==d?0===d.type:2<f.length&&("o"===f[0]||"O"===f[0])&&("n"===f[1]||"N"===f[1])),v||I(f,h,d,!1)?h="":null!==d?(f=d.attributeName,h=3===(d=d.type)||4===d&&!0===h?f+'=""':f+'="'+j(h)+'"'):h=L(f)?f+'="'+j(h)+'"':""),h&&(u+=" "+h)}}c||p&&(u+=' data-reactroot=""');var w=u;l="",ee.hasOwnProperty(r)?w+="/>":(w+=">",l="</"+e.type+">");e:{if(null!=(c=a.dangerouslySetInnerHTML)){if(null!=c.__html){c=c.__html;break e}}else if("string"==typeof(c=a.children)||"number"==typeof c){c=j(c);break e}c=null}return null!=c?(a=[],le[r]&&"\n"===c.charAt(0)&&(w+="\n"),w+=c):a=re(a.children),e=e.type,s=null==s||"http://www.w3.org/1999/xhtml"===s?X(e):"http://www.w3.org/2000/svg"===s&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":s,this.stack.push({domNamespace:s,type:r,children:a,childIndex:0,context:t,footer:l}),this.previousWasTextNode=!1,w},e}(),ve={renderToString:function(e){e=new fe(e,!1);try{return e.read(1/0)}finally{e.destroy()}},renderToStaticMarkup:function(e){e=new fe(e,!0);try{return e.read(1/0)}finally{e.destroy()}},renderToNodeStream:function(){o("207")},renderToStaticNodeStream:function(){o("208")},version:"16.8.6"},ye={default:ve},be=ye&&ve||ye;e.exports=be.default||be},"./node_modules/react-dom/server.browser.js":function(e,t,s){"use strict";e.exports=s("./node_modules/react-dom/cjs/react-dom-server.browser.production.min.js")}}]);