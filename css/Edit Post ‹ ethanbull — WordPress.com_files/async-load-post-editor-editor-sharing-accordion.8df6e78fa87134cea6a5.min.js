(window.webpackJsonp=window.webpackJsonp||[]).push([[377],{"./client/components/data/query-keyring-connections/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/prop-types/index.js"),r=s.n(o),a=s("./node_modules/react/index.js"),c=s("./node_modules/react-redux/es/index.js"),l=s("./client/state/sharing/keyring/selectors.js"),p=s("./client/state/sharing/keyring/actions.js");class d extends a.Component{componentWillMount(){this.props.isRequesting||this.props.requestKeyringConnections(this.props.forceRefresh)}render(){return null}}i()(d,"propTypes",{forceRefresh:r.a.bool,isRequesting:r.a.bool,requestKeyringConnections:r.a.func}),i()(d,"defaultProps",{forceRefresh:!1}),t.a=Object(c.b)(e=>({isRequesting:Object(l.d)(e)}),{requestKeyringConnections:p.c})(d)},"./client/components/forms/counted-textarea/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/extends.js"),i=s.n(n),o=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),r=s.n(o),a=s("./node_modules/react/index.js"),c=s.n(a),l=s("./node_modules/prop-types/index.js"),p=s.n(l),d=s("./packages/i18n-calypso/dist/esm/index.js"),h=s("./node_modules/classnames/index.js"),u=s.n(h),b=s("./node_modules/lodash/lodash.js"),g=s("./client/components/forms/form-textarea/index.jsx");s("./client/components/forms/counted-textarea/style.scss");class m extends c.a.Component{constructor(){super(...arguments),r()(this,"renderCountPanel",()=>{let e,t=this.props.value.length;return!t&&this.props.countPlaceholderLength&&(t=this.props.placeholder.length),e=this.props.showRemainingCharacters&&this.props.acceptableLength?this.props.translate("%d character remaining","%d characters remaining",{context:"Input length",args:[this.props.acceptableLength-t],count:this.props.acceptableLength-t}):this.props.translate("%d character","%d characters",{context:"Input length",args:[t],count:t}),c.a.createElement("div",{className:"counted-textarea__count-panel"},e,this.props.children)})}render(){const e=u()("counted-textarea",this.props.className,{"is-exceeding-acceptable-length":this.props.acceptableLength&&this.props.value.length>this.props.acceptableLength});return c.a.createElement("div",{className:e},c.a.createElement(g.a,i()({},Object(b.omit)(this.props,"className","acceptableLength","showRemainingCharacters","children","countPlaceholderLength","moment","numberFormat","translate"),{className:"counted-textarea__input"})),this.renderCountPanel())}}r()(m,"propTypes",{value:p.a.string,placeholder:p.a.string,countPlaceholderLength:p.a.bool,onChange:p.a.func,acceptableLength:p.a.number,showRemainingCharacters:p.a.bool,translate:p.a.func}),r()(m,"defaultProps",{value:"",placeholder:"",countPlaceholderLength:!1,onChange:b.noop,showRemainingCharacters:!1,translate:d.translate}),t.a=Object(d.localize)(m)},"./client/components/forms/counted-textarea/style.scss":function(e,t,s){},"./client/lib/post-metadata/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/lodash.js");let i,o=/^_wpas_skip_(\d+)$/,r=/^_wpas_done_(\d+)$/;function a(e,t){const s=Object(n.find)(e,{key:t});if(s)return s.value}function c(e,t){return e?e.filter(function(e){return t.test(e.key)&&1===parseInt(e.value,10)}).map(function(e){return parseInt(e.key.match(t)[1],10)}):[]}i={publicizeMessage:function(e){if(e)return a(e.metadata,"_wpas_mess")},publicizeDone:function(e){if(e)return c(e.metadata,r)},publicizeSkipped:function(e){if(e)return c(e.metadata,o)},geoLabel:function(e){if(e)return a(e.metadata,"geo_address")},metaDescription:function(e){if(e)return a(e.metadata,"advanced_seo_description")},geoCoordinates:function(e){let t,s;if(e)return t=parseFloat(a(e.metadata,"geo_latitude")),s=parseFloat(a(e.metadata,"geo_longitude")),t&&s?[t,s]:void 0},geoIsSharedPublicly:function(e){if(!e)return null;const t=a(e.metadata,"geo_public");return!!parseInt(t,10)||void 0===t&&(!a(e.metadata,"geo_latitude")&&!a(e.metadata,"geo_longitude"))}},t.a=i},"./client/post-editor/editor-fieldset/index.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return d});var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/prop-types/index.js"),r=s.n(o),a=s("./node_modules/react/index.js"),c=s.n(a),l=s("./node_modules/classnames/index.js"),p=s.n(l);s("./client/post-editor/editor-fieldset/style.scss");class d extends c.a.Component{constructor(){super(...arguments),i()(this,"renderChildren",()=>c.a.Children.map(this.props.children,function(e){return c.a.createElement("div",{className:"editor-fieldset__option"},e)}))}render(){return c.a.createElement("fieldset",{className:p()("editor-fieldset",this.props.className)},c.a.createElement("legend",{className:"editor-fieldset__legend"},this.props.legend),this.renderChildren())}}i()(d,"displayName","EditorFieldset"),i()(d,"propTypes",{legend:r.a.oneOfType([r.a.string,r.a.element]).isRequired})},"./client/post-editor/editor-fieldset/style.scss":function(e,t,s){},"./client/post-editor/editor-sharing/accordion.jsx":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/prop-types/index.js"),r=s.n(o),a=s("./packages/i18n-calypso/dist/esm/index.js"),c=s("./node_modules/react/index.js"),l=s.n(c),p=s("./node_modules/classnames/index.js"),d=s.n(p),h=s("./node_modules/react-redux/es/index.js"),u=s("./node_modules/lodash/lodash.js"),b=s("./client/components/accordion/index.jsx"),g=s("./client/components/forms/form-text-input/index.jsx"),m=s("./client/lib/post-metadata/index.js"),j=s("./client/components/gridicon/index.jsx"),_=s("./client/components/data/query-post-types/index.jsx"),f=s("./client/post-editor/editor-sharing/publicize-message.jsx"),x=s("./client/components/forms/form-checkbox/index.jsx"),E=s("./client/lib/route/index.js"),k=s("./client/state/posts/stats.js"),C=s("./client/components/notice/index.jsx"),v=s("./client/components/notice/notice-action.jsx"),y=s("./client/state/ui/selectors.js"),O=s("./client/state/sites/selectors.js"),S=s("./client/state/posts/actions.js"),P=s("./client/state/ui/editor/selectors.js"),w=s("./client/state/posts/selectors.js"),z=s("./client/state/sharing/keyring/selectors.js"),I=s("./client/components/data/query-keyring-connections/index.jsx");class N extends l.a.Component{constructor(){super(...arguments),i()(this,"isConnectionSkipped",()=>{const e=this.props,t=e.post,s=e.connection;return t&&s&&Object(u.includes)(m.a.publicizeSkipped(t),s.keyring_connection_ID)||"facebook"===s.service&&!this.isAdditionalExternalUser(s)}),i()(this,"isConnectionDone",()=>{const e=this.props,t=e.post,s=e.connection;return t&&s&&Object(u.includes)(m.a.publicizeDone(t),s.keyring_connection_ID)}),i()(this,"isDisabled",()=>{const e=this.props.connection;return!e||e.read_only||"facebook"===e.service&&!this.isAdditionalExternalUser(e)||"linkedin"===e.service&&"must_reauth"===e.status}),i()(this,"onChange",e=>{const t=this.props.connection;t&&(e.target.checked?(this.props.deletePostMetadata(this.props.siteId,this.props.postId,"_wpas_skip_"+t.keyring_connection_ID),this.props.recordEditorStat("sharing_enabled_"+t.service),this.props.recordEditorEvent("Publicize Service",t.service,"enabled")):(this.props.updatePostMetadata(this.props.siteId,this.props.postId,"_wpas_skip_"+t.keyring_connection_ID,1),this.props.recordEditorStat("sharing_disabled_"+t.service),this.props.recordEditorEvent("Publicize Service",t.service,"disabled")))}),i()(this,"renderFacebookProfileWarning",()=>{const e=this.props,t=e.connection,s=e.isKeyringFetching;if(t&&"facebook"===t.service&&!s&&!this.isAdditionalExternalUser(t))return l.a.createElement(C.b,{isCompact:!0,className:"editor-sharing__broken-publicize-connection",status:"is-error",showDismiss:!1},this.props.translate("Connections to Facebook profiles ceased to work on August 1st. {{a}}Learn More{{/a}}",{components:{a:l.a.createElement("a",{href:"https://en.support.wordpress.com/publicize/#facebook-pages",target:"_blank",rel:"noopener noreferrer"})}}))}),i()(this,"renderBrokenConnection",()=>{const e=this.props.connection;if(e&&"broken"===e.status)return l.a.createElement(C.b,{isCompact:!0,className:"editor-sharing__broken-publicize-connection",status:"is-warning",showDismiss:!1},this.props.translate("There is an issue connecting to %s.",{args:e.label}),l.a.createElement(v.a,{onClick:this.props.onRefresh},"Reconnect ",l.a.createElement(j.a,{icon:"external",size:18})))}),i()(this,"renderMustReauthConnection",()=>{const e=this.props,t=e.connection,s=e.siteSlug;return t&&"must_reauth"===t.status?l.a.createElement(C.b,{isCompact:!0,className:"editor-sharing__must-reauth-publicize-connection",status:"is-warning",showDismiss:!1},this.props.translate("Your LinkedIn connection needs to be reauthenticated to continue working â€“ head to Sharing to take care of it."),l.a.createElement(v.a,{href:Object(E.b)("/sharing",s)},this.props.translate("Go to Sharing settings")," ",l.a.createElement(j.a,{icon:"external",size:18}))):null})}isAdditionalExternalUser(e){const t=this.props.keyringConnection;return!!t&&t.external_ID!==e.external_ID}render(){const e=this.props,t=e.connection,s=e.label;return l.a.createElement("div",{className:"editor-sharing__publicize-connection"},l.a.createElement(I.a,null),l.a.createElement("label",null,l.a.createElement(x.a,{checked:!this.isConnectionSkipped(),disabled:this.isDisabled(),onChange:this.onChange}),l.a.createElement("span",{"data-e2e-service":s},t&&t.external_display)),this.renderFacebookProfileWarning(),this.renderBrokenConnection(),this.renderMustReauthConnection())}}i()(N,"propTypes",{post:r.a.object,connection:r.a.object,onRefresh:r.a.func,label:r.a.string,siteSlug:r.a.string}),i()(N,"defaultProps",{onRefresh:()=>{}});var M=Object(h.b)((e,t)=>{const s=Object(y.e)(e),n=Object(P.f)(e);return{siteId:s,postId:n,post:Object(w.a)(e,s,n),isKeyringFetching:Object(z.d)(e),keyringConnection:t.connection?Object(z.a)(e,t.connection.keyring_connection_ID):null,siteSlug:Object(O.v)(e,s)}},{updatePostMetadata:S.o,deletePostMetadata:S.d,recordEditorStat:k.b,recordEditorEvent:k.a})(Object(a.localize)(N)),L=s("./client/state/current-user/selectors.js"),B=s("./client/state/sharing/publicize/selectors.js");s("./client/post-editor/editor-sharing/publicize-services.scss");const R=e=>{let t=e.connections,s=e.newConnectionPopup;return l.a.createElement("ul",{className:"editor-sharing__publicize-services"},Object(u.map)(Object(u.groupBy)(t,"label"),(e,t)=>l.a.createElement("li",{key:t,className:"editor-sharing__publicize-service"},l.a.createElement("h5",{className:"editor-sharing__publicize-service-heading"},t),e.map(e=>l.a.createElement(M,{key:e.ID,connection:e,onRefresh:s,label:t})))))};R.propTypes={connections:r.a.array.isRequired,newConnectionPopup:r.a.func.isRequired};var D=Object(h.b)(e=>{const t=Object(y.e)(e),s=Object(L.g)(e);return{connections:Object(B.c)(e,t,s)}})(R),q=s("./client/lib/paths/index.js"),F=s("./client/lib/popup-monitor/index.js"),T=s("./client/components/button/index.jsx"),A=s("./client/state/sharing/publicize/actions.js"),U=s("./client/state/selectors/can-current-user.js"),H=s("./client/state/selectors/is-publicize-enabled.js");s("./client/post-editor/editor-sharing/publicize-options.scss");class K extends l.a.Component{constructor(){super(...arguments),i()(this,"connectionPopupMonitor",!1),i()(this,"hasConnections",()=>this.props.connections&&this.props.connections.length),i()(this,"newConnectionPopup",()=>{if(!this.props.site)return;const e=Object(q.c)(this.props.site);this.connectionPopupMonitor||(this.connectionPopupMonitor=new F.a),this.connectionPopupMonitor.open(e),this.connectionPopupMonitor.once("close",this.onNewConnectionPopupClosed)}),i()(this,"onNewConnectionPopupClosed",()=>{this.props.requestConnections(this.props.site.ID)}),i()(this,"newConnection",()=>{this.newConnectionPopup(),this.props.recordEditorStat("sharing_create_service"),this.props.recordEditorEvent("Opened Create New Sharing Service Dialog")}),i()(this,"renderServices",()=>{if(this.props.site&&this.hasConnections())return l.a.createElement(D,{newConnectionPopup:this.newConnectionPopup})}),i()(this,"renderMessage",()=>{const e=this.hasConnections()?m.a.publicizeSkipped(this.props.post):[],t=this.hasConnections()?this.props.connections.filter(t=>e&&-1===e.indexOf(t.keyring_connection_ID)):[],s=Object(u.includes)(Object(u.map)(t,"service"),"twitter"),n=s?234:null,i=this.props.post?this.props.post.title:"";if(this.hasConnections())return l.a.createElement(f.a,{message:m.a.publicizeMessage(this.props.post)||"",onChange:this.onMessageChange,requireCount:s,acceptableLength:n,preFilledMessage:i})}),i()(this,"onMessageChange",e=>{this.props.updatePostMetadata(this.props.siteId,this.props.postId,"_wpas_mess",e)}),i()(this,"renderAddNewButton",()=>{if(this.props.canUserPublishPosts)return l.a.createElement(T.a,{borderless:!0,compact:!0,onClick:this.newConnection},l.a.createElement(j.a,{icon:"add"})," ",this.props.translate("Connect new service"),l.a.createElement("span",{className:"editor-sharing__external-link-indicator"},l.a.createElement(j.a,{icon:"external",size:18})))}),i()(this,"renderInfoNotice",()=>{if(this.hasConnections()||this.props.canUserPublishPosts)return l.a.createElement("p",{className:"editor-drawer__description"},this.props.translate("Connect and select social media services to automatically share this post."))})}componentWillUnmount(){this.connectionPopupMonitor&&this.connectionPopupMonitor.off("close",this.onNewConnectionPopupClosed)}render(){if(!this.props.isPublicizeEnabled)return null;const e=d()("editor-sharing__publicize-options",{"has-connections":this.hasConnections(),"has-add-option":this.props.canUserPublishPosts});return l.a.createElement("div",{className:e},this.props.siteId&&l.a.createElement(_.a,{siteId:this.props.siteId}),this.renderInfoNotice(),this.renderServices(),this.renderAddNewButton(),this.renderMessage())}}i()(K,"propTypes",{site:r.a.object,post:r.a.object,siteId:r.a.number,isPublicizeEnabled:r.a.bool,connections:r.a.array,requestConnections:r.a.func});var W=Object(h.b)(e=>{const t=Object(y.e)(e),s=Object(L.g)(e),n=Object(P.f)(e),i=Object(O.k)(e,t),o=Object(w.a)(e,t,n),r=Object(w.c)(e,t,n,"type"),a=Object(U.b)(e,t,"publish_posts");return{siteId:t,postId:n,site:i,post:o,isPublicizeEnabled:Object(H.a)(e,t,r),canUserPublishPosts:a,connections:Object(B.c)(e,t,s)}},{requestConnections:A.f,updatePostMetadata:S.o,recordEditorStat:k.b,recordEditorEvent:k.a})(Object(a.localize)(K)),J=s("./client/post-editor/editor-fieldset/index.jsx");class V extends l.a.Component{constructor(){super(...arguments),i()(this,"onChange",e=>{this.props.editPost(this.props.siteId,this.props.postId,{[e.target.name]:e.target.checked}),this.recordStats(e)})}renderSharingButtonField(){if(this.props.isSharingButtonsEnabled)return l.a.createElement("label",null,l.a.createElement(x.a,{name:"sharing_enabled",checked:this.props.isShowingSharingButtons,onChange:this.onChange}),l.a.createElement("span",null,this.props.translate("Show Sharing Buttons",{context:"Post Editor"})))}renderLikesButtonField(){if(this.props.isLikesEnabled)return l.a.createElement("label",null,l.a.createElement(x.a,{name:"likes_enabled",checked:this.props.isShowingLikeButton,onChange:this.onChange}),l.a.createElement("span",null,this.props.translate("Show Like Button",{context:"Post Editor"})))}recordStats(e){let t=e.target.name,s="sharing_enabled"===e.target.name?"Sharing Buttons":"Like Button";t+=e.target.checked?"_enabled":"_disabled",s+=e.target.checked?" Enabled":" Disabled",this.props.recordEditorStat(t),this.props.recordEditorEvent(s)}render(){return this.props.isSharingButtonsEnabled||this.props.isLikesEnabled?l.a.createElement(J.a,{className:"editor-sharing__sharing-like-options",legend:this.props.translate("Sharing Buttons & Likes")},this.renderSharingButtonField(),this.renderLikesButtonField()):null}}function $(e,t,s){return t&&"sharing_enabled"in t?t.sharing_enabled:!e||!s||e.options.default_sharing_status}function G(e,t,s){return t&&"likes_enabled"in t?t.likes_enabled:!e||!s||e.options.default_likes_enabled}i()(V,"propTypes",{siteId:r.a.number,postId:r.a.number,isSharingButtonsEnabled:r.a.bool,isLikesEnabled:r.a.bool,isShowingSharingButtons:r.a.bool,isShowingLikeButton:r.a.bool});var Y=Object(h.b)(e=>{const t=Object(y.e)(e),s=Object(O.k)(e,t),n=Object(P.f)(e),i=Object(w.a)(e,t,n),o=Object(P.m)(e);return{siteId:t,postId:n,isSharingButtonsEnabled:!1!==Object(O.I)(e,t,"sharedaddy"),isLikesEnabled:!1!==Object(O.I)(e,t,"likes"),isShowingSharingButtons:$(s,i,o),isShowingLikeButton:G(s,i,o)}},{editPost:S.e,recordEditorStat:k.b,recordEditorEvent:k.a})(Object(a.localize)(V));s("./client/post-editor/editor-sharing/style.scss");function Q(){return l.a.createElement("div",{className:"editor-sharing"},l.a.createElement(W,null),l.a.createElement(Y,null))}var X=s("./client/components/accordion/section.jsx"),Z=s("./client/state/posts/utils.js"),ee=s("./client/lib/viewport/index.js"),te=s("./client/components/data/query-publicize-connections/index.jsx"),se=s("./client/state/selectors/has-broken-site-user-connection.js");function ne(e,t,s){return Object(u.some)(Object(B.c)(e,t,s),{status:"invalid"})}var ie=s("./client/state/analytics/actions.js");class oe extends l.a.Component{getSubtitle(){const e=this.props,t=e.post,s=e.connections;if(!this.props.isPublicizeEnabled||!t||!s)return;const n=m.a.publicizeSkipped(t);return Object(u.reduce)(s,(e,t)=>{const s=t.keyring_connection_ID,i=t.label;return Object(u.includes)(n,s)||Object(u.includes)(e,i)||e.push(i),e},[]).join(", ")}renderShortUrl(){const e=d()("editor-sharing__shortlink",{"is-standalone":this.hideSharing()});return Z.y(this.props.post)?l.a.createElement("div",{className:e},l.a.createElement("label",{className:"editor-sharing__shortlink-label",htmlFor:"shortlink-field"},this.props.translate("Shortlink")),l.a.createElement(g.a,{className:"editor-sharing__shortlink-field",id:"shortlink-field",value:this.props.post.short_URL,size:this.props.post.short_URL&&this.props.post.short_URL.length,readOnly:!0,selectOnFocus:!0})):null}hideSharing(){return!this.props.isSharingActive&&!this.props.isLikesActive&&!this.props.isPublicizeEnabled}render(){const e=this.hideSharing(),t=d()("editor-sharing__accordion",this.props.className,{"is-loading":!this.props.post||!this.props.connections});if(e&&!Z.y(this.props.post))return null;let s;return this.props.hasBrokenConnection&&(s={type:"warning",text:this.props.translate("A broken connection requires repair",{comment:"Publicize connection deauthorized, needs user action to fix"}),url:"/marketing/connections/".concat(this.props.siteSlug),position:Object(ee.e)()?"top left":"top",onClick:this.props.onStatusClick}),this.props.hasInvalidConnection&&(s={type:"error",text:this.props.translate("A connection is broken and must be removed",{comment:"Publicize connection is invalid."}),position:Object(ee.e)()?"top left":"top",onClick:this.props.onStatusClick}),l.a.createElement(b.a,{title:this.props.translate("Sharing"),subtitle:this.getSubtitle(),status:s,className:t,e2eTitle:"sharing"},this.props.siteId&&l.a.createElement(te.a,{siteId:this.props.siteId}),l.a.createElement(X.a,null,!e&&l.a.createElement(Q,null),this.renderShortUrl()))}}i()(oe,"propTypes",{siteId:r.a.number,siteSlug:r.a.string,post:r.a.object,connections:r.a.array,hasBrokenConnection:r.a.bool,hasInvalidConnection:r.a.bool,isPublicizeEnabled:r.a.bool,isSharingActive:r.a.bool,isLikesActive:r.a.bool});t.default=Object(h.b)(e=>{const t=Object(y.e)(e),s=Object(L.g)(e),n=Object(P.f)(e),i=Object(w.a)(e,t,n),o=Object(w.c)(e,t,n,"type"),r=!1!==Object(O.I)(e,t,"sharedaddy"),a=!1!==Object(O.I)(e,t,"likes");return{siteId:t,siteSlug:Object(O.v)(e,t),post:i,connections:Object(B.c)(e,t,s),hasBrokenConnection:Object(se.a)(e,t,s),hasInvalidConnection:ne(e,t,s),isSharingActive:r,isLikesActive:a,isPublicizeEnabled:Object(H.a)(e,t,o)}},{onStatusClick:()=>Object(ie.g)("Editor","Clicked Accordion Broken Status")})(Object(a.localize)(oe))},"./client/post-editor/editor-sharing/publicize-message.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=s.n(n),o=s("./node_modules/react/index.js"),r=s.n(o),a=s("./node_modules/react-redux/es/index.js"),c=s("./packages/i18n-calypso/dist/esm/index.js"),l=s("./node_modules/prop-types/index.js"),p=s.n(l),d=s("./node_modules/lodash/lodash.js"),h=s("./client/components/forms/counted-textarea/index.jsx"),u=s("./client/post-editor/editor-drawer/label.jsx"),b=s("./client/components/forms/form-textarea/index.jsx"),g=s("./client/components/info-popover/index.jsx"),m=s("./client/components/track-input-changes/index.jsx"),j=s("./client/state/posts/stats.js");s("./client/post-editor/editor-sharing/publicize-message.scss");class _ extends o.Component{constructor(){super(...arguments),i()(this,"userHasEditedMessage",!1),i()(this,"onChange",e=>{this.userHasEditedMessage=!0,this.props.onChange(e.target.value)}),i()(this,"recordStats",()=>{this.props.recordEditorStat("sharing_message_changed"),this.props.recordEditorEvent("Publicize Sharing Message Changed")})}shouldPreFillMessage(){return!this.userHasEditedMessage&&""===this.props.message}getMessage(){return this.shouldPreFillMessage()?this.props.preFilledMessage:this.props.message}renderInfoPopover(){return r.a.createElement(g.a,{className:"editor-sharing__publicize-message-counter-info",position:"bottom left",gaEventCategory:"Editor",popoverName:"SharingMessage"},this.props.translate("The length includes space for the link to your post and an attached image.",{context:"Post editor sharing message counter explanation"}))}renderTextarea(){const e=this.props.preview||this.props.translate("Write a message for your audience here.");return this.props.requireCount?r.a.createElement(h.a,{disabled:this.props.disabled,placeholder:e,countPlaceholderLength:!0,value:this.getMessage(),onChange:this.onChange,showRemainingCharacters:!0,acceptableLength:this.props.acceptableLength,className:"editor-sharing__message-input"},this.renderInfoPopover()):r.a.createElement(b.a,{disabled:this.props.disabled,value:this.getMessage(),placeholder:e,onChange:this.onChange,className:"editor-sharing__message-input"})}render(){const e=this.props,t=e.displayMessageHeading,s=e.translate;return r.a.createElement("div",{className:"editor-sharing__publicize-message"},t&&r.a.createElement(u.a,{helpText:s("The following text will be shared along with a link to your post."),labelText:s("Customize the message",{context:"Post editor sharing message heading"})},r.a.createElement(m.a,{onNewValue:this.recordStats},this.renderTextarea())),!t&&r.a.createElement(m.a,{onNewValue:this.recordStats},this.renderTextarea()))}}i()(_,"propTypes",{disabled:p.a.bool,message:p.a.string,preview:p.a.string,acceptableLength:p.a.number,requireCount:p.a.bool,displayMessageHeading:p.a.bool,onChange:p.a.func,preFilledMessage:p.a.string}),i()(_,"defaultProps",{disabled:!1,message:"",acceptableLength:280,requireCount:!1,displayMessageHeading:!0,onChange:d.noop,preFilledMessage:""}),t.a=Object(a.b)(null,{recordEditorStat:j.b,recordEditorEvent:j.a})(Object(c.localize)(_))},"./client/post-editor/editor-sharing/publicize-message.scss":function(e,t,s){},"./client/post-editor/editor-sharing/publicize-options.scss":function(e,t,s){},"./client/post-editor/editor-sharing/publicize-services.scss":function(e,t,s){},"./client/post-editor/editor-sharing/style.scss":function(e,t,s){},"./client/state/selectors/is-publicize-enabled.js":function(e,t,s){"use strict";s.d(t,"a",function(){return o});var n=s("./client/state/sites/selectors.js"),i=s("./client/state/post-types/selectors.js");function o(e,t,s){return!0!==Object(n.r)(e,t,"publicize_permanently_disabled")&&!1!==Object(n.I)(e,t,"publicize")&&Object(i.d)(e,t,s,"publicize")}}}]);