(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{"./client/components/data/query-site-domains/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/prop-types/index.js"),a=s.n(n),i=s("./node_modules/react/index.js"),r=s("./node_modules/react-redux/es/index.js"),o=s("./node_modules/redux/es/redux.js"),l=s("./client/state/sites/domains/selectors.js"),c=s("./client/state/sites/domains/actions.js");class p extends i.Component{constructor(e){super(e),this.requestSiteDomains=this.requestSiteDomains.bind(this)}componentWillMount(){this.requestSiteDomains()}componentWillReceiveProps(e){!e.requestingSiteDomains&&e.siteId&&this.props.siteId!==e.siteId&&this.requestSiteDomains(e)}requestSiteDomains(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;!e.requestingSiteDomains&&e.siteId&&e.fetchSiteDomains(e.siteId)}render(){return null}}p.propTypes={siteId:a.a.number,requestingSiteDomains:a.a.bool,fetchSiteDomains:a.a.func},p.defaultProps={fetchSiteDomains:()=>{}},t.a=Object(r.b)((e,t)=>({requestingSiteDomains:Object(l.c)(e,t.siteId)}),e=>Object(o.b)({fetchSiteDomains:c.a},e))(p)},"./client/components/data/query-site-stats/constants.js":function(e,t,s){"use strict";s.d(t,"a",function(){return n});const n=18e5},"./client/components/data/query-site-stats/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=s.n(n),i=s("./node_modules/prop-types/index.js"),r=s.n(i),o=s("./node_modules/react/index.js"),l=s("./node_modules/react-redux/es/index.js"),c=s("./node_modules/react-pure-render/shallowEqual.js"),p=s.n(c),u=s("./node_modules/lodash/lodash.js"),d=s("./client/lib/wp/browser.js");var m=s("./client/state/stats/lists/selectors.js"),h=s("./client/state/stats/lists/utils.js"),b=s("./client/components/data/query-site-stats/constants.js");class g extends o.Component{constructor(){super(...arguments),a()(this,"heartbeatRequest",()=>{const e=this.props,t=e.requesting,s=e.siteId,n=e.statType,a=e.query;t||this.props.requestSiteStats(s,n,a)})}componentDidMount(){this.deferredTimer=Object(u.defer)(()=>this.request())}componentDidUpdate(e){this.props.siteId===e.siteId&&this.props.statType===e.statType&&p()(this.props.query,e.query)||this.request()}componentWillUnmount(){this.clearInterval(),clearTimeout(this.deferredTimer)}request(){const e=this.props,t=e.requesting,s=e.siteId,n=e.statType,a=e.query,i=e.heartbeat;t||(this.props.requestSiteStats(s,n,a),this.clearInterval(),i&&Object(h.d)(a)&&(this.interval=setInterval(this.heartbeatRequest,i)))}clearInterval(){this.interval&&clearInterval(this.interval)}render(){return null}}g.propTypes={siteId:r.a.number.isRequired,statType:r.a.string.isRequired,query:r.a.object,requesting:r.a.bool.isRequired,requestSiteStats:r.a.func.isRequired,heartbeat:r.a.number},g.defaultProps={query:{},heartbeat:b.a};t.a=Object(l.b)((e,t)=>{let s=t.siteId,n=t.statType,a=t.query;return{requesting:Object(m.f)(e,s,n,a)}},{requestSiteStats:function(e,t,s){return n=>{n({type:"SITE_STATS_REQUEST",statType:t,siteId:e,query:s});const a=Object(u.includes)(["statsPodcastDownloads","statsAds","statsOrders","statsTopSellers","statsTopCategories","statsTopCoupons","statsTopEarners","statsStoreReferrers"],t),i="statsVideo"===t?s.postId:s;return(a?d.a.undocumented().site(e):d.a.site(e))[t](i).then(a=>n(function(e,t,s,n,a){return{type:"SITE_STATS_RECEIVE",statType:t,siteId:e,query:s,data:n,date:a}}(e,t,s,a,Date.now()))).catch(a=>{n({type:"SITE_STATS_REQUEST_FAILURE",statType:t,siteId:e,query:s,error:a})})}}})(g)},"./client/components/empty-content/no-sites-message/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./packages/i18n-calypso/dist/esm/index.js"),r=s("./client/config/index.js"),o=s("./client/components/empty-content/index.jsx");t.a=Object(i.localize)(e=>{let t=e.translate;return a.a.createElement(o.a,{title:t("You don't have any WordPress sites yet."),line:t("Would you like to start one?"),action:t("Create Site"),actionURL:Object(r.a)("signup_url")+"?ref=calypso-nosites",illustration:"/calypso/images/illustrations/illustration-nosites.svg"})})},"./client/components/material-icon/index.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/extends.js"),a=s.n(n),i=s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),r=s.n(i),o=s("./node_modules/classnames/index.js"),l=s.n(o),c=s("./node_modules/react/index.js"),p=s.n(c),u=s("./node_modules/prop-types/index.js"),d=s.n(u),m=s("./packages/material-design-icons/svg-sprite/material-icons.svg"),h=s.n(m);function b(e){const t=e.size,s=void 0===t?24:t,n=e.style,i=void 0===n?"outline":n,o=e.icon,c=e.onClick,u=e.className,d=r()(e,["size","style","icon","onClick","className"]),m="material-icon-".concat(o),b=l()("material-icon",m,u),g="icon-".concat(i,"-").concat(o,"-").concat(s,"px");return p.a.createElement("svg",a()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:b,height:s,width:s,onClick:c},d),p.a.createElement("use",{xlinkHref:"".concat(h.a,"#").concat(g)}))}b.propTypes={icon:d.a.string.isRequired,style:d.a.string,size:d.a.number,onClick:d.a.func,className:d.a.string},t.a=p.a.memo(b)},"./client/layout/sidebar/button.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=s.n(n),i=s("./node_modules/prop-types/index.js"),r=s.n(i),o=s("./packages/i18n-calypso/dist/esm/index.js"),l=s("./node_modules/react/index.js"),c=s.n(l),p=s("./client/lib/url/index.js"),u=s("./client/sections-helper.js");class d extends c.a.Component{constructor(){super(...arguments),a()(this,"_preloaded",!1),a()(this,"preload",()=>{!this._preloaded&&this.props.preloadSectionName&&(this._preloaded=!0,Object(u.c)(this.props.preloadSectionName))}),a()(this,"getTarget",()=>this.props.forceTargetInternal?null:Object(p.e)(this.props.href)?"_blank":null)}render(){return this.props.href?c.a.createElement("a",{rel:Object(p.e)(this.props.href)?"external":null,onClick:this.props.onClick,href:this.props.href,target:this.getTarget(),className:"sidebar__button",onMouseEnter:this.preload,"data-tip-target":this.props.tipTarget},this.props.children||this.props.translate("Add")):null}}a()(d,"propTypes",{href:r.a.string,onClick:r.a.func,preloadSectionName:r.a.string,forceTargetInternal:r.a.bool}),a()(d,"defaultProps",{forceTargetInternal:!1}),t.a=Object(o.localize)(d)},"./client/layout/sidebar/expandable.jsx":function(e,t,s){"use strict";var n=s("./node_modules/classnames/index.js"),a=s.n(n),i=s("./node_modules/prop-types/index.js"),r=s.n(i),o=s("./node_modules/react/index.js"),l=s.n(o),c=s("./node_modules/lodash/lodash.js"),p=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),u=s.n(p),d=s("./client/components/gridicon/index.jsx"),m=s("./packages/i18n-calypso/dist/esm/index.js"),h=s("./client/components/button/index.jsx"),b=s("./client/components/translatable/proptype.js");class g extends o.Component{constructor(){super(...arguments),u()(this,"state",{isAdding:!1}),u()(this,"menuAddInput",l.a.createRef()),u()(this,"toggleAdd",()=>{this.state.isAdding||(this.menuAddInput.current.focus(),this.props.onAddClick()),this.setState({isAdding:!this.state.isAdding})}),u()(this,"handleAddKeyDown",e=>{const t=this.menuAddInput.current.value;13===e.keyCode&&t.length>0&&(e.preventDefault(),this.props.onAddSubmit(t),this.menuAddInput.current.value="",this.toggleAdd())})}render(){const e=this.props,t=e.translate,s=e.addLabel,n=e.addPlaceholder,i=a()("sidebar__menu-add-item",{"is-add-open":this.state.isAdding});return l.a.createElement("div",{className:i},this.props.hideAddButton?null:l.a.createElement(h.a,{compact:!0,className:"sidebar__menu-add-button",onClick:this.toggleAdd},t("Add")),l.a.createElement("div",{className:"sidebar__menu-add"},l.a.createElement("input",{"aria-label":s,className:"sidebar__menu-add-input",type:"text",placeholder:n,ref:this.menuAddInput,onKeyDown:this.handleAddKeyDown}),l.a.createElement(d.a,{icon:"cross-small",onClick:this.toggleAdd})))}}u()(g,"propTypes",{addLabel:b.a,addPlaceholder:b.a,onAddSubmit:r.a.func,onAddClick:r.a.func,hideAddButton:r.a.bool,translate:r.a.func}),u()(g,"defaultProps",{onAddSubmit:c.noop,onAddClick:c.noop,translate:c.identity});var j=Object(m.localize)(g),y=s("./client/components/count/index.jsx"),k=s("./client/components/material-icon/index.jsx"),f=s("./client/layout/sidebar/heading.jsx");const _=e=>{let t=e.title,s=e.count,n=e.onClick,a=e.icon,i=e.materialIcon,r=e.expanded,o=e.menuId;return l.a.createElement(f.a,{"aria-controls":o,"aria-expanded":r,onClick:n},a?l.a.createElement(d.a,{icon:a}):null,i?l.a.createElement(k.a,{icon:i}):null,l.a.createElement(d.a,{icon:"chevron-down"}),l.a.createElement("span",null,t),void 0!==s?l.a.createElement(y.a,{count:s}):null)};_.propTypes={title:b.a.isRequired,count:r.a.number,onClick:r.a.func,icon:r.a.string,materialIcon:r.a.string},_.defaultProps={onClick:c.noop};var S=_,O=s("./client/layout/sidebar/menu.jsx");const E=e=>{const t=e.className,s=e.title,n=e.count,i=e.onClick,r=e.icon,o=e.materialIcon,p=e.hideAddButton,u=e.addLabel,d=e.addPlaceholder,m=e.onAddClick,h=e.onAddSubmit;let b=e.expanded;null===b&&(b=function e(t){let s=!1;return l.a.Children.forEach(t,t=>{if(s)return!0;if(Object(c.get)(t,"props.selected"))s=!0;else{const n=Object(c.get)(t,"props.children");n&&(s=e(n))}}),s}(e.children));const g=a()(t,{"is-toggle-open":!!b,"is-togglable":!0}),y=Object(c.uniqueId)("menu");let k=null;return(m||h||u||d)&&(k=l.a.createElement(j,{hideAddButton:p,addLabel:u,addPlaceholder:d,onAddClick:m,onAddSubmit:h})),l.a.createElement(O.a,{className:g},l.a.createElement(S,{title:s,count:n,onClick:i,icon:r,materialIcon:o,expanded:b,menuId:y}),k,l.a.createElement("ul",{role:"region",id:y,className:"sidebar__menu-list",hidden:!b},e.children))};E.propTypes={title:r.a.oneOfType([r.a.string,r.a.element]).isRequired,count:r.a.number,addLabel:b.a,addPlaceholder:b.a,onAddSubmit:r.a.func,onAddClick:r.a.func,onClick:r.a.func,hideAddButton:r.a.bool,icon:r.a.string,expanded:r.a.bool},E.defaultProps={hideAddButton:!1};t.a=E},"./client/layout/sidebar/footer.jsx":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n);t.a=(e=>{let t=e.children;return t?a.a.createElement("div",{className:"sidebar__footer"},t):null})},"./client/layout/sidebar/heading.jsx":function(e,t,s){"use strict";var n=s("./node_modules/@babel/runtime/helpers/extends.js"),a=s.n(n),i=s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),r=s.n(i),o=s("./node_modules/react/index.js"),l=s.n(o);t.a=(e=>{let t=e.children,s=e.onClick,n=r()(e,["children","onClick"]);const i=s?0:-1;let o=null;return s&&(o=(e=>{13===e.keyCode&&(e.preventDefault(),s())})),l.a.createElement("h2",a()({tabIndex:i,className:"sidebar__heading",onKeyDown:o,onClick:s},n),t)})},"./client/layout/sidebar/index.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return h});var n=s("./node_modules/@babel/runtime/helpers/extends.js"),a=s.n(n),i=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),r=s.n(i),o=s("./node_modules/prop-types/index.js"),l=s.n(o),c=s("./node_modules/react/index.js"),p=s.n(c),u=s("./node_modules/classnames/index.js"),d=s.n(u),m=s("./client/layout/sidebar/region.jsx");class h extends p.a.Component{render(){const e=p.a.Children.toArray(this.props.children).some(e=>e.type===m.a),t=void 0===this.props.onClick?{}:{onClick:this.props.onClick},s=d()(this.props.className,{"has-regions":e},{sidebar:void 0===this.props.hasSidebar||this.props.hasSidebar});return p.a.createElement("ul",a()({className:s},t,{"data-tip-target":"sidebar"}),this.props.children)}}r()(h,"displayName","Sidebar"),r()(h,"propTypes",{className:l.a.string,hasSidebar:l.a.bool,onClick:l.a.func})},"./client/layout/sidebar/item.jsx":function(e,t,s){"use strict";s.d(t,"a",function(){return g});var n=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=s.n(n),i=s("./node_modules/react/index.js"),r=s.n(i),o=s("./node_modules/prop-types/index.js"),l=s.n(o),c=s("./node_modules/classnames/index.js"),p=s.n(c),u=s("./client/components/gridicon/index.jsx"),d=s("./client/lib/url/index.js"),m=s("./client/components/material-icon/index.jsx"),h=s("./client/sections-helper.js"),b=s("./client/components/translatable/proptype.js");class g extends r.a.Component{constructor(){super(...arguments),a()(this,"_preloaded",!1),a()(this,"preload",()=>{!this._preloaded&&this.props.preloadSectionName&&(this._preloaded=!0,Object(h.c)(this.props.preloadSectionName))})}render(){const e=Object(d.e)(this.props.link),t=e&&!this.props.forceInternalLink,s=p()(this.props.className,{selected:this.props.selected}),n=this.props,a=n.materialIcon,i=n.icon;return r.a.createElement("li",{className:s,"data-tip-target":this.props.tipTarget,"data-post-type":this.props.postType},r.a.createElement("a",{onClick:this.props.onNavigate,href:this.props.link,target:t?"_blank":null,rel:e?"noopener noreferrer":null,onMouseEnter:this.preload},i&&!a?r.a.createElement(u.a,{icon:i,size:24}):null,a?r.a.createElement(m.a,{icon:a}):null,r.a.createElement("span",{className:"sidebar__menu-link-text menu-link-text","data-e2e-sidebar":this.props.label},this.props.label),t&&r.a.createElement(u.a,{icon:"external",size:24})),this.props.children)}}a()(g,"propTypes",{label:b.a.isRequired,className:l.a.string,link:l.a.string.isRequired,onNavigate:l.a.func,icon:l.a.string,materialIcon:l.a.string,selected:l.a.bool,preloadSectionName:l.a.string,forceInternalLink:l.a.bool,testTarget:l.a.string,tipTarget:l.a.string})},"./client/layout/sidebar/menu.jsx":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/classnames/index.js"),r=s.n(i);t.a=(e=>{let t=e.children,s=e.className;return a.a.createElement("li",{className:r()("sidebar__menu",s)},t)})},"./client/layout/sidebar/region.jsx":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/classnames/index.js"),r=s.n(i),o=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=s.n(o),c=s("./node_modules/prop-types/index.js"),p=s.n(c),u=s("./packages/i18n-calypso/dist/esm/index.js"),d=s("./client/components/button/index.jsx");class m extends a.a.Component{constructor(){super(...arguments),l()(this,"onClick",e=>{e.preventDefault();const t=document.getElementById(this.props.skipToElementId);/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus()})}render(){return a.a.createElement(d.a,{onClick:this.onClick,className:"sidebar__skip-navigation"},this.props.translate("Skip navigation"))}}l()(m,"propTypes",{skipToElementId:p.a.string});var h=Object(u.localize)(m);t.a=(e=>{let t=e.children,s=e.className;return a.a.createElement("div",{className:r()("sidebar__region",s)},a.a.createElement(h,{skipToElementId:"primary"}),t)})},"./client/lib/compare-props/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/lodash.js");t.a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.ignore,s=e.deep,a=e.shallow;return(e,i)=>{for(const r in e)if(!t||!Object(n.includes)(t,r))if(s&&Object(n.includes)(s,r)){if(!Object(n.isEqual)(e[r],i[r]))return!1}else if((!a||Object(n.includes)(a,r))&&e[r]!==i[r])return!1;for(const s in i)if(!(s in e)&&(!t||!Object(n.includes)(t,s))&&(!a||Object(n.includes)(a,s)))return!1;return!0}}},"./client/my-sites/controller.js":function(e,t,s){"use strict";var n=s("./node_modules/page/page.js"),a=s.n(n),i=s("./node_modules/react/index.js"),r=s.n(i),o=s("./packages/i18n-calypso/dist/esm/index.js"),l=s.n(o),c=s("./node_modules/lodash/lodash.js"),p=s("./client/state/sites/actions.js"),u=s("./client/state/sites/selectors.js"),d=s("./client/state/ui/selectors.js"),m=s("./client/state/ui/actions.js"),h=s("./client/state/preferences/actions.js"),b=s("./client/state/preferences/selectors.js"),g=s("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=s.n(g),y=s("./node_modules/prop-types/index.js"),k=s.n(y),f=s("./node_modules/react-click-outside/dist/index.js"),_=s.n(f),S=s("./node_modules/react-redux/es/index.js"),O=s("./client/components/close-on-escape/index.jsx"),E=s("./client/components/site-selector/index.jsx"),x=s("./client/lib/touch-detect/index.js"),v=s("./client/state/ui/layout-focus/selectors.js"),I=s("./client/state/ui/layout-focus/actions.js");class C extends r.a.Component{constructor(){super(...arguments),j()(this,"state",{isAutoFocused:!1,isRendered:"sites"===this.props.currentLayoutFocus}),j()(this,"onClose",(e,t)=>{"Escape"===e.key?this.closePicker():(this.props.setNextLayoutFocus("sidebar"),t&&this.scrollToTop()),this.props.onClose(e,t)}),j()(this,"scrollToTop",()=>{document.getElementById("secondary").scrollTop=0,window.scrollTo(0,0)}),j()(this,"closePicker",e=>{"sites"===this.props.currentLayoutFocus&&(this.props.setLayoutFocus("sidebar"),e&&this.scrollToTop())}),j()(this,"handleClickOutside",()=>{this.closePicker(null)})}componentWillReceiveProps(e){if("sites"!==e.currentLayoutFocus||this.state.isRendered||this.setState({isRendered:!0}),!e.currentLayoutFocus||Object(x.a)())return;const t="sites"===e.currentLayoutFocus;t!==this.state.isAutoFocused&&this.setState({isAutoFocused:t})}render(){return r.a.createElement("div",null,r.a.createElement(O.a,{onEscape:this.closePicker}),r.a.createElement(E.a,{isPlaceholder:!this.state.isRendered,indicator:!0,showAddNewSite:!0,showAllSites:!0,allSitesPath:this.props.allSitesPath,siteBasePath:this.props.siteBasePath,autoFocus:this.state.isAutoFocused,onClose:this.onClose,groups:!0}))}}j()(C,"displayName","SitePicker"),j()(C,"propTypes",{onClose:k.a.func,currentLayoutFocus:k.a.string,setNextLayoutFocus:k.a.func.isRequired,setLayoutFocus:k.a.func.isRequired}),j()(C,"defaultProps",{onClose:c.noop});var w=Object(S.b)(function(e){return{currentLayoutFocus:Object(v.a)(e)}},{setNextLayoutFocus:I.c,setLayoutFocus:I.b})(_()(C)),A=s("./node_modules/@babel/runtime/helpers/objectSpread.js"),N=s.n(A),T=s("./node_modules/classnames/index.js"),M=s.n(T),P=s("./node_modules/debug/src/browser.js"),q=s.n(P),L=s("./client/components/gridicon/index.jsx"),U=s("./node_modules/url/url.js"),D=s("./client/components/button/index.jsx"),R=s("./client/config/index.js"),B=s("./client/blocks/all-sites/index.jsx"),z=s("./client/components/async-load/index.jsx"),J=s("./client/components/card/index.jsx"),F=s("./client/blocks/site/index.jsx"),V=s("./client/state/selectors/get-selected-or-all-sites.js"),G=s("./client/state/selectors/get-visible-sites.js"),W=s("./client/state/analytics/actions.js"),Y=(s("./client/my-sites/current-site/style.scss"),function(e){Promise.all([s.e(149),s.e(69)]).then(s.bind(null,"./client/my-sites/current-site/notice.jsx")).then(function(t){e(t.default)})}),H=function(e){Promise.all([s.e(141),s.e(53)]).then(s.bind(null,"./client/my-sites/current-site/domain-warnings.jsx")).then(function(t){e(t.default)})},K=function(e){Promise.all([s.e(149),s.e(159)]).then(s.bind(null,"./client/my-sites/current-site/stale-cart-items-notice.js")).then(function(t){e(t.default)})};class Q extends i.Component{constructor(){super(...arguments),j()(this,"switchSites",e=>{e.preventDefault(),e.stopPropagation(),this.props.setLayoutFocus("sites"),this.props.recordGoogleEvent("Sidebar","Clicked Switch Site")})}render(){const e=this.props,t=e.selectedSite,s=e.translate;return e.anySiteSelected.length&&(t||this.props.hasAllSitesList)?r.a.createElement(J.a,{className:"current-site"},this.props.siteCount>1&&r.a.createElement("span",{className:"current-site__switch-sites"},r.a.createElement(D.a,{borderless:!0,onClick:this.switchSites},r.a.createElement(L.a,{icon:"chevron-left"}),r.a.createElement("span",{className:"current-site__switch-sites-label"},s("Switch Site")))),t?r.a.createElement("div",null,r.a.createElement(F.a,{site:t,homeLink:!0})):r.a.createElement(B.a,null),r.a.createElement(z.a,{require:Y,placeholder:null,site:t}),r.a.createElement(z.a,{require:H,placeholder:null}),r.a.createElement(z.a,{require:K,placeholder:null})):r.a.createElement(J.a,{className:"current-site is-loading"},r.a.createElement("div",{className:"site"},r.a.createElement("a",{className:"site__content"},r.a.createElement("div",{className:"site-icon"}),r.a.createElement("div",{className:"site__info"},r.a.createElement("span",{className:"site__title"},s("Loading My Sitesâ€¦"))))))}}j()(Q,"propTypes",{siteCount:k.a.number.isRequired,setLayoutFocus:k.a.func.isRequired,selectedSite:k.a.object,translate:k.a.func.isRequired,anySiteSelected:k.a.array});var $=Object(S.b)(e=>({selectedSite:Object(d.d)(e),anySiteSelected:Object(V.a)(e),siteCount:Object(G.a)(e).length,hasAllSitesList:Object(u.A)(e)}),{recordGoogleEvent:W.g,setLayoutFocus:I.b})(Object(o.localize)(Q)),X=s("./client/layout/sidebar/expandable.jsx"),Z=s("./client/layout/sidebar/item.jsx"),ee=s("./client/layout/sidebar/button.jsx"),te=s("./client/state/post-types/selectors.js"),se=s("./client/components/data/query-post-types/index.jsx"),ne=s("./client/lib/analytics/index.js"),ae=s("./client/lib/formatting/index.js"),ie=s("./client/lib/compare-props/index.js"),re=s("./client/my-sites/media-library/upload-button.jsx"),oe=s("./client/state/selectors/are-all-sites-single-user.js"),le=s("./client/state/selectors/can-current-user.js");function ce(e,t){return Array.isArray(e)||(e=[e]),Object(c.some)(e,e=>(function(e,t){return e===t||e.slice(0,t.length)===t&&Object(c.includes)("/?",e[t.length])})(t,e))}var pe=s("./client/state/selectors/get-selected-editor.js"),ue=s("./client/state/selectors/is-wp-admin-gutenberg-enabled.js"),de=s("./client/state/selectors/get-editor-url.js"),me=s("./client/state/selectors/is-vip-site.js");class he extends i.PureComponent{constructor(){super(...arguments),j()(this,"getImportItem",()=>{const e=this.props,t=e.isJetpack;return{name:"import",label:(0,e.translate)("Import"),capability:"manage_options",queryable:!t,config:"manage/import-in-sidebar",link:"/settings/import",paths:["/settings/import"],wpAdminLink:"import.php",showOnAllMySites:!1,forceInternalLink:!t}}),j()(this,"onNavigate",e=>()=>{Object(c.includes)(["post","page"],e)||ne.default.mc.bumpStat("calypso_publish_menu_click",e),this.props.recordTracksEvent("calypso_mysites_manage_sidebar_item_clicked",{menu_item:e}),this.props.onNavigate()}),j()(this,"trackSidebarButtonClick",e=>()=>{this.props.recordTracksEvent("calypso_mysites_manage_sidebar_button_clicked",{menu_item:e})})}getMyParameter(){const e=this.props,t=e.allSingleSites,s=e.isJetpack,n=e.isSingleUser;return e.siteId?n||s?"":"/my":t?"":"/my"}getDefaultMenuItems(){const e=this.props,t=e.wpAdminGutenberg,s=e.getEditorUrl,n=e.siteSlug,a=e.translate;return[{name:"page",label:a("Site Pages"),capability:"edit_pages",queryable:!0,config:"manage/pages",link:"/pages",buttonLink:s("page"),forceButtonTargetInternal:t,wpAdminLink:"edit.php?post_type=page",showOnAllMySites:!0},{name:"post",label:a("Blog Posts"),capability:"edit_posts",config:"manage/posts",queryable:!0,link:"/posts"+this.getMyParameter(),paths:["/posts","/posts/my"],buttonLink:s("post"),forceButtonTargetInternal:t,wpAdminLink:"edit.php",showOnAllMySites:!0},{name:"media",label:a("Media"),capability:"upload_files",queryable:!0,link:"/media",buttonLink:"/media/"+n,wpAdminLink:"upload.php",showOnAllMySites:!1},{name:"comments",label:a("Comments"),capability:"edit_posts",queryable:!0,config:"manage/comments",link:"/comments",paths:["/comment","/comments"],wpAdminLink:"edit-comments.php",showOnAllMySites:!1}]}getPluginItem(){const e=this.props,t=e.isAtomicSite,s=e.siteSlug,n=e.translate,a=s?"/plugins/manage/".concat(s):"/plugins/manage";return{name:"plugins",label:n("Plugins"),capability:"manage_options",queryable:!t,config:"manage/plugins",link:"/plugins",paths:["/extensions","/plugins"],wpAdminLink:"plugin-install.php?calypsoify=1",showOnAllMySites:!0,buttonLink:t?"":a,buttonText:n("Manage"),extraIcon:t?"chevron-right":null,customClassName:t?"sidebar__plugins-item":"",forceInternalLink:t}}renderMenuItem(e){const t=this.props,s=t.canCurrentUser,n=t.site,a=t.siteId,i=t.siteAdminUrl;if(a&&!s(e.capability))return null;if("attachment"===e.name)return null;const o=!e.config||R.a.isEnabled(e.config);if(!(a||o&&e.showOnAllMySites))return null;let l,p,u;switch(l=o&&e.queryable||!i?Object(c.compact)([e.link,this.props.siteSlug]).join("/"):i+e.wpAdminLink,p=Object(c.includes)(["post","page"],e.name)?"posts-pages":"comments"===e.name?"comments":"posts-custom",e.name){case"post":u="posts";break;case"page":u="pages";break;case"import":u="cloud-upload";break;case"jetpack-portfolio":u="folder";break;case"jetpack-testimonial":u="quote";break;case"media":u="image";break;case"comments":u="chat";break;case"plugins":u="plugins";break;default:u="custom-post-type"}const d=e.extraIcon&&r.a.createElement("div",{className:"manage_menu__".concat(e.name,"-extra-icon")},r.a.createElement(L.a,{icon:e.extraIcon}));return r.a.createElement(Z.a,{className:e.customClassName,key:e.name,label:e.label,selected:ce(e.paths||e.link,this.props.path),link:l,onNavigate:this.onNavigate(e.name),icon:u,preloadSectionName:p,postType:"plugins"===e.name?null:e.name,tipTarget:"side-menu-".concat(e.name),forceInternalLink:e.forceInternalLink},"media"===e.name&&r.a.createElement(re.a,{className:"sidebar__button",site:n,href:e.buttonLink,onClick:this.trackSidebarButtonClick("media")},this.props.translate("Add")),"media"!==e.name&&r.a.createElement(ee.a,{onClick:this.trackSidebarButtonClick(e.name),href:e.buttonLink,preloadSectionName:"post-editor",forceTargetInternal:e.forceButtonTargetInternal},e.buttonText||this.props.translate("Add")),d)}getCustomMenuItems(){const e=this.props.isVip,t=Object(c.omit)(this.props.postTypes,["post","page","wp_block"]);return Object(c.reduce)(t,(t,s,n)=>{if(!1===s.show_ui)return t;if("feedback"===n)return t.concat({name:s.name,label:Object(ae.b)(Object(c.get)(s.labels,"menu_name",s.label)),config:"manage/custom-post-types",queryable:!1,capability:Object(c.get)(s.capabilities,"edit_posts"),link:"/types/"+s.name,wpAdminLink:e?"edit.php?post_type=feedback":"edit.php?post_type=feedback&calypsoify=1",showOnAllMySites:!1,forceButtonTargetInternal:!0});const a=R.a.isEnabled("manage/custom-post-types")&&s.api_queryable?this.props.getEditorUrl(n):void 0;return t.concat({name:s.name,label:Object(ae.b)(Object(c.get)(s.labels,"menu_name",s.label)),config:"manage/custom-post-types",queryable:s.api_queryable,capability:Object(c.get)(s.capabilities,"edit_posts"),link:"/types/"+s.name,wpAdminLink:"edit.php?post_type="+s.name,showOnAllMySites:!1,buttonLink:a,forceButtonTargetInternal:this.props.wpAdminGutenberg})},[])}render(){const e=[...this.getDefaultMenuItems(),...this.getCustomMenuItems()];return R.a.isEnabled("calypsoify/plugins")&&e.push(this.getPluginItem()),R.a.isEnabled("manage/import-in-sidebar")&&e.push(this.getImportItem()),r.a.createElement("ul",null,this.props.siteId&&r.a.createElement(se.a,{siteId:this.props.siteId}),e.map(this.renderMenuItem,this))}}j()(he,"propTypes",{path:k.a.string,onNavigate:k.a.func,siteId:k.a.number,allSingleSites:k.a.bool,canCurrentUser:k.a.func,isJetpack:k.a.bool,isSingleUser:k.a.bool,postTypes:k.a.object,getEditorUrl:k.a.func,siteAdminUrl:k.a.string,site:k.a.oneOfType([k.a.object,k.a.bool]),siteSlug:k.a.string,wpAdminGutenberg:k.a.bool});var be=Object(S.b)((e,t)=>{let s=t.siteId;return{allSingleSites:Object(oe.a)(e),canCurrentUser:Object(c.partial)(le.a,e,s),isJetpack:Object(u.J)(e,s),isSingleUser:Object(u.Q)(e,s),postTypes:Object(te.b)(e,s),getEditorUrl:Object(c.partial)(de.b,e,s,null),siteAdminUrl:Object(u.l)(e,s),site:Object(u.k)(e,s),siteSlug:Object(u.v)(e,s),isVip:Object(me.a)(e,s),wpAdminGutenberg:Object(ue.a)(e,s)&&"gutenberg"===Object(pe.a)(e,s)}},{recordTracksEvent:W.i},null,{areStatePropsEqual:Object(ie.a)({ignore:["canCurrentUser","getEditorUrl"]})})(Object(o.localize)(he)),ge=s("./client/layout/sidebar/index.jsx"),je=s("./client/layout/sidebar/footer.jsx"),ye=s("./client/layout/sidebar/heading.jsx"),ke=s("./client/layout/sidebar/menu.jsx"),fe=s("./client/layout/sidebar/region.jsx");class _e extends i.PureComponent{constructor(){super(...arguments),j()(this,"onNavigate",e=>()=>{Object(c.includes)(["post","page"],e)||ne.default.mc.bumpStat("calypso_publish_menu_click",e),this.props.recordTracksEvent("calypso_mysites_site_sidebar_item_clicked",{menu_item:e}),this.props.onNavigate()}),j()(this,"trackSidebarButtonClick",e=>()=>{this.props.recordTracksEvent("calypso_mysites_manage_sidebar_button_clicked",{menu_item:e})})}getMyParameter(){const e=this.props,t=e.allSingleSites,s=e.isJetpack,n=e.isSingleUser;return e.siteId?n||s?"":"/my":t?"":"/my"}getDefaultMenuItems(){const e=this.props,t=e.wpAdminGutenberg,s=e.getEditorUrl,n=e.siteSlug,a=e.translate;return[{name:"page",label:a("Pages"),capability:"edit_pages",queryable:!0,config:"manage/pages",link:"/pages",buttonLink:s("page"),forceButtonTargetInternal:t,wpAdminLink:"edit.php?post_type=page",showOnAllMySites:!0},{name:"post",label:a("Posts"),capability:"edit_posts",config:"manage/posts",queryable:!0,link:"/posts"+this.getMyParameter(),paths:["/posts","/posts/my"],buttonLink:s("post"),forceButtonTargetInternal:t,wpAdminLink:"edit.php",showOnAllMySites:!0},{name:"media",label:a("Media"),capability:"upload_files",queryable:!0,link:"/media",buttonLink:"/media/"+n,wpAdminLink:"upload.php",showOnAllMySites:!1},{name:"comments",label:a("Comments"),capability:"edit_posts",queryable:!0,config:"manage/comments",link:"/comments",paths:["/comment","/comments"],wpAdminLink:"edit-comments.php",showOnAllMySites:!1}]}renderMenuItem(e){const t=this.props,s=t.canCurrentUser,n=t.site,a=t.siteId,i=t.siteAdminUrl;if(a&&!s(e.capability))return null;if("attachment"===e.name)return null;const o=!e.config||R.a.isEnabled(e.config);if(!(a||o&&e.showOnAllMySites))return null;let l,p,u;switch(l=o&&e.queryable||!i?Object(c.compact)([e.link,this.props.siteSlug]).join("/"):i+e.wpAdminLink,p=Object(c.includes)(["post","page"],e.name)?"posts-pages":"comments"===e.name?"comments":"posts-custom",e.name){case"post":u="posts";break;case"page":u="pages";break;case"import":u="cloud-upload";break;case"jetpack-portfolio":u="folder";break;case"jetpack-testimonial":u="quote";break;case"media":u="image";break;case"comments":u="chat";break;case"plugins":u="plugins";break;default:u="custom-post-type"}const d=e.extraIcon&&r.a.createElement("div",{className:"manage_menu__".concat(e.name,"-extra-icon")},r.a.createElement(L.a,{icon:e.extraIcon}));return r.a.createElement(Z.a,{className:e.customClassName,key:e.name,label:e.label,selected:ce(e.paths||e.link,this.props.path),link:l,onNavigate:this.onNavigate(e.name),icon:u,preloadSectionName:p,postType:"plugins"===e.name?null:e.name,tipTarget:"side-menu-".concat(e.name),forceInternalLink:e.forceInternalLink},"media"===e.name&&r.a.createElement(re.a,{className:"sidebar__button",site:n,href:e.buttonLink,onClick:this.trackSidebarButtonClick("media")},this.props.translate("Add")),"media"!==e.name&&r.a.createElement(ee.a,{onClick:this.trackSidebarButtonClick(e.name),href:e.buttonLink,preloadSectionName:"post-editor",forceTargetInternal:e.forceButtonTargetInternal},e.buttonText||this.props.translate("Add")),d)}getCustomMenuItems(){const e=this.props.isVip,t=Object(c.omit)(this.props.postTypes,["post","page","wp_block"]);return Object(c.reduce)(t,(t,s,n)=>{if(!1===s.show_ui)return t;if("feedback"===n)return t.concat({name:s.name,label:Object(ae.b)(Object(c.get)(s.labels,"menu_name",s.label)),config:"manage/custom-post-types",queryable:!1,capability:Object(c.get)(s.capabilities,"edit_posts"),link:"/types/"+s.name,wpAdminLink:e?"edit.php?post_type=feedback":"edit.php?post_type=feedback&calypsoify=1",showOnAllMySites:!1,forceButtonTargetInternal:!0});const a=R.a.isEnabled("manage/custom-post-types")&&s.api_queryable?this.props.getEditorUrl(n):void 0;return t.concat({name:s.name,label:Object(ae.b)(Object(c.get)(s.labels,"menu_name",s.label)),config:"manage/custom-post-types",queryable:s.api_queryable,capability:Object(c.get)(s.capabilities,"edit_posts"),link:"/types/"+s.name,wpAdminLink:"edit.php?post_type="+s.name,showOnAllMySites:!1,buttonLink:a,forceButtonTargetInternal:this.props.wpAdminGutenberg})},[])}render(){const e=[...this.getDefaultMenuItems(),...this.getCustomMenuItems()];return r.a.createElement("ul",null,this.props.siteId&&r.a.createElement(se.a,{siteId:this.props.siteId}),e.map(this.renderMenuItem,this))}}j()(_e,"propTypes",{path:k.a.string,onNavigate:k.a.func,siteId:k.a.number,allSingleSites:k.a.bool,canCurrentUser:k.a.func,isJetpack:k.a.bool,isSingleUser:k.a.bool,postTypes:k.a.object,getEditorUrl:k.a.func,siteAdminUrl:k.a.string,site:k.a.oneOfType([k.a.object,k.a.bool]),siteSlug:k.a.string,wpAdminGutenberg:k.a.bool});var Se=Object(S.b)((e,t)=>{let s=t.siteId;return{allSingleSites:Object(oe.a)(e),canCurrentUser:Object(c.partial)(le.a,e,s),isJetpack:Object(u.J)(e,s),isSingleUser:Object(u.Q)(e,s),postTypes:Object(te.b)(e,s),getEditorUrl:Object(c.partial)(de.b,e,s,null),siteAdminUrl:Object(u.l)(e,s),site:Object(u.k)(e,s),siteSlug:Object(u.v)(e,s),isVip:Object(me.a)(e,s),wpAdminGutenberg:Object(ue.a)(e,s)&&"gutenberg"===Object(pe.a)(e,s)}},{recordTracksEvent:W.i},null,{areStatePropsEqual:Object(ie.a)({ignore:["canCurrentUser","getEditorUrl"]})})(Object(o.localize)(_e)),Oe=s("./client/components/data/query-site-stats/index.jsx"),Ee=s("./client/state/stats/lists/selectors.js");const xe=e=>{let t=e.isJetpack,s=e.siteUrl,n=e.className,a=e.siteId,i=e.highestViews,o=e.translate;if(!a||!s||t)return null;const l=i?o("Highest hourly views %(highestViews)s",{args:{highestViews:i}}):null;return r.a.createElement("span",null,a&&r.a.createElement(Oe.a,{siteId:a,statType:"statsInsights"}),r.a.createElement("img",{className:n,title:l,src:"".concat(s,"/wp-includes/charts/admin-bar-hours-scale-2x.php?masterbar=1&s=").concat(a)}))};xe.propTypes={className:k.a.string,siteId:k.a.number,isJetpack:k.a.bool,siteUrl:k.a.string};var ve=Object(S.b)((e,t)=>{const s=t.siteId,n=Object(c.get)(Object(Ee.c)(e,s,"statsInsights"),"hourlyViews",[]),a=Object(c.sortBy)(Object(c.mapValues)(n));return{isJetpack:Object(u.J)(e,s),siteUrl:Object(u.r)(e,s,"unmapped_url"),highestViews:a.length?a[a.length-1]:0}})(Object(o.localize)(xe));class Ie extends i.PureComponent{constructor(){super(...arguments),j()(this,"getImportItem",()=>{const e=this.props,t=e.isJetpack;return{name:"import",label:(0,e.translate)("Import"),capability:"manage_options",queryable:!t,config:"manage/import-in-sidebar",link:"/settings/import",paths:["/settings/import"],wpAdminLink:"import.php",showOnAllMySites:!1,forceInternalLink:!t}}),j()(this,"onNavigate",e=>()=>{Object(c.includes)(["post","page"],e)||ne.default.mc.bumpStat("calypso_publish_menu_click",e),this.props.recordTracksEvent("calypso_mysites_tools_sidebar_item_clicked",{menu_item:e}),this.props.onNavigate()})}getPluginItem(){const e=this.props,t=e.isAtomicSite,s=e.siteSlug,n=e.translate,a=s?"/plugins/manage/".concat(s):"/plugins/manage";return{name:"plugins",label:n("Plugins"),capability:"manage_options",queryable:!t,config:"manage/plugins",link:"/plugins",paths:["/extensions","/plugins"],wpAdminLink:"plugin-install.php?calypsoify=1",showOnAllMySites:!0,buttonLink:t?"":a,buttonText:n("Manage"),extraIcon:t?"chevron-right":null,customClassName:t?"sidebar__plugins-item":"",forceInternalLink:t}}renderMenuItem(e){const t=this.props,s=t.canCurrentUser,n=t.siteId,a=t.siteAdminUrl;if(n&&!s(e.capability))return null;const i=!e.config||R.a.isEnabled(e.config);if(!(n||i&&e.showOnAllMySites))return null;let o;return o=i&&e.queryable||!a?Object(c.compact)([e.link,this.props.siteSlug]).join("/"):a+e.wpAdminLink,r.a.createElement(Z.a,{className:e.customClassName,key:e.name,label:e.label,selected:ce(e.paths||e.link,this.props.path),link:o,onNavigate:this.onNavigate(e.name),postType:"plugins"===e.name?null:e.name,tipTarget:"side-menu-".concat(e.name),forceInternalLink:e.forceInternalLink})}render(){const e=[];return R.a.isEnabled("calypsoify/plugins")&&e.push(this.getPluginItem()),R.a.isEnabled("manage/import-in-sidebar")&&e.push(this.getImportItem()),r.a.createElement("ul",null,e.map(this.renderMenuItem,this))}}j()(Ie,"propTypes",{path:k.a.string,onNavigate:k.a.func,siteId:k.a.number,canCurrentUser:k.a.func,isJetpack:k.a.bool,siteAdminUrl:k.a.string,siteSlug:k.a.string});var Ce=Object(S.b)((e,t)=>{let s=t.siteId;return{canCurrentUser:Object(c.partial)(le.a,e,s),isJetpack:Object(u.J)(e,s),siteAdminUrl:Object(u.l)(e,s),siteSlug:Object(u.v)(e,s)}},{recordTracksEvent:W.i},null,{areStatePropsEqual:Object(ie.a)({ignore:["canCurrentUser"]})})(Object(o.localize)(Ie)),we=s("./client/components/jetpack-logo/index.jsx"),Ae=s("./client/lib/products-values/index.js"),Ne=s("./client/state/current-user/selectors.js");var Te=s("./client/state/selectors/can-current-user-manage-plugins.js"),Me=s("./client/state/selectors/get-primary-site-id.js"),Pe=s("./client/state/selectors/has-jetpack-sites.js"),qe=s("./client/state/selectors/has-site-pending-automated-transfer.js"),Le=s("./client/state/selectors/is-domain-only-site.js"),Ue=s("./client/state/selectors/is-site-automated-transfer.js"),De=s("./client/lib/route/index.js"),Re=s("./client/state/automated-transfer/selectors.js"),Be=s("./client/state/automated-transfer/constants.js");var ze=s("./client/lib/ads/utils.js");const Je=q()("calypso:my-sites:sidebar");class Fe extends i.Component{constructor(){super(...arguments),j()(this,"onNavigate",()=>{this.props.setNextLayoutFocus("content"),window.scrollTo(0,0)}),j()(this,"onViewSiteClick",e=>{const t=this.props,s=t.isPreviewable,n=t.siteSuffix;return s?e.altKey||e.ctrlKey||e.metaKey||e.shiftKey?(this.trackMenuItemClick("view_site_modifier"),void this.props.recordGoogleEvent("Sidebar","Clicked View Site | Modifier Key")):(e.preventDefault(),this.trackMenuItemClick("view_site"),this.props.recordGoogleEvent("Sidebar","Clicked View Site | Calypso"),void a()("/view"+n)):(this.trackMenuItemClick("view_site_unpreviewable"),void this.props.recordGoogleEvent("Sidebar","Clicked View Site | Unpreviewable"))}),j()(this,"trackStatsClick",()=>{this.trackMenuItemClick("stats"),this.onNavigate()}),j()(this,"trackActivityClick",()=>{this.trackMenuItemClick("activity"),this.onNavigate()}),j()(this,"trackEarnClick",()=>{this.trackMenuItemClick("earn"),this.onNavigate()}),j()(this,"trackCustomizeClick",()=>{this.trackMenuItemClick("customize"),this.onNavigate()}),j()(this,"trackSidebarButtonClick",e=>()=>{this.props.recordTracksEvent("calypso_mysites_sidebar_"+e.replace(/-/g,"_")+"_sidebar_button_clicked")}),j()(this,"trackPluginsClick",()=>{this.trackMenuItemClick("plugins"),this.onNavigate()}),j()(this,"trackDomainsClick",()=>{this.trackMenuItemClick("domains"),this.onNavigate()}),j()(this,"trackStoreClick",()=>{this.trackMenuItemClick("store"),this.props.recordTracksEvent("calypso_woocommerce_store_nav_item_click"),this.onNavigate()}),j()(this,"trackMenuItemClick",e=>{this.props.recordTracksEvent("calypso_mysites_sidebar_"+e.replace(/-/g,"_")+"_clicked")}),j()(this,"trackPlanClick",()=>{this.trackMenuItemClick("plan"),this.props.recordTracksEvent("calypso_upgrade_nudge_cta_click",{cta_name:"sidebar_upgrade_default"}),this.onNavigate()}),j()(this,"trackMarketingClick",()=>{this.trackMenuItemClick("marketing"),this.onNavigate()}),j()(this,"trackPeopleClick",()=>{this.trackMenuItemClick("people"),this.onNavigate()}),j()(this,"trackSettingsClick",()=>{this.trackMenuItemClick("settings"),this.onNavigate()}),j()(this,"trackWpadminClick",()=>{this.trackMenuItemClick("wpadmin"),this.props.recordGoogleEvent("Sidebar","Clicked WP Admin")}),j()(this,"focusContent",()=>{this.props.setLayoutFocus("content")}),j()(this,"trackDomainSettingsClick",()=>{this.trackMenuItemClick("domain_settings"),this.onNavigate()})}componentDidMount(){Je("The sidebar React component is mounted.")}manage(){return r.a.createElement(be,{siteId:this.props.siteId,path:this.props.path,isAtomicSite:this.props.isAtomicSite,onNavigate:this.onNavigate})}site(){return r.a.createElement(Se,{siteId:this.props.siteId,path:this.props.path,isAtomicSite:this.props.isAtomicSite,onNavigate:this.onNavigate})}tools(){return r.a.createElement(Ce,{siteId:this.props.siteId,path:this.props.path,isAtomicSite:this.props.isAtomicSite,onNavigate:this.onNavigate})}stats(){const e=this.props,t=e.siteId,s=e.canUserViewStats,n=e.path,a=e.translate;if(t&&!s)return null;const i=Object(De.f)("day",t);return r.a.createElement(Z.a,{tipTarget:"menus",label:a("Stats"),className:"stats",selected:ce(["/stats","/store/stats","/google-my-business/stats"],n),link:i,onNavigate:this.trackStatsClick,icon:"stats-alt",materialIcon:"bar_chart"},r.a.createElement("a",{href:i},r.a.createElement(ve,{className:"sidebar__sparkline",siteId:t})))}activity(){const e=this.props,t=e.siteId,s=e.canUserViewActivity,n=e.path,a=e.translate,i=e.siteSuffix;if(!t)return null;if(!s)return null;const o="/activity-log"+i;return r.a.createElement(Z.a,{tipTarget:"activity",label:a("Activity"),selected:ce(["/activity-log"],n),link:o,onNavigate:this.trackActivityClick,icon:"history"})}preview(){const e=this.props,t=e.isPreviewable,s=e.path,n=e.site,a=e.siteId,i=e.translate;if(!a)return null;const o=n&&n.URL||"";return r.a.createElement(Z.a,{tipTarget:"sitePreview",label:i("View Site"),selected:ce(["/view"],s),link:o,onNavigate:this.onViewSiteClick,icon:"computer",preloadSectionName:"preview",forceInternalLink:t})}earn(){const e=this.props,t=e.path,s=e.translate,n=e.site;return Object(ze.a)(n)?r.a.createElement(Z.a,{label:s("Earn"),selected:ce("/earn",t),link:"/earn"+this.props.siteSuffix,onNavigate:this.trackEarnClick,icon:"money",tipTarget:"earn"}):null}themes(){const e=this.props,t=e.path,s=e.site,n=e.translate,a=e.canUserEditThemeOptions,i=Object(R.c)("manage/themes-jetpack");let o;return s&&!a?null:(o=this.props.isJetpack&&!i&&s.options?s.options.admin_url+"themes.php":this.props.siteId?"/themes"+this.props.siteSuffix:"/themes",r.a.createElement(Z.a,{label:n("Customize"),tipTarget:"themes",selected:ce("/customize",t),link:this.props.customizeUrl,onNavigate:this.trackCustomizeClick,icon:"customize",preloadSectionName:"customize",forceInternalLink:!0},r.a.createElement(ee.a,{onClick:this.trackSidebarButtonClick("themes"),href:o,preloadSectionName:"themes",forceTargetInternal:!0},this.props.translate("Themes"))))}design(){const e=this.props,t=e.path,s=e.site,n=e.translate,a=e.canUserEditThemeOptions,i=Object(R.c)("manage/themes-jetpack");let o;return s&&!a?null:(o=this.props.isJetpack&&!i&&s.options?s.options.admin_url+"themes.php":this.props.siteId?"/themes"+this.props.siteSuffix:"/themes",r.a.createElement("ul",null,r.a.createElement(Z.a,{label:n("Customize"),selected:ce("/customize",t),link:this.props.customizeUrl,onNavigate:this.trackCustomizeClick,icon:"customize",preloadSectionName:"customize",forceInternalLink:!0}),r.a.createElement(Z.a,{label:n("Themes"),selected:ce(o,t),link:o,onNavigate:this.trackCustomizeClick,icon:"customize",preloadSectionName:"themes",forceInternalLink:!0})))}plugins(){if(Object(R.c)("calypsoify/plugins"))return null;if(!this.props.canManagePlugins)return null;if(this.props.siteId&&!this.props.canUserManageOptions)return null;const e="/plugins"+this.props.siteSuffix,t="/plugins/manage"+this.props.siteSuffix,s=this.props.isJetpack||!this.props.siteId&&this.props.hasJetpackSites?r.a.createElement(ee.a,{onClick:this.trackSidebarButtonClick("manage_plugins"),href:t},this.props.translate("Manage")):null;return r.a.createElement(Z.a,{label:this.props.translate("Plugins"),selected:ce(["/extensions","/plugins"],this.props.path),link:e,onNavigate:this.trackPluginsClick,icon:"plugins",preloadSectionName:"plugins",tipTarget:"plugins"},s)}upgrades(){const e=this.props,t=e.path,s=e.translate,n=e.canUserManageOptions,a="/domains/manage"+this.props.siteSuffix,i="/domains/add"+this.props.siteSuffix;return this.props.siteId&&n?this.props.isJetpack&&!this.props.isAtomicSite?null:r.a.createElement(Z.a,{label:s("Domains"),selected:ce(["/domains"],t),link:a,onNavigate:this.trackDomainsClick,icon:"domains",preloadSectionName:"domains",tipTarget:"domains"},r.a.createElement(ee.a,{onClick:this.trackSidebarButtonClick("add_domain"),href:i},s("Add"))):null}plan(){const e=this.props,t=e.path,s=e.site,n=e.translate,a=e.canUserManageOptions;if(!s)return null;if(!a)return null;let i="/plans"+this.props.siteSuffix;(Object(Ae.J)(s.plan)||Object(Ae.L)(s.plan)||Object(Ae.j)(s.plan)||Object(Ae.w)(s.plan))&&(i="/plans/my-plan"+this.props.siteSuffix);const o=M()({selected:ce(["/plans"],t)});let l=s&&s.plan.product_name_short;return s&&Object(Ae.A)(s.plan)&&(l=n("Trial",{context:"Label in the sidebar indicating that the user is on the free trial for a plan."})),r.a.createElement("li",{className:o,"data-tip-target":"plan"},r.a.createElement("a",{onClick:this.trackPlanClick,href:i},r.a.createElement(we.a,{size:24}),r.a.createElement("span",{className:"menu-link-text","data-e2e-sidebar":"Plan"},n("Plan",{context:"noun"})),r.a.createElement("span",{className:"sidebar__menu-link-secondary-text"},l)))}store(){const e=this.props,t=e.translate,s=e.site,n=e.siteSuffix,a=e.canUserUseStore;if(!Object(R.c)("woocommerce/extension-dashboard")||!s)return null;if(!a)return null;if(!Object(R.c)("woocommerce/extension-dashboard")||!s)return null;let i="/store"+n;return Object(Ae.w)(s.plan)&&(i=s.options.admin_url+"admin.php?page=wc-setup-checklist"),r.a.createElement(Z.a,{label:t("Store"),link:i,onNavigate:this.trackStoreClick,icon:"cart",materialIcon:"shopping_cart",forceInternalLink:!0},r.a.createElement("div",{className:"sidebar__chevron-right"},r.a.createElement(L.a,{icon:"chevron-right"})))}marketing(){const e=this.props,t=e.path,s=e.site,n="/marketing"+this.props.siteSuffix;return s&&!this.props.canUserPublishPosts?null:this.props.siteId?r.a.createElement(Z.a,{label:this.props.translate("Marketing"),selected:ce("/marketing",t),link:n,onNavigate:this.trackMarketingClick,icon:"speaker",preloadSectionName:"marketing",tipTarget:"marketing"}):null}users(){const e=this.props,t=e.translate,s=e.path,n=e.site,a=e.canUserListUsers;return n&&a?r.a.createElement(Z.a,{label:t("People"),selected:ce("/people",s),link:"/people/team"+this.props.siteSuffix,onNavigate:this.trackPeopleClick,icon:"user",preloadSectionName:"people",tipTarget:"people"},r.a.createElement(ee.a,{onClick:this.trackSidebarButtonClick("add_people"),href:"/people/new"+this.props.siteSuffix},t("Add"))):null}siteSettings(){const e=this.props,t=e.path,s=e.site,n=e.canUserManageOptions,a="/settings/general"+this.props.siteSuffix;return s&&!n?null:this.props.siteId?r.a.createElement(Z.a,{label:this.props.translate("Settings"),selected:ce("/settings",t)&&(!Object(R.c)("manage/import-in-sidebar")||!ce("/settings/import",t)),link:a,onNavigate:this.trackSettingsClick,icon:"cog",preloadSectionName:"settings",tipTarget:"settings"}):null}wpAdmin(){const e=this.props.site;if(!e||!e.options)return null;if(!this.useWPAdminFlows()&&!this.props.isAtomicSite)return null;const t=!this.props.isJetpack||this.props.isAtomicSite||this.props.isVip?e.options.admin_url:Object(U.format)(N()({},Object(U.parse)(e.options.admin_url),{query:{page:"jetpack"},hash:"/my-plan"}));return r.a.createElement("li",{className:"wp-admin"},r.a.createElement("a",{onClick:this.trackWpadminClick,href:t,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(L.a,{icon:"my-sites",size:24}),r.a.createElement("span",{className:"menu-link-text"},this.props.translate("WP Admin")),r.a.createElement(L.a,{icon:"external",size:24})))}useWPAdminFlows(){const e=this.props,t=e.isAtomicSite,s=e.isJetpack,n=e.isVip,a=this.props.currentUser,i=new Date(a.date),r=new Date("2015-09-07");return!!n||(!(!s||t)||i<r)}getAddNewSiteUrl(){return"/jetpack/new/?ref=calypso-selector"}addNewSite(){return this.props.currentUser.visible_site_count>1?null:r.a.createElement(D.a,{borderless:!0,className:"my-sites-sidebar__add-new-site",href:this.getAddNewSiteUrl(),onClick:this.focusContent},r.a.createElement(L.a,{icon:"add-outline"})," ",this.props.translate("Add New Site"))}shouldShowStreamlinedNavDrawer(){return Object(R.c)("ui/streamlined-nav-drawer")}renderSidebarMenus(){if(this.props.isDomainOnly)return r.a.createElement(ke.a,null,r.a.createElement("ul",null,r.a.createElement(Z.a,{selected:ce("/domains",this.props.path),icon:"cog",label:this.props.translate("Settings"),link:"/domains/manage"+this.props.siteSuffix,onNavigate:this.trackDomainSettingsClick,tipTarget:"settings"})));const e=!!this.manage(),t=!!(this.marketing()||this.users()||this.siteSettings()||this.plugins()||this.upgrades());return this.shouldShowStreamlinedNavDrawer()?this.renderStreamlinedSidebarMenus(e,t):r.a.createElement("div",null,r.a.createElement(ke.a,null,r.a.createElement("ul",null,this.preview(),this.stats(),this.activity(),this.plan(),this.store())),e?r.a.createElement(ke.a,null,r.a.createElement(ye.a,null,this.props.translate("Manage")),this.manage()):null,this.themes()?r.a.createElement(ke.a,null,r.a.createElement(ye.a,null,this.props.translate("Personalize")),r.a.createElement("ul",null,this.themes())):null,t?r.a.createElement(ke.a,null,r.a.createElement(ye.a,null,this.props.translate("Configure")),r.a.createElement("ul",null,this.marketing(),this.earn(),this.users(),this.plugins(),this.upgrades(),this.siteSettings(),this.wpAdmin())):null)}renderStreamlinedSidebarMenus(e,t){return r.a.createElement("div",{className:"sidebar__menu-wrapper"},r.a.createElement(ke.a,null,r.a.createElement("ul",null,this.stats(),this.plan(),this.store())),e?r.a.createElement(X.a,{onClick:this.props.toggleMySitesSidebarSiteMenu,expanded:this.props.isSiteOpen,title:this.props.translate("Site"),materialIcon:"edit"},this.site()):null,this.design()?r.a.createElement(X.a,{onClick:this.props.toggleMySitesSidebarDesignMenu,expanded:this.props.isDesignOpen,title:this.props.translate("Design"),materialIcon:"gesture"},this.design()):null,r.a.createElement(X.a,{onClick:this.props.toggleMySitesSidebarToolsMenu,expanded:this.props.isToolsOpen,title:this.props.translate("Tools"),materialIcon:"build"},this.tools(),this.marketing(),this.earn(),this.activity()),t&&(this.upgrades()||this.users()||this.siteSettings())?r.a.createElement(X.a,{onClick:this.props.toggleMySitesSidebarManageMenu,expanded:this.props.isManageOpen,title:this.props.translate("Manage"),materialIcon:"settings"},r.a.createElement("ul",null,this.upgrades(),this.users(),this.siteSettings())):null,this.wpAdmin()?r.a.createElement(ke.a,{className:"sidebar__wp-admin"},r.a.createElement("ul",null,this.wpAdmin())):null)}render(){let e;return this.shouldShowStreamlinedNavDrawer()&&(e="sidebar__streamlined-nav-drawer"),r.a.createElement(ge.a,{className:e},r.a.createElement(fe.a,null,r.a.createElement($,null),this.renderSidebarMenus()),r.a.createElement(je.a,null,this.addNewSite()))}}j()(Fe,"propTypes",{setNextLayoutFocus:k.a.func.isRequired,setLayoutFocus:k.a.func.isRequired,path:k.a.string,currentUser:k.a.object,isDomainOnly:k.a.bool,isJetpack:k.a.bool,isAtomicSite:k.a.bool});var Ve=Object(S.b)(function(e){const t=Object(Ne.b)(e),s=Object(d.e)(e),n=!!s||1===t.site_count,a=s||n&&Object(Me.a)(e)||null,i=Object(u.k)(e,a),r=Object(u.J)(e,a),o=function(e){return e.mySites.isSiteOpen}(e),l=function(e){return e.mySites.isDesignOpen}(e),c=function(e){return e.mySites.isToolsOpen}(e),p=function(e){return e.mySites.isManageOpen}(e),m=Object(u.I)(e,a,"publicize")||Object(u.I)(e,a,"sharedaddy")&&!Object(u.H)(e,a,"3.4-dev"),h=Object(Re.b)(e,a),b=Object(qe.a)(e,a);return{canManagePlugins:Object(Te.a)(e),canUserEditThemeOptions:Object(le.b)(e,a,"edit_theme_options"),canUserListUsers:Object(le.b)(e,a,"list_users"),canUserViewActivity:Object(le.b)(e,a,"manage_options"),canUserManageOptions:Object(le.b)(e,a,"manage_options"),canUserPublishPosts:Object(le.b)(e,a,"publish_posts"),canUserViewStats:Object(le.b)(e,a,"view_stats"),canUserUseStore:Object(u.d)(e,a),canUserUseAds:Object(u.c)(e,a),canUserUpgradeSite:Object(u.b)(e,a),currentUser:t,customizeUrl:Object(u.g)(e,s),hasJetpackSites:Object(Pe.a)(e),isDomainOnly:Object(Le.a)(e,s),isJetpack:r,isSiteOpen:o,isDesignOpen:l,isToolsOpen:c,isManageOpen:p,isPreviewable:Object(u.R)(e,s),isSharingEnabledOnJetpackSite:m,isAtomicSite:!!Object(Ue.a)(e,s),isVip:Object(me.a)(e,s),siteId:a,site:i,siteSuffix:i?"/"+i.slug:"",siteHasBackgroundTransfer:b&&h!==Be.b.ERROR}},{recordGoogleEvent:W.g,recordTracksEvent:W.i,setLayoutFocus:I.b,setNextLayoutFocus:I.c,toggleMySitesSidebarSiteMenu:function(){return{type:"MY_SITES_SIDEBAR_SITE_TOGGLE"}},toggleMySitesSidebarDesignMenu:function(){return{type:"MY_SITES_SIDEBAR_DESIGN_TOGGLE"}},toggleMySitesSidebarToolsMenu:function(){return{type:"MY_SITES_SIDEBAR_TOOLS_TOGGLE"}},toggleMySitesSidebarManageMenu:function(){return{type:"MY_SITES_SIDEBAR_MANAGE_TOGGLE"}}})(Object(o.localize)(Fe));class Ge extends r.a.Component{constructor(){super(...arguments),j()(this,"preventPickerDefault",e=>{e.preventDefault(),e.stopPropagation()})}render(){return r.a.createElement("div",{className:"sites-navigation"},r.a.createElement(w,{allSitesPath:this.props.allSitesPath,siteBasePath:this.props.siteBasePath,onClose:this.preventPickerDefault}),r.a.createElement(Ve,{path:this.props.path,siteBasePath:this.props.siteBasePath}))}}j()(Ge,"displayName","MySitesNavigation");var We=Ge,Ye=s("./client/notices/index.js"),He=s("./client/state/selectors/get-primary-domain-by-site-id.js"),Ke=s("./client/state/selectors/get-site-id.js"),Qe=s("./client/my-sites/domains/paths.js"),$e=s("./client/my-sites/email/paths.js"),Xe=s("./client/components/main/index.jsx");s("./client/my-sites/sites/style.scss");class Ze extends i.Component{constructor(){super(...arguments),j()(this,"filterSites",e=>{const t=this.props.siteBasePath;return/^\/domains/.test(t)?!e.jetpack||e.options.is_automated_transfer:/^\/plans/.test(t)?!e.jetpack||e.isSiteUpgradeable:/^\/block-editor/.test(t)?!e.is_vip:e})}getHeaderText(){if(this.props.getSiteSelectionHeaderText)return this.props.getSiteSelectionHeaderText();let e=this.props.siteBasePath.split("?")[0].split("/")[1];void 0!==e&&(e=e.toLowerCase());const t=this.props.translate;if(["page","post","edit","block-editor"].includes(e))return t("Select a site to start writing");switch(e){case"activity-log":e=t("Activity");break;case"stats":e=t("Insights");break;case"plans":e=t("Plans");break;case"media":e=t("Media");break;case"sharing":e=t("Sharing");break;case"people":e=t("People");break;case"domains":e=t("Domains");break;case"settings":e=t("Settings")}return t("Please select a site to open {{strong}}%(path)s{{/strong}}",{args:{path:e},components:{strong:r.a.createElement("strong",null)}})}render(){return r.a.createElement(Xe.a,{className:"sites"},r.a.createElement("h2",{className:"sites__select-heading"},this.getHeaderText()),r.a.createElement(J.a,{className:"sites__select-wrapper"},r.a.createElement(E.a,{filter:this.filterSites,siteBasePath:this.props.siteBasePath,groups:!0})))}}j()(Ze,"propTypes",{siteBasePath:k.a.string.isRequired});var et=Object(o.localize)(Ze),tt=s("./client/state/notices/actions.js"),st=s("./client/controller/index.web.js"),nt=s("./client/components/empty-content/no-sites-message/index.jsx"),at=s("./client/components/empty-content/index.jsx"),it=s("./client/my-sites/domains/domain-management/list/domain-only.jsx");s.d(t,"c",function(){return ut}),s.d(t,"d",function(){return dt}),s.d(t,"a",function(){return mt}),s.d(t,"b",function(){return ht}),s.d(t,"e",function(){return bt});const rt=e=>({getState:()=>e.store.getState(),dispatch:t=>e.store.dispatch(t)}),ot="Sites";function lt(e){const t=Object(De.d)(e.pathname);let s=e.pathname;return t&&(s=Object(De.i)(e.pathname)),r.a.createElement(We,{path:e.path,allSitesPath:s,siteBasePath:s})}function ct(e){e.store.dispatch(Object(m.g)({group:"sites",secondary:!1}))}function pt(e,t){const s=e.store.getState(),n=Object(d.d)(s),a=Object(Ue.a)(s,n.ID),i=Object(le.b)(s,n.ID,"manage_options"),o=a&&R.a.isEnabled("calypsoify/plugins");if(i&&o&&/^\/plugins/.test(t)){const t=Object(c.get)(e,"params.plugin");let a="";t&&(a=["tab=search","s=".concat(t),"type=term","modal-mode=true","plugin=".concat(t)].join("&"));const i="plugin-install.php?calypsoify=1"+"&".concat(a),r=Object(u.l)(s,n.ID)+i;return window.location.replace(r),!1}const l=Object(He.a)(s,n.ID);if(Object(Le.a)(s,n.ID)&&!function(e,t,s){const n=[Qe.b,Qe.c,Qe.e,Qe.f,Qe.i,Qe.k,Qe.m,Qe.o,Qe.r,Qe.t,$e.a,$e.b,$e.e,$e.d];let a=n.map(e=>e(t,t));s&&t!==s.name&&(a=a.concat(n.map(e=>e(t,s.name))));const i=["/checkout/","/me/purchases/".concat(t)];return!!Object(c.some)(i,t=>Object(c.startsWith)(e,t))||a.indexOf(e)>-1}(e.pathname,n.slug,l))return function(e,t){e.primary=r.a.createElement(it.a,{siteId:t.ID,hasNotice:!1}),e.secondary=lt(e),Object(st.c)(e,c.noop),Object(st.f)(e)}(e,n),!1;if(Object(b.c)(s)){const t=Object(b.b)(s,"recentSites");if(n.ID!==t[0]){const a=Object(c.uniq)([n.ID,...t]).slice(0,5).filter(e=>!!Object(u.k)(s,e));e.store.dispatch(Object(h.b)("recentSites",a))}}return!0}function ut(e,t){return e.store.dispatch(Object(m.h)(null)),t()}function dt(e,t){const s=rt(e),n=s.getState,i=s.dispatch,o=e.params.site||Object(De.d)(e.path),d=Object(De.i)(e.path,o),h=Object(Ne.b)(n()),b=h&&1===h.visible_site_count,g=Object(De.i)(e.path,o);if(h&&0===h.site_count)return function(e){ct(e),e.primary=r.a.createElement(nt.a),Object(st.c)(e,c.noop),Object(st.f)(e)}(e),ne.default.pageView.record("/no-sites",ot+" > No Sites",{base_path:d});if(h&&0===h.visible_site_count)return function(e){const t=rt(e).getState,s=Object(Ne.b)(t()),n=s&&s.site_count-s.visible_site_count,a=Object(R.a)("signup_url");ct(e),e.primary=r.a.createElement(at.a,{title:l.a.translate("You have %(hidden)d hidden WordPress site.","You have %(hidden)d hidden WordPress sites.",{count:n,args:{hidden:n}}),line:l.a.translate("To manage it here, set it to visible.","To manage them here, set them to visible.",{count:n}),action:l.a.translate("Change Visibility"),actionURL:"//dashboard.wordpress.com/wp-admin/index.php?page=my-blogs",secondaryAction:l.a.translate("Create New Site"),secondaryActionURL:"".concat(a,"?ref=calypso-nosites")}),Object(st.c)(e,c.noop),Object(st.f)(e)}(e),ne.default.pageView.record("/no-sites","".concat(ot," > All Sites Hidden"),{base_path:d});if(/^\/settings\/account/.test(e.path))return t();if(b&&!o){const t=Object(Me.a)(n()),s=t=>{let s="".concat(e.pathname,"/").concat(t);e.querystring&&(s+="?".concat(e.querystring)),a.a.redirect(s)},r=Object(u.v)(n(),t);return void(r?s(r):i(Object(p.e)(t)).then(()=>{const e=Object(u.v)(n(),t);e?s(e):function(e,t){const s={username:e.username,primary_blog:e.primary_blog,primary_blog_url:e.primary_blog_url,primary_blog_is_jetpack:e.primary_blog_is_jetpack};e.primary_blog_is_jetpack?(t(Object(tt.g)(l.a.translate("Please check your Primary Site's Jetpack connection"),{button:"wp-admin",href:"".concat(e.primary_blog_url,"/wp-admin")})),ne.default.tracks.recordEvent("calypso_mysites_single_site_jetpack_connection_error",s)):ne.default.tracks.recordEvent("calypso_mysites_single_site_error",s)}(h,i)}))}if(!o)return i(Object(m.d)()),t();const j=Object(Ke.a)(n(),o);j?(i(Object(m.h)(j)),pt(e,d)&&t()):i(Object(p.e)(o)).then(()=>{const s=Object(Ke.a)(n(),o);s?(i(Object(m.h)(s)),pt(e,d)&&t()):a.a.redirect(g)})}function mt(e,t){return function(s,n){const i=rt(s).getState,r=Object(d.e)(i()),o=Object(u.J)(i(),r),l=Object(u.I)(i(),r,e);if(!o)return n();l||!1===t?n():a.a.redirect("string"==typeof t?t:"/stats")}}function ht(e,t){e.secondary=lt(e),t()}function bt(e,t){"1"===e.query.verified&&Ye.a.success(l.a.translate("Email verified! Now that you've confirmed your email address you can publish posts on your blog.")),e.store.dispatch(Object(I.b)("content")),e.store.dispatch(Object(m.g)({group:"sites",secondary:!1})),e.primary=function(e){const t=Object(De.i)(e.path),s="/sites"===t?"/stats":t;return ne.default.pageView.record(t,ot),r.a.createElement(et,{siteBasePath:s,getSiteSelectionHeaderText:e.getSiteSelectionHeaderText})}(e),t()}},"./client/my-sites/current-site/style.scss":function(e,t,s){},"./client/my-sites/domains/domain-management/list/domain-only.jsx":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./packages/i18n-calypso/dist/esm/index.js"),i=s("./node_modules/prop-types/index.js"),r=s.n(i),o=s("./node_modules/react/index.js"),l=s.n(o),c=s("./client/components/button/index.jsx"),p=s("./client/components/empty-content/index.jsx"),u=s("./client/lib/gsuite/index.js"),d=s("./client/components/data/query-site-domains/index.jsx"),m=s("./client/my-sites/domains/paths.js"),h=s("./client/my-sites/email/paths.js"),b=s("./client/state/selectors/get-primary-domain-by-site-id.js"),g=s("./client/state/sites/selectors.js"),j=s("./client/state/analytics/actions.js");s("./client/my-sites/domains/domain-management/list/domain-only.scss");const y=e=>{let t=e.primaryDomain,s=e.hasNotice,n=e.recordTracks,a=e.siteId,i=e.slug,r=e.translate;if(!t)return l.a.createElement("div",null,l.a.createElement(d.a,{siteId:a}),l.a.createElement(p.a,{className:"domain-only-site__placeholder",illustration:"/calypso/images/drake/drake-browser.svg"}));const o=t.name,b=Object(u.h)(t);return l.a.createElement("div",null,l.a.createElement(p.a,{title:r("%(domainName)s is ready when you are.",{args:{domainName:o}}),line:r("Start a site now to unlock everything WordPress.com can offer."),action:r("Create Site"),actionURL:"/start/site-selected/?siteSlug=".concat(encodeURIComponent(i),"&siteId=").concat(encodeURIComponent(a)),secondaryAction:r("Manage Domain"),secondaryActionURL:Object(m.e)(i,o),illustration:"/calypso/images/drake/drake-browser.svg"},l.a.createElement(c.a,{className:"empty-content__action button",href:Object(h.a)(i,o),primary:!b,onClick:()=>{n(b?"calypso_domain_only_gsuite_manage":"calypso_domain_only_gsuite_cta",{domain:o})}},r(b?"Manage Email":"Add Email"))),s&&l.a.createElement("div",{className:"domain-only-site__settings-notice"},r("Your domain should start working immediately, but may be unreliable during the first 72 hours.")))};y.propTypes={primaryDomain:r.a.object,hasNotice:r.a.bool.isRequired,translate:r.a.func.isRequired,siteId:r.a.number.isRequired},t.a=Object(n.b)((e,t)=>({slug:Object(g.v)(e,t.siteId),primaryDomain:Object(b.a)(e,t.siteId)}),{recordTracks:j.i})(Object(a.localize)(y))},"./client/my-sites/domains/domain-management/list/domain-only.scss":function(e,t,s){},"./client/my-sites/email/paths.js":function(e,t,s){"use strict";s.d(t,"b",function(){return a}),s.d(t,"c",function(){return i}),s.d(t,"e",function(){return r}),s.d(t,"a",function(){return o}),s.d(t,"d",function(){return l});var n=s("./node_modules/lodash/lodash.js");function a(e,t){let s;return s=t?c(e,t,"gsuite/add-users"):"/email/gsuite/add-users/"+e}function i(e,t){let s;return s=t?c(e,t,"add-gsuite-users"):"/email/add-gsuite-users/"+e}function r(e,t,s){return c(e,t,"gsuite/new/"+s)}function o(e,t){let s;return s=t?c(e,t,"manage"):e?"/email/"+e:"/email"}function l(e,t){return c(e,t,"forwarding")}function c(e,t,s){return s=s||"manage",Object(n.startsWith)(t,":")||(t=encodeURIComponent(encodeURIComponent(t))),"/email/"+t+"/"+s+"/"+e}},"./client/my-sites/sites/style.scss":function(e,t,s){},"./client/state/selectors/get-primary-domain-by-site-id.js":function(e,t,s){"use strict";s.d(t,"a",function(){return a});var n=s("./client/state/sites/domains/selectors.js");function a(e,t){const s=Object(n.b)(e,t);return 0===s.length?null:s.filter(e=>e.isPrimary)[0]}},"./client/state/selectors/get-selected-or-all-sites.js":function(e,t,s){"use strict";var n=s("./client/lib/create-selector/index.js"),a=s("./client/state/selectors/get-sites.js"),i=s("./client/state/ui/selectors.js");t.a=Object(n.a)(e=>{const t=Object(i.d)(e);return t?[t]:Object(a.a)(e)},[i.d,a.a])},"./client/state/selectors/get-site-id.js":function(e,t,s){"use strict";s.d(t,"a",function(){return a});var n=s("./client/state/sites/selectors.js");function a(e,t){if(!t)return null;const s=Object(n.k)(e,t);return s?s.ID:null}},"./client/state/selectors/has-jetpack-sites.js":function(e,t,s){"use strict";var n=s("./client/lib/create-selector/index.js"),a=s("./client/state/sites/selectors.js"),i=s("./client/state/selectors/get-sites-items.js");t.a=Object(n.a)(e=>{return Object.keys(Object(i.a)(e)).some(t=>Object(a.J)(e,t))},i.a)},"./client/state/sites/domains/selectors.js":function(e,t,s){"use strict";s.d(t,"b",function(){return u}),s.d(t,"c",function(){return d}),s.d(t,"a",function(){return m});var n=s("./node_modules/@babel/runtime/helpers/objectSpread.js"),a=s.n(n),i=s("./node_modules/@babel/runtime/helpers/slicedToArray.js"),r=s.n(i),o=s("./packages/i18n-calypso/dist/esm/index.js"),l=s("./packages/tree-select/dist/esm/index.js"),c=s.n(l);const p=Object.freeze([]),u=(e,t)=>t&&e.sites.domains.items[t]||p,d=(e,t)=>e.sites.domains.requesting[t]||!1,m=c()((e,t)=>[u(e,t)],e=>{let t=r()(e,1)[0];return t?t.map(e=>a()({},e,{autoRenewalMoment:e.autoRenewalDate?Object(o.moment)(e.autoRenewalDate):null,registrationMoment:e.registrationDate?Object(o.moment)(e.registrationDate):null,expirationMoment:e.expiry?Object(o.moment)(e.expiry):null,transferAwayEligibleAtMoment:e.transferAwayEligibleAt?Object(o.moment)(e.transferAwayEligibleAt):null,transferEndDateMoment:e.transferStartDate?Object(o.moment)(e.transferStartDate).add(7,"days"):null})):null})},"./client/state/stats/lists/selectors.js":function(e,t,s){"use strict";s.d(t,"f",function(){return d}),s.d(t,"e",function(){return m}),s.d(t,"b",function(){return h}),s.d(t,"d",function(){return b}),s.d(t,"c",function(){return g}),s.d(t,"a",function(){return j});var n=s("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=s.n(n),i=s("./node_modules/lodash/lodash.js"),r=s("./packages/i18n-calypso/dist/esm/index.js"),o=s.n(r),l=s("./packages/tree-select/dist/esm/index.js"),c=s.n(l),p=s("./client/state/stats/lists/utils.js"),u=s("./client/state/sites/selectors.js");function d(e,t,s,n){const a=Object(p.c)(n);return!!Object(i.get)(e.stats.lists.requests,[t,s,a,"requesting"])}function m(e,t,s,n){const a=Object(p.c)(n);return"error"===Object(i.get)(e.stats.lists.requests,[t,s,a,"status"])}function h(e,t,s,n){const a=Object(p.c)(n);return Object(i.get)(e.stats.lists.items,[t,s,a],null)}const b=c()((e,t,s)=>[h(e,t,"statsStreak",s)],(e,t,s)=>{let n=a()(e,1)[0];const r=s.gmtOffset||0,l={};return n&&n.data&&!Object(i.isArray)(n.data)&&Object.keys(n.data).forEach(e=>{const t=o.a.moment.unix(e).locale("en").utcOffset(r).format("YYYY-MM-DD");void 0===l[t]&&(l[t]=0),l[t]+=n.data[e]}),l},{getCacheKey:(e,t)=>[e,Object(p.c)(t)].join()}),g=c()((e,t,s,n)=>[h(e,t,s,n),Object(u.k)(e,t)],(e,t,s,n)=>{let i=a()(e,2),r=i[0],o=i[1];const l=p.e[s];return"function"!=typeof l?r:l(r,n,t,o)},{getCacheKey:(e,t,s)=>[e,t,Object(p.c)(s)].join()});function j(e,t,s,n){const a=g(e,t,s,n);return a&&Object(i.isArray)(a)?Object(i.flatten)(Object(i.map)(a,e=>Object(p.a)(e))):[]}},"./packages/material-design-icons/svg-sprite/material-icons.svg":function(e,t,s){e.exports=s.p+"images/material-icons-6cf660ece4cca003fedfff247d71d750.svg"}}]);