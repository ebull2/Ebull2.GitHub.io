(window.webpackJsonp=window.webpackJsonp||[]).push([[350],{"./client/blocks/edit-gravatar/style.scss":function(e,t,n){},"./client/components/card/compact.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var s=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(s),a=n("./node_modules/react/index.js"),o=n.n(a),r=n("./node_modules/classnames/index.js"),l=n.n(r),c=n("./client/components/card/index.jsx");function d(e){return o.a.createElement(c.a,i()({},e,{className:l()(e.className,"is-compact")}),e.children)}},"./client/components/data/query-countries/index.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(s),a=n("./node_modules/prop-types/index.js"),o=n.n(a),r=n("./node_modules/react/index.js");class l extends r.Component{componentDidMount(){this.props.requestCountries()}render(){return null}}i()(l,"propTypes",{requestCountries:o.a.func.isRequired})},"./client/components/data/query-countries/sms.jsx":function(e,t,n){"use strict";var s=n("./node_modules/react-redux/es/index.js"),i=n("./client/components/data/query-countries/index.jsx"),a=n("./client/state/countries/actions.js");t.a=Object(s.b)(null,{requestCountries:a.c})(i.a)},"./client/components/email-verification/email-verification-dialog/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(s),a=n("./node_modules/prop-types/index.js"),o=n.n(a),r=n("./node_modules/react/index.js"),l=n.n(r),c=n("./node_modules/lodash/lodash.js"),d=n("./packages/i18n-calypso/dist/esm/index.js"),p=n("./node_modules/react-redux/es/index.js"),u=n("./client/components/dialog/index.jsx"),m=n("./client/components/button/index.jsx"),h=n("./client/components/spinner/index.jsx"),g=n("./client/state/current-user/selectors.js"),f=n("./client/state/data-layer/wpcom-http/actions.js"),b=n("./client/state/data-layer/wpcom-http/utils.js"),E=n("./client/state/data-layer/handler-registry.js");const _=Object(b.a)({fetch:e=>Object(f.a)({apiVersion:"1.1",method:"POST",path:"/me/send-verification-email"},e),onSuccess:()=>({type:"EMAIL_VERIFY_REQUEST_SUCCESS"}),onError:(e,t)=>({type:"EMAIL_VERIFY_REQUEST_FAILURE",message:t.message})});Object(E.b)("state/data-layer/wpcom/me/send-verification-email/index.js",{EMAIL_VERIFY_REQUEST:[_]});n("./client/components/email-verification/email-verification-dialog/style.scss");class S extends r.Component{constructor(){super(...arguments),i()(this,"handleClose",()=>{this.props.resetVerifyEmailState(),this.props.onClose()})}getResendButtonLabel(){return"sent"===this.props.emailVerificationStatus||"error"===this.props.emailVerificationStatus?this.props.translate("Email Sent"):"requesting"===this.props.emailVerificationStatus?l.a.createElement(h.a,{className:"email-verification-dialog__confirmation-dialog-spinner"}):this.props.translate("Resend Email")}getDialogButtons(){return[l.a.createElement(m.a,{key:"resend",primary:!1,disabled:Object(c.includes)(["requesting","sent","error"],this.props.emailVerificationStatus),onClick:this.props.verifyEmail},this.getResendButtonLabel()),l.a.createElement(m.a,{key:"close",primary:!0,onClick:this.handleClose},this.props.translate("OK"))]}render(){const e={confirmHeading:this.props.translate("Please verify your email address:"),confirmExplanation:this.props.translate("When you first signed up for a WordPress.com account we sent you an email. Please open it and click on the blue button to verify your email address."),confirmReasoning:this.props.translate("Verifying your email allows us to assist you if you ever lose access to your account in the future."),confirmEmail:this.props.translate("{{wrapper}}%(email)s{{/wrapper}} {{emailPreferences}}change{{/emailPreferences}}",{components:{wrapper:l.a.createElement("span",{className:"email-verification-dialog__confirmation-dialog-email-wrapper"}),emailPreferences:l.a.createElement("a",{href:"/me/account"})},args:{email:this.props.email}})};return l.a.createElement(u.a,{isVisible:!0,buttons:this.getDialogButtons(),additionalClassNames:"email-verification-dialog__confirmation-dialog is-narrow"},l.a.createElement("h1",{className:"email-verification-dialog__confirmation-dialog-heading is-variable-height"},e.confirmHeading),l.a.createElement("p",{className:"email-verification-dialog__confirmation-dialog-email"},e.confirmEmail),l.a.createElement("p",{className:"email-verification-dialog__confirmation-dialog-explanation"},e.confirmExplanation),l.a.createElement("p",{className:"email-verification-dialog__confirmation-dialog-reasoning"},e.confirmReasoning))}}S.propTypes={onClose:o.a.func,translate:o.a.func,email:o.a.string,emailVerificationStatus:o.a.string},S.defaultProps={onClose:c.noop};t.a=Object(p.b)(e=>({email:Object(g.f)(e),emailVerificationStatus:Object(c.get)(e,"currentUser.emailVerification.status")}),{verifyEmail:()=>({type:"EMAIL_VERIFY_REQUEST"}),resetVerifyEmailState:()=>({type:"EMAIL_VERIFY_STATE_RESET"})})(Object(d.localize)(S))},"./client/components/email-verification/email-verification-dialog/style.scss":function(e,t,n){},"./client/components/forms/form-country-select/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(s),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(a),r=n("./node_modules/classnames/index.js"),l=n.n(r),c=n("./node_modules/prop-types/index.js"),d=n.n(c),p=n("./node_modules/react/index.js"),u=n.n(p),m=n("./node_modules/lodash/lodash.js"),h=n("./packages/i18n-calypso/dist/esm/index.js");class g extends p.Component{getOptions(){const e=this.props,t=e.countriesList,n=e.translate;return Object(m.isEmpty)(t)?[{key:"",label:n("Loading…")}]:t.map((e,t)=>{let n=e.code;return{key:t,label:e.name,code:n,disabled:!n}})}render(){const e=this.getOptions();return u.a.createElement("select",i()({},Object(m.omit)(this.props,["className","countriesList","translate","moment","numberFormat"]),{className:l()(this.props.className,"form-country-select"),onChange:this.props.onChange,disabled:this.props.disabled}),e.map(function(e){return u.a.createElement("option",{key:e.key,value:e.code,disabled:e.disabled},e.label)}))}}o()(g,"propTypes",{countriesList:d.a.array.isRequired,className:d.a.string,disabled:d.a.bool,onChange:d.a.func,translate:d.a.func.isRequired}),t.a=Object(h.localize)(g)},"./client/components/forms/form-phone-input/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(s),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(a),r=n("./node_modules/react/index.js"),l=n.n(r),c=n("./node_modules/prop-types/index.js"),d=n.n(c),p=n("./packages/i18n-calypso/dist/esm/index.js"),u=n("./node_modules/lodash/lodash.js"),m=n("./node_modules/classnames/index.js"),h=n.n(m),g=n("./client/components/forms/form-label/index.jsx"),f=n("./client/components/forms/form-tel-input/index.jsx"),b=n("./client/components/forms/form-fieldset/index.jsx"),E=n("./client/components/forms/form-country-select/index.jsx"),_=n("./client/lib/phone-validation/index.jsx");const S=/^0|[\s.\-()]+/g;class y extends l.a.Component{constructor(){super(...arguments),o()(this,"state",{countryCode:this.props.initialCountryCode||"",phoneNumber:this.props.initialPhoneNumber||""}),o()(this,"handleCountryChange",e=>{this.setState({countryCode:e.target.value},this.triggerOnChange)}),o()(this,"handlePhoneChange",e=>{this.setState({phoneNumber:e.target.value},this.triggerOnChange)}),o()(this,"triggerOnChange",()=>{this.props.onChange(this.getValue())})}componentWillMount(){this.maybeSetCountryStateFromList()}componentDidUpdate(){this.maybeSetCountryStateFromList()}render(){return l.a.createElement("div",{className:h()(this.props.className,"form-phone-input")},l.a.createElement(b.a,{className:"form-fieldset__country"},l.a.createElement(g.a,{htmlFor:"country_code"},this.props.translate("Country Code",{context:"The country code for the phone for the user."})),l.a.createElement(E.a,i()({},this.props.countrySelectProps,{countriesList:this.props.countriesList,disabled:this.props.isDisabled,name:"country_code",ref:"countryCode",value:this.state.countryCode,onChange:this.handleCountryChange}))),l.a.createElement(b.a,{className:"form-fieldset__phone-number"},l.a.createElement(g.a,{htmlFor:"phone_number"},this.props.translate("Phone Number")),l.a.createElement(f.a,i()({},this.props.phoneInputProps,{disabled:this.props.isDisabled,name:"phone_number",value:this.state.phoneNumber,onChange:this.handlePhoneChange}))))}getCountryData(){return Object(u.find)(this.props.countriesList,{code:this.state.countryCode})}cleanNumber(e){return e.replace(S,"")}maybeSetCountryStateFromList(){if(this.state.countryCode)return;const e=this.props.countriesList;e.length&&this.setState({countryCode:e[0].code})}validate(e){return Object(_.a)(e)}getValue(){const e=this.getCountryData(),t=this.cleanNumber(this.state.phoneNumber),n=(e?e.numeric_code:"")+t,s=this.validate(n);return{isValid:!s.error,validation:s,countryData:e,phoneNumber:t,phoneNumberFull:n}}}o()(y,"propTypes",{initialCountryCode:d.a.string,initialPhoneNumber:d.a.string,countriesList:d.a.array.isRequired,isDisabled:d.a.bool,countrySelectProps:d.a.object,phoneInputProps:d.a.object,onChange:d.a.func,translate:d.a.func}),o()(y,"defaultProps",{isDisabled:!1,countrySelectProps:{},phoneInputProps:{},onChange:u.noop,translate:u.identity}),t.a=Object(p.localize)(y)},"./client/components/forms/form-tel-input/index.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var s=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(s),a=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),o=n.n(a),r=n("./node_modules/react/index.js"),l=n.n(r),c=n("./node_modules/prop-types/index.js"),d=n.n(c),p=n("./node_modules/classnames/index.js"),u=n.n(p);function m(e){let t=e.className,n=e.isError,s=e.isValid,a=o()(e,["className","isError","isValid"]);const r=u()("form-tel-input",t,{"is-error":n,"is-valid":s});return l.a.createElement("input",i()({pattern:"[0-9\\-() +]*"},a,{type:"tel",className:r}))}m.propTypes={className:d.a.string,isError:d.a.bool,isValid:d.a.bool},m.defaultProps={isError:!1,isValid:!1}},"./client/components/forms/form-verification-code-input/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(s),a=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),o=n.n(a),r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(r),c=n("./node_modules/classnames/index.js"),d=n.n(c),p=n("./node_modules/prop-types/index.js"),u=n.n(p),m=n("./node_modules/react/index.js"),h=n.n(m),g=n("./packages/i18n-calypso/dist/esm/index.js"),f=n.n(g),b={sixDigit2faPlaceholder:f.a.translate("e.g. %(example)s",{args:{example:"123456"}}),sevenDigit2faPlaceholder:f.a.translate("e.g. %(example)s",{args:{example:"1234567"}}),eightDigitBackupCodePlaceholder:f.a.translate("e.g. %(example)s",{args:{example:"12345678"}})};n.d(t,"a",function(){return E});class E extends h.a.Component{constructor(){super(...arguments),l()(this,"focus",()=>{this.input.focus()}),l()(this,"saveRef",e=>{this.input=e})}render(){const e=this.props,t=e.className,n=e.isError,s=e.isValid,a=e.method,r=o()(e,["className","isError","isValid","method"]),l=d()("form-verification-code-input",t,{"is-error":n,"is-valid":s});let c=b.sixDigit2faPlaceholder;return"backup"===a?c=b.eightDigitBackupCodePlaceholder:"sms"===a&&(c=b.sevenDigit2faPlaceholder),h.a.createElement("input",i()({autoComplete:"off",className:l,pattern:"[0-9 ]*",placeholder:c,ref:this.saveRef,type:"tel"},r))}}l()(E,"propTypes",{className:u.a.string,isError:u.a.bool,isValid:u.a.bool,method:u.a.string}),l()(E,"defaultProps",{isError:!1,isValid:!1})},"./client/components/info-popover/index.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return h});var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(s),a=n("./node_modules/react/index.js"),o=n.n(a),r=n("./node_modules/prop-types/index.js"),l=n.n(r),c=n("./client/components/gridicon/index.jsx"),d=n("./node_modules/classnames/index.js"),p=n.n(d),u=n("./client/components/popover/index.jsx"),m=n("./client/lib/analytics/index.js");class h extends a.Component{constructor(){super(...arguments),i()(this,"state",{showPopover:!1}),i()(this,"handleClick",e=>{e.preventDefault(),e.stopPropagation(),this.setState({showPopover:!this.state.showPopover},this.recordStats)}),i()(this,"handleClose",()=>this.setState({showPopover:!1},this.recordStats)),i()(this,"recordStats",()=>{const e=this.props,t=e.gaEventCategory,n=e.popoverName;if(t&&n){const e=this.state.showPopover?" Opened":" Closed";m.default.ga.recordEvent(t,"InfoPopover: "+n+e)}})}render(){return o.a.createElement("span",{onClick:this.handleClick,ref:"infoPopover",className:p()("info-popover",{is_active:this.state.showPopover},this.props.className)},o.a.createElement(c.a,{icon:this.props.icon,size:this.props.iconSize}),o.a.createElement(u.a,{autoRtl:this.props.autoRtl,id:this.props.id,isVisible:this.state.showPopover,context:this.refs&&this.refs.infoPopover,ignoreContext:this.props.ignoreContext,position:this.props.position,onClose:this.handleClose,className:p()("popover","info-popover__tooltip",this.props.className),rootClassName:this.props.rootClassName},this.props.children))}}i()(h,"propTypes",{autoRtl:l.a.bool,className:l.a.string,gaEventCategory:l.a.string,icon:l.a.string,iconSize:l.a.number,id:l.a.string,ignoreContext:l.a.shape({getDOMNode:l.a.func}),popoverName:l.a.string,position:l.a.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:l.a.string}),i()(h,"defaultProps",{autoRtl:!0,icon:"info-outline",iconSize:18,position:"bottom"})},"./client/components/list-end/index.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var s=n("./node_modules/react/index.js"),i=n.n(s),a=n("./client/components/gridicon/index.jsx");n("./client/components/list-end/style.scss");function o(){return i.a.createElement("div",{className:"list-end"},i.a.createElement(a.a,{icon:"my-sites"}))}},"./client/components/list-end/style.scss":function(e,t,n){},"./client/components/popover/menu-item.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var s=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(s),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(a),r=n("./node_modules/prop-types/index.js"),l=n.n(r),c=n("./node_modules/react/index.js"),d=n.n(c),p=n("./node_modules/classnames/index.js"),u=n.n(p),m=n("./node_modules/lodash/lodash.js"),h=n("./client/components/gridicon/index.jsx"),g=n("./client/components/external-link/index.jsx");class f extends c.Component{constructor(){super(...arguments),o()(this,"handleMouseOver",e=>{this.props.focusOnHover&&e.target.focus(),this.props.onMouseOver()})}render(){const e=this.props,t=e.children,n=e.className,s=e.href,a=e.icon,o=e.isSelected,r=e.isExternalLink,l=Object(m.omit)(this.props,"icon","focusOnHover","isSelected","isExternalLink","className","itemComponent"),c=u()("popover__menu-item",n,{"is-selected":o});let p=this.props.itemComponent;return r&&s?(p=g.a,l.icon=!0):s&&(p="a"),d.a.createElement(p,i()({role:"menuitem",onMouseOver:this.handleMouseOver,tabIndex:"-1",className:c},l),a&&d.a.createElement(h.a,{icon:a,size:18}),t)}}o()(f,"propTypes",{href:l.a.string,className:l.a.string,isSelected:l.a.bool,icon:l.a.string,focusOnHover:l.a.bool,onMouseOver:l.a.func,isExternalLink:l.a.bool,itemComponent:l.a.oneOfType([l.a.func,l.a.string])}),o()(f,"defaultProps",{isSelected:!1,focusOnHover:!0,onMouseOver:m.noop,itemComponent:"button"})},"./client/components/section-header/index.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var s=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(s),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(a),r=n("./node_modules/react/index.js"),l=n.n(r),c=n("./node_modules/classnames/index.js"),d=n.n(c),p=n("./client/components/card/compact.jsx"),u=n("./client/components/count/index.jsx");n("./client/components/section-header/style.scss");class m extends r.PureComponent{render(){const e="number"==typeof this.props.count,t=!(this.props.label||e||this.props.children),n=d()(this.props.className,"section-header",{"is-empty":t,"is-placeholder":this.props.isPlaceholder}),s={id:this.props.id};return l.a.createElement(p.a,i()({className:n,href:this.props.href},s),l.a.createElement("div",{className:"section-header__label"},l.a.createElement("span",{className:"section-header__label-text"},this.props.label),e&&l.a.createElement(u.a,{count:this.props.count})),l.a.createElement("div",{className:"section-header__actions"},this.props.children))}}o()(m,"defaultProps",{label:"",href:null,isPlaceholder:!1})},"./client/components/section-header/style.scss":function(e,t,n){},"./client/components/sidebar-navigation/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/prop-types/index.js"),i=n.n(s),a=n("./node_modules/react/index.js"),o=n.n(a),r=n("./node_modules/react-redux/es/index.js"),l=n("./client/components/gridicon/index.jsx"),c=n("./client/state/document-head/selectors.js"),d=n("./client/state/ui/layout-focus/actions.js"),p=n("./client/components/translatable/proptype.js");class u extends o.a.Component{constructor(e){super(e),this.toggleSidebar=this.toggleSidebar.bind(this)}toggleSidebar(e){e.preventDefault(),this.props.setLayoutFocus("sidebar")}render(){return o.a.createElement("header",{className:"current-section"},o.a.createElement("a",{onClick:this.toggleSidebar,className:this.props.linkClassName},o.a.createElement(l.a,{icon:"chevron-left"}),this.props.children,o.a.createElement("div",null,o.a.createElement("p",{className:"current-section__"+this.props.sectionName+"-title"},this.props.sectionTitle),o.a.createElement("h1",{className:"current-section__section-title"},this.props.title))))}}u.propTypes={title:p.a,linkClassName:i.a.string,sectionTitle:p.a,sectionName:i.a.string.isRequired,setLayoutFocus:i.a.func.isRequired},t.a=Object(r.b)(e=>({title:Object(c.c)(e)}),{setLayoutFocus:d.b})(u)},"./client/lib/analytics/page-view-tracker/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(s),a=n("./node_modules/debug/src/browser.js"),o=n.n(a),r=n("./node_modules/prop-types/index.js"),l=n.n(r),c=n("./node_modules/react/index.js"),d=n.n(c),p=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/react-redux/es/index.js"),m=n("./client/lib/route/index.js"),h=n("./client/state/analytics/actions.js"),g=n("./client/state/utils.js"),f=n("./client/state/ui/selectors.js"),b=n("./client/state/sites/selectors.js");const E=o()("calypso:analytics:PageViewTracker");class _ extends d.a.Component{constructor(){super(...arguments),i()(this,"state",{timer:null}),i()(this,"queuePageView",()=>{const e=this.props,t=e.delay,n=void 0===t?0:t,s=e.path,i=e.recorder,a=void 0===i?p.noop:i,o=e.hasSelectedSiteLoaded,r=e.title,l=e.properties;if(E('Queuing Page View: "'.concat(r,'" at "').concat(s,'" with ').concat(n,"ms delay")),o&&!this.state.timer)return n?void this.setState({timer:setTimeout(()=>a(s,r),n)}):a(s,r,"default",l)})}componentDidMount(){E("Component has mounted."),this.queuePageView()}componentWillUnmount(){E("Component has unmounted."),clearTimeout(this.state.timer)}componentDidUpdate(e){e.path===this.props.path&&e.selectedSiteId===this.props.selectedSiteId||this.queuePageView()}render(){return null}}i()(_,"displayName","PageViewTracker"),i()(_,"propTypes",{delay:l.a.number,path:l.a.string.isRequired,recorder:l.a.func,hasSelectedSiteLoaded:l.a.bool,selectedSiteId:l.a.number,title:l.a.string.isRequired,properties:l.a.object});const S={recorder:Object(g.f)(h.h,[h.c])};t.a=Object(u.b)(e=>{const t=Object(f.e)(e),n=Object(b.v)(e,t),s="undefined"==typeof window?"":Object(m.d)(Object(p.get)(window,"location.pathname",""));return{hasSelectedSiteLoaded:!s||Object(p.isNumber)(s)&&s===t||s===n,selectedSiteId:t}},S)(_)},"./client/lib/phone-validation/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/phone/dist/index.js"),i=n.n(s),a=n("./packages/i18n-calypso/dist/esm/index.js"),o=n.n(a);t.a=function(e){const t=e.replace(/\+/,"");return 0===t.length?{error:"phone_number_empty",message:o.a.translate("Please enter a phone number")}:t.length<8?{error:"phone_number_too_short",message:o.a.translate("This number is too short")}:e.search(/[a-z,A-Z]/)>-1?{error:"phone_number_contains_letters",message:o.a.translate("Phone numbers cannot contain letters")}:e.search(/[^0-9,\+]/)>-1?{error:"phone_number_contains_special_characters",message:o.a.translate("Phone numbers cannot contain special characters")}:i()(e).length?{info:"phone_number_valid",message:o.a.translate("Valid phone number")}:{error:"phone_number_invalid",message:o.a.translate("That phone number does not appear to be valid")}}},"./client/lib/safe-protocol-url/index.js":function(e,t,n){"use strict";var s=n("./node_modules/lodash/lodash.js"),i=n("./node_modules/url/url.js"),a=n.n(i);t.a=function(e){let t;return null===e||""===e||void 0===e?null:(t=a.a.parse(e),/^\/[^\/]/.test(e)?e:"http:"===t.protocol||"https:"===t.protocol?e:a.a.format(Object(s.assign)(Object(s.pick)(t,["host","hash","search","path"]),{protocol:"http"})))}},"./client/lib/two-step-authorization/index.js":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),i=n.n(s),a=n("./node_modules/debug/src/browser.js"),o=n.n(a),r=n("./node_modules/lodash/lodash.js"),l=n("./client/lib/analytics/index.js"),c=n("./client/lib/mixins/emitter/index.js"),d=n("./client/lib/user-settings/index.js"),p=n("./client/lib/wp/browser.js"),u=n("./client/lib/redux-bridge/index.js"),m=n("./client/state/connected-applications/actions.js"),h=n("./client/state/profile-links/actions.js");const g=o()("calypso:two-step-authorization"),f=p.a.undocumented();function b(){if(!(this instanceof b))return new b;this.data=null,this.initialized=!1,this.smsResendThrottled=!1,this.bumpMCStat=function(e){l.default.mc.bumpStat("2fa",e),l.default.tracks.recordEvent("calypso_login_twostep_authorize",{event_action:e})},this.fetch()}b.prototype.fetch=function(e){f.me().getTwoStep(function(t,n){t||(this.data=n,this.isReauthRequired()&&!this.initialized&&this.bumpMCStat("reauth-required"),this.initialized=!0,this.emit("change")),e&&e(t,n)}.bind(this))},b.prototype.validateCode=function(e,t){f.me().validateTwoStepCode(i()({},e,{code:Object(r.replace)(e.code,/\s/g,"")}),function(n,s){!n&&s.success?(this.isReauthRequired()&&(d.a.fetchSettings(),Object(u.b)(Object(m.d)()),Object(u.b)(Object(h.j)())),this.data.two_step_reauthorization_required=!1,this.data.two_step_authorization_expires_soon=!1,this.invalidCode=!1,e.action?this.bumpMCStat("enable-two-step"===e.action?"enable-2fa-successful":"disable-2fa-successful"):this.bumpMCStat("reauth-successful"),this.emit("change")):n||(this.invalidCode=!0,e.action?this.bumpMCStat("enable-two-step"===e.action?"enable-2fa-failed-invalid-code":"disable-2fa-failed-invalid-code"):this.bumpMCStat("reauth-failed-invalid-code")),t&&t(n,s)}.bind(this))},b.prototype.sendSMSCode=function(e){f.me().sendSMSValidationCode(function(t,n){t?(g("Sending SMS code failed: "+JSON.stringify(t)),t.error&&"rate_limited"===t.error&&(g("SMS resend throttled."),this.bumpMCStat("sms-code-send-throttled"),this.smsResendThrottled=!0)):(this.smsResendThrottled=!1,this.bumpMCStat("sms-code-send-success")),this.emit("change"),e&&e(t,n)}.bind(this))},b.prototype.backupCodes=function(e){f.me().backupCodes(function(t,n){t?g("Fetching Backup Codes failed: "+JSON.stringify(t)):this.bumpMCStat("new-backup-codes-success"),e&&e(t,n)}.bind(this))},b.prototype.validateBackupCode=function(e,t){const n={code:Object(r.replace)(e,/\s/g,""),action:"create-backup-receipt"};f.me().validateTwoStepCode(n,function(e,n){e&&g("Validating Two Step Code failed: "+JSON.stringify(e)),n&&this.bumpMCStat(n.success?"backup-code-validate-success":"backup-code-validate-failure"),t&&t(e,n)}.bind(this))},b.prototype.getAppAuthCodes=function(e){f.me().getAppAuthCodes(function(t,n){t&&g("Getting App Auth Codes failed: "+JSON.stringify(t)),e&&e(t,n)})},b.prototype.codeValidationFailed=function(){return this.invalidCode},b.prototype.isSMSResendThrottled=function(){return this.smsResendThrottled},b.prototype.isReauthRequired=function(){return!!this.data&&this.data.two_step_reauthorization_required},b.prototype.authExpiresSoon=function(){return!!this.data&&this.data.two_step_authorization_expires_soon},b.prototype.isTwoStepSMSEnabled=function(){return!!this.data&&this.data.two_step_sms_enabled},b.prototype.getSMSLastFour=function(){return this.data?this.data.two_step_sms_last_four:null},Object(c.a)(b.prototype),t.a=new b},"./client/lib/user-agent/index.js":function(e,t,n){"use strict";var s=n("./node_modules/express-useragent/index.js"),i=n.n(s);t.a=i.a.parse(navigator.userAgent)},"./client/me/controller.js":function(e,t,n){"use strict";var s=n("./node_modules/react/index.js"),i=n.n(s),a=n("./node_modules/page/page.js"),o=n.n(a),r=n("./packages/i18n-calypso/dist/esm/index.js"),l=n.n(r),c=n("./client/lib/user-settings/index.js"),d=n("./client/state/document-head/actions.js"),p=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),u=n.n(p),m=n("./node_modules/react-redux/es/index.js"),h=n("./node_modules/lodash/lodash.js"),g=n("./client/components/button/index.jsx"),f=n("./client/config/index.js"),b=n("./client/components/animate/index.jsx"),E=n("./client/components/gravatar/index.jsx"),_=n("./client/state/analytics/actions.js");n("./client/me/profile-gravatar/style.scss");const S=400;var y=Object(m.b)(null,{recordGravatarMisclick:function(){return Object(_.g)("Me","Clicked on Unclickable Gravatar Image in Sidebar")}})(function(e){return i.a.createElement("div",{className:"profile-gravatar"},i.a.createElement("div",{role:"presentation",onClick:e.recordGravatarMisclick},i.a.createElement(b.a,{type:"appear"},i.a.createElement(E.a,{user:e.user,size:150,imgSize:S}))),i.a.createElement("h2",{className:"profile-gravatar__user-display-name"},e.user.display_name),i.a.createElement("div",{className:"profile-gravatar__user-secondary-info"},"@",e.user.username))}),v=n("./client/me/purchases/paths.js"),j=n("./client/layout/sidebar/index.jsx"),C=n("./client/layout/sidebar/footer.jsx"),k=n("./client/layout/sidebar/heading.jsx"),x=n("./client/layout/sidebar/item.jsx"),O=n("./client/layout/sidebar/menu.jsx"),N=n("./client/layout/sidebar/region.jsx"),T=n("./client/lib/user/index.js"),L=n("./client/lib/user/utils.js"),R=n("./client/state/current-user/selectors.js"),A=n("./client/state/login/actions.js"),w=n("./client/state/ui/layout-focus/actions.js");const P=Object(T.default)();var I=Object(h.flow)(r.localize,Object(m.b)(e=>({currentUser:Object(R.b)(e)}),{logoutUser:A.j,recordGoogleEvent:_.g,setNextLayoutFocus:w.c}))(class extends i.a.Component{constructor(){super(...arguments),u()(this,"onNavigate",()=>{this.props.setNextLayoutFocus("content"),window.scrollTo(0,0)}),u()(this,"onSignOut",()=>{const e=this.props.currentUser,t=e&&"en"===e.localeSlug;let n=null;t&&!f.a.isEnabled("desktop")&&(n="/?apppromo"),f.a.isEnabled("login/wp-login")?this.props.logoutUser(n).then(e=>{let t=e.redirect_to;return P.clear(()=>location.href=t||"/")},()=>L.default.logout(n)):L.default.logout(n),this.props.recordGoogleEvent("Me","Clicked on Sidebar Sign Out Link")})}render(){const e=this.props,t=e.context,n=e.translate,s={"/me":"profile","/me/security/account-recovery":"security","/me/security/connected-applications":"security","/me/security/social-login":"security","/me/security/two-step":"security","me/privacy":"privacy","/me/notifications/comments":"notifications","/me/notifications/updates":"notifications","/me/notifications/subscriptions":"notifications","/help/contact":"help",[v.i]:"purchases",[v.c]:"purchases",[v.b]:"purchases","/me/chat":"happychat","/me/site-blocks":"site-blocks"},a=t.path.replace(/\/\d+$/,"");let o;return o=s[a]?s[a]:t.path.split("/").pop(),i.a.createElement(j.a,null,i.a.createElement(N.a,null,i.a.createElement(y,{user:this.props.currentUser}),i.a.createElement("div",{className:"sidebar__me-signout"},i.a.createElement(g.a,{compact:!0,className:"sidebar__me-signout-button",onClick:this.onSignOut,title:n("Log out of WordPress.com")},n("Log Out"))),i.a.createElement(O.a,null,i.a.createElement(k.a,null,n("Profile")),i.a.createElement("ul",null,i.a.createElement(x.a,{selected:"profile"===o,link:f.a.isEnabled("me/my-profile")?"/me":"//wordpress.com/me/public-profile",label:n("My Profile"),materialIcon:"person",onNavigate:this.onNavigate}),i.a.createElement(x.a,{selected:"account"===o,link:f.a.isEnabled("me/account")?"/me/account":"//wordpress.com/me/account",label:n("Account Settings"),materialIcon:"settings",onNavigate:this.onNavigate,preloadSectionName:"account"}),i.a.createElement(x.a,{selected:"purchases"===o,link:v.i,label:n("Manage Purchases"),materialIcon:"credit_card",onNavigate:this.onNavigate,preloadSectionName:"purchases"}),i.a.createElement(x.a,{selected:"security"===o,link:"/me/security",label:n("Security"),materialIcon:"lock",onNavigate:this.onNavigate,preloadSectionName:"security"}),i.a.createElement(x.a,{selected:"privacy"===o,link:"/me/privacy",label:n("Privacy"),materialIcon:"visibility",onNavigate:this.onNavigate,preloadSectionName:"privacy"}),i.a.createElement(x.a,{selected:"notifications"===o,link:f.a.isEnabled("me/notifications")?"/me/notifications":"//wordpress.com/me/notifications",label:n("Notification Settings"),materialIcon:"notifications",onNavigate:this.onNavigate,preloadSectionName:"notification-settings"}),i.a.createElement(x.a,{selected:"site-blocks"===o,link:"/me/site-blocks",label:n("Blocked Sites"),materialIcon:"block",onNavigate:this.onNavigate,preloadSectionName:"site-blocks"}))),i.a.createElement(O.a,null,i.a.createElement(k.a,null,n("Special")),i.a.createElement("ul",null,i.a.createElement(x.a,{selected:"get-apps"===o,link:"/me/get-apps",label:n("Get Apps"),icon:"my-sites",onNavigate:this.onNavigate})))),i.a.createElement(C.a,null))}}),D=n("./client/me/sidebar-navigation/sidebar-navigation.jsx"),F=n("./client/components/main/index.jsx");var M=Object(r.localize)(e=>{let t=e.translate;return i.a.createElement("div",{className:"get-apps__illustration"},i.a.createElement("img",{src:"/calypso/images/illustrations/get-apps-banner.svg",alt:t("Groups of people looking at WordPress mobile apps.")}),i.a.createElement("h2",{className:"get-apps__illustration-heading"},t("Inspiration strikes any time, anywhere.")),i.a.createElement("p",{className:"get-apps__illustration-tagline"},t("Get WordPress apps for all your screens.")))}),U=n("./node_modules/prop-types/index.js"),V=n.n(U),G=n("./client/components/card/index.jsx");const q="https://apps.wordpress.com/d/windows?ref=getapps",z="https://apps.wordpress.com/d/osx?ref=getapps",W="https://apps.wordpress.com/d/linux?ref=getapps",H="https://apps.wordpress.com/d/linux-deb?ref=getapps";class B extends s.Component{getDescription(e){const t=this.props.translate;switch(e){case"MacIntel":case"Linux i686":case"Linux i686 on x86_64":return t("A desktop app that gives WordPress a permanent home in your dock.");default:return t("A desktop app that gives WordPress a permanent home in your taskbar.")}}getRequirementsText(e){const t=this.props.translate;switch(e){case"MacIntel":return t("Requires Mac OS X 10.11+. ");case"Linux i686":case"Linux i686 on x86_64":return t("Requires a 64-bit kernel. ");default:return t("Requires Windows 7+. ")}}getTranslateComponents(e){switch(e){case"MacIntel":return{firstAvailableLink:this.getLinkAnchorTag(q),secondAvailableLink:this.getLinkAnchorTag(W),thirdAvailableLink:this.getLinkAnchorTag(H)};case"Linux i686":case"Linux i686 on x86_64":return{firstAvailableLink:this.getLinkAnchorTag(H),secondAvailableLink:this.getLinkAnchorTag(q),thirdAvailableLink:this.getLinkAnchorTag(z)};default:return{firstAvailableLink:this.getLinkAnchorTag(z),secondAvailableLink:this.getLinkAnchorTag(W),thirdAvailableLink:this.getLinkAnchorTag(H)}}}getAlsoAvailableText(e){const t=this.props.translate;switch(e){case"MacIntel":return t("Also available for: {{firstAvailableLink}}Windows{{/firstAvailableLink}}, {{secondAvailableLink}}Linux (.tar.gz){{/secondAvailableLink}}, {{thirdAvailableLink}}Linux (.deb){{/thirdAvailableLink}}.",{components:this.getTranslateComponents(e)});case"Linux i686":case"Linux i686 on x86_64":return t("Also available for: {{firstAvailableLink}}Linux (.deb){{/firstAvailableLink}}, {{secondAvailableLink}}Windows{{/secondAvailableLink}}, {{thirdAvailableLink}}Mac{{/thirdAvailableLink}}.",{components:this.getTranslateComponents(e)});default:return t("Also available for: {{firstAvailableLink}}MacOS{{/firstAvailableLink}}, {{secondAvailableLink}}Linux (.tar.gz){{/secondAvailableLink}}, {{thirdAvailableLink}}Linux (.deb){{/thirdAvailableLink}}.",{components:this.getTranslateComponents(e)})}}getButtonClickHandler(e){const t=this.props,n=t.trackWindowsClick,s=t.trackMacClick,i=t.trackLinuxTarClick,a=t.trackLinuxDebClick;switch(e){case"MacIntel":return s;case"Linux i686":return i;case"Linux i686 on x86_64":return a;default:return n}}getButtonLink(e){switch(e){case"MacIntel":return z;case"Linux i686":case"Linux i686 on x86_64":return W;default:return q}}getCardTitle(e){const t=this.props.translate;switch(e){case"MacIntel":return t("Desktop App for Mac");case"Linux i686":case"Linux i686 on x86_64":return t("Desktop App for Linux");default:return t("Desktop App for Windows")}}getLinkAnchorTag(e){const t=this.props,n=t.trackWindowsClick,s=t.trackMacClick,a=t.trackLinuxTarClick,o=t.trackLinuxDebClick;switch(e){case z:return i.a.createElement("a",{href:e,onClick:s});case W:return i.a.createElement("a",{href:e,onClick:a});case H:return i.a.createElement("a",{href:e,onClick:o});default:return i.a.createElement("a",{href:e,onClick:n})}}render(){const e=this.props.translate,t=!!(navigator.platform&&navigator.platform.length>0)&&navigator.platform;return i.a.createElement(G.a,{className:"get-apps__desktop"},i.a.createElement("div",{className:"get-apps__card-text"},i.a.createElement("h3",{className:"get-apps__card-title"},this.getCardTitle(t)),i.a.createElement("p",{className:"get-apps__description"},this.getDescription(t)),i.a.createElement("p",{className:"get-apps__also-available"},this.getRequirementsText(t),this.getAlsoAvailableText(t))),i.a.createElement(g.a,{className:"get-apps__desktop-button",href:this.getButtonLink(t),onClick:this.getButtonClickHandler(t)},e("Download")))}}u()(B,"propTypes",{translate:V.a.func,trackWindowsClick:V.a.func,trackMacClick:V.a.func,trackLinuxTarClick:V.a.func,trackLinuxDebClick:V.a.func}),u()(B,"defaultProps",{translate:h.identity,trackWindowsClick:h.noop,trackMacClick:h.noop,trackLinuxTarClick:h.noop,trackLinuxDebClick:h.noop});const Y={trackWindowsClick:()=>Object(_.i)("calypso_app_download_windows_click"),trackMacClick:()=>Object(_.i)("calypso_app_download_mac_click"),trackLinuxTarClick:()=>Object(_.i)("calypso_app_download_linux_tar_click"),trackLinuxDebClick:()=>Object(_.i)("calypso_app_download_linux_deb_click")};var K=Object(m.b)(null,Y)(Object(r.localize)(B)),J=n("./node_modules/classnames/index.js"),Q=n.n(J),X=n("./client/lib/i18n-utils/browser.js"),Z=n("./client/components/translatable/proptype.js");const $={ios:{defaultSrc:"/calypso/images/me/get-apps-ios-store.svg",src:"https://linkmaker.itunes.apple.com/assets/shared/badges/{localeSlug}/appstore-lrg.svg",tracksEvent:"calypso_app_download_ios_click",getLocaleSlug:function(){const e=Object(X.f)().split("-")[0];return"en"===e?"en-us":"".concat(e,"-").concat(e)}},android:{defaultSrc:"/calypso/images/me/get-apps-google-play.png",src:"http://play.google.com/intl/en_us/badges/images/generic/{localeSlug}_badge_web_generic.png",tracksEvent:"calypso_app_download_android_click",getLocaleSlug:X.f}};class ee extends s.PureComponent{constructor(e){super(e),u()(this,"onLoadImageComplete",()=>{this.setState({hasExternalImageLoaded:!0})}),u()(this,"onLoadImageError",()=>{this.setState({hasExternalImageLoaded:!1,imageSrc:$[this.props.storeName].defaultSrc})}),u()(this,"onLinkClick",()=>{const e=this.props.storeName;Object(_.i)($[e].tracksEvent)});const t=$[e.storeName].getLocaleSlug().toLowerCase(),n=!Object(h.startsWith)(t,"en");this.state={shouldLoadExternalImage:n,imageSrc:n?$[e.storeName].src.replace("{localeSlug}",t):$[e.storeName].defaultSrc},n&&(this.image=null,this.loadImage())}loadImage(){this.image=new Image,this.image.src=this.state.imageSrc,this.image.onload=this.onLoadImageComplete,this.image.onerror=this.onLoadImageError}render(){const e=this.props,t=e.altText,n=e.titleText,s=e.storeLink,a=e.storeName,o=this.state,r=o.imageSrc,l=o.hasExternalImageLoaded,c=Q()("get-apps__app-badge",{["".concat(a,"-app-badge")]:!0,"is-external-image":l});return i.a.createElement("figure",{className:c},i.a.createElement("a",{href:s,onClick:this.onLinkClick},i.a.createElement("img",{src:r,title:n,alt:t})))}}u()(ee,"propTypes",{altText:Z.a,storeLink:V.a.string,storeName:V.a.oneOf(["ios","android"]).isRequired,titleText:Z.a,translate:V.a.func}),u()(ee,"defaultProps",{altText:"",storeLink:null,titleText:"",translate:h.identity});var te=Object(r.localize)(ee),ne=n("./client/me/reauth-required/index.jsx"),se=n("./client/components/data/query-countries/sms.jsx"),ie=n("./client/components/forms/form-phone-input/index.jsx"),ae=n("./client/state/selectors/get-countries.js"),oe=n("./client/state/notices/actions.js"),re=n("./client/state/user-settings/actions.js"),le=n("./client/state/account-recovery/settings/actions.js"),ce=n("./client/state/account-recovery/settings/selectors.js"),de=n("./client/state/selectors/get-user-settings.js");function pe(e){return!!e.userSettings.settings}var ue=n("./client/state/data-layer/wpcom-http/actions.js"),me=n("./client/lib/phone-validation/index.jsx"),he=n("./client/lib/user-agent/index.js"),ge=n("./client/lib/two-step-authorization/index.js");class fe extends i.a.Component{constructor(){super(...arguments),u()(this,"state",{phoneNumber:null}),u()(this,"maybeFetchAccountRecoverySettings",()=>{!1===(!!!ge.a.data||ge.a.isReauthRequired())&&(this.props.fetchUserSettings(),this.props.accountRecoverySettingsFetch())}),u()(this,"getPreferredNumber",()=>{const e={countryCode:null,countryNumericCode:null,number:null,numberFull:null,isValid:!1};if(!this.userSettingsHaveBeenLoadedWithAccountRecoveryPhone())return e;const t=null!=this.props.userSettings?this.props.userSettings.two_step_sms_phone_number:null,n=null!=this.props.userSettings?this.props.userSettings.two_step_sms_country:null,s=null!=this.props.userSettings?this.props.userSettings.two_step_sms_enabled:null,i=this.props.accountRecoveryPhone;if(null!==this.state.phoneNumber)return this.state.phoneNumber;if(null!==t&&null!==n&&s){const e=this.numericCountryCodeForCountryCode(n),s=e+t;return{countryCode:n,countryNumericCode:e,number:t,numberFull:s,isValid:this.phoneNumberIsValid(s)}}if(null!==i){const e=this.phoneNumberIsValid(i.numberFull);return i.isValid=e,i}return e}),u()(this,"onChange",e=>{this.setState({phoneNumber:{countryCode:e.countryData.code,countryNumericCode:e.countryData.numeric_code,number:e.phoneNumber,numberFull:e.phoneNumberFull,isValid:e.isValid}})}),u()(this,"onKeyUp",e=>{"Enter"===e.key&&this.onSubmit(e)}),u()(this,"onSubmit",()=>{const e=this.getPreferredNumber().numberFull;this.props.sendSMS(e)})}componentDidMount(){ge.a.on("change",this.maybeFetchAccountRecoverySettings),this.maybeFetchAccountRecoverySettings()}componentWillUnmount(){ge.a.off("change",this.maybeFetchAccountRecoverySettings)}phoneNumberIsValid(e){return!Object(me.a)(e).error}numericCountryCodeForCountryCode(e){const t=this.props.countriesList.find(t=>t.code===e);return void 0!==t?t.numeric_code:null}userSettingsHaveBeenLoadedWithAccountRecoveryPhone(){return this.props.hasUserSettings&&this.props.hasLoadedAccountRecoveryPhone}render(){const e=this.props.translate,t=this.userSettingsHaveBeenLoadedWithAccountRecoveryPhone(),n=this.getPreferredNumber(),s=n.countryCode,a=n.number,o=n.isValid,r=!he.a.isMobile;return i.a.createElement(G.a,{className:"get-apps__mobile"},i.a.createElement(ne.a,{twoStepAuthorization:ge.a}),i.a.createElement("div",{className:"get-apps__store-subpanel"},i.a.createElement("div",{className:"get-apps__card-text"},i.a.createElement("h3",{className:"get-apps__card-title"},e("Mobile Apps")),i.a.createElement("p",{className:"get-apps__description"},e("WordPress at your fingertips."))),i.a.createElement("div",{className:"get-apps__badges"},i.a.createElement(te,{storeLink:"https://play.google.com/store/apps/details?id=org.wordpress.android&referrer=utm_source%3Dcalypso-get-apps%26utm_medium%3Dweb%26utm_campaign%3Dmobile-download-promo-pages",storeName:"android",titleText:e("Download the WordPress Android mobile app."),altText:e("Google Play Store download badge")}),i.a.createElement(te,{storeLink:"https://itunes.apple.com/app/apple-store/id335703880?pt=299112&ct=calpyso-get-apps-button&mt=8",storeName:"ios",titleText:e("Download the WordPress iOS mobile app."),altText:e("Apple App Store download badge")}))),r&&i.a.createElement("div",{className:"get-apps__sms-subpanel"},i.a.createElement("p",null,i.a.createElement("strong",null,e("Ready to WordPress on the go?")),i.a.createElement("br",null),e("We’ll send you an SMS message with a download link for the right app for your mobile device.")),i.a.createElement("div",{className:"get-apps__sms-field-wrapper"},i.a.createElement(se.a,null),t?i.a.createElement(ie.a,{countriesList:this.props.countriesList,initialCountryCode:s,initialPhoneNumber:a,phoneInputProps:{onKeyUp:this.onKeyUp},onChange:this.onChange}):i.a.createElement(i.a.Fragment,null,i.a.createElement(ie.a,{countriesList:this.props.countriesList,isDisabled:!0}))),i.a.createElement("div",{className:"get-apps__sms-button-wrapper"},i.a.createElement("p",null,e("Standard SMS rates may apply")),i.a.createElement(g.a,{className:"get-apps__sms-button",onClick:this.onSubmit,disabled:!o},e("Text me a link")))))}}u()(fe,"propTypes",{translate:V.a.func,countriesList:V.a.array.isRequired,storedPhone:V.a.shape({countryCode:V.a.string,countryNumericCode:V.a.string,number:V.a.string,numberFull:V.a.string,isValid:V.a.bool}),hasLoadedStoredPhone:V.a.bool,hasSendingError:V.a.bool});var be=Object(m.b)(e=>({countriesList:Object(ae.a)(e,"sms"),accountRecoveryPhone:Object(ce.b)(e),hasLoadedAccountRecoveryPhone:Object(ce.i)(e),userSettings:Object(de.a)(e),hasUserSettings:pe(e)}),{sendSMS:function(e){return Object(ue.a)({method:"POST",apiNamespace:"wpcom/v2",path:"/me/get-apps/send-download-sms",body:{phone:e},onSuccess:function(e){e(Object(oe.f)(l.a.translate("SMS Sent. Go check your messages!")))},onFailure:function(e){e(Object(oe.b)(l.a.translate("We couldn’t send the SMS — double check your number.")))}})},fetchUserSettings:re.b,accountRecoverySettingsFetch:le.a})(Object(r.localize)(fe)),Ee=n("./client/lib/analytics/page-view-tracker/index.jsx");n("./client/me/get-apps/style.scss");var _e=()=>i.a.createElement(F.a,{className:"get-apps"},i.a.createElement(Ee.a,{path:"/me/get-apps",title:"Me > Get Apps"}),i.a.createElement(D.a,null),i.a.createElement(M,null),i.a.createElement(be,null),!Object(f.a)("env_id").startsWith("desktop")&&i.a.createElement(K,null));function Se(e,t){e.secondary=i.a.createElement(I,{context:e}),t()}function ye(e,t){e.store.dispatch(Object(d.c)(l.a.translate("My Profile",{textOnly:!0})));const s=n("./client/me/profile/index.jsx").default;e.primary=i.a.createElement(s,{userSettings:c.a,path:e.path}),t()}function ve(e,t){e.store.dispatch(Object(d.c)(l.a.translate("Get Apps",{textOnly:!0}))),e.primary=i.a.createElement(_e,{userSettings:c.a,path:e.path}),t()}function je(){o.a.redirect("/me")}function Ce(){o.a.redirect("/me")}function ke(){o.a.redirect("/me")}n.d(t,"e",function(){return Se}),n.d(t,"c",function(){return ye}),n.d(t,"a",function(){return ve}),n.d(t,"d",function(){return je}),n.d(t,"f",function(){return Ce}),n.d(t,"b",function(){return ke})},"./client/me/form-base/index.js":function(e,t,n){"use strict";var s=n("./node_modules/debug/src/browser.js"),i=n.n(s),a=n("./client/notices/index.js"),o=n("./client/lib/user/index.js");const r=i()("calypso:me:form-base"),l=Object(o.default)();t.a={componentDidMount:function(){this.props.userSettings.getSettings()},componentWillUnmount:function(){this.props.userSettings.unsavedSettings={}},getDisabledState:function(){return this.state.submittingForm},componentWillReceiveProps:function(e){e.showNoticeInitially&&this.setState({showNotice:e.showNoticeInitially})},componentWillUpdate:function(){this.showNotice()},getInitialState:function(){return{redirect:!1,submittingForm:!1,changingUsername:!1,usernameAction:"new",showNotice:!1}},showNotice:function(){this.props.userSettings.initialized&&this.state.showNotice&&(a.a.clearNotices("notices"),a.a.success(this.props.translate("Settings saved successfully!")),this.state.showNotice=!1)},getSetting:function(e){return this.props.userSettings.getSetting(e)||""},toggleSetting:function(e){const t=e.currentTarget.name;this.props.userSettings.updateSetting(t,!this.getSetting(t))},updateSetting:function(e){const t=e.currentTarget,n=t.name,s=t.value;this.props.userSettings.updateSetting(n,s)},submitForm:function(e){e.preventDefault(),r("Submitting form"),this.setState({submittingForm:!0}),this.props.userSettings.saveSettings(function(e,t){if(e)r("Error saving settings: "+JSON.stringify(e)),e.message?a.a.error(e.message):a.a.error(this.props.translate("There was a problem saving your changes.")),this.setState({submittingForm:!1});else{if(this.props.markSaved&&this.props.markSaved(),this.state&&this.state.redirect)return void l.clear(()=>{window.location=this.state.redirect+"?updated=success"});this.setState({showNotice:!0,submittingForm:!1}),this.showNotice(),r("Settings saved successfully "+JSON.stringify(t))}}.bind(this))}}},"./client/me/get-apps/style.scss":function(e,t,n){},"./client/me/profile-gravatar/style.scss":function(e,t,n){},"./client/me/profile-link/style.scss":function(e,t,n){},"./client/me/profile-links-add-other/style.scss":function(e,t,n){},"./client/me/profile-links-add-wordpress/style.scss":function(e,t,n){},"./client/me/profile-links/style.scss":function(e,t,n){},"./client/me/profile/index.jsx":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/react/index.js"),i=n.n(s),a=n("./node_modules/create-react-class/index.js"),o=n.n(a),r=n("./node_modules/debug/src/browser.js"),l=n.n(r),c=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/lodash/lodash.js"),p=n("./packages/i18n-calypso/dist/esm/index.js"),u=n("./client/components/card/index.jsx"),m=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),h=n.n(m),g=n("./node_modules/prop-types/index.js"),f=n.n(g),b=n("./node_modules/classnames/index.js"),E=n.n(b),_=n("./node_modules/path-browserify/index.js"),S=n.n(_),y=n("./client/components/gridicon/index.jsx");const v=["jpg","jpeg","png","gif","bmp"];var j=n("./client/state/ui/editor/image-editor/constants.js"),C=n("./client/components/dialog/index.jsx"),k=n("./client/components/file-picker/index.jsx"),x=n("./client/state/current-user/selectors.js"),O=n("./client/components/gravatar/index.jsx"),N=n("./client/state/current-user/gravatar-status/selectors.js"),T=n("./client/state/ui/editor/image-editor/actions.js"),L=n("./client/components/spinner/index.jsx"),R=n("./client/state/analytics/actions.js"),A=n("./client/state/data-layer/wpcom-http/actions.js"),w=n("./client/state/data-layer/wpcom-http/utils.js"),P=n("./client/state/data-layer/handler-registry.js");Object(P.b)("state/data-layer/wpcom/gravatar-upload/index.js",{GRAVATAR_UPLOAD_REQUEST:[Object(w.a)({fetch:function(e){const t=e.email,n=e.file;return Object(A.a)({method:"POST",path:"/gravatar-upload",body:{},apiNamespace:"wpcom/v2",formData:[["account",t],["filedata",n]]},e)},onSuccess:function(e){let t=e.file;return e=>{const n=new FileReader;n.addEventListener("load",()=>{e({type:"GRAVATAR_UPLOAD_RECEIVE",src:n.result}),e(Object(R.k)(Object(R.i)("calypso_edit_gravatar_upload_success"),{type:"GRAVATAR_UPLOAD_REQUEST_SUCCESS"}))}),n.readAsDataURL(t)}},onError:function(){return Object(R.k)(Object(R.b)(Object(R.i)("calypso_edit_gravatar_upload_failure"),Object(R.a)("calypso_gravatar_update_error","unsuccessful_http_response")),{type:"GRAVATAR_UPLOAD_REQUEST_FAILURE"})}})]});var I=n("./client/blocks/image-editor/index.jsx"),D=n("./client/components/info-popover/index.jsx"),F=n("./client/components/external-link/index.jsx"),M=n("./client/components/email-verification/email-verification-dialog/index.jsx"),U=n("./client/components/drop-zone/index.jsx");n("./client/blocks/edit-gravatar/style.scss");class V extends s.Component{constructor(){super(...arguments),h()(this,"state",{isEditingImage:!1,image:!1,showEmailVerificationNotice:!1}),h()(this,"onReceiveFile",e=>{const t=this.props,n=t.receiveGravatarImageFailed,s=t.translate,i=t.recordReceiveImageEvent,a=S.a.extname(e[0].name).toLowerCase().substring(1);if(i(),-1===v.indexOf(a)){let e="";return void n({errorMessage:e=a?s("Sorry, %s files are not supported — please make sure your image is in JPG, GIF, or PNG format.",{args:a}):s("Sorry, images of that filetype are not supported — please make sure your image is in JPG, GIF, or PNG format."),statName:"bad_filetype"})}const o=URL.createObjectURL(e[0]);this.setState({isEditingImage:!0,image:o})}),h()(this,"onImageEditorDone",(e,t)=>{const n=this.props,s=n.receiveGravatarImageFailed,i=n.translate,a=n.uploadGravatar,o=n.user;this.hideImageEditor(),e?s({errorMessage:i("We couldn't save that image — please try another one."),statName:"image_editor_error"}):a(t,o.email)}),h()(this,"hideImageEditor",()=>{(0,this.props.resetAllImageEditorState)(),URL.revokeObjectURL(this.state.image),this.setState({isEditingImage:!1,image:!1})}),h()(this,"handleUnverifiedUserClick",()=>{this.props.recordClickButtonEvent({isVerified:this.props.user.email_verified}),this.props.user.email_verified||this.setState({showEmailVerificationNotice:!0})}),h()(this,"closeVerifyEmailDialog",()=>{this.setState({showEmailVerificationNotice:!1})})}renderImageEditor(){if(this.state.isEditingImage)return i.a.createElement(C.a,{additionalClassNames:"edit-gravatar-modal",isVisible:!0},i.a.createElement(I.a,{allowedAspectRatios:[j.a.ASPECT_1X1],media:{src:this.state.image},onDone:this.onImageEditorDone,onCancel:this.hideImageEditor,doneButtonText:this.props.translate("Change My Photo")}))}render(){const e=this.props,t=e.isUploading,n=e.translate,s=e.user,a="https://gravatar.com/".concat(s.username||""),o=s.email_verified?"cloud-upload":"notice",r=s.email_verified?n("Click to change photo"):n("Verify your email");return i.a.createElement("div",{className:E()("edit-gravatar",{"is-unverified":!s.email_verified},{"is-uploading":t})},i.a.createElement("div",{onClick:this.handleUnverifiedUserClick},this.state.showEmailVerificationNotice&&i.a.createElement(M.a,{onClose:this.closeVerifyEmailDialog}),this.renderImageEditor(),i.a.createElement(k.a,{accept:"image/*",onPick:this.onReceiveFile},i.a.createElement("div",{"data-tip-target":"edit-gravatar",className:E()("edit-gravatar__image-container",{"is-uploading":t})},s.email_verified&&i.a.createElement(U.a,{textLabel:n("Drop to upload profile photo"),onFilesDrop:this.onReceiveFile}),i.a.createElement(O.a,{imgSize:400,size:150,user:s}),!t&&i.a.createElement("div",{className:"edit-gravatar__label-container"},i.a.createElement(y.a,{icon:o,size:36}),i.a.createElement("span",{className:"edit-gravatar__label"},r)),t&&i.a.createElement(L.a,{className:"edit-gravatar__spinner"})))),i.a.createElement("div",null,i.a.createElement("p",{className:"edit-gravatar__explanation"},n("Your profile photo is public.")),i.a.createElement(D.a,{className:"edit-gravatar__pop-over",position:"left"},n('{{p}}The avatar you use on WordPress.com comes from {{ExternalLink}}Gravatar{{/ExternalLink}}, a universal avatar service (it stands for "Globally Recognized Avatar," get it?).{{/p}}{{p}}Your image may also appear on other sites using Gravatar whenever you\'re logged in with your email address %(email)s.{{/p}}',{components:{ExternalLink:i.a.createElement(F.a,{href:a,target:"_blank",rel:"noopener noreferrer",icon:!0}),p:i.a.createElement("p",null)},args:{email:s.email}}))))}}h()(V,"propTypes",{isUploading:f.a.bool,translate:f.a.func,receiveGravatarImageFailed:f.a.func,resetAllImageEditorState:f.a.func,uploadGravatar:f.a.func,user:f.a.object,recordClickButtonEvent:f.a.func,recordReceiveImageEvent:f.a.func});var G=Object(c.b)(e=>({user:Object(x.b)(e)||{},isUploading:Object(N.b)(e)}),{resetAllImageEditorState:T.e,receiveGravatarImageFailed:e=>{let t=e.errorMessage,n=e.statName;return Object(R.k)(Object(R.b)(Object(R.i)("calypso_edit_gravatar_file_receive_failure"),Object(R.a)("calypso_gravatar_update_error",n)),{type:"GRAVATAR_RECEIVE_IMAGE_FAILURE",errorMessage:t})},uploadGravatar:function(e,t){return Object(R.k)(Object(R.i)("calypso_edit_gravatar_upload_start"),{type:"GRAVATAR_UPLOAD_REQUEST",file:e,email:t})},recordClickButtonEvent:e=>{let t=e.isVerified;return Object(R.b)(Object(R.i)("calypso_edit_gravatar_click",{user_verified:t}),Object(R.g)("Me","Clicked on Edit Gravatar Button in Profile"))},recordReceiveImageEvent:()=>Object(R.i)("calypso_edit_gravatar_file_receive")})(Object(p.localize)(V)),q=n("./client/me/form-base/index.js"),z=n("./client/components/forms/form-button/index.jsx"),W=n("./client/components/forms/form-fieldset/index.jsx"),H=n("./client/components/forms/form-label/index.jsx"),B=n("./client/components/forms/form-textarea/index.jsx"),Y=n("./client/components/forms/form-text-input/index.jsx"),K=n("./client/components/main/index.jsx"),J=n("./client/me/sidebar-navigation/sidebar-navigation.jsx"),Q=n("./client/lib/mixins/data-observe/index.js"),X=n("./client/components/button/index.jsx"),Z=n("./client/lib/safe-protocol-url/index.js"),$=n("./client/lib/url/index.js");n("./client/me/profile-link/style.scss");class ee extends i.a.Component{constructor(){super(...arguments),h()(this,"recordClickEvent",e=>{this.props.recordGoogleEvent("Me","Clicked on "+e)}),h()(this,"getClickHandler",e=>()=>this.recordClickEvent(e)),h()(this,"handleRemoveButtonClick",()=>{this.recordClickEvent("Remove Link Next to Site"),this.props.onRemoveLink()})}renderRemove(){return i.a.createElement(X.a,{borderless:!0,className:"profile-link__remove",onClick:this.handleRemoveButtonClick},i.a.createElement(y.a,{icon:"cross"}))}render(){const e=E()({"profile-link":!0,"is-placeholder":this.props.isPlaceholder}),t="//s1.wp.com/mshots/v1/"+encodeURIComponent(this.props.url)+"?w="+this.props.imageSize+"&h=64",n=this.props.isPlaceholder?null:Object(Z.a)(this.props.url);return i.a.createElement("li",{className:e},this.props.isPlaceholder?i.a.createElement("div",{className:"profile-link__image-link"}):i.a.createElement("a",{href:n,className:"profile-link__image-link",target:"_blank",rel:"noopener noreferrer",onClick:this.getClickHandler("Profile Links Site Images Link")},i.a.createElement("img",{className:"profile-link__image",src:t})),i.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer",onClick:this.getClickHandler("Profile Links Site Link")},i.a.createElement("span",{className:"profile-link__title"},this.props.title),i.a.createElement("span",{className:"profile-link__url"},Object($.m)(this.props.url))),this.props.isPlaceholder?null:this.renderRemove())}}h()(ee,"defaultProps",{imageSize:100,title:"",url:"",slug:"",isPlaceholder:!1}),h()(ee,"propTypes",{imageSize:f.a.number,title:f.a.string.isRequired,url:f.a.string.isRequired,slug:f.a.string.isRequired});var te=Object(c.b)(null,{recordGoogleEvent:R.g})(ee),ne=n("./client/state/profile-links/actions.js");class se extends s.Component{componentDidMount(){this.props.requestUserProfileLinks()}render(){return null}}h()(se,"propTypes",{requestUserProfileLinks:f.a.func});var ie=Object(c.b)(null,{requestUserProfileLinks:ne.j})(se),ae=n("./client/components/popover/menu.jsx"),oe=n("./client/components/popover/menu-item.jsx");class re extends i.a.Component{constructor(){super(...arguments),h()(this,"popoverContext",i.a.createRef()),h()(this,"recordClickEvent",e=>{this.props.recordGoogleEvent("Me","Clicked on "+e)}),h()(this,"handleAddWordPressSiteButtonClick",()=>{this.recordClickEvent("Add a WordPress Site Button"),this.props.onShowAddWordPress()}),h()(this,"handleOtherSiteButtonClick",()=>{this.recordClickEvent("Add Other Site Button"),this.props.onShowAddOther()})}render(){const e=this.props.translate;return i.a.createElement(s.Fragment,null,i.a.createElement(X.a,{ref:this.popoverContext,compact:!0,disabled:this.props.showingForm,onClick:this.props.onShowPopoverMenu},i.a.createElement(y.a,{icon:"add-outline"}),i.a.createElement("span",null,e("Add"))),this.props.showPopoverMenu&&i.a.createElement(ae.a,{isVisible:!0,onClose:this.props.onClosePopoverMenu,context:this.popoverContext.current},i.a.createElement(oe.a,{onClick:this.handleAddWordPressSiteButtonClick},e("Add WordPress Site")),i.a.createElement(oe.a,{onClick:this.handleOtherSiteButtonClick},e("Add URL"))))}}h()(re,"propTypes",{showingForm:f.a.bool,showPopoverMenu:f.a.bool,onShowAddWordPress:f.a.func.isRequired,onShowAddOther:f.a.func.isRequired});var le=Object(c.b)(null,{recordGoogleEvent:R.g})(Object(p.localize)(re)),ce=n("./client/components/section-header/index.jsx"),de=n("./client/components/notice/index.jsx"),pe=n("./client/config/index.js"),ue=n("./client/blocks/site/index.jsx");class me extends s.Component{constructor(){super(...arguments),h()(this,"onSelect",e=>{this.props.onSelect(e,this.getInputName())}),h()(this,"getCheckboxEventHandler",e=>t=>{const n="Clicked "+e+" checkbox",s=t.target.checked?1:0;this.props.recordGoogleEvent("Me",n,"checked",s)})}getInputName(){return"site-".concat(this.props.site.ID)}render(){const e=this.props,t=e.checked,n=e.onChange,s=e.site;return i.a.createElement("li",{key:s.ID,className:"profile-links-add-wordpress__item",onClick:this.getCheckboxEventHandler("Add WordPress Site")},i.a.createElement("input",{className:"profile-links-add-wordpress__checkbox",type:"checkbox",name:this.getInputName(),onChange:n,checked:t}),i.a.createElement(ue.a,{site:s,indicator:!1,onSelect:this.onSelect}))}}h()(me,"propTypes",{onChange:f.a.func.isRequired,onSelect:f.a.func.isRequired,site:f.a.object.isRequired,checked:f.a.bool}),h()(me,"defaultProps",{checked:!1});var he=Object(c.b)(null,{recordGoogleEvent:R.g})(me),ge=n("./client/state/selectors/get-sites-items.js"),fe=n("./client/state/sites/selectors.js"),be=n("./client/lib/create-selector/index.js"),Ee=Object(be.a)(e=>Object.values(Object(ge.a)(e)).filter(e=>!e.is_private).map(t=>Object(fe.k)(e,t.ID)),e=>[Object(ge.a)(e),e.currentUser.capabilities]),_e=n("./client/state/selectors/get-sites.js");function Se(e){return e.userProfileLinks.items}var ye=Object(be.a)((e,t)=>{const n=Se(e);return null===n?null:Object(d.some)(n,e=>t===e.value.replace(/^.*:\/\//,""))},[Se]);n("./client/me/profile-links-add-wordpress/style.scss");var ve=Object(c.b)(e=>{const t=Ee(e),n=t.filter(t=>!ye(e,t.domain));return{publicSites:t,publicSitesNotInProfileLinks:n,sites:Object(_e.a)(e)}},{addUserProfileLinks:ne.a,recordGoogleEvent:R.g})(Object(p.localize)(class extends s.Component{constructor(){super(...arguments),h()(this,"state",{}),h()(this,"handleCheckedChanged",e=>{const t={};t[e.target.name]=e.target.checked,this.setState(t)}),h()(this,"recordClickEvent",e=>{this.props.recordGoogleEvent("Me","Clicked on "+e)}),h()(this,"getClickHandler",e=>()=>this.recordClickEvent(e)),h()(this,"handleCancelButtonClick",e=>{this.recordClickEvent("Cancel Add WordPress Sites Button"),this.onCancel(e)}),h()(this,"handleJetpackLinkClick",e=>{this.recordClickEvent("Jetpack Link in Profile Links"),this.onJetpackMe(e)}),h()(this,"handleCreateSiteButtonClick",e=>{this.recordClickEvent("Create Sites Button in Profile Links"),this.onCreateSite(e)}),h()(this,"onSelect",(e,t)=>{const n={};n[t]=!this.state[t],this.setState(n)}),h()(this,"onAddableSubmit",e=>{e.preventDefault();const t=this.props.sites,n=Object(d.pickBy)(this.state,(e,t)=>"site-"===t.substr(0,5)&&e),s=Object(d.map)(n,(e,t)=>parseInt(t.substr(5),10)).map(e=>Object(d.find)(t,["ID",e])).map(e=>({title:e.name,value:e.URL}));s.length&&(this.props.addUserProfileLinks(s),this.props.onSuccess())}),h()(this,"onCancel",e=>{e.preventDefault(),this.props.onCancel()}),h()(this,"onCreateSite",e=>{e.preventDefault(),window.open(Object(pe.a)("signup_url")+"?ref=me-profile-links"),this.props.onCancel()}),h()(this,"onJetpackMe",e=>{e.preventDefault(),window.open("http://jetpack.me/"),this.props.onCancel()})}getCheckedCount(){let e,t=0;for(e in this.state)this.state[e]&&t++;return t}renderAddableSites(){return this.props.publicSitesNotInProfileLinks.map(e=>{const t="site-"+e.ID,n=this.state[t];return i.a.createElement(he,{key:t,site:e,checked:n,onChange:this.handleCheckedChanged,onSelect:this.onSelect})})}renderAddableSitesForm(){const e=this.props.translate,t=this.getCheckedCount();return i.a.createElement("form",{className:"profile-links-add-wordpress",onSubmit:this.onAddableSubmit},i.a.createElement("p",null,e("Please select one or more sites to add to your profile.")),i.a.createElement("ul",{className:"profile-links-add-wordpress__list"},this.renderAddableSites()),i.a.createElement(z.a,{disabled:0===t,onClick:this.getClickHandler("Add WordPress Sites Button")},e("Add Site","Add Sites",{count:t})),i.a.createElement(z.a,{className:"profile-links-add-wordpress__cancel",isPrimary:!1,onClick:this.handleCancelButtonClick},e("Cancel")))}renderInvitationForm(){const e=this.props.translate;return i.a.createElement("form",null,i.a.createElement("p",null,e("You have no public sites on WordPress.com yet, but if you like you can create one now. You may also add self-hosted WordPress sites here after installing {{jetpackLink}}Jetpack{{/jetpackLink}} on them.",{components:{jetpackLink:i.a.createElement("a",{href:"#",className:"profile-links-add-wordpress__jetpack-link",onClick:this.handleJetpackLinkClick})}})),i.a.createElement(z.a,{onClick:this.handleCreateSiteButtonClick},e("Create Site")),i.a.createElement(z.a,{className:"profile-links-add-wordpress__cancel",isPrimary:!1,onClick:this.handleCancelButtonClick},e("Cancel")))}render(){return i.a.createElement("div",null,0===this.props.publicSites.length?this.renderInvitationForm():this.renderAddableSitesForm())}}));n("./client/me/profile-links-add-other/style.scss");var je=Object(c.b)(null,{addUserProfileLinks:ne.a,recordGoogleEvent:R.g})(Object(p.localize)(class extends i.a.Component{constructor(){super(...arguments),h()(this,"state",{title:"",value:""}),h()(this,"recordClickEvent",e=>{this.props.recordGoogleEvent("Me","Clicked on "+e)}),h()(this,"getClickHandler",e=>()=>this.recordClickEvent(e)),h()(this,"getFocusHandler",e=>()=>this.props.recordGoogleEvent("Me","Focused on "+e)),h()(this,"handleCancelButtonClick",e=>{e.preventDefault(),this.recordClickEvent("Cancel Other Site Button"),this.props.onCancel()}),h()(this,"handleChange",e=>{const t=e.currentTarget,n=t.name,s=t.value;this.setState({[n]:s})}),h()(this,"onSubmit",e=>{e.preventDefault(),this.getFormDisabled()||(this.props.addUserProfileLinks([{title:this.state.title.trim(),value:this.state.value.trim()}]),this.props.onSuccess())})}getFormDisabled(){const e=this.state.value.trim();return!(this.state.title.trim()&&e&&-1===e.indexOf(" ")&&e.match(/[a-zA-z0-9]+\.[a-zA-z]{2,}/)&&(!e.match(/^.*:\/\//)||e.match(/^https?:\/\//)))}render(){return i.a.createElement("form",{className:"profile-links-add-other",onSubmit:this.onSubmit},i.a.createElement("p",null,this.props.translate("Please enter the URL and description of the site you want to add to your profile.")),i.a.createElement(W.a,null,i.a.createElement(Y.a,{className:"profile-links-add-other__value",placeholder:this.props.translate("Enter a URL"),onFocus:this.getFocusHandler("Add Other Site URL Field"),name:"value",value:this.state.value,onChange:this.handleChange}),i.a.createElement(Y.a,{className:"profile-links-add-other__title",placeholder:this.props.translate("Enter a description"),onFocus:this.getFocusHandler("Add Other Site Description Field"),name:"title",value:this.state.title,onChange:this.handleChange}),i.a.createElement(z.a,{className:"profile-links-add-other__add",disabled:this.getFormDisabled(),onClick:this.getClickHandler("Save Other Site Button")},this.props.translate("Add Site")),i.a.createElement(z.a,{className:"profile-links-add-other__cancel",isPrimary:!1,onClick:this.handleCancelButtonClick},this.props.translate("Cancel"))))}}));function Ce(e){return Object(d.get)(e,["userProfileLinks","errors","duplicate"],!1)?"duplicate":Object(d.get)(e,["userProfileLinks","errors","malformed"],!1)?"malformed":Object(d.get)(e,["userProfileLinks","errors","error"],!1)?"other":null}var ke=n("./client/components/list-end/index.js");n("./client/me/profile-links/style.scss");var xe=Object(c.b)(e=>({profileLinks:Se(e),errorType:Ce(e)}),{deleteUserProfileLink:ne.f,resetUserProfileLinkErrors:ne.k})(Object(p.localize)(class extends i.a.Component{constructor(){super(...arguments),h()(this,"state",{showingForm:!1,showPopoverMenu:!1}),h()(this,"showAddWordPress",()=>{this.setState({showingForm:"wordpress",showPopoverMenu:!1})}),h()(this,"showAddOther",()=>{this.setState({showingForm:"other",showPopoverMenu:!1})}),h()(this,"showPopoverMenu",()=>{this.setState({showPopoverMenu:!this.state.showPopoverMenu})}),h()(this,"closePopoverMenu",()=>{this.setState({showPopoverMenu:!1})}),h()(this,"hideForms",()=>{this.setState({showingForm:!1})}),h()(this,"onRemoveLink",e=>()=>this.props.deleteUserProfileLink(e.link_slug))}getErrorMessage(){const e=this.props,t=e.errorType,n=e.translate;return t?n("duplicate"===t?"That link is already in your profile links. No changes were made.":"An unexpected error occurred. Please try again later."):null}possiblyRenderError(){const e=this.getErrorMessage();return e?i.a.createElement(de.b,{className:"profile-links__error",status:"is-error",onDismissClick:this.props.resetUserProfileLinkErrors},e):null}renderProfileLinksList(){return i.a.createElement("ul",{className:"profile-links__list"},this.props.profileLinks.map(e=>i.a.createElement(te,{key:e.link_slug,title:e.title,url:e.value,slug:e.link_slug,onRemoveLink:this.onRemoveLink(e)})))}renderNoProfileLinks(){return i.a.createElement("p",{className:"profile-links__no-links"},this.props.translate("You have no sites in your profile links. You may add sites if you'd like."))}renderPlaceholders(){return i.a.createElement("ul",{className:"profile-links__list"},Object(d.times)(2,e=>i.a.createElement(te,{title:"Loading Profile Links",url:"http://wordpress.com",slug:"A placeholder profile link",isPlaceholder:!0,key:e})))}renderProfileLinks(){const e=null!==this.props.profileLinks,t=e?this.props.profileLinks.length:0;let n;return n=e?t>0?this.renderProfileLinksList():this.renderNoProfileLinks():this.renderPlaceholders(),i.a.createElement("div",null,i.a.createElement("p",null,this.props.translate("Manage which sites appear in your profile.")),this.possiblyRenderError(),n)}renderForm(){return"wordpress"===this.state.showingForm?i.a.createElement(ve,{onSuccess:this.hideForms,onCancel:this.hideForms}):i.a.createElement(je,{onSuccess:this.hideForms,onCancel:this.hideForms})}render(){return i.a.createElement(s.Fragment,null,i.a.createElement(ie,null),i.a.createElement(ce.a,{label:this.props.translate("Profile Links")},i.a.createElement(le,{showingForm:this.state.showingForm,onShowAddOther:this.showAddOther,showPopoverMenu:this.state.showPopoverMenu,onShowAddWordPress:this.showAddWordPress,onShowPopoverMenu:this.showPopoverMenu,onClosePopoverMenu:this.closePopoverMenu})),i.a.createElement(u.a,null,this.state.showingForm?this.renderForm():this.renderProfileLinks()),i.a.createElement(ke.a,null))}})),Oe=n("./client/me/reauth-required/index.jsx"),Ne=n("./client/lib/two-step-authorization/index.js"),Te=n("./client/lib/protect-form/index.tsx"),Le=n("./client/lib/analytics/page-view-tracker/index.jsx");n("./client/me/profile/style.scss");const Re=l()("calypso:me:profile"),Ae=o()({displayName:"Profile",mixins:[q.a,Object(Q.a)("userSettings")],componentDidMount(){Re(this.displayName+" component is mounted.")},componentWillUnmount(){Re(this.displayName+" component is unmounting.")},getClickHandler(e){return()=>this.props.recordGoogleEvent("Me","Clicked on "+e)},getFocusHandler(e){return()=>this.props.recordGoogleEvent("Me","Focused on "+e)},render(){const e="https://gravatar.com/"+this.props.userSettings.getSetting("user_login");return i.a.createElement(K.a,{className:"profile"},i.a.createElement(Le.a,{path:"/me",title:"Me > My Profile"}),i.a.createElement(J.a,null),i.a.createElement(Oe.a,{twoStepAuthorization:Ne.a}),i.a.createElement(ce.a,{label:this.props.translate("Profile")}),i.a.createElement(u.a,{className:"me-profile-settings"},i.a.createElement(G,null),i.a.createElement("form",{onSubmit:this.submitForm,onChange:this.props.markChanged},i.a.createElement(W.a,null,i.a.createElement(H.a,{htmlFor:"first_name"},this.props.translate("First Name")),i.a.createElement(Y.a,{disabled:this.getDisabledState(),id:"first_name",name:"first_name",onChange:this.updateSetting,onFocus:this.getFocusHandler("First Name Field"),value:this.getSetting("first_name")})),i.a.createElement(W.a,null,i.a.createElement(H.a,{htmlFor:"last_name"},this.props.translate("Last Name")),i.a.createElement(Y.a,{disabled:this.getDisabledState(),id:"last_name",name:"last_name",onChange:this.updateSetting,onFocus:this.getFocusHandler("Last Name Field"),value:this.getSetting("last_name")})),i.a.createElement(W.a,null,i.a.createElement(H.a,{htmlFor:"display_name"},this.props.translate("Public Display Name")),i.a.createElement(Y.a,{disabled:this.getDisabledState(),id:"display_name",name:"display_name",onChange:this.updateSetting,onFocus:this.getFocusHandler("Display Name Field"),value:this.getSetting("display_name")})),i.a.createElement(W.a,null,i.a.createElement(H.a,{htmlFor:"description"},this.props.translate("About Me")),i.a.createElement(B.a,{disabled:this.getDisabledState(),id:"description",name:"description",onChange:this.updateSetting,onFocus:this.getFocusHandler("About Me Field"),value:this.getSetting("description")})),i.a.createElement("p",null,i.a.createElement(z.a,{disabled:!this.props.userSettings.hasUnsavedSettings()||this.getDisabledState(),onClick:this.getClickHandler("Save Profile Details Button")},this.state.submittingForm?this.props.translate("Saving…"):this.props.translate("Save Profile Details")))),i.a.createElement("p",{className:"me-profile-settings__info-text"},this.props.translate("This information will be displayed publicly on {{profilelink}}your profile{{/profilelink}} and in {{hovercardslink}}Gravatar Hovercards{{/hovercardslink}}.",{components:{profilelink:i.a.createElement("a",{onClick:this.getClickHandler("My Profile Link"),href:e,target:"_blank",rel:"noopener noreferrer"}),hovercardslink:i.a.createElement("a",{onClick:this.getClickHandler("Gravatar Hovercards Link"),href:"https://support.wordpress.com/gravatar-hovercards/",target:"_blank",rel:"noopener noreferrer"})}}))),i.a.createElement(xe,null))}}),we=Object(c.b)(null,{recordGoogleEvent:R.g});t.default=Object(d.flowRight)(we,Te.c,p.localize)(Ae)},"./client/me/profile/style.scss":function(e,t,n){},"./client/me/reauth-required/index.jsx":function(e,t,n){"use strict";var s=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(s),a=n("./node_modules/react-redux/es/index.js"),o=n("./node_modules/create-react-class/index.js"),r=n.n(o),l=n("./node_modules/debug/src/browser.js"),c=n.n(l),d=n("./packages/i18n-calypso/dist/esm/index.js"),p=n("./node_modules/react/index.js"),u=n.n(p),m=n("./client/components/dialog/index.jsx"),h=n("./client/components/forms/form-button/index.jsx"),g=n("./client/components/forms/form-buttons-bar/index.jsx"),f=n("./client/components/forms/form-checkbox/index.jsx"),b=n("./client/components/forms/form-fieldset/index.jsx"),E=n("./client/components/forms/form-input-validation/index.jsx"),_=n("./client/components/forms/form-label/index.jsx"),S=n("./client/components/forms/form-verification-code-input/index.jsx"),y=n("./client/components/notice/index.jsx"),v=n("./client/lib/mixins/data-observe/index.js"),j=n("./client/state/analytics/actions.js"),C=n("./client/lib/user/utils.js");n("./client/me/reauth-required/style.scss");const k=c()("calypso:me:reauth-required"),x=r()({displayName:"ReauthRequired",mixins:[Object(v.a)("twoStepAuthorization")],getInitialState:function(){return{remember2fa:!1,code:"",smsRequestsAllowed:!0,smsCodeSent:!1}},getClickHandler(e,t){return()=>{this.props.recordGoogleEvent("Me","Clicked on "+e),t&&t()}},getCheckboxHandler(e){return t=>{const n="Clicked "+e+" checkbox",s=t.target.checked?1:0;this.props.recordGoogleEvent("Me",n,"checked",s)}},getFocusHandler(e){return()=>this.props.recordGoogleEvent("Me","Focused on "+e)},getCodeMessage:function(){return this.props.twoStepAuthorization.isTwoStepSMSEnabled()?this.props.translate("Press the button below to request an SMS verification code. Once you receive our text message at your phone number ending with {{strong}}%(smsLastFour)s{{/strong}} , enter the code below.",{args:{smsLastFour:this.props.twoStepAuthorization.getSMSLastFour()},components:{strong:u.a.createElement("strong",null)}}):this.props.translate("Please enter the verification code generated by your authenticator app.")},submitForm:function(e){e.preventDefault(),this.setState({validatingCode:!0}),this.props.twoStepAuthorization.validateCode({code:this.state.code,remember2fa:this.state.remember2fa},function(e,t){this.setState({validatingCode:!1}),k(e?"There was an error validating that code: "+JSON.stringify(e):"The code validated!"+JSON.stringify(t))}.bind(this))},codeRequestTimer:!1,allowSMSRequests:function(){this.setState({smsRequestsAllowed:!0})},sendSMSCode:function(){this.setState({smsRequestsAllowed:!1,smsCodeSent:!0}),this.codeRequestTimer=setTimeout(this.allowSMSRequests,6e4),this.props.twoStepAuthorization.sendSMSCode(function(e,t){!e&&t.sent?k("SMS code successfully sent"):k("There was a failure sending the SMS code.")})},preValidateAuthCode:function(){return this.state.code.length&&this.state.code.length>5},renderSendSMSButton:function(){const e=this.state,t=e.smsRequestsAllowed,n=e.smsCodeSent?["Resend SMS Code Button on Reauth Required",this.props.translate("Resend SMS Code")]:["Send SMS Code Button on Reauth Required",this.props.translate("Send SMS Code")],s=i()(n,2),a=s[0],o=s[1];return u.a.createElement(h.a,{disabled:!t,isPrimary:!1,onClick:this.getClickHandler(a,this.sendSMSCode),type:"button"},o)},renderFailedValidationMsg:function(){return this.props.twoStepAuthorization.codeValidationFailed()?u.a.createElement(E.a,{isError:!0,text:this.props.translate("You entered an invalid code. Please try again.")}):null},renderSMSResendThrottled:function(){return this.props.twoStepAuthorization.isSMSResendThrottled()?u.a.createElement("div",{className:"reauth-required__send-sms-throttled"},u.a.createElement(y.b,{showDismiss:!1,text:this.props.translate("SMS codes are limited to once per minute. Please wait and try again.")})):null},render:function(){const e=this.props.twoStepAuthorization.isTwoStepSMSEnabled()?"sms":"app";return u.a.createElement(m.a,{autoFocus:!1,className:"reauth-required__dialog",isFullScreen:!1,isVisible:this.props.twoStepAuthorization.isReauthRequired(),buttons:null,onClose:null},u.a.createElement("p",null,this.getCodeMessage()),u.a.createElement("p",null,u.a.createElement("a",{className:"reauth-required__sign-out",onClick:this.getClickHandler("Reauth Required Log Out Link",C.default.logout)},this.props.translate("Not you? Log out"))),u.a.createElement("form",{onSubmit:this.submitForm},u.a.createElement(b.a,null,u.a.createElement(_.a,{htmlFor:"code"},this.props.translate("Verification Code")),u.a.createElement(S.a,{autoFocus:!0,id:"code",isError:this.props.twoStepAuthorization.codeValidationFailed(),name:"code",method:e,onFocus:this.getFocusHandler("Reauth Required Verification Code Field"),value:this.state.code,onChange:this.handleChange}),this.renderFailedValidationMsg()),u.a.createElement(b.a,null,u.a.createElement(_.a,null,u.a.createElement(f.a,{id:"remember2fa",name:"remember2fa",onClick:this.getCheckboxHandler("Remember 2fa"),checked:this.state.remember2fa,onChange:this.handleCheckedChange}),u.a.createElement("span",null,this.props.translate("Remember for 30 days.")))),this.renderSMSResendThrottled(),u.a.createElement(g.a,null,u.a.createElement(h.a,{disabled:this.state.validatingCode||!this.preValidateAuthCode(),onClick:this.getClickHandler("Submit Validation Code on Reauth Required")},this.props.translate("Verify")),this.renderSendSMSButton())))},handleChange(e){const t=e.currentTarget,n=t.name,s=t.value;this.setState({[n]:s})},handleCheckedChange(e){const t=e.currentTarget,n=t.name,s=t.checked;this.setState({[n]:s})}});t.a=Object(a.b)(null,{recordGoogleEvent:j.g})(Object(d.localize)(x))},"./client/me/reauth-required/style.scss":function(e,t,n){},"./client/me/sidebar-navigation/sidebar-navigation.jsx":function(e,t,n){"use strict";var s=n("./node_modules/react/index.js"),i=n.n(s),a=n("./packages/i18n-calypso/dist/esm/index.js"),o=n("./client/components/sidebar-navigation/index.jsx"),r=n("./client/components/gravatar/index.jsx"),l=n("./client/lib/user/index.js");const c=Object(l.default)();t.a=Object(a.localize)(e=>{let t=e.translate;return i.a.createElement(o.a,{sectionName:"me",sectionTitle:t("Me")},i.a.createElement(r.a,{user:c.get(),size:30,imgSize:400}))})},"./client/state/account-recovery/settings/actions.js":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"g",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return m}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return g}),n.d(t,"h",function(){return f});var s=n("./node_modules/lodash/lodash.js"),i=n("./client/lib/wp/browser.js");const a=()=>e=>(e({type:"ACCOUNT_RECOVERY_SETTINGS_FETCH"}),i.a.undocumented().me().getAccountRecovery().then(t=>e((e=>({type:"ACCOUNT_RECOVERY_SETTINGS_FETCH_SUCCESS",settings:e}))(t))).catch(t=>e((e=>({type:"ACCOUNT_RECOVERY_SETTINGS_FETCH_FAILED",error:e}))(t)))),o=(e,t)=>({type:"ACCOUNT_RECOVERY_SETTINGS_UPDATE_SUCCESS",target:e,value:t}),r=(e,t)=>({type:"ACCOUNT_RECOVERY_SETTINGS_UPDATE_FAILED",target:e,error:t}),l=e=>({type:"ACCOUNT_RECOVERY_SETTINGS_DELETE_SUCCESS",target:e}),c=(e,t)=>({type:"ACCOUNT_RECOVERY_SETTINGS_DELETE_FAILED",target:e,error:t}),d=e=>t=>(t({type:"ACCOUNT_RECOVERY_SETTINGS_UPDATE",target:"phone"}),i.a.undocumented().me().updateAccountRecoveryPhone(e.countryCode,e.number).then(()=>t((e=>o("phone",e))(e))).catch(e=>t((e=>r("phone",e))(e)))),p=()=>e=>(e({type:"ACCOUNT_RECOVERY_SETTINGS_DELETE",target:"phone"}),i.a.undocumented().me().deleteAccountRecoveryPhone().then(()=>e((()=>l("phone"))())).catch(t=>e((e=>c("phone",e))(t)))),u=e=>t=>(t({type:"ACCOUNT_RECOVERY_SETTINGS_UPDATE",target:"email"}),i.a.undocumented().me().updateAccountRecoveryEmail(e).then(()=>t((e=>o("email",e))(e))).catch(e=>t((e=>r("email",e))(e)))),m=()=>e=>(e({type:"ACCOUNT_RECOVERY_SETTINGS_DELETE",target:"email"}),i.a.undocumented().me().deleteAccountRecoveryEmail().then(()=>e((()=>l("email"))())).catch(t=>e((e=>c("email",e))(t)))),h=()=>e=>(e({type:"ACCOUNT_RECOVERY_SETTINGS_RESEND_VALIDATION",target:"email"}),i.a.undocumented().me().newValidationAccountRecoveryEmail().then(()=>e({type:"ACCOUNT_RECOVERY_SETTINGS_RESEND_VALIDATION_SUCCESS",target:"email"})).catch(t=>e((e=>({type:"ACCOUNT_RECOVERY_SETTINGS_RESEND_VALIDATION_FAILED",target:"email",error:e}))(t)))),g=()=>e=>(e({type:"ACCOUNT_RECOVERY_SETTINGS_RESEND_VALIDATION",target:"phone"}),i.a.undocumented().me().newValidationAccountRecoveryPhone().then(()=>e({type:"ACCOUNT_RECOVERY_SETTINGS_RESEND_VALIDATION_SUCCESS",target:"phone"})).catch(t=>e((e=>({type:"ACCOUNT_RECOVERY_SETTINGS_RESEND_VALIDATION_FAILED",target:"phone",error:e}))(t)))),f=e=>t=>(t({type:"ACCOUNT_RECOVERY_SETTINGS_VALIDATE_PHONE"}),i.a.undocumented().me().validateAccountRecoveryPhone(Object(s.replace)(e,/\s/g,"")).then(()=>t({type:"ACCOUNT_RECOVERY_SETTINGS_VALIDATE_PHONE_SUCCESS"})).catch(e=>t((e=>({type:"ACCOUNT_RECOVERY_SETTINGS_VALIDATE_PHONE_FAILED",error:e}))(e))))},"./client/state/connected-applications/actions.js":function(e,t,n){"use strict";var s=n("./node_modules/lodash/lodash.js"),i=n("./client/lib/make-json-schema-parser/index.js"),a=n("./client/state/data-layer/wpcom-http/utils.js"),o=n("./client/state/data-layer/wpcom-http/actions.js"),r=n("./client/state/data-layer/handler-registry.js");Object(r.b)("state/data-layer/wpcom/me/connected-applications/index.js",{CONNECTED_APPLICATIONS_REQUEST:[Object(a.a)({fetch:e=>Object(o.a)({apiVersion:"1.1",method:"GET",path:"/me/connected-applications"},e),onSuccess:(e,t)=>p(t),onError:s.noop,fromApi:Object(i.c)({type:"object",properties:{connected_applications:{type:"array",items:{type:"object",properties:{ID:{type:"string"},URL:{type:"string"},authorized:{type:"string"},description:{type:"string"},icon:{type:"string"},permissions:{type:"array",items:{type:"object",properties:{description:{type:"string"},name:{type:"string"}},required:["description","name"],additionalProperties:!1}},scope:{type:"string"},site:{oneOf:[{type:"boolean"},{type:"object",properties:{site_ID:{type:"string"},site_URL:{type:"string"},site_name:{type:"string"}},required:["site_ID","site_URL","site_name"],additionalProperties:!1}]},title:{type:"string"}},required:["ID"],additionalProperties:!1}}},additionalProperties:!1},e=>e.connected_applications,{})})]});var l=n("./packages/i18n-calypso/dist/esm/index.js"),c=n("./client/state/notices/actions.js");Object(r.b)("state/data-layer/wpcom/me/connected-applications/delete/index.js",{CONNECTED_APPLICATION_DELETE:[Object(a.a)({fetch:e=>Object(o.a)({apiVersion:"1.1",method:"POST",path:"/me/connected-applications/"+e.appId+"/delete"},e),onSuccess:e=>{let t=e.appId;return[m(t),Object(c.f)(Object(l.translate)("This application no longer has access to your WordPress.com account."),{duration:8e3,id:"connected-app-notice-success-".concat(t)})]},onError:()=>Object(c.b)(Object(l.translate)("The connected application was not disconnected. Please try again."),{duration:8e3,id:"connected-app-notice-error"})})]}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return m});const d=()=>({type:"CONNECTED_APPLICATIONS_REQUEST"}),p=e=>({type:"CONNECTED_APPLICATIONS_RECEIVE",apps:e}),u=e=>({type:"CONNECTED_APPLICATION_DELETE",appId:e}),m=e=>({type:"CONNECTED_APPLICATION_DELETE_SUCCESS",appId:e})},"./client/state/countries/actions.js":function(e,t,n){"use strict";var s=n("./packages/i18n-calypso/dist/esm/index.js"),i=n("./client/state/data-layer/wpcom-http/actions.js"),a=n("./client/state/data-layer/wpcom-http/utils.js"),o=n("./client/state/notices/actions.js"),r=n("./client/state/data-layer/handler-registry.js");Object(r.b)("state/data-layer/wpcom/domains/countries-list/index.js",{COUNTRIES_DOMAINS_FETCH:[Object(a.a)({fetch:e=>Object(i.a)({apiVersion:"1.1",method:"GET",path:"/domains/supported-countries/"},e),onSuccess:(e,t)=>({type:"COUNTRIES_DOMAINS_UPDATED",countries:t}),onError:()=>Object(o.b)(Object(s.translate)("We couldn't load the countries list."))})]});const l=Object(a.a)({fetch:e=>Object(i.a)({apiVersion:"1.1",method:"GET",path:"/me/transactions/supported-countries/"},e),onSuccess:(e,t)=>({type:"COUNTRIES_PAYMENTS_UPDATED",countries:t}),onError:()=>Object(o.b)(Object(s.translate)("We couldn't load the countries list."))});Object(r.b)("state/data-layer/wpcom/me/transactions/supported-countries/index.js",{COUNTRIES_PAYMENTS_FETCH:[l]});Object(r.b)("state/data-layer/wpcom/meta/sms-country-codes/index.js",{COUNTRIES_SMS_FETCH:[Object(a.a)({fetch:e=>Object(i.a)({apiVersion:"1.1",method:"GET",path:"/meta/sms-country-codes/"},e),onSuccess:(e,t)=>({type:"COUNTRIES_SMS_UPDATED",countries:t}),onError:()=>Object(o.b)(Object(s.translate)("We couldn't load the countries list."))})]}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return p});const c=()=>({type:"COUNTRIES_DOMAINS_FETCH"}),d=()=>({type:"COUNTRIES_PAYMENTS_FETCH"}),p=()=>({type:"COUNTRIES_SMS_FETCH"})},"./client/state/http/actions.js":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var s=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),i=n.n(s);const a=function(e){let t=e.url,n=e.method,s=e.headers,a=e.queryParams,o=e.body,r=e.withCredentials,l=e.onSuccess,c=e.onFailure,d=i()(e,["url","method","headers","queryParams","body","withCredentials","onSuccess","onFailure"]),p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"HTTP_REQUEST",url:t,method:n,headers:s,queryParams:a,body:o,withCredentials:r,onSuccess:l||p,onFailure:c||p,options:d}}},"./client/state/profile-links/actions.js":function(e,t,n){"use strict";var s=n("./node_modules/lodash/lodash.js"),i=n("./client/state/data-layer/wpcom-http/utils.js"),a=n("./client/state/data-layer/wpcom-http/actions.js"),o=n("./client/state/data-layer/handler-registry.js");Object(o.b)("state/data-layer/wpcom/me/settings/profile-links/index.js",{USER_PROFILE_LINKS_REQUEST:[Object(i.a)({fetch:e=>Object(a.a)({apiVersion:"1.1",method:"GET",path:"/me/settings/profile-links"},e),onSuccess:(e,t)=>{let n=t.profile_links;return l(n)},onError:s.noop})]});Object(o.b)("state/data-layer/wpcom/me/settings/profile-links/delete/index.js",{USER_PROFILE_LINKS_DELETE:[Object(i.a)({fetch:e=>Object(a.a)({apiVersion:"1.1",method:"POST",path:"/me/settings/profile-links/"+e.linkSlug+"/delete"},e),onSuccess:e=>{let t=e.linkSlug;return f(t)},onError:(e,t)=>{let n=e.linkSlug;return b(n,t)}})]});Object(o.b)("state/data-layer/wpcom/me/settings/profile-links/new/index.js",{USER_PROFILE_LINKS_ADD:[Object(i.a)({fetch:e=>Object(a.a)({apiVersion:"1.2",method:"POST",path:"/me/settings/profile-links/new",body:{links:e.profileLinks}},e),onSuccess:(e,t)=>{const n=[d(e.profileLinks)];return t.duplicate?n.push(u(t.duplicate)):t.malformed?n.push(m(t.malformed)):n.push(l(t.profile_links)),n},onError:(e,t)=>{let n=e.profileLinks;return p(n,t)}})]}),n.d(t,"j",function(){return r}),n.d(t,"i",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return m}),n.d(t,"k",function(){return h}),n.d(t,"f",function(){return g}),n.d(t,"h",function(){return f}),n.d(t,"g",function(){return b});const r=()=>({type:"USER_PROFILE_LINKS_REQUEST"}),l=e=>({type:"USER_PROFILE_LINKS_RECEIVE",profileLinks:e}),c=e=>({type:"USER_PROFILE_LINKS_ADD",profileLinks:e}),d=e=>({type:"USER_PROFILE_LINKS_ADD_SUCCESS",profileLinks:e}),p=(e,t)=>({type:"USER_PROFILE_LINKS_ADD_FAILURE",profileLinks:e,error:t}),u=e=>({type:"USER_PROFILE_LINKS_ADD_DUPLICATE",profileLinks:e}),m=e=>({type:"USER_PROFILE_LINKS_ADD_MALFORMED",profileLinks:e}),h=()=>({type:"USER_PROFILE_LINKS_RESET_ERRORS"}),g=e=>({type:"USER_PROFILE_LINKS_DELETE",linkSlug:e}),f=e=>({type:"USER_PROFILE_LINKS_DELETE_SUCCESS",linkSlug:e}),b=(e,t)=>({type:"USER_PROFILE_LINKS_DELETE_FAILURE",linkSlug:e,error:t})},"./client/state/selectors/get-countries.js":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var s=n("./node_modules/lodash/lodash.js");function i(e,t){return Object(s.get)(e,["countries",t],null)}},"./client/state/selectors/get-user-settings.js":function(e,t,n){"use strict";function s(e){return e.userSettings.settings}n.d(t,"a",function(){return s})},"./client/state/ui/editor/image-editor/actions.js":function(e,t,n){"use strict";function s(){return{type:"IMAGE_EDITOR_STATE_RESET",additionalData:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function i(){return{type:"IMAGE_EDITOR_STATE_RESET_ALL",additionalData:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function a(){return{type:"IMAGE_EDITOR_ROTATE_COUNTERCLOCKWISE"}}function o(){return{type:"IMAGE_EDITOR_FLIP"}}function r(e){return{type:"IMAGE_EDITOR_SET_ASPECT_RATIO",ratio:e}}function l(e){return{type:"IMAGE_EDITOR_SET_DEFAULT_ASPECT_RATIO",ratio:e}}function c(e,t,n,s){return{type:"IMAGE_EDITOR_SET_FILE_INFO",src:e,fileName:t,mimeType:n,title:s}}function d(e,t,n,s){return{type:"IMAGE_EDITOR_SET_CROP_BOUNDS",topBound:e,leftBound:t,bottomBound:n,rightBound:s}}function p(e,t,n,s){return{type:"IMAGE_EDITOR_COMPUTED_CROP",topRatio:e,leftRatio:t,widthRatio:n,heightRatio:s}}function u(e,t,n,s){return{type:"IMAGE_EDITOR_CROP",topRatio:e,leftRatio:t,widthRatio:n,heightRatio:s}}function m(e,t){return{type:"IMAGE_EDITOR_IMAGE_HAS_LOADED",width:e,height:t}}n.d(t,"f",function(){return s}),n.d(t,"e",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"g",function(){return r}),n.d(t,"i",function(){return l}),n.d(t,"j",function(){return c}),n.d(t,"h",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return u}),n.d(t,"k",function(){return m})},"./client/state/ui/editor/image-editor/selectors.js":function(e,t,n){"use strict";function s(e){return e.ui.editor.imageEditor.transform}function i(e){return e.ui.editor.imageEditor.fileInfo}function a(e){return e.ui.editor.imageEditor.hasChanges}function o(e){return!e.ui.editor.imageEditor.imageIsLoading}function r(e){return e.ui.editor.imageEditor.cropBounds}function l(e){return e.ui.editor.imageEditor.crop}function c(e){return e.ui.editor.imageEditor.aspectRatio}n.d(t,"e",function(){return s}),n.d(t,"d",function(){return i}),n.d(t,"f",function(){return a}),n.d(t,"g",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c})},"./client/state/user-settings/actions.js":function(e,t,n){"use strict";var s=n("./node_modules/debug/src/browser.js"),i=n.n(s),a=n("./node_modules/lodash/lodash.js"),o=(n("./client/state/selectors/get-user-settings.js"),n("./client/lib/formatting/index.js")),r=n("./client/state/data-layer/wpcom-http/utils.js");var l=n("./client/state/data-layer/wpcom-http/actions.js"),c=n("./client/state/data-layer/handler-registry.js");const d=new Set(["display_name","description","user_URL"]),p=e=>Object(a.mapValues)(e,(e,t)=>d.has(t)?Object(o.b)(e):e);Object(c.b)("state/data-layer/wpcom/me/settings/index.js",{USER_SETTINGS_REQUEST:[Object(r.a)({fetch:e=>Object(l.a)({apiVersion:"1.1",method:"GET",path:"/me/settings"},e),onSuccess:(e,t)=>m(t),onError:a.noop,fromApi:p})],USER_SETTINGS_SAVE:[Object(r.a)({fetch:function(e){return(t,n)=>{const s=e.settingsOverride||function(e){return e.userSettings.unsavedSettings}(n());Object(a.isEmpty)(s)||t(Object(l.a)({apiVersion:"1.1",method:"POST",path:"/me/settings",body:s},e))}},onSuccess:(e,t)=>{let s=e.settingsOverride;return e=>{e(m(p(t))),e(h(s?Object(a.keys)(s):null));const i=n("./client/lib/user/index.js");(i.default?i.default:i)().fetch()}},onError:a.noop,fromApi:p})]}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return m}),n.d(t,"a",function(){return h});i()("calypso:user:settings");const u=()=>({type:"USER_SETTINGS_REQUEST"}),m=e=>({type:"USER_SETTINGS_UPDATE",settingValues:e}),h=function(){return{type:"USER_SETTINGS_UNSAVED_CLEAR",settingNames:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}}}}]);